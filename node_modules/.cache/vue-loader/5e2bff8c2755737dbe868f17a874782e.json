{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\knowledge\\knowledge.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\knowledge\\knowledge.vue","mtime":1614579763251},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5rbm93bGVkZ2UtdHJlZSAuaXZ1LXRyZWUtYXJyb3d7cG9zaXRpb246IGFic29sdXRlO2hlaWdodDogNDZweDtkaXNwbGF5OiBmbGV4O2FsaWduLWl0ZW1zOiBjZW50ZXI7fQ0KLmtub3dsZWRnZS10cmVlIC5pdnUtdHJlZS1hcnJvdyAuaXZ1LWljb257YWxpZ24taXRlbXM6IGNlbnRlcjt9DQoua25vd2xlZGdlLXRyZWUgLml2dS10cmVlLXRpdGxle3BhZGRpbmc6IDE0cHggMjRweDt3aWR0aDogMTAwJTtmb250LXNpemU6IDE0cHggIWltcG9ydGFudDt9DQoua25vd2xlZGdlLXRyZWUgLml2dS10cmVlLXRpdGxlOmhvdmVye2NvbG9yOiAjMmQ4Y2YwO30NCi5rbm93bGVkZ2UtdHJlZSAuaXZ1LXRyZWUtdGl0bGUtc2VsZWN0ZWR7Y29sb3I6ICMyZDhjZjA7YmFja2dyb3VuZDogI2YwZmFmZjtib3JkZXItcmlnaHQ6IDRweCBzb2xpZCAjMmQ4Y2YwO30NCi5rbm93bGVkZ2UtdHJlZSB1bCBsaXttYXJnaW46IDA7cG9zaXRpb246IHJlbGF0aXZlO30NCi5rbm93bGVkZ2UtdHJlZSB1bDo6YWZ0ZXIge2NvbnRlbnQ6ICcnO2Rpc3BsYXk6IGJsb2NrO3dpZHRoOiAxcHg7aGVpZ2h0OiAxMDAlO2JhY2tncm91bmQ6ICNkY2RlZTI7cG9zaXRpb246IGFic29sdXRlO3RvcDogMDtib3R0b206IDA7cmlnaHQ6IDA7ei1pbmRleDogMTt9DQoua25vd2xlZGdlLXBhZ2V7dGV4dC1hbGlnbjogY2VudGVyO30NCi8vIC5rbm93bGVkZ2UtdHJlZSAuaXZ1LXRyZWUtdGl0bGUtc2VsZWN0ZWQ6OmFmdGVye2NvbnRlbnQ6ICcnO2Rpc3BsYXk6IGJsb2NrO3dpZHRoOiA0cHg7cG9zaXRpb246IGFic29sdXRlO3RvcDogMDtib3R0b206IDA7cmlnaHQ6IDA7YmFja2dyb3VuZDogIzJkOGNmMDt9DQo="},{"version":3,"sources":["knowledge.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAodA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"knowledge.vue","sourceRoot":"src/views/knowledge","sourcesContent":["<template>\r\n  <div>\r\n    <Card>\r\n      <header>\r\n        <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"75\">\r\n          <Row>\r\n            <FormItem label=\"时间排序\">\r\n              <Select v-model=\"searchForm.order\" class=\"width-100\" transfer>\r\n                <Option value=\"desc\">最新在前</Option>\r\n                <Option value=\"asc\">最早在前</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <Form-item label=\"时间段\">\r\n              <Select v-model=\"searchForm.sort\" class=\"width-100\" transfer>\r\n                <Option value=\"createTime\">创建时间</Option>\r\n                <Option value=\"updateTime\">更新时间</Option>\r\n              </Select>\r\n              <DatePicker v-model=\"timeArray\" :options=\"selectTime\" type=\"daterange\" format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" class=\"ml-10 width-200\" placeholder=\"选择时间\" @on-change=\"timeChangeHander\" @on-open-change=\"openChangeHander\"></DatePicker>\r\n            </Form-item>\r\n            <FormItem label=\"关键词\">\r\n              <Select v-model=\"searchForm.flag\" class=\"width-100\" transfer>\r\n                <Option value=\"0\">全部</Option>\r\n                <Option value=\"1\">标题</Option>\r\n                <Option value=\"2\">内容</Option>\r\n              </Select>\r\n              <Input v-model=\"searchForm.keyWord\" class=\"width-150 ml-10\" placeholder=\"请输入关键字\" />\r\n            </FormItem>\r\n            <Form-item style=\"margin-left:-35px;\" class=\"br\">\r\n              <Button @click.native=\"getDataList\" type=\"primary\" icon=\"ios-search\">搜索</Button>\r\n              <Button @click=\"handleReset\">重置</Button>\r\n              <Button @click=\"categoryEditHander\" type=\"primary\" icon=\"md-add\">知识类型</Button>\r\n              <Button @click=\"editHander\" type=\"primary\" icon=\"md-add\">知识点</Button>\r\n              <Dropdown @on-click=\"handleDropdown\" trigger='hover' transfer>\r\n                <Button>更多操作\r\n                  <Icon type=\"md-arrow-dropdown\" /></Button>\r\n                <DropdownMenu slot=\"list\" class=\"width-120\">\r\n                  <DropdownItem name=\"downloadData\">下载模板</DropdownItem>\r\n                  <DropdownItem name=\"exportData\">导出知识</DropdownItem>\r\n                  <DropdownItem name=\"importData\">导入知识</DropdownItem>\r\n                  <DropdownItem name=\"setUp\">发送方式设置</DropdownItem>\r\n                </DropdownMenu>\r\n              </Dropdown>\r\n            </Form-item>\r\n          </Row>\r\n        </Form>\r\n      </header>\r\n      <Layout>\r\n        <Sider hide-trigger style=\"background: #fff;max-width: 220px;flex: 0 0 220px;\">\r\n          <Spin fix v-if=\"listLoading\"></Spin>\r\n          <Tree class=\"knowledge-tree\" ref=\"tree\" :data=\"treeData\" :load-data=\"loadData\" @on-select-change=\"selectTree\"></Tree>  \r\n          <!-- <Menu active-name=\"1-1\" theme=\"light\" width=\"auto\" :open-names=\"['1']\" @on-select=\"currName=$event\">\r\n            <Submenu name=\"1\">\r\n              <template slot=\"title\">\r\n                <Icon type=\"ios-analytics\" />知识库\r\n              </template>\r\n              <MenuItem name=\"1-1\">全部分类</MenuItem>\r\n              <MenuItem name=\"1-2\">草稿</MenuItem>\r\n              <Submenu name=\"1-3\">\r\n                <template slot=\"title\">售前分类</template>\r\n                <MenuItem name=\"1-3-1\">售前类</MenuItem>\r\n                <MenuItem name=\"1-3-2\">售前子类1</MenuItem>\r\n                <MenuItem name=\"1-3-3\">售前子类2</MenuItem>\r\n              </Submenu>\r\n              <MenuItem name=\"1-4\">售后类</MenuItem>\r\n            </Submenu>\r\n          </Menu> -->\r\n        </Sider>\r\n        <Content :style=\"{padding: '0 24px 24px 24px', minHeight: '280px', background: '#fff'}\">\r\n          <Spin v-if=\"loading\" fix></Spin>\r\n          <knowledge-item v-for=\"(item,index) in itemData\" v-key=\"item.id\" @click.native=\"previewMore(item)\" @editVisiable=\"editHander\" @removeHander=\"removeHander\" :index=\"index\" :id=\"item.id\">\r\n            <template v-slot:title>{{item.title}}</template>\r\n            <template v-slot:time >\r\n              <div v-show=\"searchForm.sort=='createTime'\">创建时间：{{item.createTime}}</div>\r\n              <div v-show=\"searchForm.sort=='updateTime'\">更新时间：{{item.updateTime}}</div>\r\n            </template>\r\n            <!-- <template v-slot:content><div v-html=\"item.content\"></div></template> -->\r\n            <template v-slot:content>{{item.contentText}}</template>\r\n          </knowledge-item>\r\n          <!-- <div v-show=\"currName=='1-1'\">\r\n            <Spin v-if=\"loading\" fix></Spin>\r\n            <knowledge-item v-for=\"index in 2\" @click.native=\"previewMore\" @editVisiable=\"editHander\">\r\n              <template v-slot:title>标题{{index}}</template>\r\n              <template v-slot:time>时间{{index}}</template>\r\n              <template v-slot:content>内容{{index}}</template>\r\n            </knowledge-item>\r\n          </div>\r\n          <div v-show=\"currName=='1-2'\">草稿</div>\r\n          <div v-show=\"currName=='1-3-1'\">售前类</div>\r\n          <div v-show=\"currName=='1-3-2'\">售前子类1</div>\r\n          <div v-show=\"currName=='1-3-3'\">售前子类2</div>\r\n          <div v-show=\"currName=='1-4'\">\r\n            <div v-if=\"true\">无数据</div>\r\n          </div> -->\r\n        </Content>\r\n      </Layout>\r\n      <div class=\"knowledge-page\"><Page :current=\"searchForm.pageNumber\" :total=\"totalElements\" @on-change=\"pageChangeHander\"/></div>\r\n    </Card>\r\n    <Modal v-model=\"setUpModalVisible\" title=\"发送方式设置\" @on-ok=\"setUpHander\" @on-cancel=\"setUpModalVisible=false\">\r\n      <div class=\"flex font-16 mb-10\" v-for=\"(item,index) in seedType\">\r\n        <p>{{item.title}}</p>\r\n        <RadioGroup v-model=\"item.type\">\r\n          <Radio label=\"以图文链接形式发送\"></Radio>\r\n          <Radio label=\"以文本形式发送\"></Radio>\r\n        </RadioGroup>\r\n      </div>\r\n    </Modal>\r\n    <knowledge-preview ref='preview'></knowledge-preview>\r\n    <knowledge-edit ref='edit'></knowledge-edit>\r\n    <Knowledge-category-edit ref=\"categoryEdit\"></Knowledge-category-edit>\r\n    <excel-import ref=\"excelImport\"></excel-import>\r\n    <excel-export ref=\"excelExport\"></excel-export>\r\n    <!-- <searchBox></searchBox> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // 相关接口\r\n  import {\r\n    getAllBySysKnowledgeCategory, //获取知识类型信息，默认返回1级菜单类型\r\n    getAllBySysKnowledgePage, //根据条件获取知识点分页数据\r\n    deleteSysKnowledge //删除知识类型\r\n  } from \"@/api/index\";\r\n  // 引用组件\r\n  // import searchBox from \"../my-components/searchBox/searchBox.vue\";\r\n  \r\n  import knowledgeItem from \"./components/knowledge-item\";\r\n  import knowledgePreview from \"./components/knowledge-preview.vue\";\r\n  import knowledgeEdit from \"./components/knowledge-edit.vue\";\r\n  import KnowledgeCategoryEdit from \"./components/KnowledgeCategory-edit.vue\";\r\n  import excelImport from \"./components/excelImport.vue\";\r\n  import excelExport from \"./components/excelExport.vue\";\r\n  // excel转换工具类\r\n  import excel from \"@/libs/excel\";\r\n  // 模版导入文件表数据\r\n  import {\r\n    userColumns,\r\n    userData\r\n  } from \"@/libs/tableTemplate/knowledge\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        loading: '', //内容加载中图标\r\n        listLoading: '', //列表加载中图标\r\n        treeData: '', //知识类型数据列表  \r\n        itemData: '', //知识点数据列表\r\n        seedType: [{\r\n            title: 'APP',\r\n            name: 'app',\r\n            type: ''\r\n          },\r\n          {\r\n            title: '网页渠道',\r\n            name: 'html',\r\n            type: ''\r\n          },\r\n          {\r\n            title: '微博',\r\n            name: 'weibo',\r\n            type: ''\r\n          },\r\n          {\r\n            title: '微信',\r\n            name: 'weixin',\r\n            type: ''\r\n          }\r\n        ],\r\n        currName: \"1-1\",\r\n        setUpModalVisible: false, //发送方式设置\r\n        searchForm: {\r\n          categoryId:'',          //知识类型ID\r\n          state:'1',               //知识点状态 0草稿，1正常\r\n          pageNumber: 1,\r\n          pageSize:10,\r\n          \r\n          // 查询参数----------------------------------------\r\n          order:'desc',           //asc从小到大,desc从大到小\r\n          sort:'updateTime',      //类型排序（更新/创建时间）updateTime,createTime\r\n          startDate:'',           //开始时间\r\n          endDate:'',             //结束时间\r\n          flag:'0',               //0全部1标题2内容\r\n          keyWord:'',             //关键词    \r\n          // 查询参数-----------------------------------------\r\n        },\r\n        timeArray: [],            //日期选择器返回时间数组\r\n        totalElements:'',         //总数据量\r\n        selectTime: { //用于快速选择时间\r\n          shortcuts: [{\r\n              text: '前1周',\r\n              value() {\r\n                const end = new Date();\r\n                const start = new Date();\r\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n                return [start, end];\r\n              }\r\n            },\r\n            {\r\n              text: '前1月',\r\n              value() {\r\n                const end = new Date();\r\n                const start = new Date();\r\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n                return [start, end];\r\n              }\r\n            },\r\n            {\r\n              text: '前3月',\r\n              value() {\r\n                const end = new Date();\r\n                const start = new Date();\r\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n                return [start, end];\r\n              }\r\n            }\r\n          ]\r\n        },\r\n      };\r\n    },\r\n    methods: {\r\n      init() {\r\n        this.getDataList();\r\n        this.getParentList();\r\n      },\r\n      //获取知识点数据\r\n      getDataList() {\r\n        this.loading = true;\r\n        console.log('查询知识点数据')\r\n        console.log(this.searchForm)\r\n        getAllBySysKnowledgePage(this.searchForm).then(res => {\r\n          console.log(res)\r\n          this.loading = false;\r\n          if (res.success) {\r\n            this.itemData=res.result.content\r\n            this.totalElements=res.result.totalElements\r\n          }else{\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.message\r\n            });\r\n          }\r\n        });\r\n      },\r\n      //获取知识类型数据\r\n      getParentList() {\r\n        this.listLoading = true;\r\n        getAllBySysKnowledgeCategory().then(res => {\r\n          console.log('获取知识类型数据')\r\n          console.log(res)\r\n          this.listLoading = false;\r\n          if (res.success) {\r\n            res.result.forEach(function(e) {\r\n              if (e.isParent) {\r\n                e.loading = false;\r\n                e.children = [];\r\n              }\r\n            });\r\n            let first = [\r\n              {id: \"\",title: \"全部分类\",selected:true},\r\n              {id: \"1\",title: \"草稿\",selected:false,}\r\n            ]\r\n            this.treeData = first.concat(res.result);\r\n          } else {\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.message\r\n            });\r\n          }\r\n        });\r\n      },\r\n      //删除知识点（可能之后要批量删除，所以不写在组件内）\r\n      removeHander(index){\r\n        let formDate = this.itemData[index];\r\n        this.$Modal.confirm({\r\n          title: \"确认删除\",\r\n          content: \"您确认要删除 \" + formDate.title + \" ?\",\r\n          loading: true,\r\n          onOk: () => {\r\n            let ids = formDate.id;\r\n            // this.selectList.forEach(function(e) {\r\n            //   ids.push(e.id);\r\n            // });\r\n            deleteSysKnowledge({ids: ids}).then(res => {\r\n              this.$Modal.remove();\r\n              if (res.success) {\r\n                this.$Message.success(\"删除成功\");\r\n                // this.selectList = [];\r\n                // this.selectCount = 0;\r\n                this.getDataList();\r\n                let children = formDate.children;\r\n                if(children){\r\n                    let attachIds = [];\r\n                    let fileIds = [];\r\n                    children.forEach(function(e) {\r\n                        attachIds.push(e.id);\r\n                        fileIds.push(e.fileId);\r\n                    });\r\n                    //删除服务端关联附件(知识点附件表)\r\n                    delAttachByIds({ ids:attachIds }).then(res => {\r\n                      if (res.success) {\r\n                        console.log('删除知识点关联文件成功')\r\n                      }\r\n                    });\r\n                    deleteFile({ ids:fileIds }).then(res => {\r\n                      if (res.success) {\r\n                        console.log('删除服务端文件成功')\r\n                      }\r\n                    });\r\n                }\r\n              } else {\r\n                this.$Message.error({\r\n                  background: true,\r\n                  content: res.message\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      // 异步加载树子类数据\r\n      loadData(item, callback) {\r\n        console.log(item)\r\n        getAllBySysKnowledgeCategory({parentId: item.id}).then(res => {\r\n          if (res.success) {\r\n            res.result.forEach(function(e) {\r\n              if (e.isParent) {\r\n                e.loading = false;\r\n                e.children = [];\r\n              }\r\n            });\r\n            callback(res.result);\r\n          }\r\n        });\r\n      },\r\n      selectTree(item){\r\n        console.log(item)\r\n        let params={\r\n          sort:this.searchForm.sort,\r\n          order:this.searchForm.order,\r\n          state:'1',               //知识点状态 0草稿，1正常\r\n          categoryId:'',\r\n        }\r\n        if(item.length>0){\r\n          this.searchForm.categoryId=item[0].id\r\n          if(item[0].title==\"草稿\"){\r\n            params.state='0'\r\n          }else{\r\n            params.categoryId=item[0].id\r\n          }\r\n        }else{\r\n          this.$refs.tree.data[0].selected=true\r\n        }\r\n        getAllBySysKnowledgePage(params).then(res => {\r\n          this.loading = false;\r\n          if (res.success) {\r\n            this.itemData=res.result.content\r\n            this.totalElements=res.result.totalElements\r\n          }else{\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.message\r\n            });\r\n          }\r\n        });\r\n      },\r\n      // 重置搜索表单内容\r\n      handleReset() {\r\n        this.$refs.searchForm.resetFields();\r\n        this.timeArray=[]\r\n        this.searchForm.startDate = '';\r\n        this.searchForm.endDate = '';\r\n        this.searchForm.keyWord = '';\r\n        this.searchForm.order = 'desc';\r\n        this.searchForm.sort = 'updateTime';\r\n        this.searchForm.flag = '0';\r\n      },\r\n      // 打开预览窗口\r\n      previewMore(data) {\r\n        this.$refs.preview.data = data;\r\n        this.$refs.preview.visiable = true;\r\n      },\r\n      // 打开编辑知识窗口\r\n      editHander(index) {\r\n        this.$refs.edit.visiable = true;\r\n        console.log(index)\r\n        if(typeof index != 'object'){\r\n          this.$refs.edit.form = JSON.parse(JSON.stringify(this.itemData[index]))\r\n          this.$refs.edit.isAdd =false\r\n        }else{\r\n          this.$refs.edit.isAdd =true\r\n        }\r\n        this.$refs.edit.init()\r\n      },\r\n      // 打开编辑知识类型页面窗口\r\n      categoryEditHander() {\r\n        this.$refs.categoryEdit.visiable = true\r\n        this.$refs.categoryEdit.init()\r\n      },\r\n      // 在日期选择控件下拉被关闭时调用，转换日期格式\r\n      openChangeHander(open) {\r\n        if (!open) {\r\n          // 通过点击外部关闭下拉时，没有调用此方法，原因未知...\r\n          this.timeChangeHander\r\n        }\r\n      },\r\n      timeChangeHander(data) {\r\n        console.log(data)\r\n        this.searchForm.startDate = data[0]\r\n        this.searchForm.endDate = data[1]\r\n      },\r\n      pageChangeHander(page) {\r\n        console.log('页码切换')\r\n        this.searchForm.pageNumber=page\r\n        this.getDataList()\r\n      },\r\n      // 发送方式设置\r\n      setUpHander() {\r\n\r\n      },\r\n      handleDropdown(name) {\r\n        if (name == \"downloadData\") { //模板下载逻辑\r\n          console.log('下载模板')\r\n          let title = [];\r\n          let key = [];\r\n          userColumns.forEach(e => {\r\n            title.push(e.title);\r\n            key.push(e.key);\r\n          });\r\n          const params = {\r\n            title: title,\r\n            key: key,\r\n            data: userData,\r\n            autoWidth: true,\r\n            filename: \"导入数据模版\"\r\n          };\r\n          excel.export_array_to_excel(params);\r\n        } else if (name == \"exportData\") { //导出逻辑\r\n          this.$refs.excelExport.exportData=this.itemData\r\n          this.$refs.excelExport.exportModalVisible = true;\r\n        } else if (name == \"importData\") { //导入逻辑\r\n        \r\n          this.$refs.excelImport.importModalVisible = true;\r\n          this.$refs.excelImport.init()\r\n        } else if (name == \"setUp\") { //发送方式设置\r\n          this.setUpModalVisible = true;\r\n        }\r\n      },\r\n      //二级菜单展开/收起方法，返回展开菜单的name数组\r\n      // SubmenuClick(arr){\r\n      //     if(arr.length>0){\r\n      //         this.currName=arr.slice(-1)[0];\r\n      //     }\r\n      // },\r\n    },\r\n    components: {\r\n      // searchBox,\r\n      knowledgeItem,\r\n      knowledgePreview,\r\n      knowledgeEdit,\r\n      KnowledgeCategoryEdit,\r\n      excelImport,\r\n      excelExport,\r\n    },\r\n    mounted() {\r\n      this.init();\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.knowledge-tree .ivu-tree-arrow{position: absolute;height: 46px;display: flex;align-items: center;}\r\n.knowledge-tree .ivu-tree-arrow .ivu-icon{align-items: center;}\r\n.knowledge-tree .ivu-tree-title{padding: 14px 24px;width: 100%;font-size: 14px !important;}\r\n.knowledge-tree .ivu-tree-title:hover{color: #2d8cf0;}\r\n.knowledge-tree .ivu-tree-title-selected{color: #2d8cf0;background: #f0faff;border-right: 4px solid #2d8cf0;}\r\n.knowledge-tree ul li{margin: 0;position: relative;}\r\n.knowledge-tree ul::after {content: '';display: block;width: 1px;height: 100%;background: #dcdee2;position: absolute;top: 0;bottom: 0;right: 0;z-index: 1;}\r\n.knowledge-page{text-align: center;}\r\n// .knowledge-tree .ivu-tree-title-selected::after{content: '';display: block;width: 4px;position: absolute;top: 0;bottom: 0;right: 0;background: #2d8cf0;}\r\n</style>\r\n"]}]}