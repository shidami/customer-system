{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\IVR\\SetNode_Play.vue?vue&type=style&index=0&id=3e2a68aa&scoped=true&lang=less&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\IVR\\SetNode_Play.vue","mtime":1614579763281},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnVpLWNvbWJpbmF0aW9uLWZvcm17DQogIC51aS12b2ljZUxpc3R7DQogICAgLnVpLXZvaWNlTGlzdC1pdGVtew0KICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgIC5pdnUtZm9ybS1pdGVtLWxhYmVsew0KICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQgIWltcG9ydGFudDsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KfQ0K"},{"version":3,"sources":["SetNode_Play.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"SetNode_Play.vue","sourceRoot":"src/views/my-components/IVR","sourcesContent":["<template>\r\n  <Row style=\"padding-top: 20px;background: #fff;\">\r\n    <Col span=\"22\" offset=\"1\">\r\n<!--      {{formItem}}-->\r\n<!--      {{nextNodeIdStr}}-->\r\n      <Form class=\"ui-combination-form\" ref=\"formItem\" :model=\"formItem\" :rules=\"formItemValidate\" :label-width=\"120\">\r\n        <FormItem label=\"节点号\" prop=\"id\">\r\n          <Input v-model=\"formItem.id\" placeholder=\"请输入...\" disabled></Input>\r\n        </FormItem>\r\n        <FormItem label=\"节点名称\" prop=\"name\">\r\n          <Input v-model=\"formItem.name\" placeholder=\"请输入...\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"重播次数\" prop=\"replayCount\">\r\n          <Input v-model=\"formItem.replayCount\" placeholder=\"请输入...\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"添加播放内容\" prop=\"id\" style=\"margin-bottom: 5px\">\r\n          <Button @click=\"addVoiceListItem\" type=\"default\">添加</Button>\r\n        </FormItem>\r\n        <div class=\"ui-voiceList\" style=\"padding-left: 60px;margin-bottom: 15px\">\r\n          <FormItem v-for=\"(item,i) in formItem.voiceList\" :key=\"i\" label=\"播放语音\" prop=\"id\" class=\"ui-voiceList-item\" style=\"margin-bottom: 5px\">\r\n            <Row :gutter=\"16\" style=\"margin-bottom: 5px\">\r\n              <Col span=\"15\" prop=\"describe\">\r\n                <Input v-model=\"item.describe\"  placeholder=\"请输入\"></Input>\r\n              </Col>\r\n              <Col span=\"8\" style=\"text-align: left;padding-left: 0 !important;\">\r\n                <Button @click=\"selVoiceListItem(i)\" style=\"margin-left: 10px\">选择</Button>\r\n                <Button @click=\"delVoiceListItem(i)\" style=\"margin-left: 10px\">删除</Button>\r\n              </Col>\r\n            </Row>\r\n          </FormItem>\r\n        </div>\r\n        <FormItem label=\"跳转节点\" prop=\"nextNodeId\">\r\n          <Select v-model=\"formItem.nextNodeId\">\r\n            <Option :value=\"item.value\" v-for=\"(item,i) in nextNodeIdList\" :key=\"i\">{{item.text}}</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"说明\" prop=\"describe\">\r\n          <Input type=\"textarea\" v-model=\"formItem.describe\" placeholder=\"请输入...\"></Input>\r\n        </FormItem>\r\n        <FormItem>\r\n          <Button @click=\"btnOk\" type=\"primary\">确定</Button>\r\n          <Button @click=\"btnCancel\" style=\"margin-left: 8px\">取消</Button>\r\n        </FormItem>\r\n      </Form>\r\n    </Col>\r\n\r\n\r\n\r\n    <Modal\r\n        title=\"选择语音文件\"\r\n        v-model=\"tableColumnsVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"800\"\r\n    >\r\n      <voiceManage ref=\"getSelectData\"></voiceManage>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"tableColumnsVisible = false\">{{\r\n            $t(\"cancel\")\r\n          }}</Button>\r\n        <Button\r\n            type=\"primary\"\r\n            @click=\"btnVoice\"\r\n        >{{ $t(\"save\") }}</Button\r\n        >\r\n      </div> </Modal\r\n    ><!--自定义表格展示的列-结束--->\r\n  </Row>\r\n</template>\r\n\r\n<script>\r\nimport voiceManage from \"@/views/sys/voice-manage/voiceManage\";\r\nvar frame = parent;\r\nexport default {\r\n  name: \"SetNode_Play\",\r\n  components:{voiceManage},\r\n  data(){\r\n    return{\r\n      layParent:true,\r\n      tableColumnsVisible:false,\r\n      openerid:WFCore.GetQuery(\"openerid\"),\r\n      stepid:WFCore.GetQuery(\"id\"),\r\n      flowdata:top.wMyflowData,\r\n      nextNodeIdList:[{value:0,text:'无'}],\r\n      selIndex:0,\r\n      step:'',\r\n      formItem:{\r\n        id:'',//节点号\r\n        name:'',//节点名称\r\n        replayCount:'',//重播次数\r\n        //添加播放内容\r\n        voiceList:[{\r\n          id:'',\r\n          name:'',\r\n          type:'',\r\n          content:'',\r\n          describe:'',\r\n          tag:''\r\n        }],\r\n        nextNodeId:0,//跳转节点\r\n        sort:'',//排序序号\r\n        describe:'',//说明\r\n      },\r\n      nextNodeIdStr:0,\r\n      formItemValidate:{\r\n        name: [{\r\n        required: true,\r\n        message: this.$t(\"pleaseEnter\"),\r\n        trigger: \"blur\",\r\n        }],\r\n        // replayCount: [{\r\n        //   required: true,\r\n        //   message: this.$t(\"pleaseEnter\"),\r\n        //   trigger: \"blur\",\r\n        // }],\r\n        'voiceList[0].content': [{\r\n          required: true,\r\n          message: this.$t(\"pleaseEnter\"),\r\n          trigger: \"blur\",\r\n        }],\r\n        // nextNodeId: [{\r\n        //   required: true,\r\n        //   message: this.$t(\"pleaseEnter\"),\r\n        //   trigger: \"blur\",\r\n        // }]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      this.initData();\r\n    },\r\n    initData(){\r\n      var than=this;\r\n      if (frame == null) return;\r\n      than.flowdata=top.wMyflowData;\r\n      than.step = than.flowdata.getNode(than.stepid);\r\n      if(than.flowdata.nodes.size()>0){\r\n        than.flowdata.nodes.each(function (nodeId,node,index){\r\n          if(than.step.checkNextNodeIsAllow(\"nextNodeId\",node.id)){\r\n            than.nextNodeIdList.push({value:node.id,text:[node.id]+'-' + node.getText()})\r\n          }\r\n        })\r\n      }\r\n\r\n      this.initStep(than.step);\r\n    },\r\n    initStep(step) {\r\n      var than=this;\r\n      if(step==null||step==undefined){\r\n        than.formItem.name='新流程';\r\n        return;\r\n      }\r\n      than.formItem.id=step.id;\r\n      than.formItem.name=step.getText();\r\n      than.formItem.replayCount=step.replayCount;\r\n      than.formItem.sort=step.sort;\r\n      than.formItem.describe=step.describe;\r\n\r\n\r\n      if(step.playVoices.size()>0){\r\n        than.formItem.voiceList=[];\r\n            for (var i = 0; i < step.playVoices.size(); i++) {\r\n              //objVoices.push(step.playVoices.get(i));\r\n              than.addPlayVoice(step.playVoices.get(i));\r\n              than.formItem.voiceList.push(step.playVoices.get(i))\r\n          }\r\n\r\n     }else {\r\n        than.addPlayVoice();\r\n      }\r\n\r\n      //跳转节点\r\n     than.ShowNodeResult(\"nextNodeId\",\"#base_NextNodeId\",1);\r\n      window.setTimeout(function (){\r\n        than.formItem.nextNodeId=than.nextNodeIdStr;\r\n      },500)\r\n    },\r\n    btnOk(){\r\n      var than=this;\r\n      var isFormValid = new RoadUI.Validate().validateForm(\"form1\");\r\n      if(this.formItem.replayCount > 10||this.formItem.replayCount <1)\r\n      {\r\n        WFCore.DialogUtils.tipDialog(\"重播次数在1-10之间\",2,7);\r\n        return false;\r\n      }\r\n      this.$refs[\"formItem\"].validate((valid) => {\r\n        if (valid) {\r\n          than.confirm1();\r\n        }\r\n      })\r\n      debugger\r\n      // if(isFormValid)\r\n      // {\r\n      //   than.confirm1();\r\n      // }\r\n      // else\r\n      // {\r\n      //   WFCore.DialogUtils.confirmDialog(\"系统提示\",\"节点配置不规范，是否忽略并保存？\",function(btn){\r\n      //     if(btn)\r\n      //     {\r\n      //       than.confirm1();\r\n      //     }\r\n      //   },\"忽略并保存\");\r\n      //   return false;\r\n      // }\r\n    },\r\n    btnCancel(){\r\n      new RoadUI.Window().close();\r\n    },\r\n    changePlayType(playTypeObj) {\r\n  var trobj = $(playTypeObj).parent().parent();\r\n  if ($(playTypeObj).val() == \"1\")\r\n  {\r\n    $(playTypeObj).next().text(\"播放语音\");\r\n    trobj.find(\"input[name='voiceFile']\").attr(\"readonly\",\"readonly\").val(\"\");\r\n    trobj.find(\"input[name='btnSetPlayVoice']\").show();\r\n  }\r\n  else if ($(playTypeObj).val() == \"2\")\r\n  {\r\n    $(playTypeObj).next().text(\"播放TTS \");\r\n    trobj.find(\"input[name='voiceFile']\").removeAttr(\"readonly\").val(\"\");\r\n    trobj.find(\"input[name='btnSetPlayVoice']\").hide();\r\n  }\r\n  else if ($(playTypeObj).val() == \"3\")\r\n  {\r\n    $(playTypeObj).next().text(\"  变量\");\r\n    trobj.find(\"input[name='voiceFile']\").attr(\"readonly\",\"readonly\").val(\"\");\r\n    trobj.find(\"input[name='btnSetPlayVoice']\").hide();\r\n  }\r\n},\r\n    addPlayVoice(voice) {\r\n      debugger\r\n      var tr = '';\r\n      var voiceId = voice != undefined && voice.id != undefined ? voice.id : WFCore.GetUUID();\r\n      tr += '<tr id=\"trVoice_'+voiceId+'\" voiceid=\"'+voiceId+'\" class=\"trVoice\">';\r\n      tr += ' <th ></th>';\r\n      tr += ' <td ><select class=\"select1\" style=\"width:60px;display:none;\" name=\"voiceType\" onchange=\"changePlayType(this)\"><option value=\"1\">语音</option><option value=\"2\">TTS</option><option value=\"3\">变量</option></select>';\r\n      tr += ' <span name=\"voiceSpan\">播放语音</span>：';\r\n      tr += '<input name=\"voiceFile\" type=\"text\" class=\"text1\" readonly=\"readonly\" validate=\"empty\"  errmsg=\"请选择语音文件\" style=\"width:348px;\" tag=\"1\" value=\"\" />';\r\n      tr += '<input name=\"voiceFilePath\" type=\"hidden\" value=\"\" />';\r\n      tr += ' <input type=\"button\" name=\"btnSetPlayVoice\" class=\"button1\" value=\"选择 \" style=\"\" onclick=\"selectPlayVoice(this);\" />';\r\n      tr += ' <input type=\"button\" class=\"button1\" value=\"删除\" onclick=\"deletePlayVoice(this);\" />';\r\n      tr += ' </td>';\r\n      tr += '</tr>';\r\n\r\n      var trObj = $(tr);\r\n      if(!!voice)\r\n      {\r\n        trObj.find(\"input[name='voiceType']\").val(voice.type+\"\");\r\n        trObj.find(\"input[name='voiceFile']\").attr(\"tag\",voice.tag);\r\n        if (voice.type == 1)\r\n        {\r\n          trObj.find(\"span[name='voiceSpan']\").text(\"播放语音\");\r\n          trObj.find(\"input[name='voiceFile']\").attr(\"readonly\",\"readonly\").val(voice.describe);\r\n          trObj.find(\"input[name='voiceFilePath']\").val(voice.content);\r\n          trObj.find(\"input[name='btnSetPlayVoice']\").show();\r\n        }\r\n        else if (voice.type == 2)\r\n        {\r\n          trObj.find(\"span[name='voiceSpan']\").text(\"播放TTS \");\r\n          trObj.find(\"input[name='voiceFile']\").removeAttr(\"readonly\").val(voice.content);\r\n          trObj.find(\"input[name='btnSetPlayVoice']\").hide();\r\n        }\r\n        else if (voice.type == 3)\r\n        {\r\n          trObj.find(\"span[name='voiceSpan']\").text(\"  变量\");\r\n          trObj.find(\"input[name='voiceFile']\").attr(\"readonly\",\"readonly\").val(voice.content);\r\n          trObj.find(\"input[name='btnSetPlayVoice']\").hide();\r\n        }\r\n      }\r\n\r\n      // if($(\".trVoice\").size()>0)\r\n      // {\r\n      //   $(\".trVoice\").last().after(trObj);\r\n      // }\r\n      // else\r\n      // {\r\n      //   $(\"#trAddPlayVoice\").after(trObj);\r\n      // }\r\n\r\n      //new RoadUI.Select().init($(\".myselect\", $(\".formtable\")));\r\n    },\r\n    selectPlayVoice(obj) {\r\n  var trObj = $(obj).parent().parent();\r\n  var voiceFileObj = trObj.find(\"input[name='voiceFile']\");\r\n  var voiceFilePathObj = trObj.find(\"input[name='voiceFilePath']\");\r\n  //var ttsObj =\ttrobj.find(\"textarea[name='strTTS']\");\r\n  WFCore.DialogUtils.openDialog(WFCore.RootPath + \"/IVRDesignerSDK/Platform/WorkFlow/Designer/VoiceSelecter.html?type=1&multiselect=0&selecter=\"\r\n      +\"&CompanyId=\"+step.ownerWorkflow.companyId, \"VoiceSelecter\", \"选择语音文件\", 675, 500,\r\n      function(iframe) {\r\n        var iframeV = top.frames[iframe];\r\n        var value = iframeV.getValue();\r\n        var name = iframeV.getName();\r\n        var filePath = iframeV.getFilePath();\r\n        var ispublic = iframeV.getIsPublic();\r\n\r\n        if(filePath == undefined || filePath == null || filePath == \"\")\r\n        {\r\n          alert(\"请选择语音文件！\");\r\n          return false;\r\n        }\r\n        top.frames[iframe].close();\r\n        voiceFileObj.val(name);\r\n        voiceFilePathObj.val(filePath);\r\n        voiceFileObj.attr(\"tag\",ispublic);\r\n      });\r\n},\r\n    deletePlayVoice(obj) {\r\n      $(obj).parent().parent().remove();\r\n    },\r\n    selectVariable(obj){\r\n  var trObj = $(obj).parent().parent();\r\n  var variableObj = trObj.find(\"input[name='voiceFile']\");\r\n  WFCore.DialogUtils.openDialog(WFCore.RootPath + \"/IVRDesignerSDK/Platform/WorkFlow/Designer/VariableSelecter.html?type=1&multiselect=0&selecter=\"\r\n      +\"&CompanyId=\"+step.ownerWorkflow.companyId, \"VariableSelecter\", \"选择变量\", 675, 500,\r\n      function(iframe) {\r\n        var iframeV = top.frames[iframe];\r\n        var value = iframeV.getValue();\r\n        var name = iframeV.getName();\r\n\r\n\r\n        if(name == undefined || name == null || name == \"\")\r\n        {\r\n          alert(\"请选择变量！\");\r\n          return false;\r\n        }\r\n        top.frames[iframe].close();\r\n        variableObj.val(name);\r\n        voiceFileObj.attr(\"tag\",1);\r\n      });\r\n},\r\n    confirm1() {\r\n      var than=this;\r\n\r\n      var ostep={\r\n        text:{\r\n          text:than.formItem.name\r\n        },\r\n        sort:than.formItem.sort,\r\n        describe:than.formItem.describe,\r\n        replayCount:than.formItem.replayCount\r\n      }\r\n\r\n    this.SaveNodeResult(\"nextNodeId\",\"#base_NextNodeId\",\"跳转节点\",1);\r\n\r\n      var playVoices = new parent.WFCore.List();\r\n      var varIndex = 1;\r\n\r\n    window.setTimeout(function (){\r\n      than.formItem.voiceList.forEach(function (v,i,arr){\r\n        var checkResult = true;\r\n        var voiceId = v.id;\r\n        var trobj = $(this);\r\n        var playType = v.type;\r\n        var curObj = {\r\n          id: voiceId,\r\n          name: playType == 1 ? \"voice\":\"TTS\",\r\n          type: playType,\r\n          content:playType == 1 ? v.content : v.content,\r\n          describe : playType == 1 ? v.describe : \"\",\r\n          tag:playType == 1 ? v.content : 2\r\n        };\r\n        //校验\r\n        if(playType == 1 && WFCore.validator.isNull(v.content)){\r\n          checkResult  = false;\r\n          //alert(\"第\"+varIndex+\"个语音请选择语音文件！\");\r\n          //\treturn;\r\n        }\r\n        if(playType == 2 && WFCore.validator.isNull(v.content)){\r\n          checkResult  = false;\r\n          //alert(\"第\"+varIndex+\"个语音请输入TTS文本内容！\");\r\n          //\treturn;\r\n        }\r\n        if(checkResult){\r\n          var voice = new WFCore.Model.Voice();\r\n          voice.parseFromJson(v);\r\n\r\n          playVoices.add(voice);\r\n        }\r\n        varIndex++;\r\n      });\r\n      than.step.playVoices = playVoices;\r\n      // $(\".trVoice\").each(function () {\r\n      //   var checkResult = true;\r\n      //   var voiceId = $(this).attr(\"voiceid\");\r\n      //   var trobj = $(this);\r\n      //   var playType = parseInt(trobj.find(\"select[name='voiceType']\").val());\r\n      //   var curObj = {\r\n      //     id: voiceId,\r\n      //     name: playType == 1 ? \"voice\":\"TTS\",\r\n      //     type: playType,\r\n      //     content:playType == 1 ? trobj.find(\"input[name='voiceFilePath']\").val() : trobj.find(\"input[name='voiceFile']\").val(),\r\n      //     describe : playType == 1 ? trobj.find(\"input[name='voiceFile']\").val() : \"\",\r\n      //     tag:playType == 1 ? parseInt(trobj.find(\"input[name='voiceFile']\").attr(\"tag\")) : 2\r\n      //   };\r\n      //   //校验\r\n      //   if(playType == 1 && WFCore.validator.isNull(curObj.content))\r\n      //   {\r\n      //     checkResult  = false;\r\n      //     //alert(\"第\"+varIndex+\"个语音请选择语音文件！\");\r\n      //     //\treturn;\r\n      //   }\r\n      //   if(playType == 2 && WFCore.validator.isNull(curObj.content))\r\n      //   {\r\n      //     checkResult  = false;\r\n      //     //alert(\"第\"+varIndex+\"个语音请输入TTS文本内容！\");\r\n      //     //\treturn;\r\n      //   }\r\n      //   if(checkResult)\r\n      //   {\r\n      //     var voice = new parent.WFCore.Model.Voice();\r\n      //     voice.parseFromJson(curObj);\r\n      //\r\n      //     playVoices.add(voice);\r\n      //   }\r\n      //   varIndex++;\r\n      // });\r\n\r\n      than.step.restore(ostep);\r\n      new RoadUI.Window().close();\r\n    },1000)\r\n  },\r\n    //给NodeResult控件赋值\r\n    ShowNodeResult(resultName,nextNodeCtlId,isDefault){\r\n      var than=this;\r\n      debugger\r\n      if(than.step.getNodeResult(resultName) != null && than.step.getNodeResult(resultName).nextNodeId > 0)\r\n      {\r\n        than.formItem[resultName]=parseInt(than.step.getNodeResult(resultName).nextNodeId);\r\n        than.nextNodeIdStr=parseInt(than.step.getNodeResult(resultName).nextNodeId);\r\n        debugger\r\n        //$(nextNodeCtlId).val(than.step.getNodeResult(resultName).nextNodeId+\"\");\r\n      }\r\n      // isDefault = isDefault != undefined && isDefault != null ? isDefault:0;\r\n      // $(nextNodeCtlId).attr(\"isDefault\",isDefault);\r\n    },\r\n    //保存NodeResult控件所选下一节点\r\n    SaveNodeResult(resultName,nextNodeCtlId,describe,isDefault){\r\n\r\n      debugger\r\n      var than=this;\r\n      if(than.step.getNodeResult(resultName) != null){\r\n        if(than.formItem.nextNodeId != null && than.formItem.nextNodeId != \"\")\r\n        {\r\n          var nodeResult = than.step.getNodeResult(resultName).restore({\r\n            nextNodeId:isNaN(than.formItem[resultName]) ? 0 : parseInt(than.formItem[resultName]) || 0,\r\n            isDefault:isDefault || 0\r\n          });\r\n          if(nodeResult != null) nodeResult.drawNodeResult();\r\n        }\r\n        else\r\n        {\r\n          than.step.removeNodeResult(resultName);\r\n        }\r\n      }\r\n      else{\r\n        if(than.formItem[resultName] != null && than.formItem[resultName] != \"\")\r\n        {\r\n          var nodeResult = than.step.createNodeResult({\r\n            name:resultName,\r\n            nextNodeId:isNaN(than.formItem[resultName]) ? 0 : parseInt(than.formItem[resultName]) || 0,\r\n            isDefault:isDefault || 0,\r\n            describe:describe\r\n          });\r\n          if(nodeResult != null) nodeResult.drawNodeResult();\r\n        }\r\n      }\r\n    },\r\n    //\r\n    addVoiceListItem(){\r\n      this.formItem.voiceList.push({\r\n        id:'',\r\n        name:'',\r\n        type:'',\r\n        content:'',\r\n        describe:'',\r\n        tag:''\r\n      });\r\n    },\r\n    //\r\n    selVoiceListItem(i){\r\n      this.selIndex=i;\r\n      this.tableColumnsVisible=true;\r\n    },\r\n    //\r\n    delVoiceListItem(i){\r\n      this.formItem.voiceList.splice(i,1);\r\n    },\r\n    btnVoice(){\r\n      var voice=this.$refs.getSelectData.selectRadioItem;\r\n      var voicePublic=this.$refs.getSelectData.$refs.publicVoiceManage.selectRadioItem;\r\n      var obj=voice;\r\n      if(voicePublic.id==undefined){\r\n        obj=voice;\r\n        obj.tag=0;\r\n      }else {\r\n        obj=voicePublic;\r\n        obj.tag=1;\r\n      }\r\n      this.formItem.voiceList[this.selIndex].id=obj.id;\r\n      this.formItem.voiceList[this.selIndex].name=\"voice\";\r\n      this.formItem.voiceList[this.selIndex].type=1;\r\n      this.formItem.voiceList[this.selIndex].content=obj.content;\r\n      this.formItem.voiceList[this.selIndex].describe=obj.audio;\r\n      this.formItem.voiceList[this.selIndex].tag=obj.tag;\r\n      debugger\r\n      this.tableColumnsVisible=false;\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.ui-combination-form{\r\n  .ui-voiceList{\r\n    .ui-voiceList-item{\r\n      text-align: left;\r\n      .ivu-form-item-label{\r\n        border: 1px solid red !important;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>"]}]}