{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\IVR\\SaveAsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\IVR\\SaveAsPage.vue","mtime":1614579763271},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge1NhdmVBc1BhZ2VEYXRhLElWUlNhdmVBc30gZnJvbSAiQC9hcGkvaW5kZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiU2F2ZUFzUGFnZSIsDQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICBmb3JtSXRlbTp7DQogICAgICAgIE5ld0Zsb3dOYW1lOicnLC8v5paw5rWB56iL5ZCN56ewDQogICAgICAgIE5ld0tleU5hbWU6JycsLy/mlrDmtYHnqIvku6PnoIFbaGlkZV0NCiAgICAgICAgTmV3Q29tcGFueU5hbWU6JycsLy/mlrDmiYDlsZ7lhazlj7gNCiAgICAgICAgTmV3Q29tcGFueTonJywvL+aWsOaJgOWxnuWFrOWPuFtoaWRlXQ0KICAgICAgICBTYXZlT3BlbjpmYWxzZSwNCiAgICAgIH0sDQogICAgICBmb3JtSXRlbVZhbGlkYXRlOnsNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgicGxlYXNlRW50ZXIiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdDQogICAgICB9LA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczp7DQogICAgaW5pdCgpew0KICAgICAgdGhpcy5nZXRTYXZlQXNQYWdlRGF0YSgpOw0KICAgIH0sDQogICAgZ2V0U2F2ZUFzUGFnZURhdGEoKXsNCiAgICAgIFNhdmVBc1BhZ2VEYXRhKHsNCiAgICAgICAgYXBwaWQ6JycsDQogICAgICAgIGZsb3dpZDp0b3AuV0ZDb3JlLkdldFF1ZXJ5KCJmbG93aWQiKSwNCiAgICAgICAgaXNjb21wOnRvcC5XRkNvcmUuR2V0UXVlcnkoImlzY29tcCIpLA0KICAgICAgfSkudGhlbihyZXM9PnsNCiAgICAgICAgaWYocmVzLnN1Y2Nlc3Mpew0KICAgICAgICAgIHRoaXMuZm9ybUl0ZW0uTmV3Q29tcGFueT1yZXMucmVzdWx0LmRlZmF1bHRDb21wYW55SUQ7DQogICAgICAgICAgdGhpcy5mb3JtSXRlbS5OZXdDb21wYW55TmFtZT1yZXMucmVzdWx0LmRlZmF1bHRDb21wYW55TmFtZTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGJ0bk9rKCl7DQogICAgICBpZighbmV3IFJvYWRVSS5WYWxpZGF0ZSgpLnZhbGlkYXRlRm9ybShkb2N1bWVudC5mb3Jtc1swXSkpDQogICAgICB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIC8vdmFyIHBvc3REYXRhID0gV0ZDb3JlLkdldFdlYkNvbnRyb2xzKCIjZm9ybTEiKTsNCiAgICAgIHZhciBwb3N0RGF0YSA9IHRoaXMuZm9ybUl0ZW07DQogICAgICBwb3N0RGF0YS5TYXZlT3Blbj09dHJ1ZT8xOjA7DQogICAgICBwb3N0RGF0YS5mbG93aWQgPSBXRkNvcmUuR2V0UXVlcnkoImZsb3dpZCIpOw0KICAgICAgcG9zdERhdGEuaXNjb21wID0gV0ZDb3JlLkdldFF1ZXJ5KCJpc2NvbXAiKTsNCiAgICAgIElWUlNhdmVBcyhwb3N0RGF0YSkudGhlbihyZXM9PnsNCiAgICAgICAgaWYocmVzLnN1Y2Nlc3Mpew0KICAgICAgICAgIFdGQ29yZS5EaWFsb2dVdGlscy50aXBEaWFsb2coJ+WPpuWtmOaIkOWKnyEnLDIsMSk7DQogICAgICAgICAgdmFyIG5ld0Zsb3dJRCA9IGRhdGEuUGFyYW1PYmoubmV3Rmxvd0lEOw0KICAgICAgICAgIGlmKCQoIiNTYXZlT3BlbiIpLmlzKCI6Y2hlY2tlZCIpKQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRvcC53b3JrZmxvd2NvbW1vbk9iai5vcGVuRmxvdzEobmV3Rmxvd0lEKTsNCiAgICAgICAgICB9DQogICAgICAgIH1lbHNlIHsNCiAgICAgICAgICBXRkNvcmUuRGlhbG9nVXRpbHMudGlwRGlhbG9nKCLlpLHotKUiLDIsNyk7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAvLyBXRkNvcmUuQWpheEpzb24oIi9jY3RhZG1pbi9JVlJEZXNpZ25lclNESy9QbGF0Zm9ybS9Xb3JrRmxvdy9EZXNpZ25lci9TYXZlQXMuZG8iLHBvc3REYXRhLGZ1bmN0aW9uKGRhdGEpew0KICAgICAgLy8gICBpZihkYXRhLkNvZGUgPT0xKQ0KICAgICAgLy8gICB7DQogICAgICAvLyAgICAgV0ZDb3JlLkRpYWxvZ1V0aWxzLnRpcERpYWxvZygn5Y+m5a2Y5oiQ5YqfIScsMiwxKTsNCiAgICAgIC8vICAgICB2YXIgbmV3Rmxvd0lEID0gZGF0YS5QYXJhbU9iai5uZXdGbG93SUQ7DQogICAgICAvLyAgICAgaWYoJCgiI1NhdmVPcGVuIikuaXMoIjpjaGVja2VkIikpDQogICAgICAvLyAgICAgew0KICAgICAgLy8gICAgICAgZnJhbWUub3BlbkZsb3cxKG5ld0Zsb3dJRCk7DQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICAgIG5ldyBSb2FkVUkuV2luZG93KCkuY2xvc2UoKTsNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gICBlbHNlDQogICAgICAvLyAgIHsNCiAgICAgIC8vICAgICBXRkNvcmUuRGlhbG9nVXRpbHMudGlwRGlhbG9nKGRhdGEuTWVzc2FnZSk7DQogICAgICAvLyAgIH0NCiAgICAgIC8vIH0pOw0KICAgIH0sDQogICAgYnRuQ2FuY2VsKCl7DQogICAgICBuZXcgUm9hZFVJLldpbmRvdygpLmNsb3NlKCk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdCgpOw0KICB9DQp9DQo="},{"version":3,"sources":["SaveAsPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SaveAsPage.vue","sourceRoot":"src/views/my-components/IVR","sourcesContent":["<template>\r\n  <Row>\r\n    <Col span=\"20\" style=\"padding-top: 20px\">\r\n<!--      {{formItem}}-->\r\n      <Form ref=\"formItem\" :model=\"formItem\" :rules=\"formItemValidate\" :label-width=\"120\">\r\n        <FormItem label=\"新流程名称\" prop=\"id\">\r\n          <Input v-model=\"formItem.NewFlowName\" placeholder=\"请输入...\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"新所属公司\" prop=\"name\">\r\n          <Input v-model=\"formItem.NewCompanyName\" placeholder=\"请输入...\"  disabled=\"disabled\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"所属公司\" prop=\"companyName\">\r\n          <Checkbox v-model=\"formItem.SaveOpen\">另存后立即打开</Checkbox>\r\n        </FormItem>\r\n        <FormItem>\r\n          <Button @click=\"btnOk\" type=\"primary\">确定</Button>\r\n          <Button @click=\"btnCancel\" style=\"margin-left: 8px\">取消</Button>\r\n        </FormItem>\r\n      </Form>\r\n    </Col>\r\n  </Row>\r\n</template>\r\n\r\n<script>\r\nimport {SaveAsPageData,IVRSaveAs} from \"@/api/index\";\r\nexport default {\r\n  name: \"SaveAsPage\",\r\n  data(){\r\n    return{\r\n      formItem:{\r\n        NewFlowName:'',//新流程名称\r\n        NewKeyName:'',//新流程代码[hide]\r\n        NewCompanyName:'',//新所属公司\r\n        NewCompany:'',//新所属公司[hide]\r\n        SaveOpen:false,\r\n      },\r\n      formItemValidate:{\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n      },\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      this.getSaveAsPageData();\r\n    },\r\n    getSaveAsPageData(){\r\n      SaveAsPageData({\r\n        appid:'',\r\n        flowid:top.WFCore.GetQuery(\"flowid\"),\r\n        iscomp:top.WFCore.GetQuery(\"iscomp\"),\r\n      }).then(res=>{\r\n        if(res.success){\r\n          this.formItem.NewCompany=res.result.defaultCompanyID;\r\n          this.formItem.NewCompanyName=res.result.defaultCompanyName;\r\n        }\r\n      })\r\n    },\r\n    btnOk(){\r\n      if(!new RoadUI.Validate().validateForm(document.forms[0]))\r\n      {\r\n        return false;\r\n      }\r\n      //var postData = WFCore.GetWebControls(\"#form1\");\r\n      var postData = this.formItem;\r\n      postData.SaveOpen==true?1:0;\r\n      postData.flowid = WFCore.GetQuery(\"flowid\");\r\n      postData.iscomp = WFCore.GetQuery(\"iscomp\");\r\n      IVRSaveAs(postData).then(res=>{\r\n        if(res.success){\r\n          WFCore.DialogUtils.tipDialog('另存成功!',2,1);\r\n          var newFlowID = data.ParamObj.newFlowID;\r\n          if($(\"#SaveOpen\").is(\":checked\"))\r\n          {\r\n            top.workflowcommonObj.openFlow1(newFlowID);\r\n          }\r\n        }else {\r\n          WFCore.DialogUtils.tipDialog(\"失败\",2,7);\r\n        }\r\n      })\r\n      // WFCore.AjaxJson(\"/cctadmin/IVRDesignerSDK/Platform/WorkFlow/Designer/SaveAs.do\",postData,function(data){\r\n      //   if(data.Code ==1)\r\n      //   {\r\n      //     WFCore.DialogUtils.tipDialog('另存成功!',2,1);\r\n      //     var newFlowID = data.ParamObj.newFlowID;\r\n      //     if($(\"#SaveOpen\").is(\":checked\"))\r\n      //     {\r\n      //       frame.openFlow1(newFlowID);\r\n      //     }\r\n      //     new RoadUI.Window().close();\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     WFCore.DialogUtils.tipDialog(data.Message);\r\n      //   }\r\n      // });\r\n    },\r\n    btnCancel(){\r\n      new RoadUI.Window().close();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}