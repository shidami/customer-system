{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\knowledge\\components\\knowledge-edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\knowledge\\components\\knowledge-edit.vue","mtime":1614579763251},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOebuOWFs+aOpeWPowppbXBvcnQgewogIGdldEFsbEJ5U3lzS25vd2xlZGdlQ2F0ZWdvcnksICAgICAgICAgICAgICAgICAvL+iOt+WPluefpeivhuexu+Wei+S/oeaBr++8jOm7mOiupOi/lOWbnjHnuqfoj5zljZXnsbvlnosKICBhZGRTeXNLbm93bGVkZ2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mt7vliqDnn6Xor4bngrkKICBlZGl0U3lzS25vd2xlZGdlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nvJbovpHnn6Xor4bngrkKICBkZWxldGVGaWxlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/liKDpmaTkuIrkvKDnmoTmlofku7YKICBkZWxBdHRhY2hCeUlkcywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/liKDpmaTnn6Xor4bngrnmlofku7YKICBpbWFnZVByZXZpZXcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mlofku7bpooTop4jmjqXlj6MKICB1cGxvYWRGaWxlcywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mlofku7bkuIrkvKDov5Tlm57lrp7kvZMKICBpbWdQcmV2aWV3LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mlofku7bpooTop4jmjqXlj6MKfSBmcm9tICJAL2FwaS9pbmRleCI7CmltcG9ydCBlZGl0b3IgZnJvbSAiQC92aWV3cy9teS1jb21wb25lbnRzL3hib290L2VkaXRvciI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gaWQ6ICcnLAogICAgICBhY2Nlc3NUb2tlbjoge30sICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5LygdG9rZW7pibTmnYMKICAgICAgdmlzaWFibGU6IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAvL+e8lui+keefpeivhueCueW8ueeqlwogICAgICBsb2FkaW5nOmZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAgIC8v5Yqg6L295Lit5Zu+5qCHCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLCAgICAgICAgICAgICAgICAgLy/mj5DkuqTmjInpkq7nmoRsb2FkaW5n5Zu+5qCHCiAgICAgIGlzQWRkOnRydWUsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbmmK/mt7vliqDnn6Xor4bngrkKICAgICAgLy8g55+l6K+G57G75Z6L55u45YWzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgc2VhcmNoS2V5OiAiIiwgICAgICAgICAgICAgICAgICAgICAgICAvL+aQnOe0oui+k+WFpeahhgogICAgICB0cmVlVGl0bGU6ICcnLCAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCJ5Lit6IqC54K55ZCN56ewCiAgICAgIGRhdGE6IFtdLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/moJHlvaLoioLngrnnmoTmlbDmja7lhoXlrrkKICAgICAgZm9ybTp7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+efpeivhuexu+Wei+iKgueCueebuOWFs+WPguaVsAogICAgICAgIGlkOjAsCiAgICAgICAgdGl0bGU6JycsCiAgICAgICAgY29udGVudDonJywKICAgICAgICBjb250ZW50VGV4dDonJywKICAgICAgICBjYXRlZ29yeUlkOicnLAogICAgICB9LAogICAgICBmb3JtVmFsaWRhdGU6IHsgICAgICAgICAgICAgICAgICAgICAgIC8v5re75Yqg55+l6K+G6IqC54K56KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgICAgdGl0bGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5qCH6aKY5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIGNvbnRlbnQ6IFt7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogIuWGheWuueS4jeiDveS4uuepuiIsdHJpZ2dlcjogImJsdXIifV0KICAgICAgfSwKICAgICAgLy8g55+l6K+G57G75Z6L55u45YWzb3Zlci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy/mlofku7bkuIrkvKDnm7jlhbMKICAgICAgdXBsb2FkVVJMOicnLCAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4iuS8oOWcsOWdgAogICAgICBpbWFnZVByZXZpZXdVUkw6JycsCiAgICAgIGltZ1VybDogJycsCiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICB1cGxvYWRMaXN0OiBbXSwKICAgICAgb2xkRmlsZTpbXSwgICAgICAgICAgICAgICAgICAgICAgICAgLy/lt7LlhbPogZTpmYTku7YKICAgICAgbmV3RmlsZTpbXSwgICAgICAgICAgICAgICAgICAgICAgICAgLy/mlrDkuIrkvKDpmYTku7YKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0aXRsZSgpIHsKICAgICAgcmV0dXJuICh0aGlzLmlzQWRkID8gJ+a3u+WKoCcgOiAn5L+u5pS5JykgKyAn55+l6K+GJwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgdGhpcy5nZXRQYXJlbnRMaXN0KCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflj5bnn6Xor4bnsbvlnovmlbDmja4KICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHsKICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5nZXRTdG9yZSgiYWNjZXNzVG9rZW4iKQogICAgICB9OwogICAgICBpZighdGhpcy5pc0FkZCl7CiAgICAgICAgdGhpcy5mb3JtLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PnsKICAgICAgICAgIGxldCBvYmo9ewogICAgICAgICAgICByZXNwb25zZTp7CiAgICAgICAgICAgICAgcmVzdWx0OnsKICAgICAgICAgICAgICAgIGZpbGU6e30sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzdGF0dXM6ImZpbmlzaGVkIiwKICAgICAgICAgIH0KICAgICAgICAgIG9iai5yZXNwb25zZS5yZXN1bHQuZmlsZT1pdGVtCiAgICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5maWxlTGlzdC5wdXNoKG9iaikKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgLy8g5Lqk5LqS5pWw5o2u55u45YWzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGdldFBhcmVudExpc3QoKXsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHZtPXRoaXMKICAgICAgZ2V0QWxsQnlTeXNLbm93bGVkZ2VDYXRlZ29yeSgpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCF2bS5pc2FkZCYmZS5pZD09dm0uZm9ybS5jYXRlZ29yeUlkKXsKICAgICAgICAgICAgICBlLnNlbGVjdGVkPXRydWUKICAgICAgICAgICAgICB2bS50cmVlVGl0bGU9ZS50aXRsZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSwKICAgICAgICAgICAgY29udGVudDogcmVzLm1lc3NhZ2UKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXQoc3RhdGUpIHsKICAgICAgaWYoIXRoaXMuZm9ybS5jYXRlZ29yeUlkKXsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoewogICAgICAgICAgICBkdXJhdGlvbjozLAogICAgICAgICAgICBjb250ZW50OiAn6K+36YCJ5oup55+l6K+G5YiG57G7JywKICAgICAgICAgIH0pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBjb25zb2xlLmxvZyh2YWxpZCkKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuZm9ybS5jb250ZW50VGV4dD10aGlzLiRyZWZzLmVkaXRvci5nZXRUZXh0KCkgLy/ojrflj5blr4zmlofmnKznmoTnuq/mlofmnKzlhoXlrrkKICAgICAgICAgIGxldCBhcnI9W10KICAgICAgICAgIHRoaXMubmV3RmlsZS5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgYXJyLnB1c2goaXRlbSkKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmZvcm0uZGF0YUxpc3Q9SlNPTi5zdHJpbmdpZnkoYXJyKQogICAgICAgICAgZGVsZXRlIHRoaXMuZm9ybS5jaGlsZHJlbgogICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGlmKHRoaXMuaXNBZGR8fHN0YXRlPT0nMCcpewogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pCiAgICAgICAgICAgIGFkZFN5c0tub3dsZWRnZSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5re75Yqg5oiQ5YqfIik7CiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5yZXNldERhdGEoKQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldERhdGFMaXN0KCk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgY29udGVudDogcmVzLm1lc3NhZ2UKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICBjb25zb2xlLmxvZygn55+l6K+G54K55L+u5pS5JykKICAgICAgICAgICAgaWYodGhpcy5vbGRGaWxlLmxlbmd0aD4wKXsKICAgICAgICAgICAgICB0aGlzLm9sZEZpbGUuZm9yRWFjaChpdGVtID0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSkKICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlRmlsZXMoaXRlbS5maWxlSWQpCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUtub3dsZWRnZUZpbGUoaXRlbS5pZCkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSkKICAgICAgICAgICAgZWRpdFN5c0tub3dsZWRnZSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi57yW6L6R5oiQ5YqfIik7CiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5yZXNldERhdGEoKQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldERhdGFMaXN0KCk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgY29udGVudDogcmVzLm1lc3NhZ2UKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmoKHpqozlpLHotKUnKQogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmoKHpqozlpLHotKUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaEFqYXgoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfovpPlhaXmoYbmkJzntKInKQogICAgICBpZiAodGhpcy5zZWFyY2hLZXkpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIGdldEFsbEJ5U3lzS25vd2xlZGdlQ2F0ZWdvcnkoewogICAgICAgICAgdGl0bGU6IHRoaXMuc2VhcmNoS2V5CiAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzLnJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDkuLrnqbrph43mlrDliqDovb0KICAgICAgICB0aGlzLmdldFBhcmVudExpc3QoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOefpeivhuexu+Wei+agkeW9ouiKgueCueebuOWFsy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBjYW5jZWxUcmVlKCkgewogICAgICBjb25zb2xlLmxvZygn5qCR6IqC54K55Y+W5raI6YCJ5oup5oyJ6ZKuJykKICAgICAgbGV0IGRhdGEgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0U2VsZWN0ZWROb2RlcygpWzBdOwogICAgICBpZiAoZGF0YSkgewogICAgICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlJZCA9ICcnOwogICAgICB0aGlzLnRyZWVUaXRsZSA9ICIiOwogICAgfSwKICAgIHNlYXJjaCgpIHsKICAgICAgaWYgKHRoaXMudGltZXRhc2spIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1ldGFzaykKICAgICAgfQogICAgICB0aGlzLnRpbWV0YXNrID0gc2V0VGltZW91dCh0aGlzLnNlYXJjaEFqYXgsIDEwMDApCiAgICB9LAogICAgc2VsZWN0VHJlZSh2KSB7CiAgICAgIGlmICh2Lmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDovazmjaJudWxs5Li6IiIKICAgICAgICBmb3IgKGxldCBhdHRyIGluIHZbMF0pIHsKICAgICAgICAgIGlmICh2WzBdW2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgdlswXVthdHRyXSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodlswXSk7CiAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSkKICAgICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlJZCA9IGRhdGEuaWQ7CiAgICAgICAgdGhpcy50cmVlVGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2FuY2VsVHJlZSgpOwogICAgICB9CiAgICB9LAogICAgbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsKICAgICAgY29uc29sZS5sb2coaXRlbSkKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBwYXJlbnRJZDogaXRlbS5pZCwKICAgICAgfQogICAgICAvLyDlvILmraXliqDovb3moJHlrZDnsbvmlbDmja4KICAgICAgZ2V0QWxsQnlTeXNLbm93bGVkZ2VDYXRlZ29yeShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGNhbGxiYWNrKHJlcy5yZXN1bHQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5qCR6IqC54K5b3Zlci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyDpmYTku7blm77niYfnm7jlhbMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBoYW5kbGVWaWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coJ+mihOiniCcpCiAgICAgIHRoaXMuaW1nVXJsID0gdGhpcy5pbWdQcmV2aWV3VVJMKycvJysoZmlsZS5maWxlSWQ/ZmlsZS5maWxlSWQ6ZmlsZS5pZCk7CiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgICAgaWYoZmlsZS5maWxlSWQpeyAvL+WmguaenOaYr+WFs+iBlOeahOmZhOS7tu+8jOWwseaaguaXtuS/neWtmOWcqG9sZEZpbGTlr7nosaHkuK3vvIzlhYjliKDpmaTmnKzlnLDvvIznrYnmj5DkuqTlkI7lho3liKDpmaTmnI3liqHlmagKICAgICAgICB0aGlzLm9sZEZpbGUucHVzaChmaWxlKQogICAgICB9ZWxzZXsgICAgICAgICAgIC8v5aaC5p6c5LiN5piv77yM6K+l5paH5Lu25Li65paw5LiK5Lyg5paH5Lu277yM55u05o6l5Yig6Zmk5pyN5Yqh5Zmo5paH5Lu2CiAgICAgICAgdGhpcy5kZWxldGVGaWxlcyhmaWxlLmlkKQogICAgICAgIHRoaXMubmV3RmlsZS5zcGxpY2UodGhpcy5uZXdGaWxlLmluZGV4T2YoZmlsZSksIDEpCiAgICAgIH0KICAgICAgbGV0IGZpbGVMaXN0ID0gdGhpcy4kcmVmcy51cGxvYWQuZmlsZUxpc3Q7CiAgICAgIGZvcihsZXQgaT0wO2k8ZmlsZUxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgaWYoZmlsZUxpc3RbaV0ucmVzcG9uc2UucmVzdWx0LmZpbGUuaWQ9PWZpbGUuaWQpewogICAgICAgICAgZmlsZUxpc3Quc3BsaWNlKGksMSkKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyB0aGlzLiRyZWZzLnVwbG9hZC5maWxlTGlzdC5zcGxpY2UoZmlsZUxpc3QuaW5kZXhPZihmaWxlKSwgMSk7CiAgICB9LAogICAgZGVsZXRlRmlsZXMoaWQpewogICAgICBjb25zb2xlLmxvZygn5Yig6Zmk5pyN5Yqh56uv5paH5Lu2JytpZCkKICAgICAgLy/liKDpmaTkuIrkvKDmnI3liqHnq6/mlofku7bvvIjpmYTku7booajvvIkKICAgICAgZGVsZXRlRmlsZSh7aWRzOmlkfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOwogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgY29uc29sZS5sb2coJ+WIoOmZpOacjeWKoeerr+aWh+S7tuaIkOWKnycpCiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUtub3dsZWRnZUZpbGUoaWQpewogICAgICAvL+WIoOmZpOacjeWKoeerr+WFs+iBlOmZhOS7tijnn6Xor4bngrnpmYTku7booagpCiAgICAgIGRlbEF0dGFjaEJ5SWRzKHsgaWRzOmlkIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiRNb2RhbC5yZW1vdmUoKTsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTnn6Xor4bngrnlhbPogZTmlofku7bmiJDlip8nKQogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLm5ld0ZpbGUucHVzaChyZXMucmVzdWx0LmZpbGUpCiAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDmiJDlip8nKQogICAgICBpZiAoIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgICAgdGl0bGU6ICfmnKrnn6XplJnor68nLAogICAgICAgICAgZGVzYzogcmVzLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUVycm9yKGVycm9yLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yLnRvU3RyaW5nKCkpOwogICAgfSwKICAgIC8vIGhhbmRsZUZvcm1hdEVycm9yKGZpbGUpIHsKICAgIC8vICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgLy8gICAgIHRpdGxlOiAn5paH5Lu25qC85byP5LiN5q2j56GuJywKICAgIC8vICAgICBkZXNjOiBmaWxlLm5hbWUgKyAn55qE5paH5Lu25qC85byP5LiN5q2j56Gu77yM6K+36YCJ5oupanBn5oiWcG5nJwogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICBoYW5kbGVNYXhTaXplKGZpbGUpIHsKICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgIHRpdGxlOiAn6LaF5Ye65paH5Lu25aSn5bCP6ZmQ5Yi2JywKICAgICAgICBkZXNjOiBmaWxlLm5hbWUgKyAn6L+H5aSn77yM6K+35Yu/6LaF6L+HNU1CJwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDkuYvliY0nKQogICAgICBjb25zdCBjaGVjayA9IHRoaXMudXBsb2FkTGlzdC5sZW5ndGggPCA1OwogICAgICBpZiAoIWNoZWNrKSB7CiAgICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgICAgdGl0bGU6ICfmnIDlpJrlj6/kuIrkvKDkupTkuKrmlofku7YnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNoZWNrOwogICAgfSwKICAgIC8vIOmZhOS7tuWbvueJh292ZXIqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy/liKTmlq3lr4zmlofmnKzmmK/lkKbkuLrnqboKICAgIGVkaXRvckhhbmRlcih2YWx1ZSl7ICAgICAgCiAgICAgIGxldCBzdHI9dmFsdWUKICAgICAgbGV0IG51bSA9IDAsCiAgICAgIHJlZyA9IC88cD4oJm5ic3A7fCZuYnNwO1xzKykrPFwvcD58PHA+KDxicj4pKzxcL3A+L2c7CiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9ccysvZywgIiIpOy8v5YWI5Y676Zmk56m65qC8CiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC8mbmJzcDsrL2csICIiKTsvL+WGjeWOu+mZpCZuYnNwOwogICAgICB3aGlsZSAobnVtIDwgc3RyLmxlbmd0aCAmJiBzdHIgIT0gIiIpCiAgICAgIHsKICAgICAgICBudW0rKzsKICAgICAgICBsZXQgayA9IHN0ci5tYXRjaChyZWcpOwogICAgICAgIGlmIChrKSB7CiAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShrWzBdLCAiIik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmKCFzdHIpIHsKICAgICAgICB0aGlzLmZvcm0uY29udGVudD0nJwogICAgICB9OwogICAgfSwKICAgIC8v6YeN572u6aG16Z2i5pWw5o2uCiAgICByZXNldERhdGEoKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgLy8gdGhpcy4kcmVmcy5mb3JtLnJlc2V0RmllbGRzKCk7ICAgICAgLy/muIXnqbrooajljZUKICAgICAgdGhpcy5mb3JtPXsKICAgICAgICBpZDowLAogICAgICAgIHRpdGxlOicnLAogICAgICAgIGNvbnRlbnQ6JycsCiAgICAgICAgY29udGVudFRleHQ6JycsCiAgICAgICAgY2F0ZWdvcnlJZDonJywKICAgICAgfQogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5maWxlTGlzdD1bXTsgICAgICAgICAgICAgICAgICAvL+a4heepuuS5i+WJjeS4iuS8oOaWh+S7tueahOaVsOaNrgogICAgICB0aGlzLnVwbG9hZExpc3QgPXRoaXMuJHJlZnMudXBsb2FkLmZpbGVMaXN0ICAgICAvL+mHjee9rumZhOS7tuWxleekuueahOWvueixoQogICAgICB0aGlzLm9sZEZpbGU9W10gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a4heepuuW3suWFs+iBlOaWh+S7tgogICAgICB0aGlzLm5ld0ZpbGU9W10gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a4heepuuaWsOS4iuS8oOaWh+S7tgogICAgICB0aGlzLiRyZWZzLmVkaXRvci5jbGVhckRhdGEoKTsgICAgICAgICAgICAgICAgICAvL+a4heepuuWvjOaWh+acrAogICAgICB0aGlzLmNhbmNlbFRyZWUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a4heepuuagkeiKgueCuemAieaLqQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudXBsb2FkVVJMPXVwbG9hZEZpbGVzCiAgICB0aGlzLmltZ1ByZXZpZXdVUkw9aW1nUHJldmlldwogIH0sCiAgY29tcG9uZW50czogewogICAgZWRpdG9yLAogIH0KfQo="},{"version":3,"sources":["knowledge-edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"knowledge-edit.vue","sourceRoot":"src/views/knowledge/components","sourcesContent":["<template>\r\n  <Drawer :title=\"title\" :closable=\"true\" width=\"60%\" draggable v-model=\"visiable\" @on-close=\"resetData\">\r\n    <Row gutter=\"20\">\r\n      <Col span=\"6\">\r\n      <Spin fix v-if=\"loading\"></Spin>\r\n      <Input v-model=\"searchKey\" suffix=\"ios-search\" @on-change=\"search\" placeholder=\"输入节点名搜索\" clearable />\r\n      <Alert show-icon class=\"mt-10\">当前选择编辑：\r\n        <span class=\"select-title\">{{treeTitle}}</span>\r\n        <a class=\"select-clear ml-5\" @click=\"cancelTree\" v-if=\"treeTitle\">取消选择</a>\r\n      </Alert>\r\n      <Tree ref=\"tree\" :data=\"data\" :load-data=\"loadData\" @on-select-change=\"selectTree\"></Tree>\r\n      </Col>\r\n      <Col span=\"16\">\r\n      <Form ref=\"form\" :model=\"form\" :rules=\"formValidate\">\r\n        <FormItem prop=\"title\">\r\n          <p class=\"mb-5 font-16\">标题<span v-show='!form.title' class=\"color-red\">*</span></p>\r\n          <Input v-model=\"form.title\" />\r\n        </FormItem>\r\n        <FormItem prop=\"content\">\r\n          <p class=\"mb-5 font-16\">内容<span v-show='!form.content' class=\"color-red\">*</span></p>\r\n          <editor id=\"editor\" ref=\"editor\"  class=\"form-wangEditor\" v-model=\"form.content\" @on-change=\"editorHander\"></editor>\r\n        </FormItem>\r\n      </Form>\r\n      <div class=\"flex mt-20\">\r\n        <p class=\"enclosure-text\">附件:</p>\r\n        <div class=\"flex1 ml-10\">\r\n          <div class=\"demo-upload-list\" v-for=\"item in uploadList\">\r\n            <template v-if=\"item.status === 'finished'\">\r\n              <img v-if=\"item.response.result.file.type.indexOf('image')!==-1\" :src=\"imgPreviewURL+'/'+(item.response.result.file.fileId?item.response.result.file.fileId:item.response.result.file.id)\">\r\n              <p v-else :title=\"item.response.result.file.name\">{{item.response.result.file.name}}</p>\r\n              <div class=\"demo-upload-list-cover\">\r\n                <Icon type=\"ios-eye-outline\" v-if=\"item.response.result.file.type.indexOf('image')!==-1\" @click.native=\"handleView(item.response.result.file)\"></Icon>\r\n                <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item.response.result.file)\"></Icon>\r\n              </div>\r\n            </template>\r\n            <template v-else>\r\n              <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\r\n            </template>\r\n          </div>\r\n          <Upload :action=\"uploadURL\" :headers=\"accessToken\" ref=\"upload\" :show-upload-list=\"false\" :on-success=\"handleSuccess\" :on-error=\"handleError\" :max-size=\"5120\" :on-exceeded-size=\"handleMaxSize\" :before-upload=\"handleBeforeUpload\" multiple type=\"drag\" style=\"display: inline-block;width:58px;\">\r\n            <div style=\"width: 58px;height:58px;line-height: 58px;\">\r\n              <Icon type=\"ios-add\" size=\"20\"></Icon>\r\n            </div>\r\n          </Upload>\r\n        </div>\r\n      </div>\r\n      <Modal title=\"预览\" v-model=\"visible\">\r\n        <img :src=\"imgUrl\" v-if=\"visible\" style=\"width: 100%\">\r\n      </Modal>\r\n      </Col>\r\n    </Row>\r\n    <div class=\"demo-drawer-footer\">\r\n      <!-- <Button type=\"text\" @click=\"modalVisible=false\">取消</Button> -->\r\n       <Dropdown style=\"margin-left: 20px\">\r\n          <Button type=\"primary\" :loading=\"submitLoading\" @click.native=\"submit(1)\">提交<Icon type=\"ios-arrow-down\"></Icon></Button>\r\n          <DropdownMenu slot=\"list\">\r\n              <Button type=\"primary\" :loading=\"submitLoading\" @click.native=\"submit(0)\">保存为草稿</Button>\r\n          </DropdownMenu>\r\n      </Dropdown>\r\n    </div>\r\n  </Drawer>\r\n</template>\r\n<script>\r\n  // 相关接口\r\n  import {\r\n    getAllBySysKnowledgeCategory,                 //获取知识类型信息，默认返回1级菜单类型\r\n    addSysKnowledge,                              //添加知识点\r\n    editSysKnowledge,                             //编辑知识点\r\n    deleteFile,                                   //删除上传的文件\r\n    delAttachByIds,                               //删除知识点文件\r\n    imagePreview,                                 //文件预览接口\r\n    uploadFiles,                                  //文件上传返回实体\r\n    imgPreview,                                   //文件预览接口\r\n  } from \"@/api/index\";\r\n  import editor from \"@/views/my-components/xboot/editor\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        // id: '',\r\n        accessToken: {},                      //上传token鉴权\r\n        visiable: false,                      //编辑知识点弹窗\r\n        loading:false,                        //加载中图标\r\n        submitLoading: false,                 //提交按钮的loading图标\r\n        isAdd:true,                           //是否是添加知识点\r\n        // 知识类型相关-----------------------------------------------------------------------------\r\n        searchKey: \"\",                        //搜索输入框\r\n        treeTitle: '',                        //选中节点名称\r\n        data: [],                             //树形节点的数据内容\r\n        form:{                                //知识类型节点相关参数\r\n          id:0,\r\n          title:'',\r\n          content:'',\r\n          contentText:'',\r\n          categoryId:'',\r\n        },\r\n        formValidate: {                       //添加知识节点表单验证规则\r\n          title: [{ required: true, message: \"标题不能为空\", trigger: \"blur\" }],\r\n          content: [{required: true,message: \"内容不能为空\",trigger: \"blur\"}]\r\n        },\r\n        // 知识类型相关over-------------------------------------------------------------------------\r\n        //文件上传相关\r\n        uploadURL:'',                         //上传地址\r\n        imagePreviewURL:'',\r\n        imgUrl: '',\r\n        visible: false,\r\n        uploadList: [],\r\n        oldFile:[],                         //已关联附件\r\n        newFile:[],                         //新上传附件\r\n      }\r\n    },\r\n    computed: {\r\n      title() {\r\n        return (this.isAdd ? '添加' : '修改') + '知识'\r\n      }\r\n    },\r\n    methods: {\r\n      init() {\r\n        this.getParentList()                               //获取知识类型数据\r\n        this.accessToken = {\r\n          accessToken: this.getStore(\"accessToken\")\r\n        };\r\n        if(!this.isAdd){\r\n          this.form.children.forEach(item =>{\r\n            let obj={\r\n              response:{\r\n                result:{\r\n                  file:{},\r\n                }\r\n              },\r\n              status:\"finished\",\r\n            }\r\n            obj.response.result.file=item\r\n            this.$refs.upload.fileList.push(obj)\r\n          })\r\n        }\r\n      },\r\n      // 交互数据相关-----------------------------------------------\r\n      getParentList(){\r\n        this.loading = true;\r\n        let vm=this\r\n        getAllBySysKnowledgeCategory().then(res => {\r\n          this.loading = false;\r\n          if (res.success) {\r\n            res.result.forEach(function(e) {\r\n              if (e.isParent) {\r\n                e.loading = false;\r\n                e.children = [];\r\n              }\r\n              if(!vm.isadd&&e.id==vm.form.categoryId){\r\n                e.selected=true\r\n                vm.treeTitle=e.title\r\n              }\r\n            });\r\n            this.data = res.result;\r\n          }else{\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.message\r\n            })\r\n          }\r\n        });\r\n      },\r\n      submit(state) {\r\n        if(!this.form.categoryId){\r\n          this.$Message.warning({\r\n              duration:3,\r\n              content: '请选择知识分类',\r\n            })\r\n          return false\r\n        }\r\n        this.$refs.form.validate(valid => {\r\n          console.log(valid)\r\n          if (valid) {\r\n            this.form.contentText=this.$refs.editor.getText() //获取富文本的纯文本内容\r\n            let arr=[]\r\n            this.newFile.forEach(item=>{\r\n              arr.push(item)\r\n            })\r\n            this.form.dataList=JSON.stringify(arr)\r\n            delete this.form.children\r\n            this.submitLoading = true;\r\n            if(this.isAdd||state=='0'){\r\n              console.log(this.form)\r\n              addSysKnowledge(this.form).then(res => {\r\n                this.submitLoading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"添加成功\");\r\n                  this.modalVisible = false;\r\n                  this.resetData()\r\n                  this.$parent.getDataList();\r\n                }else{\r\n                  this.$Message.error({\r\n                    background: true,\r\n                    content: res.message\r\n                  })\r\n                }\r\n              });\r\n            }else{\r\n              console.log('知识点修改')\r\n              if(this.oldFile.length>0){\r\n                this.oldFile.forEach(item =>{\r\n                  console.log(item)\r\n                  this.deleteFiles(item.fileId)\r\n                  this.deleteKnowledgeFile(item.id)\r\n                })\r\n              }\r\n              console.log(this.form)\r\n              editSysKnowledge(this.form).then(res => {\r\n                this.submitLoading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"编辑成功\");\r\n                  this.modalVisible = false;\r\n                  this.resetData()\r\n                  this.$parent.getDataList();\r\n                }else{\r\n                  this.$Message.error({\r\n                    background: true,\r\n                    content: res.message\r\n                  })\r\n                }\r\n              });\r\n            }\r\n          }else{\r\n            console.log('校验失败')\r\n            this.$Message.warning(\"校验失败\");\r\n          }\r\n        });\r\n      },\r\n      searchAjax() {\r\n        console.log('输入框搜索')\r\n        if (this.searchKey) {\r\n          this.loading = true;\r\n          getAllBySysKnowledgeCategory({\r\n            title: this.searchKey\r\n          }).then(res => {\r\n            this.loading = false;\r\n            if (res.success) {\r\n              this.data = res.result;\r\n            }\r\n          });\r\n        } else {\r\n          // 为空重新加载\r\n          this.getParentList();\r\n        }\r\n      },\r\n      // 知识类型树形节点相关-----------------------------------------------\r\n      cancelTree() {\r\n        console.log('树节点取消选择按钮')\r\n        let data = this.$refs.tree.getSelectedNodes()[0];\r\n        if (data) {\r\n          data.selected = false;\r\n        }\r\n        this.form.categoryId = '';\r\n        this.treeTitle = \"\";\r\n      },\r\n      search() {\r\n        if (this.timetask) {\r\n          clearTimeout(this.timetask)\r\n        }\r\n        this.timetask = setTimeout(this.searchAjax, 1000)\r\n      },\r\n      selectTree(v) {\r\n        if (v.length > 0) {\r\n          // 转换null为\"\"\r\n          for (let attr in v[0]) {\r\n            if (v[0][attr] == null) {\r\n              v[0][attr] = \"\";\r\n            }\r\n          }\r\n          let str = JSON.stringify(v[0]);\r\n          let data = JSON.parse(str);\r\n          console.log(data)\r\n          this.form.categoryId = data.id;\r\n          this.treeTitle = data.title;\r\n        } else {\r\n          this.cancelTree();\r\n        }\r\n      },\r\n      loadData(item, callback) {\r\n        console.log(item)\r\n        let params = {\r\n          parentId: item.id,\r\n        }\r\n        // 异步加载树子类数据\r\n        getAllBySysKnowledgeCategory(params).then(res => {\r\n          if (res.success) {\r\n            res.result.forEach(function(e) {\r\n              if (e.isParent) {\r\n                e.loading = false;\r\n                e.children = [];\r\n              }\r\n            });\r\n            callback(res.result);\r\n          }\r\n        });\r\n      },\r\n      // 树节点over--------------------------------------------------------------------------\r\n      // 附件图片相关-------------------------------------------------------------------------\r\n      handleView(file) {\r\n        console.log('预览')\r\n        this.imgUrl = this.imgPreviewURL+'/'+(file.fileId?file.fileId:file.id);\r\n        this.visible = true;\r\n      },\r\n      handleRemove(file) {\r\n        console.log(file)\r\n        if(file.fileId){ //如果是关联的附件，就暂时保存在oldFild对象中，先删除本地，等提交后再删除服务器\r\n          this.oldFile.push(file)\r\n        }else{           //如果不是，该文件为新上传文件，直接删除服务器文件\r\n          this.deleteFiles(file.id)\r\n          this.newFile.splice(this.newFile.indexOf(file), 1)\r\n        }\r\n        let fileList = this.$refs.upload.fileList;\r\n        for(let i=0;i<fileList.length;i++){\r\n          if(fileList[i].response.result.file.id==file.id){\r\n            fileList.splice(i,1)\r\n            break;\r\n          }\r\n        }\r\n        // this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\r\n      },\r\n      deleteFiles(id){\r\n        console.log('删除服务端文件'+id)\r\n        //删除上传服务端文件（附件表）\r\n        deleteFile({ids:id}).then(res => {\r\n          this.$Modal.remove();\r\n          if (res.success) {\r\n            console.log('删除服务端文件成功')\r\n          }else{\r\n            this.$Message.error(res.message);\r\n          }\r\n        });\r\n      },\r\n      deleteKnowledgeFile(id){\r\n        //删除服务端关联附件(知识点附件表)\r\n        delAttachByIds({ ids:id }).then(res => {\r\n          this.$Modal.remove();\r\n          if (res.success) {\r\n            console.log('删除知识点关联文件成功')\r\n          }else{\r\n            this.$Message.error(res.message);\r\n          }\r\n        });\r\n      },\r\n      handleSuccess(res, file) {\r\n        this.newFile.push(res.result.file)\r\n        console.log('上传成功')\r\n        if (!res.success) {\r\n          this.$Notice.warning({\r\n            title: '未知错误',\r\n            desc: res.message\r\n          });\r\n        }\r\n      },\r\n      handleError(error, file, fileList) {\r\n        this.$Message.error(error.toString());\r\n      },\r\n      // handleFormatError(file) {\r\n      //   this.$Notice.warning({\r\n      //     title: '文件格式不正确',\r\n      //     desc: file.name + '的文件格式不正确，请选择jpg或png'\r\n      //   });\r\n      // },\r\n      handleMaxSize(file) {\r\n        this.$Notice.warning({\r\n          title: '超出文件大小限制',\r\n          desc: file.name + '过大，请勿超过5MB'\r\n        });\r\n      },\r\n      handleBeforeUpload() {\r\n        console.log('上传之前')\r\n        const check = this.uploadList.length < 5;\r\n        if (!check) {\r\n          this.$Notice.warning({\r\n            title: '最多可上传五个文件'\r\n          });\r\n        }\r\n        return check;\r\n      },\r\n      // 附件图片over*----------------------------------------------\r\n      //判断富文本是否为空\r\n      editorHander(value){      \r\n        let str=value\r\n        let num = 0,\r\n        reg = /<p>(&nbsp;|&nbsp;\\s+)+<\\/p>|<p>(<br>)+<\\/p>/g;\r\n        str = str.replace(/\\s+/g, \"\");//先去除空格\r\n        str = str.replace(/&nbsp;+/g, \"\");//再去除&nbsp;\r\n        while (num < str.length && str != \"\")\r\n        {\r\n          num++;\r\n          let k = str.match(reg);\r\n          if (k) {\r\n            str = str.replace(k[0], \"\");\r\n          }\r\n        }\r\n        if(!str) {\r\n          this.form.content=''\r\n        };\r\n      },\r\n      //重置页面数据\r\n      resetData(){                                 \r\n        // this.$refs.form.resetFields();      //清空表单\r\n        this.form={\r\n          id:0,\r\n          title:'',\r\n          content:'',\r\n          contentText:'',\r\n          categoryId:'',\r\n        }\r\n        this.$refs.upload.fileList=[];                  //清空之前上传文件的数据\r\n        this.uploadList =this.$refs.upload.fileList     //重置附件展示的对象\r\n        this.oldFile=[]                                 //清空已关联文件\r\n        this.newFile=[]                                 //清空新上传文件\r\n        this.$refs.editor.clearData();                  //清空富文本\r\n        this.cancelTree();                              //清空树节点选择\r\n      }\r\n    },\r\n    mounted() {\r\n      this.uploadURL=uploadFiles\r\n      this.imgPreviewURL=imgPreview\r\n    },\r\n    components: {\r\n      editor,\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped=\"scoped\">\r\n    .demo-drawer-footer{\r\n        width: 100%;\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        border-top: 1px solid #e8e8e8;\r\n        padding: 10px 16px;\r\n        background: #fff;\r\n    }\r\n  .enclosure-text {\r\n    align-self: flex-start;\r\n  }\r\n\r\n  .demo-upload-list {\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n    line-height: 60px;\r\n    border: 1px solid transparent;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    position: relative;\r\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .demo-upload-list img {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .demo-upload-list-cover {\r\n    display: none;\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0, 0, 0, .6);\r\n  }\r\n\r\n  .demo-upload-list:hover .demo-upload-list-cover {\r\n    display: block;\r\n  }\r\n\r\n  .demo-upload-list-cover i {\r\n    color: #fff;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    margin: 0 2px;\r\n  }\r\n</style>\r\n"]}]}