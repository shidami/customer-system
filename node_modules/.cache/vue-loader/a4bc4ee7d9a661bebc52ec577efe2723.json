{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\tag-manage\\tagManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\tag-manage\\tagManage.vue","mtime":1614579763401},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDmqKHniYjlr7zlhaXmlofku7booajmlbDmja4NCmltcG9ydCB7dXNlclRhZ0NvbHVtbnMsIHVzZXJUYWdEYXRhfSBmcm9tICJAL2xpYnMvaW1wb3J0VGVtcGxhdGUiOw0KaW1wb3J0IHtnZXRBbGxCeVN5c1RhZ0xpc3QsZWRpdFN5c1RhZyxhZGRTeXNUYWcsZGVsU3lzVGFnLGltcG9ydFN5c1RhZ0xpc3R9IGZyb20gIkAvYXBpL2luZGV4IjsNCmltcG9ydCBleGNlbCBmcm9tICJAL2xpYnMvZXhjZWwiOw0KZXhwb3J0IGRlZmF1bHQgew0KbmFtZTogInRhZ01hbmFnZSIsDQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICB1cGxvYWRmaWxlOicnLA0KICAgICAgcmVhZGluZzpmYWxzZSwNCiAgICAgIHVwbG9hZFZpc2libGU6ZmFsc2UsDQogICAgICB0YWdWaXNpYmxlVGl0bGU6J2FkZCcsDQogICAgICB0YWdNb2JpbGVWaXNpYmxlOmZhbHNlLA0KICAgICAgY2hlY2tDb2RlTG9hZGluZzpmYWxzZSwNCiAgICAgIGltcG9ydFRhYmxlRGF0YTpbXSwNCiAgICAgIHBob25lSW1wb3J0Q29sdW1uczpbXSwNCiAgICAgIGNhcmRMaXN0Olt7aWQ6IiIsdGFnTmFtZTonJ30se2lkOiIiLHRhZ05hbWU6Jyd9LHtpZDoiIix0YWdOYW1lOicxJ31dLA0KICAgICAgdGFnRm9ybTp7DQogICAgICAgIHRhZ05hbWU6JycsDQogICAgICAgIHR5cGU6JzAnDQogICAgICB9LA0KICAgICAgdGFnRm9ybVZhbGlkYXRlOnsNCiAgICAgICAgdGFnTmFtZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgicGxlYXNlRW50ZXIiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdDQogICAgICB9LA0KICAgICAgYWNjZXNzVG9rZW46IHt9LCAvLyDkuIrkvKB0b2tlbumJtOadgw0KICAgICAgdXBsb2FkSW5mbzp7DQogICAgICAgIGE6JycsDQogICAgICAgIGI6JycsDQogICAgICAgIGM6JycsDQogICAgICAgIGQ6JycsDQogICAgICAgIHZpZXc6ZmFsc2UNCiAgICAgIH0gLy/kuIrkvKDkv6Hmga8NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KICAgIGluaXQoKXsNCiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB7DQogICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmdldFN0b3JlKCJhY2Nlc3NUb2tlbiIpDQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRUYWdMaXN0KCk7DQogICAgfSwNCiAgICBnZXRUYWdMaXN0KCl7DQogICAgICBnZXRBbGxCeVN5c1RhZ0xpc3Qoe30pLnRoZW4ocmVzPT57DQogICAgICAgIGlmKHJlcy5zdWNjZXNzKXsNCiAgICAgICAgICB0aGlzLmNhcmRMaXN0PXJlcy5yZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/mlrDlop7moIfnrb4NCiAgICB0YWdBZGRDbGljaygpew0KICAgICAgdGhpcy50YWdWaXNpYmxlVGl0bGU9ImFkZCI7DQogICAgICB0aGlzLnRhZ01vYmlsZVZpc2libGU9dHJ1ZTsNCiAgICB9LA0KICAgIC8v5L+u5pS55qCH562+DQogICAgdGFnRWRpdENsaWNrKHYpew0KICAgICAgdGhpcy50YWdWaXNpYmxlVGl0bGU9ImVkaXQiOw0KICAgICAgdGhpcy50YWdNb2JpbGVWaXNpYmxlPXRydWU7DQogICAgICBmb3IodmFyIGkgaW4gdil7DQogICAgICAgIHRoaXMudGFnRm9ybVtpXT12W2ldOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/liKDpmaTmoIfnrb4NCiAgICB0YWdEZWxDbGljayh2KXsNCiAgICAgIGRlbFN5c1RhZyh7aWRzOnYuaWR9KS50aGVuKHJlcz0+ew0KICAgICAgICBpZihyZXMuc3VjY2Vzcyl7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3MiKSk7DQogICAgICAgICAgdGhpcy5nZXRUYWdMaXN0KCk7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLw0KICAgIHN1Ym1pdFRhZygpew0KICAgICAgICB2YXIgZm9ybURhdGE9e307DQogICAgICAgIGZvcih2YXIgaSBpbiB0aGlzLnRhZ0Zvcm0pew0KICAgICAgICAgIGlmKGkhPSdpZCcpew0KICAgICAgICAgICAgZm9ybURhdGFbaV09dGhpcy50YWdGb3JtW2ldOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZih0aGlzLnRhZ1Zpc2libGVUaXRsZT09ImFkZCIpew0KICAgICAgICAgIGFkZFN5c1RhZyhmb3JtRGF0YSkudGhlbihyZXM9PnsNCiAgICAgICAgICAgIGlmKHJlcy5zdWNjZXNzKXsNCiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3MiKSk7DQogICAgICAgICAgICAgIHRoaXMuZ2V0VGFnTGlzdCgpOw0KICAgICAgICAgICAgICB0aGlzLnRhZ01vYmlsZVZpc2libGU9ZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfWVsc2Ugew0KICAgICAgICAgIGZvcm1EYXRhLmlkPXRoaXMudGFnRm9ybS5pZDsNCiAgICAgICAgICBlZGl0U3lzVGFnKGZvcm1EYXRhKS50aGVuKHJlcz0+ew0KICAgICAgICAgICAgaWYocmVzLnN1Y2Nlc3Mpew0KICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3ModGhpcy4kdCgic3VjY2VzcyIpKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRUYWdMaXN0KCk7DQogICAgICAgICAgICAgIHRoaXMudGFnTW9iaWxlVmlzaWJsZT1mYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGJlZm9yZVVwbG9hZCgpIHsNCiAgICAgIC8vIGlmICgNCiAgICAgIC8vICAgICB0aGlzLiRyb3V0ZS5tZXRhLnBlcm1UeXBlcyAmJg0KICAgICAgLy8gICAgICF0aGlzLiRyb3V0ZS5tZXRhLnBlcm1UeXBlcy5pbmNsdWRlcygidXBsb2FkIikNCiAgICAgIC8vICkgew0KICAgICAgLy8gIC8vIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuatpOWkhOaCqOayoeacieS4iuS8oOadg+mZkCjkuLrmvJTnpLrlip/og73vvIzor6XmjInpkq7mnKrphY3nva7pmpDol48pIik7DQogICAgICAvLyAgIHJldHVybiBmYWxzZTsNCiAgICAgIC8vIH0NCiAgICAgIC8vIHJldHVybiB0cnVlOw0KICAgIH0sDQogICAgaGFuZGxlTWF4U2l6ZShmaWxlKSB7DQogICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7DQogICAgICAgIHRpdGxlOiAi5paH5Lu25aSn5bCP6L+H5aSnIiwNCiAgICAgICAgZGVzYzogIuaJgOmAieaWh+S7tuKAmCAiICsgZmlsZS5uYW1lICsgIiDigJnlpKflsI/ov4flpKcsIOS4jeW+l+i2hei/hyA1TS4iDQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZVN1Y2Nlc3MocmVzLCBmaWxlKSB7DQogICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLkuIrkvKDmlofku7YgIiArIGZpbGUubmFtZSArICIg5oiQ5YqfIik7DQogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOw0KICAgICAgfQ0KICAgICAgdGhpcy51cGxvYWRJbmZvPXJlcy5yZXN1bHQ7DQogICAgICB0aGlzLnVwbG9hZEluZm8udmlldz10cnVlOw0KICAgIH0sDQogICAgaGFuZGxlRXJyb3IoZXJyb3IsIGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yLnRvU3RyaW5nKCkpOw0KICAgIH0sDQogICAgY2xlYXJGaWxlcygpIHsNCiAgICAgIHRoaXMuJHJlZnMudXAxLmNsZWFyRmlsZXMoKTsNCiAgICB9LA0KICAgIC8v5LiL6L295qih5p2/DQogICAgZG93bmxvYWRUZW1wbGF0ZUNsaWNrKCl7DQogICAgICBsZXQgdGl0bGUgPSBbXTsNCiAgICAgIGxldCBrZXkgPSBbXTsNCiAgICAgIHVzZXJUYWdDb2x1bW5zLmZvckVhY2goZSA9PiB7DQogICAgICAgIHRpdGxlLnB1c2goZS50aXRsZSk7DQogICAgICAgIGtleS5wdXNoKGUua2V5KTsNCiAgICAgIH0pOw0KICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICB0aXRsZTogdGl0bGUsDQogICAgICAgIGtleToga2V5LA0KICAgICAgICBkYXRhOiB1c2VyVGFnRGF0YSwNCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLA0KICAgICAgICBmaWxlbmFtZTogIuS4i+i9veeUqOaIt+agh+etvuaooeeJiCINCiAgICAgIH07DQogICAgICBleGNlbC5leHBvcnRfYXJyYXlfdG9fZXhjZWwocGFyYW1zKTsNCiAgICB9LA0KICAgIGJlZm9yZVVwbG9hZEltcG9ydChmaWxlKSB7DQogICAgICB0aGlzLnVwbG9hZGZpbGUgPSBmaWxlOw0KICAgICAgY29uc3QgZmlsZUV4dCA9IGZpbGUubmFtZS5zcGxpdCgiLiIpLnBvcCgpLnRvTG9jYWxlTG93ZXJDYXNlKCk7DQogICAgICBpZiAoZmlsZUV4dCA9PSAieGxzeCIgfHwgZmlsZUV4dCA9PSAieGxzIikgew0KICAgICAgICB0aGlzLnJlYWRGaWxlKGZpbGUpOw0KICAgICAgICB0aGlzLmZpbGUgPSBmaWxlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoew0KICAgICAgICAgIHRpdGxlOiAi5paH5Lu257G75Z6L6ZSZ6K+vIiwNCiAgICAgICAgICBkZXNjOg0KICAgICAgICAgICAgICAi5omA6YCJ5paH5Lu24oCYICIgKw0KICAgICAgICAgICAgICBmaWxlLm5hbWUgKw0KICAgICAgICAgICAgICAiIOKAmeS4jeaYr0VYQ0VM5paH5Lu277yM6K+36YCJ5oup5ZCO57yA5Li6Lnhsc3jmiJbogIUueGxz55qERVhDRUzmlofku7bjgIIiLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KICAgIC8vIOivu+WPluaWh+S7tg0KICAgIHJlYWRGaWxlKGZpbGUpIHsNCiAgICAgIHRoaXMucmVhZGluZyA9IHRydWU7DQogICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOw0KICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoZSkgPT4gew0KICAgICAgICB0aGlzLnJlYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5paH5Lu26K+75Y+W5Ye66ZSZIik7DQogICAgICB9Ow0KICAgICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7DQogICAgICAgIGNvbnN0IGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7DQogICAgICAgIGNvbnN0IHsgaGVhZGVyLCByZXN1bHRzIH0gPSBleGNlbC5yZWFkKGRhdGEsICJhcnJheSIpOw0KICAgICAgICBjb25zdCB0YWJsZVRpdGxlID0gaGVhZGVyLm1hcCgoaXRlbSkgPT4gew0KICAgICAgICAgIHJldHVybiB7IHRpdGxlOiBpdGVtLCBrZXk6IGl0ZW0sIG1pbldpZHRoOiAxMDAsIGFsaWduOiAiY2VudGVyIiB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdmFyIHJlc3VsdHNPYmo9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHRzKSk7DQogICAgICAgIHZhciBkYXRhQXJyPVtdOw0KICAgICAgICByZXN1bHRzT2JqLmZvckVhY2goZnVuY3Rpb24gKHYsaSxhcnIpew0KICAgICAgICAgIGZvcih2YXIgbyBpbiB2KXsNCiAgICAgICAgICAgIGRhdGFBcnIucHVzaCh7dGFnTmFtZTp2W29dfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIGltcG9ydFN5c1RhZ0xpc3Qoew0KICAgICAgICAgIGRhdGFMaXN0OkpTT04uc3RyaW5naWZ5KGRhdGFBcnIpLA0KICAgICAgICAgIHR5cGU6MA0KICAgICAgICB9KS50aGVuKHJlcz0+ew0KICAgICAgICAgIGlmKHJlcy5zdWNjZXNzKXsNCiAgICAgICAgICAgIHRoaXMuZ2V0VGFnTGlzdCgpOw0KICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLor7vlj5bmlbDmja7miJDlip8iKTsNCiAgICAgICAgICAgIHRoaXMudXBsb2FkVmlzaWJsZT1mYWxzZTsNCiAgICAgICAgICAgIHRoaXMucmVhZGluZyA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH07DQogICAgfSwNCiAgICAvL+WvvOWHuuagh+etvg0KICAgIGV4cG9ydExhYmVsQ2xpY2soKXsNCiAgICAgIC8vIGV4cG9ydFRhZyh7fSkudGhlbihyZXM9PnsNCiAgICAgIC8vICAgaWYocmVzLnN1Y2Nlc3Mpew0KICAgICAgLy8gICAgIHdpbmRvdy5vcGVuKCByZXMucmVzdWx0KyAiP3ByZXZpZXc9dHJ1ZSIpOw0KICAgICAgLy8gICB9DQogICAgICAvLyB9KQ0KICAgIH0sDQogICAgLy/mj5DkuqTkuIrkvKDkv6Hmga8NCiAgICBzdWJtaXRVcGxvYWRUYWcoKXsNCg0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCiAgd2F0Y2g6ew0KICAgIHRhZ01vYmlsZVZpc2libGUodil7DQogICAgICBpZih2PT1mYWxzZSl7DQogICAgICAgIHRoaXMuJHJlZnNbInRhZ0Zvcm0iXS5yZXNldEZpZWxkcygpOw0KICAgICAgfQ0KICAgIH0sDQogICAgdXBsb2FkVmlzaWJsZSh2KXsNCiAgICAgIGlmKHY9PWZhbHNlKXsNCiAgICAgICAgdGhpcy51cGxvYWRmaWxlPScnDQogICAgICB9DQogICAgfSwNCiAgfQ0KfQ0K"},{"version":3,"sources":["tagManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tagManage.vue","sourceRoot":"src/views/sys/tag-manage","sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <Card>\r\n      <Row class=\"operation ui-operation\">\r\n        <div class=\"ui-operation-left\">\r\n          <Button @click=\"tagAddClick\" type=\"primary\" icon=\"md-add\">添加标签</Button>\r\n<!--          <Button><a href=\"../../../file/1.xlsx\" download=\"下载模板\">下载模板</a></Button>-->\r\n          <Button @click=\"downloadTemplateClick\">下载模板</Button>\r\n          <Button @click=\"uploadVisible=true\">导入标签</Button>\r\n<!--          <Button @click=\"exportLabelClick\">导出标签</Button>-->\r\n        </div>\r\n        <div class=\"ui-operation-right\">\r\n\r\n        </div>\r\n      </Row>\r\n      <!--      -->\r\n      <Row>\r\n        <div class=\"ui-tag-list\" style=\"margin-top: 15px;\">\r\n          <div class=\"ui-cmp-tagbtn\" v-for=\"(item,i) in cardList\" :key=\"i\">\r\n            <div class=\"ui-card-default-box\">\r\n              <label>{{item.tagName}}</label>\r\n              <div class=\"ui-btn-warp\">\r\n                <Icon\r\n                    type=\"ios-create-outline\"\r\n                    @click=\"tagEditClick(item)\"\r\n                    @click.stop\r\n                />\r\n                <Icon\r\n                    type=\"ios-trash-outline\"\r\n                    @click=\"tagDelClick(item)\"\r\n                    @click.stop\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Row>\r\n    </Card>\r\n\r\n    <!--新建|修改卡片-开始--->\r\n    <Modal\r\n        :title=\"\r\n              tagVisibleTitle == 'add'\r\n                ? $t('add') + '客户标签'\r\n                : $t('update') + '客户标签'\r\n            \"\r\n        v-model=\"tagMobileVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"500\"\r\n    >\r\n      <Form\r\n          ref=\"tagForm\"\r\n          :model=\"tagForm\"\r\n          :label-width=\"120\"\r\n          label-position=\"right\"\r\n          :rules=\"tagFormValidate\"\r\n          style=\"width:450px\"\r\n      >\r\n        <FormItem label=\"标签名称\" prop=\"name\">\r\n          <Input\r\n              v-model=\"tagForm.tagName\"\r\n              :placeholder=\"$t('pleaseEnter')\"\r\n          />\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"tagMobileVisible = false\">{{\r\n            $t(\"cancel\")\r\n          }}</Button>\r\n        <Button\r\n            type=\"primary\"\r\n            :loading=\"checkCodeLoading\"\r\n            @click=\"submitTag\"\r\n        >{{ $t(\"save\") }}</Button\r\n        >\r\n      </div> </Modal\r\n    ><!--新建|修改卡片-结束--->\r\n\r\n\r\n    <!--上传-开始--->\r\n    <Modal\r\n        title=\"导入模板\"\r\n        v-model=\"uploadVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"500\"\r\n    >\r\n      <Upload action :before-upload=\"beforeUploadImport\" accept=\".xls, .xlsx\">\r\n        <Button\r\n            :loading=\"reading\"\r\n            icon=\"ios-cloud-upload-outline\"\r\n            style=\"margin-right: 10px\"\r\n        >上传Excel文件</Button\r\n        >\r\n        <span v-if=\"uploadfile.name\"\r\n        >当前选择文件：{{ uploadfile.name }}</span\r\n        >\r\n      </Upload>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"uploadVisible = false\">{{\r\n            $t(\"cancel\")\r\n          }}</Button>\r\n      </div>\r\n    </Modal><!--上传-结束--->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 模版导入文件表数据\r\nimport {userTagColumns, userTagData} from \"@/libs/importTemplate\";\r\nimport {getAllBySysTagList,editSysTag,addSysTag,delSysTag,importSysTagList} from \"@/api/index\";\r\nimport excel from \"@/libs/excel\";\r\nexport default {\r\nname: \"tagManage\",\r\n  data(){\r\n    return{\r\n      uploadfile:'',\r\n      reading:false,\r\n      uploadVisible:false,\r\n      tagVisibleTitle:'add',\r\n      tagMobileVisible:false,\r\n      checkCodeLoading:false,\r\n      importTableData:[],\r\n      phoneImportColumns:[],\r\n      cardList:[{id:\"\",tagName:''},{id:\"\",tagName:''},{id:\"\",tagName:'1'}],\r\n      tagForm:{\r\n        tagName:'',\r\n        type:'0'\r\n      },\r\n      tagFormValidate:{\r\n        tagName: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n      },\r\n      accessToken: {}, // 上传token鉴权\r\n      uploadInfo:{\r\n        a:'',\r\n        b:'',\r\n        c:'',\r\n        d:'',\r\n        view:false\r\n      } //上传信息\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      this.accessToken = {\r\n        accessToken: this.getStore(\"accessToken\")\r\n      };\r\n      this.getTagList();\r\n    },\r\n    getTagList(){\r\n      getAllBySysTagList({}).then(res=>{\r\n        if(res.success){\r\n          this.cardList=res.result;\r\n        }\r\n      });\r\n    },\r\n    //新增标签\r\n    tagAddClick(){\r\n      this.tagVisibleTitle=\"add\";\r\n      this.tagMobileVisible=true;\r\n    },\r\n    //修改标签\r\n    tagEditClick(v){\r\n      this.tagVisibleTitle=\"edit\";\r\n      this.tagMobileVisible=true;\r\n      for(var i in v){\r\n        this.tagForm[i]=v[i];\r\n      }\r\n    },\r\n    //删除标签\r\n    tagDelClick(v){\r\n      delSysTag({ids:v.id}).then(res=>{\r\n        if(res.success){\r\n          this.$Message.success(this.$t(\"success\"));\r\n          this.getTagList();\r\n        }\r\n      })\r\n    },\r\n    //\r\n    submitTag(){\r\n        var formData={};\r\n        for(var i in this.tagForm){\r\n          if(i!='id'){\r\n            formData[i]=this.tagForm[i];\r\n          }\r\n        }\r\n        if(this.tagVisibleTitle==\"add\"){\r\n          addSysTag(formData).then(res=>{\r\n            if(res.success){\r\n              this.$Message.success(this.$t(\"success\"));\r\n              this.getTagList();\r\n              this.tagMobileVisible=false;\r\n            }\r\n          })\r\n        }else {\r\n          formData.id=this.tagForm.id;\r\n          editSysTag(formData).then(res=>{\r\n            if(res.success){\r\n              this.$Message.success(this.$t(\"success\"));\r\n              this.getTagList();\r\n              this.tagMobileVisible=false;\r\n            }\r\n          })\r\n        }\r\n    },\r\n\r\n    beforeUpload() {\r\n      // if (\r\n      //     this.$route.meta.permTypes &&\r\n      //     !this.$route.meta.permTypes.includes(\"upload\")\r\n      // ) {\r\n      //  // this.$Message.error(\"此处您没有上传权限(为演示功能，该按钮未配置隐藏)\");\r\n      //   return false;\r\n      // }\r\n      // return true;\r\n    },\r\n    handleMaxSize(file) {\r\n      this.$Notice.warning({\r\n        title: \"文件大小过大\",\r\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\r\n      });\r\n    },\r\n    handleSuccess(res, file) {\r\n      if (res.success) {\r\n        this.$Message.success(\"上传文件 \" + file.name + \" 成功\");\r\n        this.getDataList();\r\n      } else {\r\n        this.$Message.error(res.message);\r\n      }\r\n      this.uploadInfo=res.result;\r\n      this.uploadInfo.view=true;\r\n    },\r\n    handleError(error, file, fileList) {\r\n      this.$Message.error(error.toString());\r\n    },\r\n    clearFiles() {\r\n      this.$refs.up1.clearFiles();\r\n    },\r\n    //下载模板\r\n    downloadTemplateClick(){\r\n      let title = [];\r\n      let key = [];\r\n      userTagColumns.forEach(e => {\r\n        title.push(e.title);\r\n        key.push(e.key);\r\n      });\r\n      const params = {\r\n        title: title,\r\n        key: key,\r\n        data: userTagData,\r\n        autoWidth: true,\r\n        filename: \"下载用户标签模版\"\r\n      };\r\n      excel.export_array_to_excel(params);\r\n    },\r\n    beforeUploadImport(file) {\r\n      this.uploadfile = file;\r\n      const fileExt = file.name.split(\".\").pop().toLocaleLowerCase();\r\n      if (fileExt == \"xlsx\" || fileExt == \"xls\") {\r\n        this.readFile(file);\r\n        this.file = file;\r\n      } else {\r\n        this.$Notice.warning({\r\n          title: \"文件类型错误\",\r\n          desc:\r\n              \"所选文件‘ \" +\r\n              file.name +\r\n              \" ’不是EXCEL文件，请选择后缀为.xlsx或者.xls的EXCEL文件。\",\r\n        });\r\n      }\r\n      return false;\r\n    },\r\n    // 读取文件\r\n    readFile(file) {\r\n      this.reading = true;\r\n      const reader = new FileReader();\r\n      reader.readAsArrayBuffer(file);\r\n      reader.onerror = (e) => {\r\n        this.reading = false;\r\n        this.$Message.error(\"文件读取出错\");\r\n      };\r\n      reader.onload = (e) => {\r\n        const data = e.target.result;\r\n        const { header, results } = excel.read(data, \"array\");\r\n        const tableTitle = header.map((item) => {\r\n          return { title: item, key: item, minWidth: 100, align: \"center\" };\r\n        });\r\n        var resultsObj=JSON.parse(JSON.stringify(results));\r\n        var dataArr=[];\r\n        resultsObj.forEach(function (v,i,arr){\r\n          for(var o in v){\r\n            dataArr.push({tagName:v[o]})\r\n          }\r\n        })\r\n        importSysTagList({\r\n          dataList:JSON.stringify(dataArr),\r\n          type:0\r\n        }).then(res=>{\r\n          if(res.success){\r\n            this.getTagList();\r\n            this.$Message.success(\"读取数据成功\");\r\n            this.uploadVisible=false;\r\n            this.reading = false;\r\n          }\r\n        })\r\n      };\r\n    },\r\n    //导出标签\r\n    exportLabelClick(){\r\n      // exportTag({}).then(res=>{\r\n      //   if(res.success){\r\n      //     window.open( res.result+ \"?preview=true\");\r\n      //   }\r\n      // })\r\n    },\r\n    //提交上传信息\r\n    submitUploadTag(){\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  watch:{\r\n    tagMobileVisible(v){\r\n      if(v==false){\r\n        this.$refs[\"tagForm\"].resetFields();\r\n      }\r\n    },\r\n    uploadVisible(v){\r\n      if(v==false){\r\n        this.uploadfile=''\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}