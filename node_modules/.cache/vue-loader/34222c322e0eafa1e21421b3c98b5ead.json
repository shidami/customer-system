{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\toolbar\\toolbarMonitor.vue?vue&type=style&index=0&lang=less&scorp=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\toolbar\\toolbarMonitor.vue","mtime":1614579763311},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICIuL3Rvb2xiYXJDb25zdWx0aW5nU2VydmljZS5sZXNzIjsNCg=="},{"version":3,"sources":["toolbarMonitor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqsBA","file":"toolbarMonitor.vue","sourceRoot":"src/views/my-components/toolbar","sourcesContent":["<template>\r\n  <div class=\"model-box\">\r\n    <Row ref=\"cardBox\" :gutter=\"16\">\r\n      <Col span=\"4\" style=\"padding-right:20px\">\r\n        <div class=\"ui-panl-warp\">\r\n          <p class=\"ui-panl-header\">可选择的技能组</p>\r\n          <Menu\r\n              :active-name=\"itemListData.length>0?itemListData[0].id:0\"\r\n              class=\"ui-toolbar-monitor-item-box ui-menu-primary\"\r\n              style=\"width: 100%\"\r\n          >\r\n            <MenuItem\r\n                :name=\"item.id\"\r\n                @click.native=\"getDetail(item.id,item.text)\"\r\n                class=\"ui-toolbar-monitor-item\"\r\n                :class=\"ownSpaceLeftItem == item.id ? '' : ''\"\r\n                v-for=\"(item, i) in itemListData\"\r\n                :key=\"item.id\"\r\n                :data-name-1=\"i + 1\"\r\n            >\r\n              <span>{{ item.text }}</span>\r\n            </MenuItem>\r\n          </Menu>\r\n        </div>\r\n      </Col>\r\n      <Col span=\"20\">\r\n        <Alert class=\"ui-group-detail\"\r\n        >坐席列表\r\n          <span class=\"ui-group-detail-item\" data-title=\"技能组名称\" style=\"margin-left: 0 !important;\">--{{ groupDetailName }}--</span>\r\n          <span class=\"ui-group-detail-item\">共<span>{{ groupDetail.b }}</span\r\n          >人</span\r\n          >\r\n          <span class=\"ui-group-detail-item\" style=\"margin-left: 5px;\">空闲：<span>{{ groupDetail.c }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >示忙：<span>{{ groupDetail.d }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >呼入：<span>{{ groupDetail.e }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >呼出：<span>{{ groupDetail.f }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >通话：<span>{{ groupDetail.g }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >咨询：<span>{{ groupDetail.h }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >会议：<span>{{ groupDetail.i }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >保持：<span>{{ groupDetail.j }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >其他：<span>{{ groupDetail.k }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >离线：<span>{{ groupDetail.l }}</span></span\r\n          >\r\n          <span class=\"ui-group-detail-item\"\r\n          >事后整理：<span>{{ groupDetail.m }}</span></span\r\n          ></Alert\r\n        >\r\n        <div class=\"search\">\r\n          <Form\r\n              ref=\"toolbarMonitorSearchForm\"\r\n              :model=\"toolbarMonitorSearchForm\"\r\n              :label-width=\"80\"\r\n              class=\"ivu-form-inline\"\r\n          >\r\n            <FormItem label=\"关键字\" prop=\"keywords\">\r\n              <Input\r\n                  v-model=\"toolbarMonitorSearchForm.keywords\"\r\n                  placeholder=\"请输入\"\r\n                  style=\"width:200px\"\r\n              ></Input>\r\n            </FormItem>\r\n            <FormItem label=\"坐席状态\" prop=\"seatState\">\r\n              <Select\r\n                  v-model=\"toolbarMonitorSearchForm.seatState\"\r\n                  style=\"width:200px\"\r\n              >\r\n                <Option value=\"\">==全部==</Option>\r\n                <Option value=\"1\">空闲</Option>\r\n                <Option value=\"2\">忙碌</Option>\r\n                <Option value=\"3\">呼入</Option>\r\n                <Option value=\"4\">呼出</Option>\r\n                <Option value=\"5\">通话</Option>\r\n                <Option value=\"6\">咨询</Option>\r\n                <Option value=\"7\">会议</Option>\r\n                <Option value=\"9\">事后整理</Option>\r\n                <Option value=\"10\">保持</Option>\r\n                <Option value=\"8\">其他</Option>\r\n                <Option value=\"0\">离线</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <Form-item style=\"margin-left:-35px;\" class=\"br\">\r\n              <Button\r\n                  @click=\"handleSearch\"\r\n                  type=\"primary\"\r\n                  icon=\"ios-search\"\r\n              >{{ $t(\"search\") }}</Button\r\n              >\r\n              <Button @click=\"handleReset\">{{ $t(\"reset\") }}</Button>\r\n            </Form-item>\r\n          </Form>\r\n          <div>\r\n            <Row :gutter=\"16\">\r\n              <Col span=\"6\" v-for=\"(item, i) in cardItemSearchList\"\r\n                   :key=\"i\">\r\n                <div\r\n                    class=\"ui-card ui-satus\"\r\n                    @contextmenu.prevent=\"openMenu($event, item,i)\"\r\n                    :class=\"rightMenuActiveIndex==i?'rightMenuActive':''\"\r\n                >\r\n\r\n                  <div class=\"ui-card-header\">\r\n                    <div>\r\n                      姓名：<span class=\"text-val\">{{\r\n                        item.Name\r\n                      }}</span>\r\n                    </div>\r\n                    <div>\r\n                      工号：<span class=\"text-val\">{{ item.JobNum }}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"ui-card-body\">\r\n                    <div>\r\n                      <img\r\n                          v-if=\"item.Gender == '女'\"\r\n                          src=\"../../../assets/female.png\"\r\n                      />\r\n                      <img\r\n                          v-if=\"item.Gender == '男'\"\r\n                          src=\"../../../assets/male2.png\"\r\n                      />\r\n                    </div>\r\n                    <div class=\"\">\r\n                      <p>\r\n                        分机：<span class=\"text-val\">{{ item.Seat }}</span>\r\n                      </p>\r\n                      <p>\r\n                        状态：<span class=\"text-val\">{{\r\n                          setState(item.State)\r\n                        }}</span>\r\n                      </p>\r\n\r\n                      <p>\r\n                        时长：<span class=\"text-val\">{{\r\n                          (ChangeStateDuration(item)).setTimes\r\n                        }}</span>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        </div>\r\n      </Col>\r\n\r\n\r\n    </Row>\r\n\r\n    <!--坐席状态切换-->\r\n    <List\r\n        class=\"ui-seat-status-switch-visible\"\r\n        border\r\n        size=\"small\"\r\n        :style=\"{ 'left': left + 'px', 'top': top + 'px','width':'220px','position': 'absolute','background':'#fff','box-shadow':'0 0 8px rgba(0, 0, 0, 0.1)' }\"\r\n        style=\"z-index:999999999;display: block\"\r\n        v-show=\"seatStatusSwitch.Visible\"\r\n    >\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('Listen')\"\r\n          v-show=\"seatStatusSwitch.Listen\">监听</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('StopListen')\"\r\n          v-show=\"seatStatusSwitch.StopListen\">停止监听</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('ForceEnter')\"\r\n          v-show=\"seatStatusSwitch.ForceEnter\">强插</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('ForceRemove')\"\r\n          v-show=\"seatStatusSwitch.ForceRemove\">强拆</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('ForceSetIdle')\"\r\n          v-show=\"seatStatusSwitch.ForceSetIdle\">强制示闲</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('ForceSetBusy')\"\r\n          v-show=\"seatStatusSwitch.ForceSetBusy\">强制示忙</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('MoniterConf')\"\r\n          v-show=\"seatStatusSwitch.MoniterConf\">监听会议</ListItem>\r\n      <ListItem\r\n          @click.native=\"btnRightmenuClickHandler('StopMonitorConf')\"\r\n          v-show=\"seatStatusSwitch.StopMonitorConf\">停止监听会议</ListItem>\r\n    </List>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nvar openerW = parent;\r\nexport default {\r\n  name: \"monitor\",\r\n  props: [\"monitorModalVisible\"],\r\n  data() {\r\n    return {\r\n      GroupId:1,\r\n      name: \"\",\r\n      number: \"\",\r\n      toolbarMonitorSearchForm: {\r\n        keywords: \"\",\r\n        seatState: \"\",\r\n      },\r\n      groupDetailName:'',\r\n      //坐席头部标题\r\n      groupDetail: {\r\n        b: 0, //共N人\r\n        c: 0, //空闲\r\n        d: 0, //示忙\r\n        e: 0, //呼入\r\n        f: 0, //呼出\r\n        g: 0, //通话\r\n        h: 0, //咨询\r\n        i: 0, //会议\r\n        j: 0, //保持\r\n        k: 0, //其他\r\n        l: 0, //离线\r\n        m: 0, //排队等待数量\r\n      },\r\n      //卡片\r\n      cardItem: [],\r\n      cardItemSearchList:[],\r\n      //技能组\r\n      itemListData: [],\r\n      selectSeatStatusData: [\r\n        {\r\n          id: \"0\",\r\n          text: \"忙碌\",\r\n        },\r\n      ],\r\n      //坐席状态切换\r\n      seatStatusSwitch: {\r\n        Visible: false,\r\n        Listen: false, //监听\r\n        StopListen: false, //停止监听\r\n        ForceEnter: false, //强插\r\n        ForceRemove: false, //强拆\r\n        ForceSetIdle: false, //强制示闲\r\n        ForceSetBusy: false, //强制示忙\r\n        MoniterConf: false, //监听会议\r\n        StopMonitorConf: false, //停止监听会议\r\n      },\r\n      seatStatusSwitchClass: [\r\n        \"ui-error\",\r\n        \"ui-success\",\r\n        \"ui-warning\",\r\n        \"ui-info\",\r\n      ],\r\n      left: 0,\r\n      top: 0,\r\n      changeDurationInterval:null,\r\n      rightMenuActiveIndex:null,\r\n    };\r\n\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getSkillGroupListData(); //获取技能组\r\n      this.getSeatList();//获取坐席卡片\r\n    },\r\n    //获取技能组\r\n    getSkillGroupListData() {\r\n      var dataA=[];\r\n      var seatGroups = openerW.OcxCore.Session.getCTIAgentData().getSeatGroups().data;\r\n      for(var i in seatGroups){\r\n        var v=seatGroups[i];\r\n        dataA.push({\"id\":v.GroupId+\"\",\"text\":v.GroupName,\"value\":v.GroupId,\"code\":dataA.length+1})\r\n      }\r\n      this.GroupId=dataA[0].id;\r\n      this.itemListData=dataA;\r\n      this.groupDetailName=dataA[0].text;\r\n    },\r\n    //获取坐席卡片\r\n    getSeatList(){\r\n      var than=this;\r\n      window.setTimeout(function (){\r\n        var postData = {\r\n          GroupId : than.GroupId\r\n        };\r\n        //监控窗口加载完成后发送开始监控命令\r\n        openerW.OcxCommandFun.CTIAgentCommonAction(\"BeginMonitor\", postData,function(data){\r\n\r\n        },function(ex){\r\n          openerW.OcxCore.Utility.ShowLoading(false);\r\n          if(ex.Message != undefined && ex.Message != \"\") openerW.OcxCore.Utility.ShowTip(ex.Message, 1);\r\n        });\r\n\r\n      },200)\r\n      window.setTimeout(function (){\r\n        than.setSeatList();\r\n      },500)\r\n    },\r\n    setSeatList(){\r\n      var than=this;\r\n      var dataA=JSON.parse(localStorage.getItem('MonitorFormNotifys'));\r\n\r\n      var cmd=dataA.cmd;\r\n      var data=dataA.data.Data;\r\n      this.cardItem=data;\r\n      this.cardItemSearchList=than.cardItem;\r\n      if (cmd == \"MONITORSTATE_NOTIFY\")//监控坐席状态通知\r\n      {\r\n        this.setTitle(this.cardItemSearchList);\r\n      }\r\n      else if (cmd == \"GROUPWAITCOUNT_NOTIFY\")//技能排队等待数量通知\r\n      {\r\n        if(GroupId != null && GroupId == data.GroupId)\r\n        {\r\n          var waitCount = data.WaitCount || 0;\r\n          $(\"#lblWaitCount\").text(waitCount);\r\n        }\r\n      }\r\n      else if(cmd == \"CurrentUserStateChanged\")\r\n      {\r\n        if(!openerW.OcxCore.Session.IsCheckin())\r\n        {\r\n          $(\"#grid_View\").html(\"\");\r\n          _SeatDatas.clear();\r\n\r\n          than.closeThisWindow();//关闭窗口\r\n        }\r\n        /*         \telse if(openerW.OcxCore.Session.GetUserInfo() != null && openerW.OcxCore.Session.GetUserInfo().CTIMonitorStatus == openerW.OcxCore.Enums.CTIMonitorStatusFlag.INITSYSTEM.getIndex())\r\n                    {\r\n                        if (!!$(this).hasClass(\"selected\")) {\r\n                            $(this).removeClass(\"selected\");\r\n                        } else {\r\n                            $(\"#grid_View .selected\").removeClass(\"selected\");\r\n                            $(this).addClass(\"selected\");\r\n                        }\r\n                        var seatExtNum = $(this).attr(\"id\").toString().replace(\"seat_\",\"\");\r\n                        changeButtonState($(this),_SeatDatas.get(seatExtNum));\r\n                    }else\r\n                    {\r\n                        var seatExtNum = $(this).attr(\"id\").toString().replace(\"seat_\",\"\");\r\n                        changeButtonState($(this),_SeatDatas.get(seatExtNum));\r\n                    } */\r\n      }else if(cmd == \"MonitorOptionRes\")\r\n      {\r\n        openerW.OcxCore.Utility.ShowLoading(false);\r\n        if(data.Result == true)\r\n        {\r\n          openerW.OcxCore.Session.getCTIAgentData().setCTIMonitorStatus(data.CTIMonitorStatus);\r\n          var seat = _SeatDatas.get(data.CTIMonitorExtNumber);\r\n          seat.MonitorButton = data.MonitorButton;\r\n          _SeatDatas.put(data.CTIMonitorExtNumber+\"\", seat);\r\n          var seatObj = $(\"#\"+\"seat_\"+data.CTIMonitorExtNumber);\r\n          if(openerW.OcxCore.Session.getCTIAgentData().getCTIMonitorStatus() == openerW.OcxCore.Enums.CTIMonitorStatusFlag.INITSYSTEM.getIndex())\r\n          {\r\n            openerW.OcxCore.Session.getCTIAgentData().setCTIMonitorExtNumber(\"\");\r\n          }else\r\n          {\r\n            openerW.OcxCore.Session.getCTIAgentData().setCTIMonitorExtNumber(data.CTIMonitorExtNumber);\r\n          }\r\n\r\n          if(data.CloseMonitorDialog != undefined && data.CloseMonitorDialog == true)\r\n          {\r\n            than.closeThisWindow();//关闭窗口\r\n          }\r\n        }\r\n      }\r\n    },\r\n    closeThisWindow(){\r\n      //如果是通过父页面Layer弹框插件弹出的窗口\r\n      if(openerW.layer != undefined)\r\n      {\r\n        var index = openerW.layer.getFrameIndex(window.name); //获取窗口索引\r\n        openerW.layer.close(index);\r\n      }\r\n      else //如果是通过父页面artDialog弹框插件弹出的窗口\r\n      {\r\n        artApi.close();//关闭登录窗口\r\n      }\r\n    },\r\n    //获取坐席状态\r\n    getSeatStatus() {\r\n      var postData={\r\n        GroupId:this.GroupId\r\n      };\r\n      window.setTimeout(function (){\r\n        //监控窗口加载完成后发送开始监控命令\r\n        openerW.OcxCommandFun.CTIAgentCommonAction(\"BeginMonitor\", postData,function(data){\r\n\r\n          // function Notify(cmd, data){\r\n          //\r\n          //   console.log(cmd);\r\n          //   console.log(data);\r\n          // }\r\n\r\n        },function(ex){\r\n          openerW.OcxCore.Utility.ShowLoading(false);\r\n          if(ex.Message != undefined && ex.Message != \"\") openerW.OcxCore.Utility.ShowTip(ex.Message, 1);\r\n\r\n        });\r\n\r\n      },200)\r\n\r\n    },\r\n    //搜索\r\n    handleSearch() {\r\n      var searchForm=this.toolbarMonitorSearchForm;\r\n      var keywords = searchForm.keywords;\r\n      var seatState = searchForm.seatState;\r\n      var dataA=[];\r\n      var dataObj=JSON.parse(JSON.stringify(this.cardItem));\r\n      if(keywords==\"\" && seatState==\"\"){\r\n        dataA=this.cardItem;\r\n      }else if(keywords==\"\" && seatState!=\"\"){\r\n        dataObj.forEach(function (v,i,arr){\r\n          if(v.State==seatState){\r\n            dataA.push(v);\r\n          }\r\n        })\r\n      }else if(keywords!=\"\" && seatState==\"\"){\r\n        dataObj.forEach(function (v,i,arr){\r\n          if(v.Name.indexOf(keywords)!=-1||v.JobNum.toString().indexOf(keywords)!=-1||v.Seat.toString().indexOf(keywords)!=-1||v.Gender.toString().indexOf(keywords)!=-1){\r\n            dataA.push(v);\r\n          }\r\n        })\r\n      }else if(keywords!=\"\" && seatState!=\"\"){\r\n        dataObj.forEach(function (v,i,arr){\r\n          if((v.Name.indexOf(keywords)!=-1||v.JobNum.toString().indexOf(keywords)!=-1||v.Seat.toString().indexOf(keywords)!=-1||v.Gender.toString().indexOf(keywords)!=-1) && v.State==seatState ){\r\n            dataA.push(v);\r\n          }\r\n        })\r\n      }\r\n      this.cardItemSearchList=dataA;\r\n      this.setTitle(this.cardItemSearchList);\r\n      // if (keywords != \"\" || seatState != \"\") {\r\n      //   var showSeats = null;\r\n      //   if(keywords != \"\"){\r\n      //     showSeats = $(\".UserCard\")\r\n      //         .hide()\r\n      //         .filter(\":contains('\" + (keywords) + \"')\");\r\n      //     if(seatState != \"\")\r\n      //     {\r\n      //       var stateName = openerW.OcxCore.Enums.GetName(openerW.OcxCore.Enums.CTIAgentStatusFlag,seatState);\r\n      //       showSeats = showSeats.filter(\":contains('\" + (stateName) + \"')\");\r\n      //     }\r\n      //     showSeats.show();\r\n      //   }else{\r\n      //     var stateName = openerW.OcxCore.Enums.GetName(openerW.OcxCore.Enums.CTIAgentStatusFlag,seatState);\r\n      //     showSeats = $(\".UserCard\")\r\n      //         .hide()\r\n      //         .filter(\":contains('\" + (stateName) + \"')\")\r\n      //         .show();\r\n      //   }\r\n      //\r\n      // } else {\r\n      //   $(\".UserCard\").show();\r\n      // }\r\n\r\n      //$(\"#grid_View .selected\").removeClass(\"selected\");\r\n    },\r\n    //重置\r\n    handleReset() {\r\n      for (var i in this.toolbarMonitorSearchForm) {\r\n        this.toolbarMonitorSearchForm[i] = \"\";\r\n      }\r\n      this.$refs.toolbarMonitorSearchForm.resetFields();\r\n\r\n    },\r\n    //根据技能组查看坐席详情\r\n    getDetail(id,text) {\r\n      this.GroupId=id;\r\n      this.groupDetailName=text;\r\n      this.getSeatList();\r\n      //this.getSeatStatus();\r\n    },\r\n    //坐席状态切换右键菜单\r\n    openMenu(e, v,i) {\r\n      //cardItemSearchList\r\n      var than=this;\r\n      this.left = e.clientX;\r\n      this.top = e.clientY;\r\n      //var currentSeatObj = $(ev.currentTarget);\r\n      var seatExtNum = v.Seat;\r\n      if(!openerW.OcxCore.Session.IsCheckin())\r\n      {\r\n        return false;\r\n      }\r\n      if(openerW.OcxCore.Session.getCTIAgentData().getCTIMonitorStatus() == openerW.OcxCore.Enums.CTIMonitorStatusFlag.INITSYSTEM.getIndex())\r\n      {\r\n\r\n        this.rightMenuActiveIndex=i;\r\n        //$(\"#grid_View .selected\").removeClass(\"selected\");\r\n        //currentSeatObj.addClass(\"selected\");\r\n      }\r\n      else if (seatExtNum == openerW.OcxCore.Session.getCTIAgentData().getCTIMonitorExtNumber()){\r\n        // if (!currentSeatObj.hasClass(\"selected\")) {\r\n        //   $(\"#grid_View .selected\").removeClass(\"selected\");\r\n        //   currentSeatObj.addClass(\"selected\");\r\n        // }\r\n        this.rightMenuActiveIndex=i;\r\n      }\r\n      if(!openerW.OcxCore.Session.IsCheckin())\r\n      {\r\n        than.changeRightMenuState(null);\r\n      }\r\n      else\r\n      {\r\n        than.changeRightMenuState(v);\r\n      }\r\n\r\n\r\n\r\n      //this.seatStatusSwitchDefault(); //坐席状态菜单还原默认值\r\n\r\n\r\n      console.log(e.clientX)\r\n      console.log(e.clientY)\r\n\r\n\r\n    },\r\n    //坐席状态菜单还原默认值\r\n    seatStatusSwitchDefault() {\r\n      for (var i in this.seatStatusSwitch) {\r\n        this.seatStatusSwitch[i] = false;\r\n      }\r\n    },\r\n    //强制示忙\r\n    btnForcedBusyIndication() {},\r\n    //强制注销\r\n    btnCompulsoryCancellation() {},\r\n    //右键菜单处理\r\n    btnRightmenuClickHandler(cmd) {\r\n      var selectedSeat =  this.rightMenuActiveIndex;\r\n      if(selectedSeat==null)\r\n      {\r\n        openerW.OcxCore.Utility.ShowTip(\"请选择坐席\", 3);\r\n        return;\r\n      }\r\n      if(cmd == undefined || cmd == \"\")\r\n      {\r\n        openerW.OcxCore.Utility.ShowTip(\"操作无效\", 3);\r\n        return;\r\n      }\r\n      var seatExtNum = this.cardItemSearchList[selectedSeat].Seat;\r\n      var atentState = this.cardItemSearchList[selectedSeat].AtentState;\r\n      var monitorData = {\r\n        AgentDest:seatExtNum,\r\n        AtentState:atentState\r\n      };\r\n      if(cmd == \"SendTipMsg\")\r\n      {\r\n        sendMsg(seatExtNum);\r\n      }\r\n      else if(cmd == \"ForceCheckOut\")\r\n      {\r\n        openerW.OcxCore.DialogUtil.confirmDialog(\"Tips\", \"确定要强制注销所选坐席吗！\", function (r) {\r\n          if(r)\r\n          {\r\n            openerW.OcxCore.Utility.ShowLoading(true,\"处理中...\",5);\r\n            //发送相关监控命令\r\n            openerW.OcxCommandFun.CTIAgentCommonAction(cmd, monitorData,function(data){\r\n              openerW.OcxCore.Utility.ShowLoading(false);\r\n            },function(ex){\r\n              openerW.OcxCore.Utility.ShowLoading(false);\r\n              if(ex.Message != undefined && ex.Message != \"\") openerW.OcxCore.Utility.ShowTip(ex.Message, 1);\r\n            });\r\n          }\r\n        });\r\n      }\r\n      else\r\n      {\r\n        openerW.OcxCore.Utility.ShowLoading(true,\"处理中...\",5);\r\n        //发送相关监控命令\r\n        openerW.OcxCommandFun.CTIAgentCommonAction(cmd, monitorData,function(data){\r\n          //openerW.OcxCore.Utility.ShowLoading(false);\r\n        },function(ex){\r\n          openerW.OcxCore.Utility.ShowLoading(false);\r\n          if(ex.Message != undefined && ex.Message != \"\") openerW.OcxCore.Utility.ShowTip(ex.Message, 1);\r\n        });\r\n      }\r\n      this.seatStatusSwitch.Visible=false;\r\n    },\r\n    //强插\r\n    btnForcedInsertion() {},\r\n    //强拆\r\n    btnForcedDemolition() {},\r\n    //监控会议\r\n    btnMonitoringMeetings() {},\r\n    setState (v){\r\n      var stateName = openerW.OcxCore.Enums.GetName(openerW.OcxCore.Enums.CTIAgentStatusFlag,v);\r\n      return stateName;\r\n    },\r\n    ChangeStateDuration(v){\r\n      var than=this;\r\n      var _num=parseInt(v.ChangeStateDuration)+1;\r\n      var _time=openerW.OcxCore.FormatSeconds(_num);\r\n      v['setTimes']=_time;\r\n      window.setTimeout(function (){\r\n        than.ChangeStateDuration(v);\r\n        v.ChangeStateDuration=_num;\r\n      },1000);\r\n      return v;\r\n    },\r\n    changeDuration(){\r\n\r\n    },\r\n    //技能组统计明细\r\n    setTitle(data){\r\n      var than=this;\r\n      for(var j in than.groupDetail){\r\n        if(j==\"1\"){\r\n          than.groupDetail[j]='';\r\n        }else {\r\n          than.groupDetail[j]=0;\r\n        }\r\n      }\r\n      data.forEach(function (v,i,arr){\r\n        //空闲\r\n        if(v.State==1){\r\n          than.groupDetail.c++;\r\n\r\n          //示忙\r\n        }else if(v.State==2){\r\n          than.groupDetail.d++;\r\n\r\n          //呼入\r\n        }else if(v.State==3){\r\n          than.groupDetail.e++;\r\n\r\n          //呼出\r\n        }else if(v.State==4){\r\n          than.groupDetail.f++;\r\n\r\n          //通话\r\n        }else if(v.State==5){\r\n          than.groupDetail.g++;\r\n\r\n          //咨询\r\n        }else if(v.State==6){\r\n          than.groupDetail.h++;\r\n\r\n          //会议\r\n        }else if(v.State==7){\r\n          than.groupDetail.i++;\r\n\r\n          //其他\r\n        }else if(v.State==8){\r\n          than.groupDetail.k++;\r\n\r\n          //事后整理\r\n        }else if(v.State==9){\r\n          than.groupDetail.m++;\r\n\r\n          //保持\r\n        }else if(v.State==10){\r\n          than.groupDetail.j++;\r\n\r\n          //离线\r\n        }else if(v.State==0){\r\n          than.groupDetail.l++;\r\n\r\n        }\r\n      })\r\n      this.groupDetail.b=data.length\r\n    },\r\n    changeRightMenuState(v){\r\n      var than=this;\r\n      var a=0;\r\n      for (var i in v.MonitorButton){\r\n        if(than.seatStatusSwitch[i]!=undefined){\r\n          than.seatStatusSwitch[i]=v.MonitorButton[i]\r\n          if(v.MonitorButton[i]){\r\n            a++;\r\n          }\r\n        }\r\n      }\r\n      if(a<=0){\r\n        this.seatStatusSwitch.Visible = false;\r\n      }else {\r\n        this.seatStatusSwitch.Visible = true;\r\n      }\r\n\r\n    }\r\n  },\r\n  mounted(){\r\n    this.init();\r\n  },\r\n  watch:{\r\n    // cardItemSearchList:{\r\n    //   handler: function(v, o, arr) {\r\n    //\r\n    //   },\r\n    //   deep: true, //深度监听\r\n    // }\r\n  },\r\n  created() {\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scorp>\r\n@import \"./toolbarConsultingService.less\";\r\n</style>\r\n"]}]}