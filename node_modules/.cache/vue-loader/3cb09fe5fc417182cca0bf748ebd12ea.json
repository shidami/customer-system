{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\searchBox\\searchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\searchBox\\searchBox.vue","mtime":1614579763301},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsKICAgIGdldEFsbEJ5U3lzS25vd2xlZGdlQ2F0ZWdvcnksICAgICAvL+iOt+WPluefpeivhuexu+Wei+S/oeaBr++8jOm7mOiupOi/lOWbnjHnuqfoj5zljZXnsbvlnosKICAgIGdldEFsbEJ5U3lzS25vd2xlZGdlUGFnZSwgICAgICAgICAvL+agueaNruadoeS7tuiOt+WPluefpeivhueCueWIhumhteaVsOaNrgogIH0gZnJvbSAiQC9hcGkvaW5kZXgiOwogIGltcG9ydCBrbm93bGVkZ2VQcmV2aWV3IGZyb20gIi4uLy4uL2tub3dsZWRnZS9jb21wb25lbnRzL2tub3dsZWRnZS1wcmV2aWV3LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0ewogIGRhdGEoKXsKICAgIHJldHVybnsKICAgICAgdHJlZUxvYWRpbmc6ZmFsc2UsCiAgICAgIGl0ZW1Mb2FkaW5nOmZhbHNlLAogICAgICBjdXJyVGFiOifnn6Xor4blupMnLAogICAgICB0YWJUaXRsZTpbJ+i1hOaWmScsJ+S6kuWKqOiusOW9lScsJ+W4uOeUqOivrScsJ+efpeivhuW6kyddLAogICAgICB0cmVlRGF0YTpbXSwKICAgICAgdHJlZVRpdGxlOicnLAogICAgICBpdGVtRGF0YTpbXSwKICAgICAgc2VhcmNoS2V5OicnLAogICAgICBmb3JtOnsKICAgICAgICBjYXRlZ29yeUlkOicnLAogICAgICAgIGZsYWc6JycgICAgICAgICAgICAgICAgICAgLC8v5YWz6ZSu6K+N57G75Z6LIDDlhajpg6gx5qCH6aKYMuWGheWuuQogICAgICAgIGtleVdvcmQ6JycsCiAgICAgICAgcGFnZU51bWJlcjoxLAogICAgICAgIHBhZ2VTaXplOjEwLAogICAgICB9LAogICAgICB0b3RhbEVsZW1lbnRzOicnLAogICAgICBwb3BWaXNpYWJsZTpmYWxzZSwKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgaW5pdCgpewogICAgICB0aGlzLmdldFBhcmVudExpc3QoKQogICAgICB0aGlzLmdldERhdGFMaXN0KCkKICAgIH0sCiAgICBnZXREYXRhTGlzdCgpIHsKICAgICAgdGhpcy5pdGVtTG9hZGluZyA9IHRydWU7CiAgICAgIGdldEFsbEJ5U3lzS25vd2xlZGdlUGFnZSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W55+l6K+G54K55YiG6aG15pWw5o2uJykKICAgICAgICB0aGlzLml0ZW1Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5pdGVtRGF0YT1yZXMucmVzdWx0LmNvbnRlbnQKICAgICAgICAgIHRoaXMudG90YWxFbGVtZW50cz1yZXMucmVzdWx0LnRvdGFsRWxlbWVudHMKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLAogICAgICAgICAgICBjb250ZW50OiByZXMubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRQYXJlbnRMaXN0KCkgewogICAgICB0aGlzLnRyZWVMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0QWxsQnlTeXNLbm93bGVkZ2VDYXRlZ29yeSgpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W55+l6K+G57G75Z6L5pWw5o2uJykKICAgICAgICB0aGlzLnRyZWVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICByZXMucmVzdWx0LmZvckVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgewogICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnRyZWVEYXRhID0gcmVzLnJlc3VsdDsKICAgICAgICAgIGxldCBmaXJzdCA9IHsKICAgICAgICAgICAgaWQ6ICIiLAogICAgICAgICAgICB0aXRsZTogIuWFqOmDqCIsCiAgICAgICAgICAgIHNlbGVjdGVkOnRydWUsCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy50cmVlVGl0bGU9J+WFqOmDqCcKICAgICAgICAgIHRoaXMudHJlZURhdGEudW5zaGlmdChmaXJzdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLAogICAgICAgICAgICBjb250ZW50OiByZXMubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZW5kSGFuZGVyKCl7CiAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+WKn+iDveacquWujOWWhCcpCiAgICB9LAogICAgc2VsZWN0VHJlZSh2KSB7CiAgICAgIGlmICh2Lmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDovazmjaJudWxs5Li6IiIKICAgICAgICBmb3IgKGxldCBhdHRyIGluIHZbMF0pIHsKICAgICAgICAgIGlmICh2WzBdW2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgdlswXVthdHRyXSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodlswXSk7CiAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgdGhpcy50cmVlVGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICAgIHRoaXMuZm9ybS5jYXRlZ29yeUlkPWRhdGEuaWQKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRyZWVUaXRsZSA9ICflhajpg6gnOwogICAgICAgIHRoaXMuZm9ybS5jYXRlZ29yeUlkPScnCiAgICAgICAgdGhpcy4kcmVmcy50cmVlLmRhdGFbMF0uc2VsZWN0ZWQ9dHJ1ZQogICAgICB9CiAgICB9LAogICAgbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBwYXJlbnRJZDogaXRlbS5pZCwKICAgICAgfQogICAgICAvLyDlvILmraXliqDovb3moJHlrZDnsbvmlbDmja4KICAgICAgZ2V0QWxsQnlTeXNLbm93bGVkZ2VDYXRlZ29yeShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGNhbGxiYWNrKHJlcy5yZXN1bHQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcGFnZUNoYW5nZUhhbmRlcihwYWdlKSB7CiAgICAgIGNvbnNvbGUubG9nKCfpobXnoIHliIfmjaInKQogICAgICB0aGlzLmZvcm0ucGFnZU51bWJlcj1wYWdlCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKQogICAgfSwKICAgIGdldFR5cGVEYXRhKCl7CiAgICAgIHRoaXMucG9wVmlzaWFibGU9ZmFsc2UKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpCiAgICB9LAogICAgcHJldmlld01vcmUoZGF0YSkgewogICAgICB0aGlzLiRyZWZzLnByZXZpZXcuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMuJHJlZnMucHJldmlldy52aXNpYWJsZSA9IHRydWU7CiAgICB9LAogIH0sCiAgY29tcG9uZW50czp7CiAgICBrbm93bGVkZ2VQcmV2aWV3LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgICB0aGlzLmZvcm0uZmxhZz0nMCc7CiAgfSwKfQo="},{"version":3,"sources":["searchBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"searchBox.vue","sourceRoot":"src/views/my-components/searchBox","sourcesContent":["<template>\r\n  <div style=\"width: 300px;border:1px solid #000\">\r\n    <div class=\"flex\">\r\n      <div v-for=\"item in tabTitle\" :class=\"[currTab==item?'tabBar-select':'','tabBar']\" @click=\"currTab=item\">{{item}}</div>\r\n    </div>\r\n    <div class=\"tabContent\" v-show=\"currTab=='资料'\"></div>\r\n    <div class=\"tabContent\" v-show=\"currTab=='互动记录'\"></div>\r\n    <div class=\"tabContent\" v-show=\"currTab=='常用语'\"></div>\r\n    <div class=\"tabContent tabContent-knowledge flex\" v-show=\"currTab=='知识库'\">\r\n      <Spin size=\"large\" fix v-if=\"itemLoading\"></Spin>\r\n      <div>\r\n        <Poptip transfer trigger=\"click\" placement=\"left\" title=\"选择分类\" width=\"250\" v-model='popVisiable'>\r\n          <div class=\"knowledgeType-title\"><Icon type=\"md-list\" class=\"mr-10\"/>{{treeTitle}}</div>\r\n          <div slot=\"content\" style=\"position:relative;min-height:5vh\">\r\n            <Tree ref=\"tree\" :data=\"treeData\" :load-data=\"loadData\" @on-select-change=\"selectTree\"></Tree>\r\n           <div class=\"poptip-bottom\">\r\n              <Button type=\"primary\" size=\"small\" @click=\"getTypeData\">确定</Button>\r\n            </div>\r\n            <Spin size=\"large\" fix v-if=\"treeLoading\"></Spin>\r\n          </div>\r\n        </Poptip>\r\n      </div>\r\n      <Row gutter=\"0\">\r\n        <Col span=\"6\">\r\n          <Select v-model=\"form.flag\">\r\n            <Option value=\"0\">全部</Option>\r\n            <Option value=\"1\">标题</Option>\r\n            <Option value=\"2\">内容</Option>\r\n          </Select>\r\n        </Col>\r\n        <Col span=\"18\">\r\n          <Input class=\"flex1\" v-model=\"form.keyWord\" search suffix=\"ios-search\" @on-search=\"getDataList\" placeholder=\"输入节点名搜索\" />\r\n        </Col>\r\n      </Row>\r\n      <div class=\"flex1\">\r\n        <div class=\"knowledge-item cur-pointer pd-10\" v-for=\"item in itemData\" @click=\"previewMore(item)\">\r\n            <Button type=\"primary\" class=\"knowledge-item-button\" @click.stop=\"sendHander\">发送</Button>\r\n            <div>\r\n              <Icon type=\"ios-book-outline\" />\r\n              <p class=\"ml-10 font-14 knowledge-item-title\">{{item.title}}</p>\r\n            </div>\r\n            <div class=\"color-888 overflow-text\">{{item.contentText}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"knowledge-page\"><Page :current=\"form.pageNumber\" :total=\"totalElements\" @on-change=\"pageChangeHander\" simple/></div>\r\n      <knowledge-preview ref=\"preview\"></knowledge-preview>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getAllBySysKnowledgeCategory,     //获取知识类型信息，默认返回1级菜单类型\r\n    getAllBySysKnowledgePage,         //根据条件获取知识点分页数据\r\n  } from \"@/api/index\";\r\n  import knowledgePreview from \"../../knowledge/components/knowledge-preview.vue\";\r\nexport default{\r\n  data(){\r\n    return{\r\n      treeLoading:false,\r\n      itemLoading:false,\r\n      currTab:'知识库',\r\n      tabTitle:['资料','互动记录','常用语','知识库'],\r\n      treeData:[],\r\n      treeTitle:'',\r\n      itemData:[],\r\n      searchKey:'',\r\n      form:{\r\n        categoryId:'',\r\n        flag:''                   ,//关键词类型 0全部1标题2内容\r\n        keyWord:'',\r\n        pageNumber:1,\r\n        pageSize:10,\r\n      },\r\n      totalElements:'',\r\n      popVisiable:false,\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      this.getParentList()\r\n      this.getDataList()\r\n    },\r\n    getDataList() {\r\n      this.itemLoading = true;\r\n      getAllBySysKnowledgePage(this.form).then(res => {\r\n        console.log('获取知识点分页数据')\r\n        this.itemLoading = false;\r\n        console.log(res)\r\n        if (res.success) {\r\n          this.itemData=res.result.content\r\n          this.totalElements=res.result.totalElements\r\n        }else{\r\n          this.$Message.error({\r\n            background: true,\r\n            content: res.message\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getParentList() {\r\n      this.treeLoading = true;\r\n      getAllBySysKnowledgeCategory().then(res => {\r\n        console.log('获取知识类型数据')\r\n        this.treeLoading = false;\r\n        if (res.success) {\r\n          res.result.forEach(function(e) {\r\n            if (e.isParent) {\r\n              e.loading = false;\r\n              e.children = [];\r\n            }\r\n          });\r\n          this.treeData = res.result;\r\n          let first = {\r\n            id: \"\",\r\n            title: \"全部\",\r\n            selected:true,\r\n          };\r\n          this.treeTitle='全部'\r\n          this.treeData.unshift(first);\r\n        } else {\r\n          this.$Message.error({\r\n            background: true,\r\n            content: res.message\r\n          });\r\n        }\r\n      });\r\n    },\r\n    sendHander(){\r\n      this.$Message.error('功能未完善')\r\n    },\r\n    selectTree(v) {\r\n      if (v.length > 0) {\r\n        // 转换null为\"\"\r\n        for (let attr in v[0]) {\r\n          if (v[0][attr] == null) {\r\n            v[0][attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v[0]);\r\n        let data = JSON.parse(str);\r\n        this.treeTitle = data.title;\r\n        this.form.categoryId=data.id\r\n      } else {\r\n        this.treeTitle = '全部';\r\n        this.form.categoryId=''\r\n        this.$refs.tree.data[0].selected=true\r\n      }\r\n    },\r\n    loadData(item, callback) {\r\n      let params = {\r\n        parentId: item.id,\r\n      }\r\n      // 异步加载树子类数据\r\n      getAllBySysKnowledgeCategory(params).then(res => {\r\n        if (res.success) {\r\n          res.result.forEach(function(e) {\r\n            if (e.isParent) {\r\n              e.loading = false;\r\n              e.children = [];\r\n            }\r\n          });\r\n          callback(res.result);\r\n        }\r\n      });\r\n    },\r\n    pageChangeHander(page) {\r\n      console.log('页码切换')\r\n      this.form.pageNumber=page\r\n      this.getDataList()\r\n    },\r\n    getTypeData(){\r\n      this.popVisiable=false\r\n      this.getDataList()\r\n    },\r\n    previewMore(data) {\r\n      this.$refs.preview.data = data;\r\n      this.$refs.preview.visiable = true;\r\n    },\r\n  },\r\n  components:{\r\n    knowledgePreview,\r\n  },\r\n  mounted() {\r\n    this.init()\r\n    this.form.flag='0';\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.tabBar{background-color: #eee;line-height: 40px;flex: 1;text-align: center;border-bottom: 1px solid #ccc;}\r\n.tabBar-select{background: #fff;border-bottom: none;}\r\n.tabContent{min-height: 400px;display: flex;flex-direction:column;align-items: stretch;flex: 1;padding: 5px;}\r\n.tabContent-knowledge{justify-content: flex-start;}\r\n.knowledgeType-title{font-size: 14px;padding:10px 10px;cursor: pointer;}\r\n.knowledge-item{position: relative;}\r\n.knowledge-item-title{display: inline;}\r\n.knowledge-item-button{display: none;position: absolute;right: 0;top: 50%;transform: translateY(-50%);}\r\n.knowledge-item:hover{background-color: #E5E5E5;}\r\n.knowledge-item:hover .knowledge-item-button{display: inline-block;}\r\n.knowledge-page{text-align: center;}\r\n\r\n.poptip-bottom{text-align: right;border-top: 1px solid #eee;padding-top: 8px;}\r\n</style>\r\n"]}]}