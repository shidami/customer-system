{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\IVR\\Opation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\IVR\\Opation.vue","mtime":1614579763271},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2FkZEl2cldvcmtGbG93LGluc3RhbGxJVlIsdW5pbnN0YWxsSVZSfSBmcm9tICJAL2FwaS9pbmRleCI7DQovLyB2YXIgb3AgPSB3aW5kb3cuV0ZDb3JlLkdldFF1ZXJ5KCJvcCIpOw0KLy8gdmFyIG9wZW5lcmlkID0gd2luZG93LldGQ29yZS5HZXRRdWVyeSgib3BlbmVyaWQiKTsNCnZhciBmcmFtZSA9IHBhcmVudDsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIk9wYXRpb24iLA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgb3A6d2luZG93LldGQ29yZS5HZXRRdWVyeSgib3AiKSwNCiAgICAgIG9wZW5lcmlkOndpbmRvdy5XRkNvcmUuR2V0UXVlcnkoIm9wZW5lcmlkIiksDQogICAgICB3TXlmbG93RGF0YTp0b3Aud015Zmxvd0RhdGENCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KICAgIGluaXQoKXsNCiAgICAgIHZhciB0aGFuPXRoaXM7DQogICAgICBpZihmcmFtZT09bnVsbCkgcmV0dXJuOw0KICAgICAgdmFyIHRpdGxlPSIiOw0KICAgICAgc3dpdGNoICh0aGFuLm9wKSB7DQogICAgICAgIGNhc2UgInNhdmUiOg0KICAgICAgICAgICQoIiNkaXZUaXRsZSIpLmh0bWwoIuato+WcqOS/neWtmC4uLiIpOw0KICAgICAgICAgIHRoYW4uc2F2ZSgpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJpbnN0YWxsIjoNCiAgICAgICAgICAkKCIjZGl2VGl0bGUiKS5odG1sKCLmraPlnKjlronoo4UuLi4iKTsNCiAgICAgICAgICB0aGFuLmluc3RhbGwoKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAidW5pbnN0YWxsIjoNCiAgICAgICAgICAkKCIjZGl2VGl0bGUiKS5odG1sKCLmraPlnKjljbjovb0uLi4iKTsNCiAgICAgICAgICB0aGFuLnVuaW5zdGFsbCgwKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiZGVsZXRlIjoNCiAgICAgICAgICAkKCIjZGl2VGl0bGUiKS5odG1sKCLmraPlnKjliKDpmaQuLi4iKTsNCiAgICAgICAgICB0aGFuLnVuaW5zdGFsbCgxKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNhdmUoKSB7DQogICAgICB2YXIgZmxvd2RhdGEgPSB0aGlzLndNeWZsb3dEYXRhOw0KICAgICAgdmFyIGZsb3dqc29uZGF0YSA9IGZsb3dkYXRhLnBhcnNlVG9Kc29uKCk7DQogICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KGZsb3dqc29uZGF0YSk7DQogICAgICB2YXIgc2ltcGxlZGF0YSA9IGZsb3dkYXRhLnBhcnNlVG9TaW1wbGVKc29uKCk7DQogICAgICB2YXIgc2ltcGxlSnNvbiA9IEpTT04uc3RyaW5naWZ5KHNpbXBsZWRhdGEpOw0KICAgICAgZGVidWdnZXINCiAgICAgIGFkZEl2cldvcmtGbG93KHtqc29uOiBqc29uLHNpbXBsZUpzb246c2ltcGxlSnNvbiB9KS50aGVuKHJlcz0+ew0KICAgICAgICBpZihyZXMuc3VjY2Vzcyl7DQogICAgICAgICAgV0ZDb3JlLkRpYWxvZ1V0aWxzLnRpcERpYWxvZygi5L+d5a2Y5oiQ5YqfISIsMywxKTsNCiAgICAgICAgfWVsc2Ugew0KICAgICAgICAgIFdGQ29yZS5EaWFsb2dVdGlscy50aXBEaWFsb2coIuS/neWtmOWksei0pSIsMyw3KTsNCiAgICAgICAgfQ0KICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgnbmV3IFJvYWRVSS5XaW5kb3coKS5jbG9zZSgpOycsIDMwMDEgKTsNCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGluc3RhbGwoKSB7DQogICAgICAvL3ZhciBmbG93ZGF0YSA9IGZyYW1lLm15ZmxvdzEuR2V0TXlGbG93RGF0YSgpOw0KICAgICAgdmFyIGZsb3dkYXRhID0gdGhpcy53TXlmbG93RGF0YTsNCiAgICAgIHZhciBmbG93anNvbmRhdGEgPSBmbG93ZGF0YS5wYXJzZVRvSnNvbigpOw0KICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShmbG93anNvbmRhdGEpOw0KICAgICAgdmFyIHNpbXBsZWRhdGEgPSBmbG93ZGF0YS5wYXJzZVRvU2ltcGxlSnNvbigpOw0KICAgICAgdmFyIHNpbXBsZUpzb24gPSBKU09OLnN0cmluZ2lmeShzaW1wbGVkYXRhKTsNCiAgICAgIGluc3RhbGxJVlIoe2lkOiBmbG93ZGF0YS5pZCwganNvbjoganNvbixzaW1wbGVKc29uOnNpbXBsZUpzb24gfSkudGhlbihyZXM9PnsNCiAgICAgICAgaWYocmVzLnN1Y2Nlc3Mpew0KICAgICAgICAgIFdGQ29yZS5EaWFsb2dVdGlscy50aXBEaWFsb2coIumDqOe9suaIkOWKnyEiLDIsMSk7DQogICAgICAgIH1lbHNlIHsNCiAgICAgICAgICBXRkNvcmUuRGlhbG9nVXRpbHMudGlwRGlhbG9nKCLpg6jnvbLlpLHotKUiLDIsNyk7DQogICAgICAgIH0NCiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoJ25ldyBSb2FkVUkuV2luZG93KCkuY2xvc2UoKTsnLCAyMDAxICk7DQogICAgICB9KQ0KICAgICAgLy8gV0ZDb3JlLkFqYXhKc29uKCIvY2N0YWRtaW4vSVZSRGVzaWduZXJTREsvUGxhdGZvcm0vV29ya0Zsb3cvRGVzaWduZXIvSW5zdGFsbC5kbyIsDQogICAgICAvLyB7aWQ6IGZsb3dkYXRhLmlkLCBqc29uOiBqc29uLHNpbXBsZUpzb246c2ltcGxlSnNvbiB9LGZ1bmN0aW9uKGRhdGEpew0KICAgICAgLy8gICBpZihkYXRhLkNvZGUgPT0gMSkNCiAgICAgIC8vICAgew0KICAgICAgLy8gICAgIFdGQ29yZS5EaWFsb2dVdGlscy50aXBEaWFsb2coIumDqOe9suaIkOWKnyEiLDIsMSk7DQogICAgICAvLyAgIH0NCiAgICAgIC8vICAgZWxzZQ0KICAgICAgLy8gICB7DQogICAgICAvLyAgICAgV0ZDb3JlLkRpYWxvZ1V0aWxzLnRpcERpYWxvZyhkYXRhLk1lc3NhZ2UpOw0KICAgICAgLy8gICB9DQogICAgICAvLyAgIHdpbmRvdy5zZXRUaW1lb3V0KCduZXcgUm9hZFVJLldpbmRvdygpLmNsb3NlKCk7JywgMjAwICk7DQogICAgICAvLyB9LHRydWUpOw0KICAgIH0sDQogICAgdW5pbnN0YWxsKHR5cGUpIHsNCiAgICAgLy8gdmFyIGZsb3dkYXRhID0gZnJhbWUubXlmbG93MS5HZXRNeUZsb3dEYXRhKCk7DQogICAgICB2YXIgZmxvd2RhdGEgPSB0aGlzLndNeWZsb3dEYXRhOw0KICAgICAgdW5pbnN0YWxsSVZSKHsgaWQ6IGZsb3dkYXRhLmlkLCB0eXBlOiB0eXBlIH0pLnRoZW4ocmVzPT57DQogICAgICAgIGlmKHJlcy5zdWNjZXNzKXsNCiAgICAgICAgICBXRkNvcmUuRGlhbG9nVXRpbHMudGlwRGlhbG9nKHR5cGUgPT0gMCA/ICLnpoHnlKgiIDogIuWIoOmZpCIrIuaIkOWKnyEiLDIsMSk7DQogICAgICAgICAgaWYodHlwZT09MSl7DQogICAgICAgICAgICB0b3Aud215ZmxvdzEuY2xlYXJNeUZsb3dEYXRhKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgV0ZDb3JlLkRpYWxvZ1V0aWxzLnRpcERpYWxvZyh0eXBlID09IDAgPyAi56aB55SoIiA6ICLliKDpmaQiKyLlpLHotKUhIiwyLDcpOw0KICAgICAgICB9DQogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCduZXcgUm9hZFVJLldpbmRvdygpLmNsb3NlKCk7JywgMjAwMSApOw0KICAgICAgfSkNCiAgICAgIC8vIFdGQ29yZS5BamF4SnNvbigiL2NjdGFkbWluL0lWUkRlc2lnbmVyU0RLL1BsYXRmb3JtL1dvcmtGbG93L0Rlc2lnbmVyL1VuSW5zdGFsbC5kbyIsDQogICAgICAvLyAgICAgeyBpZDogZmxvd2RhdGEuaWQsIHR5cGU6IHR5cGUgfSxmdW5jdGlvbihkYXRhKXsNCiAgICAgIC8vICAgaWYoZGF0YS5Db2RlID09IDEpDQogICAgICAvLyAgIHsNCiAgICAgIC8vICAgICBXRkNvcmUuRGlhbG9nVXRpbHMudGlwRGlhbG9nKCh0eXBlID09IDAgPyAi56aB55SoIiA6ICLliKDpmaQiKSArICLmiJDlip8hIiwyLDEpOw0KICAgICAgLy8gICAgIGlmICh0eXBlID09IDEpIHsNCiAgICAgIC8vICAgICAgIC8vZnJhbWUubXlmbG93MS5jbGVhck15Rmxvd0RhdGEoKTsNCiAgICAgIC8vICAgICAgIHRvcC53bXlmbG93MS5jbGVhck15Rmxvd0RhdGEoKTsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgIH0NCiAgICAgIC8vICAgZWxzZQ0KICAgICAgLy8gICB7DQogICAgICAvLyAgICAgV0ZDb3JlLkRpYWxvZ1V0aWxzLnRpcERpYWxvZyhkYXRhLk1lc3NhZ2UpOw0KICAgICAgLy8gICB9DQogICAgICAvLyAgIHdpbmRvdy5zZXRUaW1lb3V0KCduZXcgUm9hZFVJLldpbmRvdygpLmNsb3NlKCk7JywgMSk7DQogICAgICAvLyB9LHRydWUpOw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpew0KICAgIHRoaXMuaW5pdCgpOw0KICB9DQp9DQo="},{"version":3,"sources":["Opation.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Opation.vue","sourceRoot":"src/views/my-components/IVR","sourcesContent":["<template>\r\n  <div style=\"text-align: center;\">\r\n    <img src=\"../../../assets/loading/load1.gif\" style=\"margin: 15px auto\">\r\n    <p>正在保存...</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {addIvrWorkFlow,installIVR,uninstallIVR} from \"@/api/index\";\r\n// var op = window.WFCore.GetQuery(\"op\");\r\n// var openerid = window.WFCore.GetQuery(\"openerid\");\r\nvar frame = parent;\r\nexport default {\r\n  name: \"Opation\",\r\n  data(){\r\n    return{\r\n      op:window.WFCore.GetQuery(\"op\"),\r\n      openerid:window.WFCore.GetQuery(\"openerid\"),\r\n      wMyflowData:top.wMyflowData\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      var than=this;\r\n      if(frame==null) return;\r\n      var title=\"\";\r\n      switch (than.op) {\r\n        case \"save\":\r\n          $(\"#divTitle\").html(\"正在保存...\");\r\n          than.save();\r\n          break;\r\n        case \"install\":\r\n          $(\"#divTitle\").html(\"正在安装...\");\r\n          than.install();\r\n          break;\r\n        case \"uninstall\":\r\n          $(\"#divTitle\").html(\"正在卸载...\");\r\n          than.uninstall(0);\r\n          break;\r\n        case \"delete\":\r\n          $(\"#divTitle\").html(\"正在删除...\");\r\n          than.uninstall(1);\r\n          break;\r\n      }\r\n    },\r\n    save() {\r\n      var flowdata = this.wMyflowData;\r\n      var flowjsondata = flowdata.parseToJson();\r\n      var json = JSON.stringify(flowjsondata);\r\n      var simpledata = flowdata.parseToSimpleJson();\r\n      var simpleJson = JSON.stringify(simpledata);\r\n      debugger\r\n      addIvrWorkFlow({json: json,simpleJson:simpleJson }).then(res=>{\r\n        if(res.success){\r\n          WFCore.DialogUtils.tipDialog(\"保存成功!\",3,1);\r\n        }else {\r\n          WFCore.DialogUtils.tipDialog(\"保存失败\",3,7);\r\n        }\r\n        window.setTimeout('new RoadUI.Window().close();', 3001 );\r\n      })\r\n\r\n    },\r\n    install() {\r\n      //var flowdata = frame.myflow1.GetMyFlowData();\r\n      var flowdata = this.wMyflowData;\r\n      var flowjsondata = flowdata.parseToJson();\r\n      var json = JSON.stringify(flowjsondata);\r\n      var simpledata = flowdata.parseToSimpleJson();\r\n      var simpleJson = JSON.stringify(simpledata);\r\n      installIVR({id: flowdata.id, json: json,simpleJson:simpleJson }).then(res=>{\r\n        if(res.success){\r\n          WFCore.DialogUtils.tipDialog(\"部署成功!\",2,1);\r\n        }else {\r\n          WFCore.DialogUtils.tipDialog(\"部署失败\",2,7);\r\n        }\r\n        window.setTimeout('new RoadUI.Window().close();', 2001 );\r\n      })\r\n      // WFCore.AjaxJson(\"/cctadmin/IVRDesignerSDK/Platform/WorkFlow/Designer/Install.do\",\r\n      // {id: flowdata.id, json: json,simpleJson:simpleJson },function(data){\r\n      //   if(data.Code == 1)\r\n      //   {\r\n      //     WFCore.DialogUtils.tipDialog(\"部署成功!\",2,1);\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     WFCore.DialogUtils.tipDialog(data.Message);\r\n      //   }\r\n      //   window.setTimeout('new RoadUI.Window().close();', 200 );\r\n      // },true);\r\n    },\r\n    uninstall(type) {\r\n     // var flowdata = frame.myflow1.GetMyFlowData();\r\n      var flowdata = this.wMyflowData;\r\n      uninstallIVR({ id: flowdata.id, type: type }).then(res=>{\r\n        if(res.success){\r\n          WFCore.DialogUtils.tipDialog(type == 0 ? \"禁用\" : \"删除\"+\"成功!\",2,1);\r\n          if(type==1){\r\n            top.wmyflow1.clearMyFlowData();\r\n          }\r\n        }else {\r\n          WFCore.DialogUtils.tipDialog(type == 0 ? \"禁用\" : \"删除\"+\"失败!\",2,7);\r\n        }\r\n        window.setTimeout('new RoadUI.Window().close();', 2001 );\r\n      })\r\n      // WFCore.AjaxJson(\"/cctadmin/IVRDesignerSDK/Platform/WorkFlow/Designer/UnInstall.do\",\r\n      //     { id: flowdata.id, type: type },function(data){\r\n      //   if(data.Code == 1)\r\n      //   {\r\n      //     WFCore.DialogUtils.tipDialog((type == 0 ? \"禁用\" : \"删除\") + \"成功!\",2,1);\r\n      //     if (type == 1) {\r\n      //       //frame.myflow1.clearMyFlowData();\r\n      //       top.wmyflow1.clearMyFlowData();\r\n      //     }\r\n      //   }\r\n      //   else\r\n      //   {\r\n      //     WFCore.DialogUtils.tipDialog(data.Message);\r\n      //   }\r\n      //   window.setTimeout('new RoadUI.Window().close();', 1);\r\n      // },true);\r\n    }\r\n  },\r\n  mounted(){\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}