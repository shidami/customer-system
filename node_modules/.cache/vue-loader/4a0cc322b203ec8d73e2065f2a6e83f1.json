{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\blacklist-manage\\blacklistManage.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\blacklist-manage\\blacklistManage.vue","mtime":1614579763351},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpAaW1wb3J0ICIuLi9ibGFja2xpc3QtbWFuYWdlL2JsYWNrbGlzdE1hbmFnZS5sZXNzIjsNCg=="},{"version":3,"sources":["blacklistManage.vue"],"names":[],"mappings":";AACA","file":"blacklistManage.vue","sourceRoot":"src/views/sys/blacklist-manage","sourcesContent":["<style lang=\"less\">\r\n@import \"../blacklist-manage/blacklistManage.less\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n      <Card>\r\n          <Row>\r\n              <div style=\"height:100%\">\r\n                  <div class=\"own-space ui-time-schedule-settings\">\r\n                      <Col :xs=\"8\" :sm=\"8\" :md=\"6\" :lg=\"6\" class=\"own-space-left bg-default\">\r\n                          <div class=\"own-header\">\r\n                              <Button\r\n                                      type=\"default\"\r\n                                      icon=\"md-add\"\r\n                                      @click=\"blackListGroupMobileVisibleAddClick\"\r\n                              >添加黑名单组</Button\r\n                              >\r\n                          </div>\r\n                          <Menu\r\n                                  :active-name=\"blackListGroups.length>0?blackListGroups[0].id:0\"\r\n                                  class=\"own-space-left-item-box\"\r\n                                  style=\"width: 100%\"\r\n                          >\r\n\r\n                              <MenuItem\r\n                                      v-for=\"(item, i) in blackListGroups\"\r\n                                      :name=\"item.id\"\r\n                                      @click.native=\"clickItem(item.id)\"\r\n                                      class=\"own-space-left-item\"\r\n                                      :class=\"groupId == item.id ? 'own-space-left-item ivu-menu-item ivu-menu-item-active ivu-menu-item-selected' : ''\"\r\n                                      :key=\"item.id\"\r\n                                      :data-name-1=\"i + 1\"\r\n                              >\r\n                                  <span>{{ item.name }}</span>\r\n                                  <div class=\"ui-icon-box\">\r\n                                      <Icon\r\n                                              type=\"ios-create-outline\"\r\n                                              @click=\"blackListGroupMobileVisibleEditClick(item)\"\r\n                                              @click.stop\r\n                                      />\r\n                                      <Icon\r\n                                              type=\"ios-trash-outline\"\r\n                                              @click=\"blackListGroupDelClick(item)\"\r\n                                              @click.stop\r\n                                      />\r\n                                  </div>\r\n                              </MenuItem>\r\n                          </Menu>\r\n                      </Col>\r\n                      <Col :xs=\"16\" :sm=\"16\" :md=\"18\" :lg=\"18\">\r\n                          <div class=\"own-space-right\">\r\n                              <Row v-if=\"openSearch\">\r\n                                  <Form\r\n                                          ref=\"searchForm\"\r\n                                          :model=\"searchForm\"\r\n                                          inline\r\n                                          :label-width=\"80\"\r\n                                  >\r\n                                      <Form-item label=\"黑名单信息\" prop=\"resource\">\r\n                                          <Input\r\n                                                  type=\"text\"\r\n                                                  v-model=\"searchForm.resource\"\r\n                                                  placeholder=\"请输入黑名单信息\"\r\n                                                  clearable\r\n                                                  style=\"width: 200px\"\r\n                                          />\r\n                                      </Form-item>\r\n                                      <Form-item class=\"no-margin br\">\r\n                                          <Button\r\n                                                  @click=\"handleSearch\"\r\n                                                  type=\"primary\"\r\n                                                  icon=\"ios-search\"\r\n\r\n                                          >{{ $t(\"search\") }}</Button\r\n                                          >\r\n                                          <Button @click=\"handleReset\">{{ $t(\"reset\") }}</Button>\r\n                                          <a class=\"drop-down\" @click=\"dropDown\">\r\n                                              {{ dropDownContent }}\r\n                                              <Icon :type=\"dropDownIcon\"></Icon>\r\n                                          </a>\r\n                                      </Form-item>\r\n                                  </Form>\r\n                              </Row>\r\n                              <Row class=\"operation ui-operation\">\r\n                                <div class=\"ui-operation-left\" v-show=\"openTip && selectCount > 0\">\r\n                                  <Row class=\"ui-alert-warp\">\r\n                                    <Alert>\r\n                                      {{ $t(\"tableTileSelected\") }}\r\n                                      <span class=\"select-count\">{{ selectCount }}</span>\r\n                                      {{ $t(\"tableTileTerm\") }}\r\n                                      <a class=\"select-clear\" @click=\"clearSelectAll\">{{\r\n                                          $t(\"clear\")\r\n                                        }}</a>\r\n                                    </Alert>\r\n                                  </Row>\r\n                                  <Button @click=\"delAll\" icon=\"md-trash\">{{$t(\"deleteList\")}}</Button><!-- 批量删除 -->\r\n                                </div>\r\n                                <div class=\"ui-operation-right\" v-show=\"openTip && selectCount <= 0\">\r\n                                  <Button @click=\"addBlackList\" type=\"primary\" icon=\"md-add\">{{$t(\"add\")}}</Button><!-- 增加 -->\r\n                                  <Button @click=\"importBlackList\" icon=\"md-exit\">{{$t(\"import\")}}</Button><!-- 导入 -->\r\n                                  <Button @click=\"handleReset\" icon=\"md-refresh\">{{ $t(\"refresh\") }}</Button><!-- 刷新 -->\r\n                                  <Button type=\"dashed\" @click=\"openSearch=!openSearch\">{{openSearch ? \"关闭搜索\" : \"开启搜索\"}}</Button>\r\n                                  <Button type=\"dashed\" @click=\"blackTableColumnsVisible=true\">表格展示列</Button>\r\n                                </div>\r\n                              </Row>\r\n\r\n                              <Row>\r\n                                  <Table\r\n                                          :columns=\"columnsSet\"\r\n                                          :data=\"blackDataList\"\r\n                                          ref=\"table\"\r\n                                          sortable=\"custom\"\r\n                                          @on-selection-change=\"showSelect\"\r\n                                          @on-row-click=\"showDetail\"\r\n                                  ></Table>\r\n                              </Row>\r\n                              <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n                                  <Page\r\n                                          :current=\"searchForm.pageNumber\"\r\n                                          :total=\"total\"\r\n                                          :page-size=\"searchForm.pageSize\"\r\n                                          @on-change=\"changePage\"\r\n                                          @on-page-size-change=\"changePageSize\"\r\n                                          :page-size-opts=\"[10, 20, 50]\"\r\n                                          size=\"small\"\r\n                                          show-total\r\n                                          show-elevator\r\n                                          show-sizer\r\n                                  >\r\n                                  </Page>\r\n                              </Row>\r\n                          </div>\r\n                      </Col>\r\n                  </div>\r\n              </div>\r\n          </Row>\r\n      </Card>\r\n\r\n\r\n      <!--新建|修改黑名单组-开始--->\r\n      <Modal\r\n              :title=\"\r\n              blackListGroupMobileVisibleTitle == 'add'\r\n                ? $t('add') + '黑名单组'\r\n                : $t('update') + '黑名单组'\r\n            \"\r\n              v-model=\"blackListGroupMobileVisible\"\r\n              :closable=\"false\"\r\n              :mask-closable=\"false\"\r\n              :width=\"500\"\r\n      >\r\n          <Form\r\n                  ref=\"blackListGroupForm\"\r\n                  :model=\"blackListGroupForm\"\r\n                  :label-width=\"120\"\r\n                  label-position=\"right\"\r\n                  :rules=\"blackListGroupFormValidate\"\r\n                  style=\"width:450px\"\r\n          >\r\n              <FormItem label=\"黑名单组名称\" prop=\"name\">\r\n                  <Input\r\n                          v-model=\"blackListGroupForm.name\"\r\n                          :placeholder=\"$t('pleaseEnter')\"\r\n                  />\r\n              </FormItem>\r\n              <!--<FormItem label=\"选项\" prop=\"delFlag\">-->\r\n                  <!--<CheckboxGroup v-model=\"blackListGroupForm.delFlag\">-->\r\n                      <!--<Checkbox label=\"有效\"></Checkbox>-->\r\n                  <!--</CheckboxGroup>-->\r\n              <!--</FormItem>-->\r\n              <FormItem label=\"备注\" prop=\"remark\">\r\n                  <Input\r\n                          v-model=\"blackListGroupForm.remark\"\r\n                          :placeholder=\"$t('pleaseEnter')\"\r\n                  />\r\n              </FormItem>\r\n          </Form>\r\n          <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"blackListGroupMobileVisible = false\">{{\r\n                  $t(\"cancel\")\r\n                  }}</Button>\r\n              <Button\r\n                      type=\"primary\"\r\n                      :loading=\"checkCodeLoading\"\r\n                      @click=\"submitBlackListGroup\"\r\n              >{{ $t(\"save\") }}</Button\r\n              >\r\n          </div> </Modal\r\n      ><!--新建|修改黑名单组-结束--->\r\n\r\n\r\n      <!--新建|修改黑名单-开始--->\r\n      <Modal\r\n              :title=\"\r\n              blackListMobileVisibleTitle == 'add'\r\n                ? $t('add') + '黑名单'\r\n                : $t('update') + '黑名单'\r\n            \"\r\n              v-model=\"blackListMobileVisible\"\r\n              :closable=\"false\"\r\n              :mask-closable=\"false\"\r\n              :width=\"500\"\r\n      >\r\n          <Form\r\n                  ref=\"blackListForm\"\r\n                  :model=\"blackListForm\"\r\n                  :label-width=\"120\"\r\n                  label-position=\"right\"\r\n                  :rules=\"blackListFormValidate\"\r\n                  style=\"width:450px\"\r\n          >\r\n              <FormItem label=\"黑名单用户\" prop=\"name\">\r\n                  <Input\r\n                          v-model=\"blackListForm.name\"\r\n                          :placeholder=\"$t('pleaseEnter')\"\r\n                  />\r\n              </FormItem>\r\n              <FormItem label=\"黑名单类型\" prop=\"type\">\r\n                  <Select v-model=\"blackListForm.type\">\r\n                      <Option value=\"0\">电话</Option>\r\n                      <Option value=\"1\">客户ID</Option>\r\n                      <Option value=\"2\">邮箱</Option>\r\n                  </Select>\r\n              </FormItem>\r\n              <!--<FormItem label=\"选项\" prop=\"delFlag\">-->\r\n                  <!--<CheckboxGroup v-model=\"blackListForm.delFlag\">-->\r\n                      <!--<Checkbox label=\"有效\"></Checkbox>-->\r\n                  <!--</CheckboxGroup>-->\r\n              <!--</FormItem>-->\r\n              <FormItem label=\"黑名单信息\" prop=\"resource\">\r\n                  <Input\r\n                          v-model=\"blackListForm.resource\"\r\n                          :placeholder=\"$t('pleaseEnter')\"\r\n                  />\r\n              </FormItem>\r\n              <FormItem label=\"备注\" prop=\"remark\">\r\n                  <Input\r\n                          v-model=\"blackListForm.remark\"\r\n                          :placeholder=\"$t('pleaseEnter')\"\r\n                  />\r\n              </FormItem>\r\n          </Form>\r\n          <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"blackListMobileVisible = false\">{{\r\n                  $t(\"cancel\")\r\n                  }}</Button>\r\n              <Button\r\n                      type=\"primary\"\r\n                      :loading=\"checkCodeLoading\"\r\n                      @click=\"submitBlackList\"\r\n              >{{ $t(\"save\") }}</Button\r\n              >\r\n          </div> </Modal\r\n      ><!--新建|修改黑名单-结束--->\r\n\r\n\r\n      <!--导入-开始--->\r\n      <Modal\r\n              title=\"导入黑名单\"\r\n              v-model=\"importBlackListMobileVisible\"\r\n              :closable=\"false\"\r\n              :mask-closable=\"false\"\r\n              :width=\"500\"\r\n      >\r\n          <Form\r\n                  ref=\"importBlackListForm\"\r\n                  :model=\"importBlackListForm\"\r\n                  :label-width=\"120\"\r\n                  label-position=\"right\"\r\n                  :rules=\"importBlackListFormValidate\"\r\n                  style=\"width:450px\"\r\n          >\r\n              <FormItem label=\"导入黑名单\" prop=\"file\">\r\n                  <!--<Input-->\r\n                          <!--v-model=\"importBlackListForm.file\"-->\r\n                          <!--:placeholder=\"$t('pleaseEnter')\"-->\r\n                  <!--/>-->\r\n                  <Upload v-model=\"importBlackListForm.file\" action=\"//jsonplaceholder.typicode.com/posts/\" :action=\"uploadAudioFileUrl\" :before-upload=\"beforeUploadImport\" :format=\"['excel']\"\r\n                          :max-size=\"30720\"\r\n                          type=\"drag\"\r\n                          ref=\"up\">\r\n                      <Button icon=\"ios-cloud-upload-outline\">Upload files</Button>\r\n                  </Upload>\r\n              </FormItem>\r\n          </Form>\r\n          <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"blackListMobileVisible = false\">{{\r\n                  $t(\"cancel\")\r\n                  }}</Button>\r\n              <Button\r\n                      type=\"primary\"\r\n                      :loading=\"checkCodeLoading\"\r\n                      @click=\"submitImportBlackList\"\r\n              >{{ $t(\"save\") }}</Button\r\n              >\r\n          </div> </Modal\r\n      ><!--导入-结束--->\r\n\r\n      <!--自定义表格展示的列-开始--->\r\n      <Modal\r\n              title=\"自定义表格展示的列\"\r\n              v-model=\"blackTableColumnsVisible\"\r\n              :closable=\"false\"\r\n              :mask-closable=\"false\"\r\n              :width=\"500\"\r\n      >\r\n          <Form\r\n                  ref=\"blackTableColumnsForm\"\r\n                  :label-width=\"120\"\r\n                  label-position=\"right\"\r\n                  style=\"width:450px\"\r\n          >\r\n          <!---{{columnsSetData}}-->\r\n              <FormItem label=\"可选的表格列名\" prop=\"file\">\r\n                  <CheckboxGroup v-model=\"columnsSetData\" v-for=\"(item,i) in columns\" :key=\"i\">\r\n                    <Checkbox :label=\"item.title\" :disabled=\"item.checkeds\"></Checkbox>\r\n                </CheckboxGroup>\r\n              </FormItem>\r\n          </Form>\r\n          <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"blackTableColumnsVisible = false\">{{\r\n                  $t(\"cancel\")\r\n                  }}</Button>\r\n              <Button\r\n                      type=\"primary\"\r\n                      :loading=\"checkCodeLoading\"\r\n                      @click=\"btnBlackTableColumns\"\r\n              >{{ $t(\"save\") }}</Button\r\n              >\r\n          </div> </Modal\r\n      ><!--自定义表格展示的列-结束--->\r\n\r\n    <!-- 来电接听提示 -->\r\n    <div id=\"ocxDivCallAlerting\" class=\"CallAlertMain\" style=\"display:block;\">\r\n      <div class=\"mainbg\">\r\n        <div class=\"headTitle\">\r\n          <div class=\"headTitleImg\"></div>\r\n        </div>\r\n        <div class=\"mainContent\">\r\n          <div class=\"CallAlertPhoto\"><img /></div>\r\n          <div class=\"rightInfoContent\">\r\n            <table id=\"customerCallInTb\">\r\n              <tr>\r\n                <th>来电号码：</th>\r\n                <td><span id=\"ocxlblCallinCaller\"></span></td>\r\n              </tr>\r\n              <tr>\r\n                <th>归属地：</th>\r\n                <td><span id=\"ocxlblLocalInfo\"></span></td>\r\n              </tr>\r\n            </table>\r\n            <table id=\"seatCallInTb\" style=\"display:none;\">\r\n              <tr>\r\n                <th>来电坐席：</th>\r\n                <td><span id=\"ocxlblCallerUserName\"></span></td>\r\n              </tr>\r\n              <tr>\r\n                <th>工号：</th>\r\n                <td><span id=\"ocxlblCallerUserCode\"></span></td>\r\n              </tr>\r\n              <tr>\r\n                <th>分机：</th>\r\n                <td><span id=\"ocxlblCallerExtNumber\"></span></td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class=\"btnbar\">\r\n          <button id=\"ocxBtnAnswer1\" keyid=\"Answer\" class=\"btnAnswer1\" type=\"button\"\r\n                  style=\"display:none;\"></button>\r\n          <button id=\"ocxBtnHugeUp1\" keyid=\"Hangup\" class=\"btnHugeUp1\" type=\"button\"></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getBlackListGroups,\r\n    getBlackList,\r\n    editBlackListGroups,\r\n    delBlackListGroups,\r\n    editBlackList,\r\n    delBlackList\r\n} from \"@/api/index\";\r\nexport default {\r\n  components: {},\r\n  name: \"blacklistManage\",\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      openTip:true,\r\n      activeName: \"基本信息\",\r\n      area: 86,\r\n        openSearch:false,\r\n      blackListGroupMobileVisible:false,//\r\n      blackListGroupMobileVisibleTitle:\"edit\",//\r\n        blackListMobileVisible:false,//\r\n        blackListMobileVisibleTitle:\"edit\",//\r\n        importBlackListMobileVisible:false,//\r\n        blackTableColumnsVisible:false,//自定义表格展示的列\r\n        //黑名单组\r\n      blackListGroupForm:{\r\n          id:\"\",\r\n          name:\"\",\r\n          remark:\"\"\r\n      },//黑名单组\r\n      blackListGroupFormValidate:{\r\n          name: [\r\n              {\r\n                  required: true,\r\n                  message: this.$t(\"pleaseEnter\"),\r\n                  trigger: \"blur\",\r\n              },\r\n          ]\r\n      },\r\n        //黑名单\r\n        blackListForm:{\r\n            id:\"\",\r\n            name:\"\",\r\n            type:\"0\",\r\n            delFlag:\"有效\",\r\n            remark:\"\",\r\n            resource:\"\"\r\n        },//黑名单组\r\n        blackListFormValidate:{\r\n            type: [\r\n                {\r\n                    required: true,\r\n                    message: this.$t(\"pleaseEnter\"),\r\n                    trigger: \"blur\",\r\n                },\r\n            ],\r\n            resource: [\r\n                {\r\n                    required: true,\r\n                    message: this.$t(\"pleaseEnter\"),\r\n                    trigger: \"blur\",\r\n                },\r\n            ]\r\n\r\n        },\r\n        importBlackListForm:{\r\n            file:\"\",\r\n        },//黑名单组\r\n        importBlackListFormValidate:{\r\n            name: [\r\n                {\r\n                    required: true,\r\n                    message: this.$t(\"pleaseEnter\"),\r\n                    trigger: \"blur\",\r\n                },\r\n            ]\r\n        },\r\n\r\n      ownSpaceLeftItem: 1,\r\n      groupId: 1,//当前选中的组\r\n        selectCount:0,\r\n      //黑名单组\r\n        blackListGroups: [],\r\n      //黑名单列表\r\n        blackDataList:[],\r\n        columnsSetData:[],\r\n        columnsSet:[],\r\n        columns: [\r\n            {\r\n                title: \"复选框\", //复选框\r\n                type: \"selection\",\r\n                width: 60,\r\n                align: \"center\",\r\n                'checkeds':true //自定义属性，默认选中，必须展示的数据\r\n            },\r\n            {\r\n                title: \"序号\", //序号\r\n                type: \"index\",\r\n                width: 60,\r\n                align: \"center\",\r\n            },\r\n            {\r\n                title: \"黑名单用户\", //姓名\r\n                key: \"name\",\r\n                minwidth: 150,\r\n                sortable: true,\r\n                'checkeds':true,//自定义属性，默认选中，必须展示的数据\r\n            },\r\n            {\r\n                title: \"黑名单类型\", //呼叫类型\r\n                key: \"type\",\r\n                minwidth: 120,\r\n                render:(h,params)=>{\r\n                     var typeObj={0:\"电话\",1:\"客户\",2:\"邮箱\"};\r\n                    return h(\"div\",typeObj[params.row.type]);\r\n                }\r\n            },\r\n            {\r\n                title: \"黑名单信息\", //备注\r\n                key: \"resource\",\r\n                minwidth: 90,\r\n            },\r\n            {\r\n                title: \"备注\", //备注\r\n                key: \"remark\",\r\n                minwidth: 120,\r\n            },\r\n            {\r\n                title: this.$t(\"operation\"), //操作\r\n                key: \"active\",\r\n                width: 100,\r\n                'checkeds':true, //自定义属性，默认选中，必须展示的数据\r\n                render: (h, params) => {\r\n                    return h(\"div\", [\r\n                        //编辑\r\n                        h('Tooltip',{props: {\r\n                                placement: 'top',\r\n                                transfer: true\r\n                            }},[h(\r\n                            \"Icon\",\r\n                            {\r\n                                props: {\r\n                                    type: \"ios-create-outline\",\r\n                                    size: \"\",\r\n                                },\r\n                                style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                                on: {\r\n                                    click: () => {\r\n                                        this.rowEdit(params.row);\r\n                                    },\r\n                                },\r\n                            },\r\n                            this.$t(\"play\")\r\n                        ),h('span', {\r\n                            slot: 'content',\r\n                            style: {\r\n                                whiteSpace: 'normal'\r\n                            }\r\n                        }, '编辑')]),\r\n\r\n\r\n                        //删除\r\n                        h('Tooltip',{props: {\r\n                                placement: 'top',\r\n                                transfer: true\r\n                            }},[h(\r\n                            \"Icon\",\r\n                            {\r\n                                props: {\r\n                                    type: \"ios-trash-outline\",\r\n                                    size: \"\",\r\n                                },\r\n                                style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                                on: {\r\n                                    click: () => {\r\n                                        this.rowDel(params.row);\r\n                                    },\r\n                                },\r\n                            },\r\n                            this.$t(\"play\")\r\n                        ),h('span', {\r\n                            slot: 'content',\r\n                            style: {\r\n                                whiteSpace: 'normal'\r\n                            }\r\n                        }, '删除')]),\r\n\r\n\r\n\r\n\r\n                        // //编辑\r\n                        // h(\r\n                        //     \"Button\",\r\n                        //     {\r\n                        //         props: {\r\n                        //             type: \"warning\",\r\n                        //             size: \"small\",\r\n                        //             icon: \"ios-create-outline\",\r\n                        //         },\r\n                        //         style: {\r\n                        //             marginRight: \"5px\",\r\n                        //         },\r\n                        //         on: {\r\n                        //             click: () => {\r\n                        //                 this.rowEdit(params.row);\r\n                        //             },\r\n                        //         },\r\n                        //     },\r\n                        //     this.$t(\"edit\")\r\n                        // ),\r\n                        // //删除 <Icon type=\"ios-trash-outline\" />\r\n                        // h(\r\n                        //     \"Button\",\r\n                        //     {\r\n                        //         props: {\r\n                        //             type: \"error\",\r\n                        //             size: \"small\",\r\n                        //             icon: \"md-trash\",\r\n                        //         },\r\n                        //         on: {\r\n                        //             click: () => {\r\n                        //                 this.rowDel(params.row);\r\n                        //             },\r\n                        //         },\r\n                        //     },\r\n                        //     this.$t(\"delete\")\r\n                        // ),\r\n                    ]);\r\n                },\r\n            },\r\n        ],\r\n        searchForm: {\r\n            group:\"\",\r\n            resource:\"\",\r\n            number: \"\",\r\n            pageNumber: 1,\r\n            pageSize: 10,\r\n        },\r\n        total: 0,\r\n\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.initData();\r\n      this.columnsSet=this.columns;\r\n      this.columnsInit();\r\n    },\r\n    //表格默认显示的列名\r\n    columnsInit(){     \r\n      this.columnsSet=this.columns;\r\n      var dataA=[];\r\n\r\n      this.columnsSet.forEach(function(v,i,arr){\r\n        if(v.checkeds){\r\n          dataA.push(v.title)\r\n        }\r\n      })\r\n      this.columnsSetData=dataA;\r\n      \r\n    },\r\n    //\r\n    initData(id) {\r\n        this.getgetBlackListGroup(id);//获取黑名单组目录\r\n      //this.getBlackList();//获取黑名单列表\r\n      //this.getGetWorkdaySettingsList();//获取工作日设置\r\n      //this.getHolidayVacationsList();//获取节假日\r\n\r\n    },\r\n    //获取黑名单列表组\r\n    getgetBlackListGroup(id) {\r\n      getBlackListGroups({}).then((res) => {\r\n          this.blackListGroups=res.result;\r\n        if (res.success) {\r\n          if(res.result.length>0){\r\n            this.timePlanList = res.result;\r\n            if(id==undefined){\r\n              this.groupId = res.result[0].id;\r\n            }else{\r\n              this.groupId=id;\r\n            }\r\n            this.getBlackList(this.groupId);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    clickItem(id){\r\n        this.groupId=id;\r\n        this.getBlackList(id);\r\n        this.$refs.searchForm.resetFields();\r\n       // this.handleReset();\r\n    },\r\n    //获取黑名单列表\r\n    getBlackList(id) {\r\n        var serarchForm={};\r\n        for(var i in this.searchForm){\r\n            if(this.searchForm[i]!=\"\"){\r\n                serarchForm[i]=this.searchForm[i];\r\n            }\r\n\r\n        }\r\n        if(id==undefined){\r\n            serarchForm.groupId=this.groupId;\r\n        }else {\r\n            serarchForm.groupId=id;\r\n        }\r\n        if(this.searchForm.resource!=\"\"){\r\n            serarchForm.resource=this.searchForm.resource\r\n        }\r\n        getBlackList(serarchForm).then((res) => {\r\n            if (res.success) {\r\n                this.blackDataList=res.result.records;\r\n                this.total = res.result.total;\r\n            }\r\n        });\r\n    },\r\n      //新建黑名单组\r\n      blackListGroupMobileVisibleAddClick() {\r\n          this.blackListGroupMobileVisible = true;\r\n          this.blackListGroupMobileVisibleTitle = \"add\";\r\n      },\r\n      //修改黑名单组\r\n      blackListGroupMobileVisibleEditClick(v) {\r\n          this.blackListGroupMobileVisible = true;\r\n          this.blackListGroupMobileVisibleTitle = \"edit\";\r\n          this.blackListGroupForm.id = v.id;\r\n          this.blackListGroupForm.name = v.name;\r\n          this.blackListGroupForm.remark = v.remark;\r\n      },\r\n      //删除黑名单组\r\n      blackListGroupDelClick(v){\r\n          editBlackListGroups({id:v.id,name:v.name,delFlag:1}).then(res=>{\r\n              if(res.success){\r\n                  this.$Message.success(this.$t(\"success\"));\r\n                  this.getgetBlackListGroup()\r\n              }\r\n          })\r\n      },\r\n      //提交新增|修改黑名单组\r\n      submitBlackListGroup(){\r\n          //editBlackListGroups\r\n          var formData ={};\r\n          for(var i in this.blackListGroupForm){\r\n              if(this.blackListGroupForm[i]!=undefined&& this.blackListGroupForm[i]!=\"\"){\r\n                  formData[i]=this.blackListGroupForm[i];\r\n              }\r\n           }\r\n          // if(formData.delFlag!=undefined){\r\n          //     formData.delFlag=1;\r\n          // }else {\r\n          //     formData.delFlag=0;\r\n          // }\r\n          formData.delFlag=0;\r\n          this.$refs[\"blackListGroupForm\"].validate((valid) => {\r\n              if (valid) {\r\n                  if (this.blackListGroupMobileVisibleTitle == \"add\") {\r\n                      editBlackListGroups(formData).then((res) => {\r\n                          if (res.success) {\r\n                              this.$Message.success(this.$t(\"success\"));\r\n                              this.initData();\r\n                              this.blackListGroupMobileVisible=false;\r\n                          }\r\n                      });\r\n                  } else if (this.blackListGroupMobileVisibleTitle == \"edit\") {\r\n                      editBlackListGroups(formData).then((res) => {\r\n                          if (res.success) {\r\n                              this.$Message.success(this.$t(\"success\"));\r\n                              this.initData();\r\n                              this.blackListGroupMobileVisible=false;\r\n                          }\r\n                      });\r\n                  }\r\n              }\r\n          });\r\n      },\r\n      //提交新增|修改黑名单\r\n      submitBlackList(){\r\n          //editBlackListGroups\r\n          var scheduleMobileVisibleTitle=this.scheduleMobileVisibleTitle;\r\n          var blackListFormObj=JSON.parse(JSON.stringify(this.blackListForm));\r\n          var formData ={};\r\n          for(var i in blackListFormObj){\r\n              if(blackListFormObj[i]!=\"\"){\r\n                  formData[i]=blackListFormObj[i];\r\n              }\r\n          }\r\n          if(formData.delFlag!=undefined){\r\n              formData.delFlag=0;\r\n          }else {\r\n              formData.delFlag=0;\r\n          }\r\n          formData.groupId=this.groupId\r\n\r\n          this.$refs[\"blackListForm\"].validate((valid) => {\r\n              if (valid) {\r\n                  editBlackList(formData).then((res) => {\r\n                      if (res.success) {\r\n\r\n                          this.$Message.success(this.$t(\"success\"));\r\n                          this.blackListMobileVisible=false;\r\n                          this.getBlackList(this.groupId);\r\n\r\n                      }else {\r\n                          this.$Message.error(res.success);\r\n                      }\r\n                  });\r\n              }\r\n          });\r\n      },\r\n      //导入黑名单组对应名单\r\n      btnImportBlackListGroups(){\r\n\r\n      },\r\n      showSelect(e) {\r\n          this.selectCount = e.length;\r\n          this.selectList = e;\r\n      },\r\n      changePage(v) {\r\n          this.searchForm.pageNumber = v;\r\n          this.getBlackList(this.groupId);\r\n      },\r\n      changePageSize(v) {\r\n          this.searchForm.pageSize = v;\r\n          this.getBlackList(this.groupId);\r\n      },\r\n      //搜索\r\n      handleSearch() {\r\n          this.searchForm.pageNumber = 1;\r\n          this.searchForm.pageSize = 10;\r\n          this.getBlackList(this.groupId);\r\n      },\r\n      //重置\r\n      handleReset() {\r\n          if(this.openSearch){\r\n            this.$refs.searchForm.resetFields();\r\n          }\r\n          this.searchForm.pageNumber = 1;\r\n          this.searchForm.pageSize = 10;\r\n          this.getBlackList(this.groupId);\r\n          this.columnsSet=this.columns;\r\n\r\n      },\r\n      dropDown() {},\r\n      //新增\r\n      addBlackList(){\r\n\r\n          if(this.blackListGroups.length==0){\r\n            this.$Message.info(\"请先添加黑名单组！\");\r\n            return false\r\n          }\r\n        this.blackListMobileVisible = true;\r\n        this.blackListMobileVisibleTitle = \"add\";\r\n      },\r\n      //导入\r\n      importBlackList(){\r\n        this.importBlackListMobileVisible=true;\r\n      },\r\n      //编辑\r\n      rowEdit(V) {\r\n          for (var i in V) {\r\n              if (i == null) {\r\n                  V[i] = \"\";\r\n              }\r\n          }\r\n          V = JSON.stringify(V);\r\n          V = JSON.parse(V);\r\n\r\n          if(V.delFlag==0){\r\n              V.delFlag=\"有效\";\r\n          }\r\n          V.type=V.type.toString();\r\n          this.blackListForm=V;\r\n          this.blackListMobileVisible = true;\r\n      },\r\n      //删除\r\n      rowDel(v) {\r\n        var than=this;\r\n          this.$Modal.confirm({\r\n              title: this.$t(\"confirmDeletionTitle\"), //\"确认删除\"\r\n              content: this.$t(\"confirmDeletionBodyFirst\") + v.name, //\"您确认要删除所选的 \" +this.selectCount+\" 条数据?\"\r\n              onOk: () => {\r\n                  delBlackListGroups({\r\n                      ids: v.id\r\n                  }).then(res => {\r\n                      if (res.success) {\r\n\r\n                        than.selectCount--;\r\n                          this.$Message.success(this.$t(\"success\"));\r\n                          this.getBlackList(this.groupId);\r\n                      }\r\n                  });\r\n              },\r\n          });\r\n      },\r\n      //\r\n      delAll() {\r\n        var than=this;\r\n          if (this.selectCount <= 0) {\r\n              this.$Message.warning(this.$t(\"noDataSelectedDelete\")); //您还未选择要删除的数据\r\n              return;\r\n          } else {\r\n              this.$Modal.confirm({\r\n                  title: this.$t(\"confirmDeletionTitle\"), //\"确认删除\"\r\n                  content:\r\n                      this.$t(\"confirmDeletionBodyFirst\") +\r\n                      this.selectCount +\r\n                      this.$t(\"confirmDeletionBodyLast\"), //\"您确认要删除所选的 \" +this.selectCount+\" 条数据?\"\r\n                  onOk: () => {\r\n                      var ids = [];\r\n                      this.selectList.forEach(function(v, i) {\r\n                          ids.push(v.id);\r\n                      });\r\n                      ids = ids.toString();\r\n                      delBlackList({ ids: ids }).then((res) => {\r\n                          //this.$Modal.remove();\r\n                          if (res.success) {\r\n                            than.selectCount=0;\r\n                              this.$Message.success(this.$t(\"deletionSucceeded\"));\r\n                              this.getBlackList(this.groupId);\r\n                          } else {\r\n                              this.$Message.error(this.$t(\"deletionFailed\"));\r\n                          }\r\n                      });\r\n                  },\r\n              });\r\n          }\r\n      },\r\n      clearSelectAll() {\r\n          this.$refs.table.selectAll(false);\r\n      },\r\n      //上传前\r\n      beforeUploadImport(file) {\r\n          this.uploadfile = file;\r\n          const fileExt = file.name\r\n              .split(\".\")\r\n              .pop()\r\n              .toLocaleLowerCase();\r\n          if (fileExt == \"excel\") {\r\n              this.btnUpload(file,fileExt);\r\n              this.file = file;\r\n          } else {\r\n              this.$Notice.warning({\r\n                  title: \"文件类型错误\",\r\n                  desc:\r\n                      \"所选文件‘ \" +\r\n                      file.name +\r\n                      \" ’不是.excel文件，请选择后缀为.excel的文件。\",\r\n              });\r\n          }\r\n          return false;\r\n      },\r\n      //上传请求\r\n      btnUpload(v,fileExt){\r\n          let fileFormData=new FormData();\r\n          fileFormData.append('aduiofile',v);\r\n          fileFormData.append('audioType',fileExt);\r\n          if(this.voiceReplacModalVisible){\r\n              fileFormData.append('id',\"\");\r\n          }\r\n          uploadVoice(fileFormData).then(res=>{\r\n              this.addVoiceForm.audio=res.result;\r\n              this.replaceVoiceForm.audio=res.result;\r\n              console.log(res);\r\n          });\r\n          console.log(v);\r\n      },\r\n      submitImportBlackList(){\r\n\r\n      },\r\n      //表格展示列\r\n      btnBlackTableColumns(){\r\n        var dataA=this.columns;\r\n        var dataB=this.columnsSetData;\r\n        var dataC=[];\r\n        dataA.forEach(function(v,i,arr){\r\n            dataB.forEach(function(v1,i1,arr1){\r\n                if(v.title==v1){\r\n                    dataC.push(v);\r\n                }\r\n            })\r\n        })\r\n        this.columnsSet=dataC;\r\n        this.blackTableColumnsVisible=false;\r\n        //this.$refs[\"blackTableColumnsForm\"].resetFields();\r\n      },\r\n    showDetail(row,index){\r\n      this.$refs.table.toggleSelect(index)\r\n    },\r\n\r\n\r\n  },\r\n  mounted() {\r\n    let type = this.$route.query.type;\r\n    if (type == \"social\") {\r\n      this.activeName = \"第三方账号绑定\";\r\n      this.currMenu = \"第三方账号绑定\";\r\n    }\r\n    this.init();\r\n  },\r\n  watch: {\r\n      blackListGroupMobileVisible(v) {\r\n      if (v == false) {\r\n\r\n         this.$refs[\"blackListGroupForm\"].resetFields();\r\n         // for(var i in this.blackListGroupForm){\r\n         //     this.blackListGroupForm[i]=\"\"\r\n         // }\r\n      }\r\n    },\r\n      blackListMobileVisible(v) {\r\n          if (v == false) {\r\n              this.$refs[\"blackListForm\"].resetFields();\r\n          }\r\n      },\r\n      importBlackListMobileVisible(v) {\r\n          if (v == false) {\r\n              this.$refs[\"importBlackListForm\"].resetFields();\r\n          }\r\n      },\r\n  },\r\n  computed: {},\r\n};\r\n</script>\r\n"]}]}