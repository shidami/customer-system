{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\work-order\\components\\business-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\work-order\\components\\business-add.vue","mtime":1614579763421},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBhZGRTZWF0c09wQnVzaW5lc3MsIC8v5re75Yqg57q/5LiL5Y+X55CG6Lef6L+b5Z2Q5bit56uvDQogIGVkaXRPcEJ1c2luZXNzLCAvL+e8lui+kee6v+S4i+WPl+eQhui3n+i/mw0KfSBmcm9tICJAL2FwaS9pbmRleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzQWRkOiB0cnVlLCAvL+WIpOaWreaYr+WQpuaYr+aWsOWinumAu+i+kQ0KICAgICAgdmlzaWFibGU6IGZhbHNlLA0KICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UsDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICB0ZW5hbnRJZDogJycsDQogICAgICAgIGNoYW5uZWw6ICcnLA0KICAgICAgICByZWNvcmRUaW1lOiAnJywNCiAgICAgICAgY3VzdG9tZXJOYW1lOiAnJywNCiAgICAgICAgbW9iaWxlOiAnJywNCiAgICAgICAgZWxzZU1vYmlsZTogJycsDQogICAgICAgIGFkZHJlc3M6ICcnLA0KICAgICAgICBjb250ZW50OiAnJywNCiAgICAgICAgY29udGFjdEl0ZW1zOiBbXSwNCiAgICAgICAgY29udGFjdFJlc3VsdDonJywNCiAgICAgICAgcmVzdWx0OiAnJywNCiAgICAgIH0sDQogICAgICBydWxlVmFsaWRhdGU6IHsNCiAgICAgICAgY2hhbm5lbDpbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36Iez5bCR6YCJ5oup5LiA6aG5JywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sDQogICAgICAgIHJlY29yZFRpbWU6W3tyZXF1aXJlZDogdHJ1ZSxtZXNzYWdlOiAn55WZ6KiA5pe26Ze05LiN6IO95Li656m6Jyx0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgY3VzdG9tZXJOYW1lOiBbe3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICfmiqXkv67kurrlp5PlkI3kuI3og73kuLrnqbonLHRyaWdnZXI6ICdibHVyJ31dLA0KICAgICAgICBtb2JpbGU6IFt7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+adpeeUteWPt+eggeS4jeiDveS4uuepuicsdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICAgIGFkZHJlc3M6IFt7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+ivpue7huWcsOWdgOS4jeiDveS4uuepuicsdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICAgIGNvbnRhY3RJdGVtczogW3tyZXF1aXJlZDp0cnVlLHR5cGU6J2FycmF5JyxtaW46IDEsIG1lc3NhZ2U6ICfor7foh7PlsJHpgInmi6nkuIDpobknLHRyaWdnZXI6ICdjaGFuZ2UnfV0sDQogICAgICAgIGNvbnRhY3RSZXN1bHQ6W3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOmhuScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLA0KICAgICAgICByZXN1bHQ6W3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOmhuScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLA0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHN1Ym1pdEFkZCgpIHsNCiAgICAgIC8v5aaC5p6c5pivRGF0ZeWvueixoeWImei9rOaNouaXpeacn+agvOW8jw0KICAgICAgaWYodHlwZW9mIHRoaXMuZm9ybURhdGEucmVjb3JkVGltZT09J29iamVjdCcpew0KICAgICAgICB0aGlzLmZvcm1EYXRhLnJlY29yZFRpbWUgPSB0aGlzLmNvbW1vbkpTLmRhdGVGb3JtYXQodGhpcy5mb3JtRGF0YS5yZWNvcmRUaW1lKQ0KICAgICAgfQ0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAvL+WwhuaVsOe7hOi9rOS4umpzb27mlbDnu4QNCiAgICAgICAgICB0aGlzLmZvcm1EYXRhLmNvbnRhY3RJdGVtcyA9IHRoaXMuZm9ybURhdGEuY29udGFjdEl0ZW1zLnRvU3RyaW5nKCkNCiAgICAgICAgICB0aGlzLmZvcm1EYXRhID0gdGhpcy5jb21tb25KUy5kZWxldGVOdWxsKHRoaXMuZm9ybURhdGEpDQogICAgICAgICAgaWYgKHRoaXMuaXNBZGQpIHsNCiAgICAgICAgICAgIGFkZFNlYXRzT3BCdXNpbmVzcyh0aGlzLmZvcm1EYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcyh7DQogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgY29udGVudDogJ+aPkOS6pOaIkOWKnycNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc2V0KCkNCiAgICAgICAgICAgICAgICB0aGlzLnZpc2lhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuZ2V0RGF0YUxpc3QoKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3Ioew0KICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHJlcy5tZXNzYWdlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBlZGl0T3BCdXNpbmVzcyh0aGlzLmZvcm1EYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcyh7DQogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgY29udGVudDogJ+aPkOS6pOaIkOWKnycNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc2V0KCkNCiAgICAgICAgICAgICAgICB0aGlzLnZpc2lhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuZ2V0RGF0YUxpc3QoKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3Ioew0KICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHJlcy5tZXNzYWdlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZVJlc2V0KCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0RmllbGRzKCk7DQogICAgfSwNCiAgfSwNCn0NCg=="},{"version":3,"sources":["business-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"business-add.vue","sourceRoot":"src/views/work-order/components","sourcesContent":["<template>\r\n  <Modal v-model=\"visiable\" :title=\"isAdd?'添加':'编辑'\" width=\"60\">\r\n    <Form ref=\"form\" :model=\"formData\" :rules=\"ruleValidate\" :label-width=\"100\" inline>\r\n      <FormItem label=\"渠道\" prop=\"channel\">\r\n        <RadioGroup v-model=\"formData.channel\">\r\n          <Radio v-for=\"item in $store.state.dict.channel\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"客户姓名\" prop=\"customerName\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.customerName\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"来电号码\" prop=\"mobile\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.mobile\" />\r\n      </FormItem>\r\n      <FormItem label=\"其他号码\" prop=\"elseMobile\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.elseMobile\" placeholder=\"多个号码请用逗号隔开\" />\r\n      </FormItem>\r\n      <Form-item label=\"留言时间\" prop=\"recordTime\">\r\n        <DatePicker v-model=\"formData.recordTime\" format=\"yyyy-MM-dd\" @on-change=\"formData.recordTime=$event\"></DatePicker>\r\n      </Form-item>\r\n      <FormItem label=\"详细地址\" prop=\"address\" style=\"width: 80%;\">\r\n        <Input v-model=\"formData.address\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"反馈内容\" prop=\"content\" style=\"width: 80%;\">\r\n        <Input type=\"textarea\" :autosize=\"{minRows:3}\" v-model=\"formData.content\" maxlength=1000 show-word-limit></Input>\r\n      </FormItem>\r\n      <FormItem label=\"联络事项\" prop=\"contactItems\">\r\n        <CheckboxGroup v-model=\"formData.contactItems\">\r\n          <Checkbox v-for=\"item in $store.state.dict.contactMatter\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Checkbox>\r\n        </CheckboxGroup>\r\n      </FormItem>\r\n      <FormItem label=\"联络结果\" prop=\"contactResult\">\r\n        <RadioGroup v-model=\"formData.contactResult\">\r\n          <Radio v-for=\"item in $store.state.dict.contactResults\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"跟进结果\" prop=\"result\">\r\n        <RadioGroup v-model=\"formData.result\">\r\n          <Radio label=\"转外部门跟进\" border></Radio>\r\n          <Radio label=\"未联系客户直接制单\" border></Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n    </Form>\r\n    <div slot=\"footer\">\r\n      <Button type=\"text\" @click=\"visiable=false\">取消</Button>\r\n      <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submitAdd\">提交</Button>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n<script>\r\nimport {\r\n  addSeatsOpBusiness, //添加线下受理跟进坐席端\r\n  editOpBusiness, //编辑线下受理跟进\r\n} from \"@/api/index\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isAdd: true, //判断是否是新增逻辑\r\n      visiable: false,\r\n      submitLoading: false,\r\n      formData: {\r\n        tenantId: '',\r\n        channel: '',\r\n        recordTime: '',\r\n        customerName: '',\r\n        mobile: '',\r\n        elseMobile: '',\r\n        address: '',\r\n        content: '',\r\n        contactItems: [],\r\n        contactResult:'',\r\n        result: '',\r\n      },\r\n      ruleValidate: {\r\n        channel:[{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n        recordTime:[{required: true,message: '留言时间不能为空',trigger: 'blur'}],\r\n        customerName: [{required: true,message: '报修人姓名不能为空',trigger: 'blur'}],\r\n        mobile: [{required: true,message: '来电号码不能为空',trigger: 'blur'}],\r\n        address: [{required: true,message: '详细地址不能为空',trigger: 'blur'}],\r\n        contactItems: [{required:true,type:'array',min: 1, message: '请至少选择一项',trigger: 'change'}],\r\n        contactResult:[{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n        result:[{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    submitAdd() {\r\n      //如果是Date对象则转换日期格式\r\n      if(typeof this.formData.recordTime=='object'){\r\n        this.formData.recordTime = this.commonJS.dateFormat(this.formData.recordTime)\r\n      }\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          //将数组转为json数组\r\n          this.formData.contactItems = this.formData.contactItems.toString()\r\n          this.formData = this.commonJS.deleteNull(this.formData)\r\n          if (this.isAdd) {\r\n            addSeatsOpBusiness(this.formData).then(res => {\r\n              this.submitLoading = false\r\n              if (res.success) {\r\n                this.$Message.success({\r\n                  background: true,\r\n                  content: '提交成功'\r\n                });\r\n                this.handleReset()\r\n                this.visiable = false\r\n                this.$parent.getDataList()\r\n              } else {\r\n                this.$Message.error({\r\n                  background: true,\r\n                  content: res.message\r\n                });\r\n              }\r\n            });\r\n          } else {\r\n            editOpBusiness(this.formData).then(res => {\r\n              this.submitLoading = false\r\n              if (res.success) {\r\n                this.$Message.success({\r\n                  background: true,\r\n                  content: '提交成功'\r\n                });\r\n                this.handleReset()\r\n                this.visiable = false\r\n                this.$parent.getDataList()\r\n              } else {\r\n                this.$Message.error({\r\n                  background: true,\r\n                  content: res.message\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      })\r\n    },\r\n    handleReset() {\r\n      this.$refs.form.resetFields();\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped=\"scoped\">\r\n  .ivu-form-item {\r\n    margin-bottom: 20px;\r\n  }\r\n</style>\r\n"]}]}