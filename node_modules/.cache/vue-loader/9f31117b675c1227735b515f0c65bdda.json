{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\cti\\call-relay-group\\callRelayGroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\cti\\call-relay-group\\callRelayGroup.vue","mtime":1614579763231},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBnZXRBbGxDdGlMaXN0LA0KICBnZXRDdGlMaXN0LA0KICBhZGRSZWxheUdyb3VwLA0KICBlZGl0UmVsYXlHcm91cCwNCiAgZGVsZXRlUmVsYXlHcm91cCwNCiAgZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRBbGwsDQogIGdldEFsbFRlbmFudERhdGFMaXN0LA0KICBhZGRSZWxheUdyb3VwVGVuYW50LA0KICBkZWxldGVSZWxheUdyb3VwVGVuYW50LA0KICBnZXRDYWxsUmVsYXlQaG9uZUFsbHMsDQogIGFkZFJlbGF5R3JvdXBQaG9uZSwNCiAgZWRpdFJlbGF5R3JvdXBQaG9uZSwNCiAgZGVsZXRlUmVsYXlHcm91cFBob25lLA0KICBvcGVyYXRpb25QaG9uZVRlbmFudCwNCiAgaW1wb3J0Q2FsbFJlbGF5UGhvbmVMaXN0LA0KICBnZXRUZW5hbnRBbGxMaXN0cywNCiAgc2VhcmNoRGljdCwNCiAgZ2V0QWxsRGljdERhdGFMaXN0LA0KICBhZGREaWN0RGF0YSwNCiAgZWRpdERpY3REYXRhLA0KICBkZWxldGVEYXRhLA0KfSBmcm9tICJAL2FwaS9pbmRleCI7DQoNCmltcG9ydCB7IGdldFN0b3JlLCBzZXRTdG9yZSB9IGZyb20gIkAvbGlicy9zdG9yYWdlIjsNCmltcG9ydCB7IHBob25lSW1wb3J0Q29sdW1ucywgcGhvbmVEYXRhIH0gZnJvbSAiQC9saWJzL2ltcG9ydENhbGxSZWxheVBob25lIjsNCmltcG9ydCBleGNlbCBmcm9tICJAL2xpYnMvZXhjZWwiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiY2FsbC1yZWxheWdyb3VwIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgb3BlblRpcDogZmFsc2UsDQogICAgICB0cmVlTG9hZGluZzogZmFsc2UsIC8vIOagkeWKoOi9veeKtuaAgQ0KICAgICAgbWF4SGVpZ2h0OiAiNTAwcHgiLA0KICAgICAgbG9hZGluZzogZmFsc2UsIC8vIOihqOagvOWKoOi9veeKtuaAgQ0KICAgICAgZWRpdFRpdGxlOiAiIiwgLy8g57yW6L6R6IqC54K55ZCN56ewDQogICAgICBzZWFyY2hLZXk6ICIiLCAvLyDmkJzntKLmoJENCiAgICAgIGV4cGFuZDogdHJ1ZSwNCiAgICAgIHNwYW46IDE4LA0KICAgICAgZXhwYW5kSWNvbjogImlvcy1hcnJvdy1iYWNrIiwNCiAgICAgIHNlbGVjdE5vZGU6IHt9LA0KICAgICAgdHJlZURhdGE6IFtdLCAvLyDmoJHmlbDmja4NCiAgICAgIHNlbGVjdENvdW50OiAwLCAvLyDlpJrpgInorqHmlbANCiAgICAgIHNlbGVjdExpc3Q6IFtdLCAvLyDlpJrpgInmlbDmja4NCiAgICAgIHJlbGF5R3JvdXBUaXA6IDAsDQogICAgICByZWxheUdyb3VwUGhvbmVUaXA6IDAsDQogICAgICBtb2RhbFRlbmFudFZpc2libGU6IGZhbHNlLCAvLyDmt7vliqDmiJbnvJbovpHmmL7npLoNCiAgICAgIG1vZGFsVGVuYW50VGl0bGU6ICIiLCAvLyDmt7vliqDmiJbnvJbovpHmoIfpopgNCiAgICAgIG9wZW5UaXBUZW5hbnQ6IGZhbHNlLA0KICAgICAgbG9hZGluZ1RlbmFudDogZmFsc2UsIC8vIOihqOagvOWKoOi9veeKtuaAgQ0KICAgICAgc2VsZWN0VGVuYW50Q291bnQ6IDAsIC8vIOWkmumAieiuoeaVsA0KICAgICAgc2VsZWN0VGVuYW50TGlzdDogW10sIC8vIOWkmumAieaVsOaNrg0KICAgICAgcGFnZU51bWJlclRlbmFudDogMSwNCiAgICAgIHBhZ2VTaXplVGVuYW50OiAxMCwNCiAgICAgIHBhZ2VOdW1iZXI6IDEsIC8vIOW9k+WJjemhteaVsA0KICAgICAgcGFnZVNpemU6IDEwLCAvLyDpobXpnaLlpKflsI8NCiAgICAgIHVwYXRoOiAiIiwNCiAgICAgIGdyb3VwSWQ6IiIsDQogICAgICBpbXBvcnRNb2RhbFZpc2libGU6IGZhbHNlLCAvLyDlr7zlhaXmmL7npLoNCiAgICAgIGltcG9ydEV4Y2VsTW9kYWxWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHVwbG9hZGZpbGU6IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICB9LA0KICAgICAgaW1wb3J0VGFibGVEYXRhOiBbXSwNCiAgICAgIGltcG9ydENvbHVtbnM6IFtdLA0KICAgICAgaW1wb3J0TG9hZGluZzogZmFsc2UsIC8vIOWvvOWFpeWKoOi9veeKtuaAgQ0KDQogICAgICB0ZW5hbnRQaG9uZU1vZGFsVmlzaWJsZTogZmFsc2UsIC8vIOa3u+WKoOaIlue8lui+keaYvuekug0KICAgICAgbW9kYWxUZW5hbnRQaG9uZVRpdGxlOiAiIiwgLy8g5re75Yqg5oiW57yW6L6R5qCH6aKYDQogICAgICB0ZW5hbnRQaG9uZUZvcm1WYWxpZGF0ZTogew0KICAgICAgICAvLyDooajljZXpqozor4Hop4TliJkNCiAgICAgICAgdGVuYW50SWRzOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuWFrOWPuOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIHRlbmFudFBob25lRm9ybTogew0KICAgICAgICB0ZW5hbnRJZHM6ICIiDQogICAgICB9LA0KICAgICAgcXVlcnlUZW5hbnRQaG9uZUxpc3RJdGVtczogW10sDQogICAgICBwaG9uZU1vZGFsVmlzaWJsZTogZmFsc2UsIC8vIOa3u+WKoOaIlue8lui+keaYvuekug0KICAgICAgbW9kYWxQaG9uZVRpdGxlOiAiIiwgLy8g5re75Yqg5oiW57yW6L6R5qCH6aKYDQogICAgICBpbXBvcnRFeGNlbFRpdGxlOiAi5a+85YWl5pWw5o2uIiwNCiAgICAgIHBob25lRm9ybTogew0KICAgICAgICAvLyDmt7vliqDmiJbnvJbovpHooajljZXlr7nosaHliJ3lp4vljJbmlbDmja4NCiAgICAgICAgcmVsYXlQaG9uZU51bWJlcjogIiIsDQogICAgICAgIHdvcmtNb2RlOiAiIiwNCiAgICAgICAgYmxhY2tNYXJrOiAiIiwNCiAgICAgIH0sDQogICAgICBwaG9uZUZvcm1WYWxpZGF0ZTogew0KICAgICAgICAvLyDooajljZXpqozor4Hop4TliJkNCiAgICAgICAgcmVsYXlQaG9uZU51bWJlcjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLkuK3nu6flj7fnoIHkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICB3b3JrTW9kZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLlt6XkvZzmqKHlvI/kuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9DQogICAgICAgIF0sDQogICAgICAgIGJsYWNrTWFyazogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLpu5HlkI3ljZXkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9DQogICAgICAgIF0sDQogICAgICB9LA0KDQogICAgICBjb2x1bW5zVGVuYW50OiBbDQogICAgICAgIC8vIOihqOWktA0KICAgICAgICB7DQogICAgICAgICAgdHlwZTogInNlbGVjdGlvbiIsDQogICAgICAgICAgd2lkdGg6IDYwLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLlhazlj7jnvJblj7ciLA0KICAgICAgICAgIGtleTogImNvZGUiLA0KICAgICAgICAgIHdpZHRoOiAyMDAsDQogICAgICAgICAgc29ydGFibGU6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5YWs5Y+45ZCN56ewIiwNCiAgICAgICAgICBrZXk6ICJ0aXRsZSIsDQogICAgICAgICAgd2lkdGg6IDM1NSwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLlj6/liIbphY3pgJrpgZPmlbDph48iLA0KICAgICAgICAgIGtleTogImNoYW5sZU51bSIsDQogICAgICAgICAgd2lkdGg6IDE1MCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQ0KICAgICAgICB9DQogICAgICBdLA0KICAgICAgZGF0YVRlbmFudDogW10sIC8v6KGo5Y2V5pWw5o2uDQogICAgICB0b3RhbFRlbmFudDogMCwgLy8g6KGo5Y2V5pWw5o2u5oC75pWwDQogICAgICBzZWFyY2hUZW5hbnRGb3JtOiB7DQogICAgICAgIHBhZ2VOdW1iZXJUZW5hbnQ6IDEsIC8vIOW9k+WJjemhteaVsA0KICAgICAgICBwYWdlU2l6ZVRlbmFudDogMTAsIC8vIOmhtemdouWkp+Wwjw0KICAgICAgICBzb3J0OiAiY3JlYXRlX3RpbWUiLCAvLyDpu5jorqTmjpLluo/lrZfmrrUNCiAgICAgICAgb3JkZXI6ICJkZXNjIiwgLy8g6buY6K6k5o6S5bqP5pa55byPDQogICAgICB9LA0KICAgICAgc2VhcmNoRm9ybTogew0KICAgICAgICAvLyDmkJzntKLmoYblr7nlupRkYXRh5a+56LGhDQogICAgICAgIHBhZ2VOdW1iZXI6IDEsIC8vIOW9k+WJjemhteaVsA0KICAgICAgICBwYWdlU2l6ZTogMTAsIC8vIOmhtemdouWkp+Wwjw0KICAgICAgICBzb3J0OiAiY3JlYXRlVGltZSIsIC8vIOm7mOiupOaOkuW6j+Wtl+autQ0KICAgICAgICBvcmRlcjogImRlc2MiLCAvLyDpu5jorqTmjpLluo/mlrnlvI8NCiAgICAgIH0sDQogICAgICBtb2RhbFR5cGU6IDAsIC8vIOa3u+WKoOaIlue8lui+keagh+ivhg0KICAgICAgbW9kYWxWaXNpYmxlOiBmYWxzZSwgLy8g5re75Yqg5oiW57yW6L6R5pi+56S6DQogICAgICByZWxheUdyb3VwTW9kYWxWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHJlbGF5R3JvdXBNb2RhbFRpdGxlOiAiIiwNCiAgICAgIG1vZGFsVGl0bGU6ICIiLCAvLyDmt7vliqDmiJbnvJbovpHmoIfpopgNCiAgICAgIHF1ZXJ5Q3RpTGlzdEl0ZW1zOiBbXSwNCiAgICAgIHF1ZXJ5VGVuYW50TGlzdEl0ZW1zOiBbXSwNCiAgICAgIG1heE51bTogMCwNCiAgICAgIHJlbGF5R3JvdXBGb3JtOiB7DQogICAgICAgIGN0aU1hbmFnZUlkOiAiIiwNCiAgICAgICAgcmVsYXlHcm91cE5hbWU6ICIiLA0KICAgICAgICByZWxheUdyb3VwTm86ICIiLA0KICAgICAgICByZWxheUdyb3VwVHlwZTogIiIsDQogICAgICAgIHJlbWFyazogIiIsDQogICAgICAgIHRvdGFsQ2hhbmVsOiAiMCIsDQogICAgICAgIG92ZXJmbG93UmF0ZTogIjAiDQogICAgICB9LA0KICAgICAgZm9ybTogew0KICAgICAgICAvLyDmt7vliqDmiJbnvJbovpHooajljZXlr7nosaHliJ3lp4vljJbmlbDmja4NCiAgICAgICAgbWF4Q2hhbmVsOiAiIiwNCiAgICAgIH0sDQogICAgICByZWxheUdyb3VwRm9ybVZhbGlkYXRlOiB7DQogICAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQ0KICAgICAgICBjdGlNYW5hZ2VJZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJDdGnkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9DQogICAgICAgIF0sDQogICAgICAgIHJlbGF5R3JvdXBOYW1lOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuS4ree7p+WQjeensOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0sDQogICAgICAgIHJlbGF5R3JvdXBObzogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLkuK3nu6fnvJblj7fkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICByZWxheUdyb3VwVHlwZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLkuK3nu6fnsbvlnovkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBmb3JtVmFsaWRhdGU6IHsNCiAgICAgICAgLy8g6KGo5Y2V6aqM6K+B6KeE5YiZDQogICAgICAgIG1heENoYW5lbDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLliIbphY3mlbDph4/kuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIGNvbHVtbnM6IFsNCiAgICAgICAgLy8g6KGo5aS0DQogICAgICAgIHsNCiAgICAgICAgICB0eXBlOiAic2VsZWN0aW9uIiwNCiAgICAgICAgICB3aWR0aDogNjAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdHlwZTogImluZGV4IiwNCiAgICAgICAgICB3aWR0aDogNjAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLlhazlj7jlkI3np7AiLA0KICAgICAgICAgIGtleTogInRpdGxlIiwNCiAgICAgICAgICB3aWR0aDogMTQwLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLkuK3nu6fnu4TlkI3np7AiLA0KICAgICAgICAgIGtleTogInJlbGF5R3JvdXBOYW1lIiwNCiAgICAgICAgICB3aWR0aDogMTMwLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLkuK3nu6fnu4Tlj7ciLA0KICAgICAgICAgIGtleTogInJlbGF5R3JvdXBObyIsDQogICAgICAgICAgd2lkdGg6IDEyMCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5bey5YiG6YWN6YCa6YGT5pWwIiwNCiAgICAgICAgICBrZXk6ICJtYXhDaGFuZWwiLA0KICAgICAgICAgIHdpZHRoOiAxMjAsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuWFrOWPuOacgOWkp+mAmumBk+aVsC/lhazlj7jlt7LliIbphY3pgJrpgZPmlbAiLA0KICAgICAgICAgIGtleTogIm1heE51bSIsDQogICAgICAgICAgd2lkdGg6IDI3MCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5Yib5bu65pe26Ze0IiwNCiAgICAgICAgICBrZXk6ICJjcmVhdGVUaW1lIiwNCiAgICAgICAgICB3aWR0aDogMTYwLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLmk43kvZwiLA0KICAgICAgICAgIGtleTogImFjdGlvbiIsDQogICAgICAgICAgd2lkdGg6IDUyLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFsNCiAgICAgICAgICAgICAgLy/liKDpmaQNCiAgICAgICAgICAgICAgaCgnVG9vbHRpcCcse3Byb3BzOiB7DQogICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLA0KICAgICAgICAgICAgICAgICAgdHJhbnNmZXI6IHRydWUNCiAgICAgICAgICAgICAgICB9fSxbaCgNCiAgICAgICAgICAgICAgICAgICJJY29uIiwNCiAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW9zLXRyYXNoLW91dGxpbmUiLA0KICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICIiLA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXJnaW5SaWdodDogIjVweCIsZm9udFNpemU6JzE4cHgnLGN1cnNvcjogJ3BvaW50ZXInIH0sDQogICAgICAgICAgICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgdGhpcy4kdCgicGxheSIpDQogICAgICAgICAgICAgICksaCgnc3BhbicsIHsNCiAgICAgICAgICAgICAgICBzbG90OiAnY29udGVudCcsDQogICAgICAgICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6ICdub3JtYWwnDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LCAn5Yig6ZmkJyldKSwNCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UsIC8vIOa3u+WKoOaIlue8lui+keaPkOS6pOeKtuaAgQ0KICAgICAgZGF0YTogW10sIC8v6KGo5Y2V5pWw5o2uDQogICAgICB0b3RhbDogMCwgLy8g6KGo5Y2V5pWw5o2u5oC75pWwDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXQoKSB7DQogICAgICAvLyDojrflj5bmoJHmlbDmja4NCiAgICAgIHRoaXMuZ2V0QWxsQ3RpKCk7DQogICAgICAvL+ihqOWNleiOt+WPlkN0aeaVsOaNrg0KICAgICAgdGhpcy5nZXRBbGxDdGlMaXN0cygpOw0KICAgIH0sDQogICAgZ2V0QWxsQ3RpKCkgew0KICAgICAgdGhpcy50cmVlTG9hZGluZyA9IHRydWU7DQogICAgICBnZXRBbGxDdGlMaXN0KCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMudHJlZUxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5yZXN1bHQ7DQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHJlc3VsdFtpXS5jaGlsZHJlbjsNCiAgICAgICAgICAgIHZhciBjaGlsZHJlbkxpc3QgPSBbXTsNCiAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgY2hpbGRyZW4ubGVuZ3RoOyB5KyspIHsNCiAgICAgICAgICAgICAgdmFyIHRvdGFsQyA9IDA7DQogICAgICAgICAgICAgIGlmIChwYXJzZUludChjaGlsZHJlblt5XS5vdmVyZmxvd1JhdGUpID49IDApIHsNCiAgICAgICAgICAgICAgICB0b3RhbEMgPQ0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW5beV0udG90YWxDaGFuZWwgKw0KICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZCgNCiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjaGlsZHJlblt5XS5vdmVyZmxvd1JhdGUgLyAxMDApLnRvRml4ZWQoMikgKg0KICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW3ldLnRvdGFsQ2hhbmVsDQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRvdGFsQyA9IGNoaWxkcmVuW3ldLnRvdGFsQ2hhbmVsOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGNoaWxkcmVuTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICByZWxheUdyb3VwSWQ6IGNoaWxkcmVuW3ldLmlkLA0KICAgICAgICAgICAgICAgIGlkOiBjaGlsZHJlblt5XS5pZCwNCiAgICAgICAgICAgICAgICBjdGlOYW1lOg0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW5beV0ucmVsYXlHcm91cE5hbWUgKw0KICAgICAgICAgICAgICAgICAgIigiICsNCiAgICAgICAgICAgICAgICAgIHRvdGFsQyArDQogICAgICAgICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW5beV0ubWF4Q2hhbmVsICsNCiAgICAgICAgICAgICAgICAgICIpIiwNCiAgICAgICAgICAgICAgICByZWxheUdyb3VwTmFtZTogY2hpbGRyZW5beV0ucmVsYXlHcm91cE5hbWUsDQogICAgICAgICAgICAgICAgcmVsYXlHcm91cE5vOiBjaGlsZHJlblt5XS5yZWxheUdyb3VwTm8sDQogICAgICAgICAgICAgICAgcmVsYXlHcm91cFR5cGU6IGNoaWxkcmVuW3ldLnJlbGF5R3JvdXBUeXBlLA0KICAgICAgICAgICAgICAgIHRvdGFsQ2hhbmVsOiBjaGlsZHJlblt5XS50b3RhbENoYW5lbCwNCiAgICAgICAgICAgICAgICBvdmVyZmxvd1JhdGU6IGNoaWxkcmVuW3ldLm92ZXJmbG93UmF0ZSwNCiAgICAgICAgICAgICAgICBjdGlNYW5hZ2VJZDogY2hpbGRyZW5beV0uY3RpTWFuYWdlSWQsDQogICAgICAgICAgICAgICAgYXJlYUNvZGU6IGNoaWxkcmVuW3ldLmFyZWFDb2RlLA0KICAgICAgICAgICAgICAgIHJlbWFyazogY2hpbGRyZW5beV0ucmVtYXJrLA0KICAgICAgICAgICAgICAgIG1heENoYW5lbDogY2hpbGRyZW5beV0ubWF4Q2hhbmVsLA0KICAgICAgICAgICAgICAgIGNyZWF0ZUJ5OiBjaGlsZHJlblt5XS5jcmVhdGVfYnksDQogICAgICAgICAgICAgICAgY3JlYXRlVGltZTogY2hpbGRyZW5beV0uY3JlYXRlX3RpbWUsDQogICAgICAgICAgICAgICAgaWNvbjogImlvcy1jYWxsIg0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlc3VsdFtpXS5pY29uID0gImlvcy1uYXZpZ2F0ZSI7DQogICAgICAgICAgICByZXN1bHRbaV0uY2hpbGRyZW4gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNoaWxkcmVuTGlzdCkpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHRoaXMudHJlZURhdGEgPSByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0VGVuYW50QWxsKCkgew0KICAgICAgZ2V0VGVuYW50QWxsTGlzdHMoKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5xdWVyeVRlbmFudFBob25lTGlzdEl0ZW1zID0gcmVzLnJlc3VsdDsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBjaGFuZ2VUYWIodikgew0KICAgICAgaWYgKDAgPT0gdikgew0KICAgICAgICB0aGlzLnJlbGF5R3JvdXBUaXAgPSB2Ow0KICAgICAgICB0aGlzLnJlbGF5R3JvdXBQaG9uZVRpcCA9IHY7DQogICAgICAgIHRoaXMuY29sdW1ucyA9IFsNCiAgICAgICAgICAvLyDooajlpLQNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic2VsZWN0aW9uIiwNCiAgICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbmRleCIsDQogICAgICAgICAgICB3aWR0aDogNjAsDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuWFrOWPuOWQjeensCIsDQogICAgICAgICAgICBrZXk6ICJ0aXRsZSIsDQogICAgICAgICAgICB3aWR0aDogMTQwLA0KICAgICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuS4ree7p+e7hOWQjeensCIsDQogICAgICAgICAgICBrZXk6ICJyZWxheUdyb3VwTmFtZSIsDQogICAgICAgICAgICB3aWR0aDogMTMwLA0KICAgICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuS4ree7p+e7hOWPtyIsDQogICAgICAgICAgICBrZXk6ICJyZWxheUdyb3VwTm8iLA0KICAgICAgICAgICAgd2lkdGg6IDEyMCwNCiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdGl0bGU6ICLlt7LliIbphY3pgJrpgZPmlbAiLA0KICAgICAgICAgICAga2V5OiAibWF4Q2hhbmVsIiwNCiAgICAgICAgICAgIHdpZHRoOiAxMjAsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuWFrOWPuOacgOWkp+mAmumBk+aVsC/lhazlj7jlt7LliIbphY3pgJrpgZPmlbAiLA0KICAgICAgICAgICAga2V5OiAibWF4TnVtIiwNCiAgICAgICAgICAgIHdpZHRoOiAyNzAsDQogICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiAi5Yib5bu65pe26Ze0IiwNCiAgICAgICAgICAgIGtleTogImNyZWF0ZVRpbWUiLA0KICAgICAgICAgICAgd2lkdGg6IDE2MCwNCiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdGl0bGU6ICLmk43kvZwiLA0KICAgICAgICAgICAga2V5OiAiYWN0aW9uIiwNCiAgICAgICAgICAgIHdpZHRoOiA3MCwNCiAgICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWw0KICAgICAgICAgICAgICAgIGgoJ1Rvb2x0aXAnLHtwcm9wczogew0KICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLA0KICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcjogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgfX0sW2goDQogICAgICAgICAgICAgICAgICAgICJJY29uIiwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW9zLWNyZWF0ZS1vdXRsaW5lIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICIiLA0KICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luUmlnaHQ6ICI1cHgiLGZvbnRTaXplOicxOHB4JyxjdXJzb3I6ICdwb2ludGVyJyB9LA0KICAgICAgICAgICAgICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCgicGxheSIpDQogICAgICAgICAgICAgICAgKSxoKCdzcGFuJywgew0KICAgICAgICAgICAgICAgICAgc2xvdDogJ2NvbnRlbnQnLA0KICAgICAgICAgICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogJ25vcm1hbCcNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LCAn5Yig6ZmkJyldKSwNCiAgICAgICAgICAgICAgICAvLyBoKA0KICAgICAgICAgICAgICAgIC8vICAgIkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgLy8gICB7DQogICAgICAgICAgICAgICAgLy8gICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgICAvLyAgICAgICBzaXplOiAic21hbGwiLA0KICAgICAgICAgICAgICAgIC8vICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgICBvbjogew0KICAgICAgICAgICAgICAgIC8vICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnJlbW92ZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAvLyAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgfSwNCiAgICAgICAgICAgICAgICAvLyAgICLliKDpmaQiDQogICAgICAgICAgICAgICAgLy8gKSwNCiAgICAgICAgICAgICAgXSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgIF07DQogICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRMaXN0KCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnJlbGF5R3JvdXBUaXAgPSB2Ow0KICAgICAgICB0aGlzLnJlbGF5R3JvdXBQaG9uZVRpcCA9IHY7DQogICAgICAgIHRoaXMuY29sdW1ucyA9IFsNCiAgICAgICAgICAvLyDooajlpLQNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic2VsZWN0aW9uIiwNCiAgICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiAi5YWs5Y+45ZCN56ewIiwNCiAgICAgICAgICAgIGtleTogInRpdGxlIiwNCiAgICAgICAgICAgIHdpZHRoOiAyMTAsDQogICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiAi5Lit57un5Y+356CBIiwNCiAgICAgICAgICAgIGtleTogInJlbGF5UGhvbmVOdW1iZXIiLA0KICAgICAgICAgICAgd2lkdGg6IDEyNSwNCiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdGl0bGU6ICLmiYDlsZ5DVEkiLA0KICAgICAgICAgICAga2V5OiAiY3RpTmFtZSIsDQogICAgICAgICAgICB3aWR0aDogMTEwLA0KICAgICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuS4ree7p+e7hOWQjeensCIsDQogICAgICAgICAgICBrZXk6ICJyZWxheUdyb3VwTmFtZSIsDQogICAgICAgICAgICB3aWR0aDogMTI1LA0KICAgICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuWIhumFjeeKtuaAgSIsDQogICAgICAgICAgICBrZXk6ICJhc3NpZ25lZCIsDQogICAgICAgICAgICB3aWR0aDogMTAwLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdGl0bGU6ICLmnInmlYjnirbmgIEiLA0KICAgICAgICAgICAga2V5OiAiZW5hYmxlZCIsDQogICAgICAgICAgICB3aWR0aDogMTIwLA0KICAgICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7DQogICAgICAgICAgICAgIGxldCByZSA9ICIiOw0KICAgICAgICAgICAgICBpZiAocGFyYW1zLnJvdy5lbmFibGVkID09ICIxIikgew0KICAgICAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbDQogICAgICAgICAgICAgICAgICBoKCJCYWRnZSIsIHsNCiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAi5pyJ5pWIIiwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cuZW5hYmxlZCA9PSAiMCIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWw0KICAgICAgICAgICAgICAgICAgaCgiQmFkZ2UiLCB7DQogICAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAiZXJyb3IiLA0KICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICLml6DmlYgiLA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgXSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuW3peS9nOaooeW8jyIsDQogICAgICAgICAgICBrZXk6ICJ3b3JrTW9kZSIsDQogICAgICAgICAgICB3aWR0aDogMTAwLA0KICAgICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7DQogICAgICAgICAgICAgIGxldCByZSA9ICIiOw0KICAgICAgICAgICAgICBpZiAocGFyYW1zLnJvdy53b3JrTW9kZSA9PSAiMSIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gaCgic3BhbiIsIFtoKCJzcGFuIiwgIuWRvOWFpeWRvOWHuiIpXSk7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLnJvdy53b3JrTW9kZSA9PSAiMCIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gaCgic3BhbiIsIFtoKCJzcGFuIiwgIuS7heWRvOWFpSIpXSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogIuWkh+azqCIsDQogICAgICAgICAgICBrZXk6ICJyZW1hcmsiLA0KICAgICAgICAgICAgd2lkdGg6IDE1MCwNCiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdGl0bGU6ICLmk43kvZwiLA0KICAgICAgICAgICAga2V5OiAiYWN0aW9uIiwNCiAgICAgICAgICAgIHdpZHRoOiA5MCwNCiAgICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWw0KICAgICAgICAgICAgICAgIGgoJ1Rvb2x0aXAnLHtwcm9wczogew0KICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLA0KICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcjogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgfX0sW2goDQogICAgICAgICAgICAgICAgICAgICJJY29uIiwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW9zLWNyZWF0ZS1vdXRsaW5lIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICIiLA0KICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luUmlnaHQ6ICI1cHgiLGZvbnRTaXplOicxOHB4JyxjdXJzb3I6ICdwb2ludGVyJyB9LA0KICAgICAgICAgICAgICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRQaG9uZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCgicGxheSIpDQogICAgICAgICAgICAgICAgKSxoKCdzcGFuJywgew0KICAgICAgICAgICAgICAgICAgc2xvdDogJ2NvbnRlbnQnLA0KICAgICAgICAgICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogJ25vcm1hbCcNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LCAn57yW6L6RJyldKSwNCiAgICAgICAgICAgICAgICAvLyBoKA0KICAgICAgICAgICAgICAgIC8vICAgIkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgLy8gICB7DQogICAgICAgICAgICAgICAgLy8gICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgdHlwZTogInByaW1hcnkiLA0KICAgICAgICAgICAgICAgIC8vICAgICAgIHNpemU6ICJzbWFsbCIsDQogICAgICAgICAgICAgICAgLy8gICAgIH0sDQogICAgICAgICAgICAgICAgLy8gICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgbWFyZ2luUmlnaHQ6ICI1cHgiLA0KICAgICAgICAgICAgICAgIC8vICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgICBvbjogew0KICAgICAgICAgICAgICAgIC8vICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmVkaXRQaG9uZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAvLyAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgfSwNCiAgICAgICAgICAgICAgICAvLyAgICLnvJbovpEiDQogICAgICAgICAgICAgICAgLy8gKSwNCiAgICAgICAgICAgICAgICAvLyBoKA0KICAgICAgICAgICAgICAgIC8vICAgIkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgLy8gICB7DQogICAgICAgICAgICAgICAgLy8gICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgICAvLyAgICAgICBzaXplOiAic21hbGwiLA0KICAgICAgICAgICAgICAgIC8vICAgICB9LA0KICAgICAgICAgICAgICAgIC8vICAgICBvbjogew0KICAgICAgICAgICAgICAgIC8vICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnJlbW92ZVBob25lKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgIC8vICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8gICAgIH0sDQogICAgICAgICAgICAgICAgLy8gICB9LA0KICAgICAgICAgICAgICAgIC8vICAgIuWIoOmZpCINCiAgICAgICAgICAgICAgICAvLyApLA0KICAgICAgICAgICAgICAgIGgoJ1Rvb2x0aXAnLHtwcm9wczogew0KICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLA0KICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcjogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgfX0sW2goDQogICAgICAgICAgICAgICAgICAgICJJY29uIiwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW9zLXRyYXNoLW91dGxpbmUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogIiIsDQogICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXJnaW5SaWdodDogIjVweCIsZm9udFNpemU6JzE4cHgnLGN1cnNvcjogJ3BvaW50ZXInIH0sDQogICAgICAgICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUGhvbmUocGFyYW1zLnJvdyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHQoInBsYXkiKQ0KICAgICAgICAgICAgICAgICksaCgnc3BhbicsIHsNCiAgICAgICAgICAgICAgICAgIHNsb3Q6ICdjb250ZW50JywNCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6ICdub3JtYWwnDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgJ+WIoOmZpCcpXSksDQogICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICBdOw0KICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0QWxsQ3RpTGlzdHMoKSB7DQogICAgICBnZXRBbGxDdGlMaXN0KCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHZhciByZXN1bHQgPSByZXMucmVzdWx0Ow0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB0aGlzLnF1ZXJ5Q3RpTGlzdEl0ZW1zLnB1c2goew0KICAgICAgICAgICAgICBpZDogcmVzdWx0W2ldLmlkLA0KICAgICAgICAgICAgICBjdGlOYW1lOiByZXN1bHRbaV0uY3RpTmFtZSwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICByZW5kZXJDb250ZW50KGgsIHsgcm9vdCwgbm9kZSwgZGF0YSB9KSB7DQogICAgICAvLyByZXR1cm4gaCgic3BhbiIsIFsNCiAgICAgIC8vICAgaCgic3BhbiIsIFsNCiAgICAgIC8vICAgICBoKCJzcGFuIiwgZGF0YS5jdGlOYW1lKSwNCiAgICAgIC8vICAgXSksDQogICAgICAvLyBdKTsNCiAgICAgIHJldHVybiBoKCJzcGFuIiwgWw0KICAgICAgICBoKCJzcGFuIiwgWw0KICAgICAgICAgIGgoIkljb24iLCB7DQogICAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgICB0eXBlOiBkYXRhLmljb24sDQogICAgICAgICAgICAgIHNpemU6ICIxNiIsDQogICAgICAgICAgICAgIGNvbG9yOiAiIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAibWFyZ2luLXJpZ2h0IjogIjhweCIsDQogICAgICAgICAgICAgICJtYXJnaW4tYm90dG9tIjogIjNweCIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0pLA0KICAgICAgICAgIGgoInNwYW4iLCBkYXRhLmN0aU5hbWUpLA0KICAgICAgICBdKSwNCiAgICAgIF0pOw0KICAgIH0sDQogICAgc2VhcmNoKCkgew0KICAgICAgLy8g5pCc57Si5qCRDQogICAgICBpZiAodGhpcy5zZWFyY2hLZXkpIHsNCiAgICAgICAgdGhpcy50cmVlTG9hZGluZyA9IHRydWU7DQogICAgICAgIHNlYXJjaERpY3QoeyBrZXk6IHRoaXMuc2VhcmNoS2V5IH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMudHJlZUxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgIHRoaXMudHJlZURhdGEgPSByZXMucmVzdWx0Ow0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyDkuLrnqbrph43mlrDliqDovb0NCiAgICAgICAgdGhpcy5nZXRBbGxDdGkoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNlbGVjdFRyZWUodikgew0KICAgICAgaWYgKHYubGVuZ3RoID4gMCkgew0KICAgICAgICAvLyDovazmjaJudWxs5Li6IiINCiAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB2WzBdKSB7DQogICAgICAgICAgaWYgKHZbMF1bYXR0cl0gPT0gbnVsbCkgew0KICAgICAgICAgICAgdlswXVthdHRyXSA9ICIiOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodlswXSk7DQogICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShzdHIpOw0KICAgICAgICB0aGlzLnNlbGVjdE5vZGUgPSBkYXRhOw0KICAgICAgICB0aGlzLnJlbGF5R3JvdXBGb3JtID0gZGF0YTsNCiAgICAgICAgdGhpcy5lZGl0VGl0bGUgPSBkYXRhLmN0aU5hbWU7DQogICAgICAgIC8vIOmHjeaWsOWKoOi9veihqA0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDEwOw0KICAgICAgICBpZiAodGhpcy5yZWxheUdyb3VwVGlwID09IDApIHsNCiAgICAgICAgICB0aGlzLmdldENhbGxSZWxheUdyb3VwVGVuYW50TGlzdCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5UGhvbmVMaXN0KCk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY2FuY2VsRWRpdCgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgYWRkQ2FsbFJlbGF5VGVuYW50KCkgew0KICAgICAgaWYgKCF0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi6K+35YWI6YCJ5oup5LiA5Liq5Lit57un57uE6L+b6KGM5YiG6YWNIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmIChwYXJzZUludCh0aGlzLnNlbGVjdE5vZGUub3ZlcmZsb3dSYXRlKSA+PSAwKSB7DQogICAgICAgIHRoaXMubWF4TnVtID0NCiAgICAgICAgICBwYXJzZUludCgNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZS50b3RhbENoYW5lbCArDQogICAgICAgICAgICAgIE1hdGgucm91bmQoDQogICAgICAgICAgICAgICAgcGFyc2VGbG9hdCh0aGlzLnNlbGVjdE5vZGUub3ZlcmZsb3dSYXRlIC8gMTAwKS50b0ZpeGVkKDIpICoNCiAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZS50b3RhbENoYW5lbA0KICAgICAgICAgICAgICApDQogICAgICAgICAgKSAtIHBhcnNlSW50KHRoaXMuc2VsZWN0Tm9kZS5tYXhDaGFuZWwpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5tYXhOdW0gPQ0KICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2VsZWN0Tm9kZS50b3RhbENoYW5lbCkgLQ0KICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2VsZWN0Tm9kZS5tYXhDaGFuZWwpOw0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5tYXhOdW0gPD0gMCkgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWIhumFjemAmumBk+aVsOS4ujDkuI3og73liIbphY0iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5tb2RhbFR5cGUgPSAwOw0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICB0aGlzLm1vZGFsVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLm1vZGFsVGl0bGUgPSAi5paw5aKe5Lit57un57uE6YCa6YGT5pWwKOWJqeS9meWIhumFjeaAu+aVsCIgKyB0aGlzLm1heE51bSArICIpIjsNCiAgICAgIHRoaXMucXVlcnlUZW5hbnRMaXN0SXRlbXMgPSBbXTsNCiAgICB9LA0KICAgIGluc2VydFRkKCkgew0KICAgICAgdGhpcy5tb2RhbFRlbmFudFZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5tb2RhbFRlbmFudFRpdGxlPSLmt7vliqDlhazlj7giOw0KICAgICAgdGhpcy5nZXRUZW5hbnREYXRhTGlzdCgpOw0KICAgIH0sDQogICAgcmVtb3ZlVGQoaW5kZXgpIHsNCiAgICAgIHRoaXMucXVlcnlUZW5hbnRMaXN0SXRlbXMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9LA0KICAgIGNhbmNlbEVkaXQoKSB7DQogICAgICBsZXQgZGF0YSA9IHRoaXMuJHJlZnMudHJlZS5nZXRTZWxlY3RlZE5vZGVzKClbMF07DQogICAgICBpZiAoZGF0YSkgew0KICAgICAgICBkYXRhLnNlbGVjdGVkID0gZmFsc2U7DQogICAgICB9DQogICAgICAvLyDlj5bmtojpgInmi6nlkI7ojrflj5blhajpg6jmlbDmja4NCiAgICAgIHRoaXMuc2VsZWN0Tm9kZSA9IHt9Ow0KICAgICAgdGhpcy5lZGl0VGl0bGUgPSAiIjsNCiAgICB9LA0KICAgIGNoYW5nZVNlbGVjdCh2KSB7DQogICAgICB0aGlzLnNlbGVjdENvdW50ID0gdi5sZW5ndGg7DQogICAgICB0aGlzLnNlbGVjdExpc3QgPSB2Ow0KICAgIH0sDQogICAgY2hhbmdlRXhwYW5kKCkgew0KICAgICAgdGhpcy5leHBhbmQgPSAhdGhpcy5leHBhbmQ7DQogICAgICBpZiAodGhpcy5leHBhbmQpIHsNCiAgICAgICAgdGhpcy5leHBhbmRJY29uID0gImlvcy1hcnJvdy1iYWNrIjsNCiAgICAgICAgdGhpcy5zcGFuID0gMTg7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmV4cGFuZEljb24gPSAiaW9zLWFycm93LWZvcndhcmQiOw0KICAgICAgICB0aGlzLnNwYW4gPSAyMzsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoYW5nZVBhZ2Uodikgew0KICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPSB2Ow0KICAgICAgaWYgKHRoaXMucmVsYXlHcm91cFRpcCA9PSAwKSB7DQogICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRMaXN0KCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgfQ0KICAgICAgdGhpcy5jbGVhclNlbGVjdEFsbCgpOw0KICAgIH0sDQogICAgY2hhbmdlUGFnZVNpemUodikgew0KICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VTaXplID0gdjsNCiAgICAgIGlmICh0aGlzLnJlbGF5R3JvdXBUaXAgPT0gMCkgew0KICAgICAgICB0aGlzLmdldENhbGxSZWxheUdyb3VwVGVuYW50TGlzdCgpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlQaG9uZUxpc3QoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldENhbGxSZWxheUdyb3VwVGVuYW50TGlzdCgpIHsNCiAgICAgIGlmICghdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZCkgew0KICAgICAgICB0aGlzLmRhdGEgPSBbXTsNCiAgICAgICAgdGhpcy50b3RhbCA9IDA7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGlmICh0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5jYWxsUmVsYXlHcm91cElkID0gdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRlbGV0ZSB0aGlzLnNlYXJjaEZvcm0uY2FsbFJlbGF5R3JvdXBJZDsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRBbGwodGhpcy5zZWFyY2hGb3JtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5yZXN1bHQubGlzdDsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC50b3RhbDsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLw0KICAgIGdldENhbGxSZWxheUdyb3VwVGVuYW50TGlzdDEoaWQscGFyZW50SWQpIHsNCiAgICAgIC8vIGlmICghdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZCkgew0KICAgICAgLy8gICB0aGlzLmRhdGEgPSBbXTsNCiAgICAgIC8vICAgdGhpcy50b3RhbCA9IDA7DQogICAgICAvLyAgIHJldHVybjsNCiAgICAgIC8vIH0NCiAgICAgIHRoaXMuZ3JvdXBJZD1pZDsNCiAgICAgIHRoaXMuc2VsZWN0Tm9kZS5yZWxheUdyb3VwSWQ9aWQ7DQogICAgICB0aGlzLnNlbGVjdE5vZGUuY3RpTWFuYWdlSWQ9cGFyZW50SWQ7DQogICAgICBpZiAoaWQhPXVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0uY2FsbFJlbGF5R3JvdXBJZCA9IGlkOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZGVsZXRlIHRoaXMuc2VhcmNoRm9ybS5jYWxsUmVsYXlHcm91cElkOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucmVsYXlHcm91cFRpcCA9PSAwKSB7DQogICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRMaXN0KCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgfQ0KICAgICAgLy8gZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRBbGwodGhpcy5zZWFyY2hGb3JtKS50aGVuKChyZXMpID0+IHsNCiAgICAgIC8vICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAvLyAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgLy8gICAgIHRoaXMuZGF0YSA9IHJlcy5yZXN1bHQubGlzdDsNCiAgICAgIC8vICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC50b3RhbDsNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfSk7DQogICAgfSwNCiAgICBnZXREYXRhTGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBpZiAodGhpcy5zZWxlY3ROb2RlLmlkKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5kaWN0SWQgPSB0aGlzLnNlbGVjdE5vZGUuaWQ7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBkZWxldGUgdGhpcy5zZWFyY2hGb3JtLmRpY3RJZDsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5zZWFyY2hGb3JtLnN0YXR1cykgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0uc3RhdHVzID0gIiI7DQogICAgICB9DQogICAgICBnZXRBbGxEaWN0RGF0YUxpc3QodGhpcy5zZWFyY2hGb3JtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5yZXN1bHQuY29udGVudDsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGNsZWFyVGVuYW50U2VsZWN0QWxsKCkgew0KICAgICAgdGhpcy4kcmVmcy50YWJsZVRlbmFudC5zZWxlY3RBbGwoZmFsc2UpOw0KICAgIH0sDQogICAgY2hhbmdlVGVuYW50U29ydChlKSB7DQogICAgICB0aGlzLnNlYXJjaFRlbmFudEZvcm0uc29ydCA9IGUua2V5Ow0KICAgICAgdGhpcy5zZWFyY2hUZW5hbnRGb3JtLm9yZGVyID0gZS5vcmRlcjsNCiAgICAgIGlmIChlLm9yZGVyID09ICJub3JtYWwiKSB7DQogICAgICAgIHRoaXMuc2VhcmNoVGVuYW50Rm9ybS5vcmRlciA9ICIiOw0KICAgICAgfQ0KICAgICAgdGhpcy5nZXRUZW5hbnREYXRhTGlzdCgpOw0KICAgIH0sDQogICAgc2hvd1RlbmFudFNlbGVjdChlKSB7DQogICAgICB0aGlzLnNlbGVjdFRlbmFudExpc3QgPSBlOw0KICAgICAgdGhpcy5zZWxlY3RUZW5hbnRDb3VudCA9IGUubGVuZ3RoOw0KICAgICAgaWYodGhpcy5zZWxlY3RUZW5hbnRDb3VudCA+IDApew0KICAgICAgICAgdGhpcy5vcGVuVGlwVGVuYW50ID0gdHJ1ZTsNCiAgICAgIH1lbHNlew0KICAgICAgICAgdGhpcy5vcGVuVGlwVGVuYW50ID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgICBjaGFuZ2VUZW5hbnRQYWdlKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVGVuYW50Rm9ybS5wYWdlTnVtYmVyID0gdjsNCiAgICAgIHRoaXMuZ2V0VGVuYW50RGF0YUxpc3QoKTsNCiAgICAgIHRoaXMuY2xlYXJUZW5hbnRTZWxlY3RBbGwoKTsNCiAgICB9LA0KICAgIGNoYW5nZVRlbmFudFBhZ2VTaXplKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVGVuYW50Rm9ybS5wYWdlU2l6ZSA9IHY7DQogICAgICB0aGlzLmdldFRlbmFudERhdGFMaXN0KCk7DQogICAgfSwNCiAgICBoYW5kZWxUZW5hbnRTdWJtaXQoKSB7DQogICAgICB0aGlzLnF1ZXJ5VGVuYW50TGlzdEl0ZW1zID0gdGhpcy5zZWxlY3RUZW5hbnRMaXN0Ow0KICAgICAgdGhpcy5tb2RhbFRlbmFudFZpc2libGUgPSBmYWxzZTsNCiAgICAgIHRoaXMuc2VsZWN0VGVuYW50TGlzdCA9IFtdOw0KICAgIH0sDQogICAgZ2V0VGVuYW50RGF0YUxpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgdGhpcy5zZWxlY3RUZW5hbnRDb3VudCA9IDA7DQogICAgICB0aGlzLnNlYXJjaFRlbmFudEZvcm0uY2FsbFJlbGF5R3JvdXBJZCA9IHRoaXMuc2VsZWN0Tm9kZS5yZWxheUdyb3VwSWQ7DQogICAgICB0aGlzLnNlYXJjaFRlbmFudEZvcm0uY3RpTWFuYWdlSWQgPSB0aGlzLnNlbGVjdE5vZGUuY3RpTWFuYWdlSWQ7DQoNCiAgICAgIHRoaXMuc2VhcmNoVGVuYW50Rm9ybS5wYWdlTnVtYmVyID0gdGhpcy5zZWFyY2hUZW5hbnRGb3JtLnBhZ2VOdW1iZXJUZW5hbnQ7DQogICAgICB0aGlzLnNlYXJjaFRlbmFudEZvcm0ucGFnZVNpemUgPSB0aGlzLnNlYXJjaFRlbmFudEZvcm0ucGFnZVNpemVUZW5hbnQ7DQoNCiAgICAgIGdldEFsbFRlbmFudERhdGFMaXN0KHRoaXMuc2VhcmNoVGVuYW50Rm9ybSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmRhdGFUZW5hbnQgPSByZXMucmVzdWx0Lmxpc3Q7DQogICAgICAgICAgdGhpcy50b3RhbFRlbmFudCA9IHJlcy5yZXN1bHQudG90YWw7DQogICAgICAgICAgLy90aGlzLmNoYW5nZVRlbmFudFBhZ2VTaXplKDEpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGNoYW5nZVNvcnQoZSkgew0KICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSBlLmtleTsNCiAgICAgIHRoaXMuc2VhcmNoRm9ybS5vcmRlciA9IGUub3JkZXI7DQogICAgICBpZiAoZS5vcmRlciA9PSAibm9ybWFsIikgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0ub3JkZXIgPSAiIjsNCiAgICAgIH0NCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIHNob3dTZWxlY3QoZSkgew0KICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gZTsNCiAgICAgIHRoaXMuc2VsZWN0Q291bnQgPSBlLmxlbmd0aDsNCiAgICAgIGlmKHRoaXMuc2VsZWN0Q291bnQgPiAwKXsNCiAgICAgICAgIHRoaXMub3BlblRpcCA9IHRydWU7DQogICAgICB9ZWxzZXsNCiAgICAgICAgIHRoaXMub3BlblRpcCA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xlYXJTZWxlY3RBbGwoKSB7DQogICAgICB0aGlzLiRyZWZzLnRhYmxlLnNlbGVjdEFsbChmYWxzZSk7DQogICAgfSwNCiAgICByZWZyZXNoUmVsYXlHcm91cCgpIHsNCiAgICAgIHRoaXMuZ2V0QWxsQ3RpKCk7DQogICAgICB0aGlzLnNlbGVjdE5vZGUgPSB7fTsNCiAgICAgIHRoaXMuZWRpdFRpdGxlID0gIiI7DQogICAgfSwNCiAgICByZWZyZXNoQ3RpKCkgew0KICAgICAgZ2V0QWxsQ3RpTGlzdCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLnJlc3VsdDsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gcmVzdWx0W2ldLmNoaWxkcmVuOw0KICAgICAgICAgICAgdmFyIGNoaWxkcmVuTGlzdCA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBjaGlsZHJlbi5sZW5ndGg7IHkrKykgew0KICAgICAgICAgICAgICB2YXIgdG90YWxDID0gMDsNCiAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGNoaWxkcmVuW3ldLm92ZXJmbG93UmF0ZSkgPj0gMCkgew0KICAgICAgICAgICAgICAgIHRvdGFsQyA9DQogICAgICAgICAgICAgICAgICBjaGlsZHJlblt5XS50b3RhbENoYW5lbCArDQogICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKA0KICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNoaWxkcmVuW3ldLm92ZXJmbG93UmF0ZSAvIDEwMCkudG9GaXhlZCgyKSAqDQogICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5beV0udG90YWxDaGFuZWwNCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdG90YWxDID0gY2hpbGRyZW5beV0udG90YWxDaGFuZWw7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgY2hpbGRyZW5MaXN0LnB1c2goew0KICAgICAgICAgICAgICAgIHJlbGF5R3JvdXBJZDogY2hpbGRyZW5beV0uaWQsDQogICAgICAgICAgICAgICAgaWQ6IGNoaWxkcmVuW3ldLmlkLA0KICAgICAgICAgICAgICAgIGN0aU5hbWU6DQogICAgICAgICAgICAgICAgICBjaGlsZHJlblt5XS5yZWxheUdyb3VwTmFtZSArDQogICAgICAgICAgICAgICAgICAiKCIgKw0KICAgICAgICAgICAgICAgICAgdG90YWxDICsNCiAgICAgICAgICAgICAgICAgICIvIiArDQogICAgICAgICAgICAgICAgICBjaGlsZHJlblt5XS5tYXhDaGFuZWwgKw0KICAgICAgICAgICAgICAgICAgIikiLA0KICAgICAgICAgICAgICAgIHJlbGF5R3JvdXBOYW1lOiBjaGlsZHJlblt5XS5yZWxheUdyb3VwTmFtZSwNCiAgICAgICAgICAgICAgICByZWxheUdyb3VwTm86IGNoaWxkcmVuW3ldLnJlbGF5R3JvdXBObywNCiAgICAgICAgICAgICAgICByZWxheUdyb3VwVHlwZTogY2hpbGRyZW5beV0ucmVsYXlHcm91cFR5cGUsDQogICAgICAgICAgICAgICAgdG90YWxDaGFuZWw6IGNoaWxkcmVuW3ldLnRvdGFsQ2hhbmVsLA0KICAgICAgICAgICAgICAgIG92ZXJmbG93UmF0ZTogY2hpbGRyZW5beV0ub3ZlcmZsb3dSYXRlLA0KICAgICAgICAgICAgICAgIGN0aU1hbmFnZUlkOiBjaGlsZHJlblt5XS5jdGlNYW5hZ2VJZCwNCiAgICAgICAgICAgICAgICBhcmVhQ29kZTogY2hpbGRyZW5beV0uYXJlYUNvZGUsDQogICAgICAgICAgICAgICAgcmVtYXJrOiBjaGlsZHJlblt5XS5yZW1hcmssDQogICAgICAgICAgICAgICAgbWF4Q2hhbmVsOiBjaGlsZHJlblt5XS5tYXhDaGFuZWwsDQogICAgICAgICAgICAgICAgY3JlYXRlQnk6IGNoaWxkcmVuW3ldLmNyZWF0ZV9ieSwNCiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBjaGlsZHJlblt5XS5jcmVhdGVfdGltZSwNCiAgICAgICAgICAgICAgICBpY29uOiAiaW9zLWNhbGwiDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVzdWx0W2ldLmljb24gPSAiaW9zLW5hdmlnYXRlIjsNCiAgICAgICAgICAgIHJlc3VsdFtpXS5jaGlsZHJlbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2hpbGRyZW5MaXN0KSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZSA9IHt9Ow0KICAgICAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsNCiAgICAgICAgICB0aGlzLnRyZWVEYXRhID0gcmVzdWx0Ow0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZURyb3Bkb3duKG5hbWUpIHsNCiAgICAgIGlmIChuYW1lID09ICJlZGl0UmVsYXlHcm91cHMiKSB7DQogICAgICAgIGlmICghdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZCkgew0KICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygiMee6p+aYr0NUSSzor7fpgInmi6nkuoznuqfkuK3nu6fnu4Tov5vooYznvJbovpEiKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5lZGl0UmVsYXlHcm91cHMoKTsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiZGVsZXRlUmVsYXlHcm91cHMiKSB7DQogICAgICAgIHRoaXMuZGVsZXRlUmVsYXlHcm91cHMoKTsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAicmVmcmVzaFJlbGF5R3JvdXAiKSB7DQogICAgICAgIHRoaXMucmVmcmVzaFJlbGF5R3JvdXAoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZFJlbGF5R3JvdXBzKCkgew0KICAgICAgdGhpcy4kcmVmcy5yZWxheUdyb3VwRm9ybS5yZXNldEZpZWxkcygpOw0KICAgICAgZGVsZXRlIHRoaXMucmVsYXlHcm91cEZvcm0uaWQ7DQogICAgICB0aGlzLm1vZGFsVHlwZSA9IDA7DQogICAgICB0aGlzLnJlbGF5R3JvdXBNb2RhbFRpdGxlID0gIua3u+WKoOS4ree7p+e7hCI7DQogICAgICB0aGlzLnJlbGF5R3JvdXBNb2RhbFZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5yZWxheUdyb3VwRm9ybSA9IHt9Ow0KICAgIH0sDQogICAgZWRpdFJlbGF5R3JvdXBzKHYpIHsNCiAgICAgIHRoaXMubW9kYWxUeXBlID0gMTsNCiAgICAgIHRoaXMucmVsYXlHcm91cE1vZGFsVGl0bGUgPSAi57yW6L6R5Lit57un57uEIjsNCiAgICAgIHYgPSB0aGlzLnNlbGVjdE5vZGU7DQogICAgICAvLyDovazmjaJudWxs5Li6IiINCiAgICAgIGZvciAobGV0IGF0dHIgaW4gdikgew0KICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7DQogICAgICAgICAgIGRlbGV0ZSB2W2F0dHJdOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7DQogICAgICBsZXQgcm9sZUluZm8gPSBKU09OLnBhcnNlKHN0cik7DQogICAgICB0aGlzLnJlbGF5R3JvdXBGb3JtID0ge307DQogICAgICB0aGlzLnJlbGF5R3JvdXBGb3JtID0gcm9sZUluZm87DQogICAgICB0aGlzLnJlbGF5R3JvdXBNb2RhbFZpc2libGUgPSB0cnVlOw0KICAgIH0sDQoNCiAgICBkZWxldGVSZWxheUdyb3VwcygpIHsNCiAgICAgIGlmICghdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZCkgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIjHnuqfmmK9DVEks6K+36YCJ5oup5LqM57qn5Lit57un57uE6L+b6KGM5Yig6ZmkIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oew0KICAgICAgICB0aXRsZTogIuehruiupOWIoOmZpCIsDQogICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgIGNvbnRlbnQ6ICLmgqjnoa7orqTopoHliKDpmaQgIiArIHRoaXMuc2VsZWN0Tm9kZS5jdGlOYW1lICsgIiA/IiwNCiAgICAgICAgb25PazogKCkgPT4gew0KICAgICAgICAgIC8vIOWIoOmZpA0KICAgICAgICAgIGRlbGV0ZVJlbGF5R3JvdXAoeyBpZHM6IHRoaXMuc2VsZWN0Tm9kZS5pZCB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgIHRoaXMucmVmcmVzaFJlbGF5R3JvdXAoKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlHcm91cFRlbmFudExpc3QoKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlQaG9uZUxpc3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8NCiAgICBlZGl0UmVsYXlHcm91cHMxKHYpIHsNCg0KICAgICAgdGhpcy5tb2RhbFR5cGUgPSAxOw0KICAgICAgdGhpcy5yZWxheUdyb3VwTW9kYWxUaXRsZSA9ICLnvJbovpHkuK3nu6fnu4QiOw0KICAgICAgdmFyIGRhdGE9e307DQogICAgICBmb3IodmFyIGkgaW4gdil7DQogICAgICAgIGlmKHZbaV0hPW51bGwpew0KICAgICAgICAgIGRhdGFbaV09dltpXQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnJlbGF5R3JvdXBGb3JtID0gZGF0YTsNCiAgICAgIHRoaXMucmVsYXlHcm91cE1vZGFsVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICAvLw0KICAgIGRlbGV0ZVJlbGF5R3JvdXBzMSh2KSB7DQogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsNCiAgICAgICAgdGl0bGU6ICLnoa7orqTliKDpmaQiLA0KICAgICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgICBjb250ZW50OiAi5oKo56Gu6K6k6KaB5Yig6ZmkICIgKyB2LmN0aU5hbWUgKyAiID8iLA0KICAgICAgICBvbk9rOiAoKSA9PiB7DQogICAgICAgICAgLy8g5Yig6ZmkDQogICAgICAgICAgZGVsZXRlUmVsYXlHcm91cCh7IGlkczogdi5pZCB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgIHRoaXMucmVmcmVzaFJlbGF5R3JvdXAoKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlHcm91cFRlbmFudExpc3QoKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlQaG9uZUxpc3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgYWRkKCkgew0KICAgICAgaWYgKCF0aGlzLnNlbGVjdE5vZGUuaWQpIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLor7flhYjpgInmi6nkuIDkuKrlrZflhbjnsbvliKsiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5tb2RhbFR5cGUgPSAwOw0KICAgICAgdGhpcy5tb2RhbFRpdGxlID0gIua3u+WKoOWtl+WFuCAiICsgdGhpcy5lZGl0VGl0bGUgKyAiIOeahOaVsOaNriI7DQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgIHRoaXMubW9kYWxWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGVkaXQodikgew0KICAgICAgdGhpcy5tb2RhbFR5cGUgPSAxOw0KICAgICAgdGhpcy5tb2RhbFRpdGxlID0gIue8lui+keWtl+WFuCAiICsgdGhpcy5lZGl0VGl0bGUgKyAiIOeahOaVsOaNriI7DQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgIC8vIOi9rOaNom51bGzkuLoiIg0KICAgICAgZm9yIChsZXQgYXR0ciBpbiB2KSB7DQogICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsNCiAgICAgICAgICB2W2F0dHJdID0gIiI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBzdHIgPSBKU09OLnN0cmluZ2lmeSh2KTsNCiAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShzdHIpOw0KICAgICAgdGhpcy5mb3JtID0gZGF0YTsNCiAgICAgIHRoaXMubW9kYWxWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGhhbmRlbFN1Ym1pdFJlbGF5R3JvdXAoKSB7DQogICAgICB0aGlzLiRyZWZzLnJlbGF5R3JvdXBGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgIGlmICh0aGlzLm1vZGFsVHlwZSA9PSAwKSB7DQogICAgICAgICAgICAvLyDmt7vliqAg6YG/5YWN57yW6L6R5ZCO5Lyg5YWlaWTnrYnmlbDmja4g6K6w5b6X5Yig6ZmkDQogICAgICAgICAgICBkZWxldGUgdGhpcy5yZWxheUdyb3VwRm9ybS5pZDsNCiAgICAgICAgICAgIGFkZFJlbGF5R3JvdXAodGhpcy5yZWxheUdyb3VwRm9ybSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0QWxsQ3RpKCk7DQogICAgICAgICAgICAgICAgdGhpcy5yZWxheUdyb3VwTW9kYWxWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy5yZWxheUdyb3VwRm9ybSA9IFtdOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kYWxUeXBlID09IDEpIHsNCiAgICAgICAgICAgIC8vIOe8lui+kQ0KICAgICAgICAgICAgZWRpdFJlbGF5R3JvdXAodGhpcy5yZWxheUdyb3VwRm9ybSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0QWxsQ3RpKCk7DQogICAgICAgICAgICAgICAgdGhpcy5yZWxheUdyb3VwTW9kYWxWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy5yZWxheUdyb3VwRm9ybSA9IFtdOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGVsU3VibWl0KCkgew0KICAgICAgaWYgKHRoaXMucXVlcnlUZW5hbnRMaXN0SXRlbXMubGVuZ3RoIDw9IDApIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliIbphY3miJDlip8iKTsNCiAgICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdmFyIHRvdGFsTnVtID0gMDsNCiAgICAgIHZhciByZXN1bHQgPSB0aGlzLnF1ZXJ5VGVuYW50TGlzdEl0ZW1zOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHJlc3VsdFtpXS5tYXhDaGFuZWwgPT0gIiIgfHwNCiAgICAgICAgICByZXN1bHRbaV0ubWF4Q2hhbmVsID09IG51bGwgfHwNCiAgICAgICAgICByZXN1bHRbaV0ubWF4Q2hhbmVsIDw9IDANCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLlj6/liIbphY3pgJrpgZPmlbDkuI3og73kuLrnqbrkuJTlvpflpKfkuo4wIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmIChyZXN1bHRbaV0ubWF4Q2hhbmVsID4gcmVzdWx0W2ldLmNoYW5sZU51bSkgew0KICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygNCiAgICAgICAgICAgIHJlc3VsdFtpXS50aXRsZSArICLlj6/liIbphY3pgJrpgZPmlbAiICsgcmVzdWx0W2ldLmNoYW5sZU51bQ0KICAgICAgICAgICk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHJlc3VsdFtpXS5jdGlNYW5hZ2VJZCA9IHRoaXMuc2VsZWN0Tm9kZS5jdGlNYW5hZ2VJZDsNCiAgICAgICAgcmVzdWx0W2ldLnJlbGF5R3JvdXBJZCA9IHRoaXMuc2VsZWN0Tm9kZS5yZWxheUdyb3VwSWQ7DQogICAgICAgIHRvdGFsTnVtID0gdG90YWxOdW0gKyBwYXJzZUludChyZXN1bHRbaV0ubWF4Q2hhbmVsKTsNCiAgICAgIH0NCiAgICAgIGlmICh0b3RhbE51bSA+IHRoaXMubWF4TnVtKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5Ymp5L2Z5Y+v5YiG6YWN6YCa6YGT5pWwIiArIHRoaXMubWF4TnVtKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgYWRkUmVsYXlHcm91cFRlbmFudChyZXN1bHRbaV0pLnRoZW4oKHJlcykgPT4ge30pOw0KICAgICAgfQ0KICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliIbphY3miJDlip8iKTsNCiAgICAgIHRoaXMubW9kYWxWaXNpYmxlID0gZmFsc2U7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRMaXN0KCk7DQogICAgICB9LCAxNTApOw0KICAgICANCiAgICAgIA0KICAgIH0sDQogICAgcmVtb3ZlKHYpIHsNCiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oew0KICAgICAgICB0aXRsZTogIuehruiupOWIoOmZpCIsDQogICAgICAgIGNvbnRlbnQ6ICLmgqjnoa7orqTopoHliKDpmaQgIiArIHYudGl0bGUgKyAiID8iLA0KICAgICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgICBvbk9rOiAoKSA9PiB7DQogICAgICAgICAgLy8g5Yig6ZmkDQogICAgICAgICAgZGVsZXRlUmVsYXlHcm91cFRlbmFudCh7IGlkczogdi5pZCB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5R3JvdXBUZW5hbnRMaXN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICB9LA0KICAgIGRlbEFsbCgpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdENvdW50IDw9IDApIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrpgInmi6nopoHlm57mlLbnmoTmlbDmja4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7DQogICAgICAgIHRpdGxlOiAi56Gu6K6k5Zue5pS2IiwNCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeWbnuaUtuaJgOmAieeahCAiICsgdGhpcy5zZWxlY3RDb3VudCArICIg5p2h5pWw5o2uPyIsDQogICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgIG9uT2s6ICgpID0+IHsNCiAgICAgICAgICBsZXQgaWRzID0gIiI7DQogICAgICAgICAgdGhpcy5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgIGlkcyArPSBlLmlkICsgIiwiOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOw0KICAgICAgICAgIC8vIOaJuemHj+WIoOmZpA0KICAgICAgICAgIGRlbGV0ZVJlbGF5R3JvdXBUZW5hbnQoeyBpZHM6IGlkcyB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3RBbGwoKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlHcm91cFRlbmFudExpc3QoKTsNCiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUmVsYXlHcm91cCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBjYW5jZWxQaG9uZSgpIHsNCiAgICAgIHRoaXMucGhvbmVNb2RhbFZpc2libGUgPSBmYWxzZTsNCiAgICB9LA0KICAgIHN1Ym1pdFBob25lKCkgew0KICAgICAgdGhpcy4kcmVmcy5waG9uZUZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGlmICh0aGlzLm1vZGFsVHlwZSA9PSAwKSB7DQogICAgICAgICAgICAvLyDmt7vliqANCiAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IHRydWU7DQogICAgICAgICAgICB0aGlzLnBob25lRm9ybS5yZWxheUdyb3VwSWQgPSB0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkOw0KICAgICAgICAgICAgdGhpcy5waG9uZUZvcm0uY3RpTWFuYWdlSWQgPSB0aGlzLnNlbGVjdE5vZGUuY3RpTWFuYWdlSWQ7DQogICAgICAgICAgICB0aGlzLnBob25lRm9ybS5yZWxheVBob25lTmFtZSA9IHRoaXMucGhvbmVGb3JtLnJlbGF5UGhvbmVOdW1iZXI7DQogICAgICAgICAgICB0aGlzLnBob25lRm9ybS5lbmFibGVkID0gMTsNCiAgICAgICAgICAgIGFkZFJlbGF5R3JvdXBQaG9uZSh0aGlzLnBob25lRm9ybSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2FsbFJlbGF5UGhvbmVMaXN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy5waG9uZU1vZGFsVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgIGVkaXRSZWxheUdyb3VwUGhvbmUodGhpcy5waG9uZUZvcm0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgICAgICAgICAgIHRoaXMucGhvbmVNb2RhbFZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFkZFBob25lKCkgew0KICAgICAgaWYgKCF0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi6K+35YWI6YCJ5oup5LiA5Liq5Lit57un57uE6L+b6KGM5paw5aKeIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuc2hvd1Bob25lID0gdHJ1ZTsNCiAgICAgIHRoaXMubW9kYWxUeXBlID0gMDsNCiAgICAgIHRoaXMuJHJlZnMucGhvbmVGb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICB0aGlzLnBob25lRm9ybSA9IHt3b3JrTW9kZToiMSIsYmxhY2tNYXJrOiIxIn07DQogICAgICB0aGlzLnBob25lTW9kYWxWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMubW9kYWxQaG9uZVRpdGxlID0gIuaWsOWinuS4ree7p+WPt+eggSI7DQogICAgfSwNCiAgICBlZGl0UGhvbmUodikgew0KICAgICAgLy8g6L2s5o2ibnVsbOS4uiIiDQogICAgICBmb3IgKGxldCBhdHRyIGluIHYpIHsNCiAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgew0KICAgICAgICAgIGRlbGV0ZSB2W2F0dHJdOw0KICAgICAgICB9DQogICAgICAgIGlmICh2W2F0dHJdID09ICJ1bmRlZmluZWQiKSB7DQogICAgICAgICAgIHZbYXR0cl0gPSAiIjsNCiAgICAgICAgfQ0KICAgICAgICBpZihhdHRyPT0id29ya01vZGUiKXsNCiAgICAgICAgICB2W2F0dHJdID0gdlthdHRyXSsiIjsNCiAgICAgICAgfQ0KICAgICAgICBpZihhdHRyPT0iYmxhY2tNYXJrIil7DQogICAgICAgICAgdlthdHRyXSA9IHZbYXR0cl0rIiI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMubW9kYWxUeXBlID0gMTsNCiAgICAgIHRoaXMucGhvbmVNb2RhbFZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5tb2RhbFBob25lVGl0bGUgPSAi57yW6L6R5Lit57un5Y+356CBIjsNCiAgICAgIHRoaXMuJHJlZnMucGhvbmVGb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7DQogICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsNCiAgICAgIHRoaXMucGhvbmVGb3JtID0gZGF0YTsNCiAgICAgIHRoaXMuc2hvd1Bob25lID0gdHJ1ZTsNCiAgICB9LA0KICAgIHJlbW92ZVBob25lKHYpIHsNCiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oew0KICAgICAgICB0aXRsZTogIuehruiupOWIoOmZpCIsDQogICAgICAgIGNvbnRlbnQ6ICLmgqjnoa7orqTopoHliKDpmaQgIiArIHYucmVsYXlQaG9uZU51bWJlciArICIgPyIsDQogICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgIG9uT2s6ICgpID0+IHsNCiAgICAgICAgICAvLyDliKDpmaQNCiAgICAgICAgICBkZWxldGVSZWxheUdyb3VwUGhvbmUoeyBpZHM6IHYuaWQgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRNb2RhbC5yZW1vdmUoKTsNCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZWxQaG9uZUFsbCgpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdENvdW50IDw9IDApIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrpgInmi6nopoHliKDpmaTnmoTmlbDmja4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7DQogICAgICAgIHRpdGxlOiAi56Gu6K6k5Yig6ZmkIiwNCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeWIoOmZpOaJgOmAieeahCAiICsgdGhpcy5zZWxlY3RDb3VudCArICIg5p2h5pWw5o2uPyIsDQogICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgIG9uT2s6ICgpID0+IHsNCiAgICAgICAgICBsZXQgaWRzID0gIiI7DQogICAgICAgICAgdGhpcy5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgIGlkcyArPSBlLmlkICsgIiwiOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOw0KICAgICAgICAgIC8vIOaJuemHj+WIoOmZpA0KICAgICAgICAgIGRlbGV0ZVJlbGF5R3JvdXBQaG9uZSh7IGlkczogaWRzIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgdGhpcy4kTW9kYWwucmVtb3ZlKCk7DQogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRDYWxsUmVsYXlQaG9uZUxpc3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0Q2FsbFJlbGF5UGhvbmVMaXN0KCkgew0KICAgICAgaWYgKCF0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkKSB7DQogICAgICAgIHRoaXMuZGF0YSA9IFtdOw0KICAgICAgICB0aGlzLnRvdGFsID0gMDsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMuc2VhcmNoRm9ybS5jYWxsUmVsYXlHcm91cElkID0gdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZDsNCiAgICAgIGdldENhbGxSZWxheVBob25lQWxscyh0aGlzLnNlYXJjaEZvcm0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5kYXRhID0gcmVzLnJlc3VsdC5saXN0Ow0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXMucmVzdWx0LnRvdGFsOw0KICAgICAgICAgIHRoaXMuc2VsZWN0Q291bnQgPSAwOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHBob25lRHJvcGRvd24obmFtZSkgew0KICAgICAgaWYgKCF0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi6K+35YWI6YCJ5oup5LiA5Liq5Lit57un57uE6YCJ5oup6KaB5pON5L2c55qE5pWw5o2uIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnNlbGVjdENvdW50IDw9IDApIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrpgInmi6nopoHmk43kvZznmoTmlbDmja4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKG5hbWUgPT0gImRpc3RyaUJ1dGlvblBob25lIikgew0KICAgICAgICB0aGlzLnRlbmFudFBob25lTW9kYWxWaXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5xdWVyeVRlbmFudFBob25lTGlzdEl0ZW1zID0gW107DQogICAgICAgIHRoaXMubW9kYWxUZW5hbnRQaG9uZVRpdGxlID0gIuWIhumFjeWFrOWPuOS4ree7p+WPt+eggSI7DQogICAgICAgIHRoaXMudGVuYW50UGhvbmVGb3JtLnRlbmFudElkcyA9ICIiOw0KICAgICAgICB0aGlzLmdldFRlbmFudEFsbCgpOw0KICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJyZWNvdmVyeVBob25lIikgew0KICAgICAgICB0aGlzLm9wZXJhdGlvblBob25lVGVuYW50TGlzdCgiMiIpOw0KICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJlbmFibGVQaG9uZSIpIHsNCiAgICAgICAgdGhpcy5vcGVyYXRpb25QaG9uZVRlbmFudExpc3QoIjMiKTsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAib3V0T2ZTZXJ2aWNlUGhvbmUiKSB7DQogICAgICAgIHRoaXMub3BlcmF0aW9uUGhvbmVUZW5hbnRMaXN0KCI0Iik7DQogICAgICB9DQogICAgfSwNCiAgICBvcGVyYXRpb25QaG9uZVRlbmFudExpc3QodHlwZSkgew0KICAgICAgdmFyIHBhcmFtID0ge307DQogICAgICBwYXJhbVsiY2FsbFJlbGF5R3JvdXBJZCJdID0gdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZDsNCiAgICAgIHBhcmFtWyJjdGlNYW5hZ2VJZCJdID0gdGhpcy5zZWxlY3ROb2RlLmN0aU1hbmFnZUlkOw0KICAgICAgaWYgKHR5cGUgPT0gIjEiKSB7DQogICAgICAgIHBhcmFtWyJ0ZW5hbnRJZCJdID0gdGhpcy50ZW5hbnRQaG9uZUZvcm0udGVuYW50SWRzOw0KICAgICAgfWVsc2V7DQogICAgICAgIHBhcmFtWyJ0ZW5hbnRJZCJdID0gIiI7DQogICAgICB9DQogICAgICBsZXQgaWRzID0gIiI7DQogICAgICB0aGlzLnNlbGVjdExpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICBpZiAodHlwZSA9PSAiMiIpIHsNCiAgICAgICAgICBpZiAoZS5waG9uZVRlbmFudElkICE9IG51bGwgJiYgZS5waG9uZVRlbmFudElkICE9ICIiKSB7DQogICAgICAgICAgICBpZHMgKz0gZS5waG9uZVRlbmFudElkICsgIiwiOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICIxIikgew0KICAgICAgICAgIGlmIChlLnBob25lVGVuYW50SWQgIT0gbnVsbCAmJiBlLnBob25lVGVuYW50SWQgIT0gIiIpIHsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlkcyArPSBlLmlkICsgIiwiOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOw0KICAgICAgcGFyYW1bImlkcyJdID0gaWRzOw0KICAgICAgcGFyYW1bInR5cGUiXSA9IHR5cGU7DQogICAgICAvLyDmibnph4/mk43kvZzmlbDmja4NCiAgICAgIG9wZXJhdGlvblBob25lVGVuYW50KHBhcmFtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgICAgIHRoaXMudGVuYW50UGhvbmVNb2RhbFZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLnRlbmFudFBob25lRm9ybS50ZW5hbnRJZHMgPSAiIjsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBjYW5jZWxUZW5hbnRQaG9uZSgpIHsNCiAgICAgIHRoaXMucXVlcnlUZW5hbnRQaG9uZUxpc3RJdGVtcyA9IFtdOw0KICAgICAgdGhpcy50ZW5hbnRQaG9uZU1vZGFsVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy50ZW5hbnRQaG9uZUZvcm0udGVuYW50SWRzID0gIiI7DQogICAgfSwNCiAgICBzdWJtaXRUZW5hbnRQaG9uZSgpIHsNCiAgICAgIHRoaXMub3BlcmF0aW9uUGhvbmVUZW5hbnRMaXN0KCIxIik7DQogICAgfSwNCiAgICBiZWZvcmVVcGxvYWRJbXBvcnQoZmlsZSkgew0KICAgICAgdGhpcy51cGxvYWRmaWxlID0gZmlsZTsNCiAgICAgIGNvbnN0IGZpbGVFeHQgPSBmaWxlLm5hbWUuc3BsaXQoIi4iKS5wb3AoKS50b0xvY2FsZUxvd2VyQ2FzZSgpOw0KICAgICAgaWYgKGZpbGVFeHQgPT0gInhsc3giIHx8IGZpbGVFeHQgPT0gInhscyIpIHsNCiAgICAgICAgdGhpcy5yZWFkRmlsZShmaWxlKTsNCiAgICAgICAgdGhpcy5maWxlID0gZmlsZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJE5vdGljZS53YXJuaW5nKHsNCiAgICAgICAgICB0aXRsZTogIuaWh+S7tuexu+Wei+mUmeivryIsDQogICAgICAgICAgZGVzYzoNCiAgICAgICAgICAgICLmiYDpgInmlofku7bigJggIiArDQogICAgICAgICAgICBmaWxlLm5hbWUgKw0KICAgICAgICAgICAgIiDigJnkuI3mmK9FWENFTOaWh+S7tu+8jOivt+mAieaLqeWQjue8gOS4ui54bHN45oiW6ICFLnhsc+eahEVYQ0VM5paH5Lu244CCIiwNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCiAgICAvLyDor7vlj5bmlofku7YNCiAgICByZWFkRmlsZShmaWxlKSB7DQogICAgICB0aGlzLnJlYWRpbmcgPSB0cnVlOw0KICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsNCiAgICAgIHJlYWRlci5vbmVycm9yID0gKGUpID0+IHsNCiAgICAgICAgdGhpcy5yZWFkaW5nID0gZmFsc2U7DQogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuaWh+S7tuivu+WPluWHuumUmSIpOw0KICAgICAgfTsNCiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gew0KICAgICAgICBjb25zdCBkYXRhID0gZS50YXJnZXQucmVzdWx0Ow0KICAgICAgICBjb25zdCB7IGhlYWRlciwgcmVzdWx0cyB9ID0gZXhjZWwucmVhZChkYXRhLCAiYXJyYXkiKTsNCiAgICAgICAgY29uc3QgdGFibGVUaXRsZSA9IGhlYWRlci5tYXAoKGl0ZW0pID0+IHsNCiAgICAgICAgICByZXR1cm4geyB0aXRsZTogaXRlbSwga2V5OiBpdGVtLCBtaW5XaWR0aDogMTAwLCBhbGlnbjogImNlbnRlciIgfTsNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuaW1wb3J0VGFibGVEYXRhID0gcmVzdWx0czsNCiAgICAgICAgdGhpcy5waG9uZUltcG9ydENvbHVtbnMgPSB0YWJsZVRpdGxlOw0KICAgICAgICB0aGlzLnJlYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLor7vlj5bmlbDmja7miJDlip8iKTsNCiAgICAgIH07DQogICAgfSwNCiAgICBkb3dubG9hZFRlbXBsZSgpIHsNCiAgICAgIGxldCB0aXRsZSA9IFtdOw0KICAgICAgbGV0IGtleSA9IFtdOw0KICAgICAgcGhvbmVJbXBvcnRDb2x1bW5zLmZvckVhY2goKGUpID0+IHsNCiAgICAgICAgdGl0bGUucHVzaChlLnRpdGxlKTsNCiAgICAgICAga2V5LnB1c2goZS5rZXkpOw0KICAgICAgfSk7DQogICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgIHRpdGxlOiB0aXRsZSwNCiAgICAgICAga2V5OiBrZXksDQogICAgICAgIGRhdGE6IHBob25lRGF0YSwNCiAgICAgICAgYXV0b1dpZHRoOiB0cnVlLA0KICAgICAgICBmaWxlbmFtZTogIuWvvOWFpeaVsOaNruaooeeJiCIsDQogICAgICB9Ow0KICAgICAgZXhjZWwuZXhwb3J0X2FycmF5X3RvX2V4Y2VsKHBhcmFtcyk7DQogICAgfSwNCiAgICBpbXBvcnRFeGNlbCgpIHsNCiAgICAgIHRoaXMuaW1wb3J0TW9kYWxWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMudXBsb2FkZmlsZSA9IHt9Ow0KICAgICAgdGhpcy51cGluZyA9IDA7DQogICAgICB0aGlzLnJlc3VsdCA9ICIiOw0KICAgICAgdGhpcy5pbXBvcnRUYWJsZURhdGEgPSBbXTsNCiAgICAgIHRoaXMucGhvbmVJbXBvcnRDb2x1bW5zID0gW107DQogICAgfSwNCiAgICBpbXBvcnREYXRhKCkgew0KICAgICAgdGhpcy5pbXBvcnRMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIC8vIOS8oOWFpeWvvOWFpeaVsOaNriDlkI7nq6/mjqXmlLZib2R55pWw57uE5YiX6KGo5om56YeP5a+85YWlDQogICAgICAvLyB0aGlzLmltcG9ydFJlcXVlc3QoIuivt+axgui3r+W+hCIsIHRoaXMuaW1wb3J0VGFibGVEYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAvLyAgIHRoaXMuaW1wb3J0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgLy8gICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgIC8vICAgICB0aGlzLmltcG9ydE1vZGFsVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgLy8gICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIC8vICAgICB0aGlzLiRNb2RhbC5pbmZvKHsNCiAgICAgIC8vICAgICAgIHRpdGxlOiAi5a+85YWl57uT5p6cIiwNCiAgICAgIC8vICAgICAgIGNvbnRlbnQ6IHJlcy5tZXNzYWdlDQogICAgICAvLyAgICAgfSk7DQogICAgICAvLyAgIH0NCiAgICAgIC8vIH0pOw0KICAgICAgLy8g5qih5ouf6K+35rGC5oiQ5YqfDQogICAgICB2YXIgcGFyYW1zID0ge307DQogICAgICBwYXJhbXNbImRhdGFMaXN0Il0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLmltcG9ydFRhYmxlRGF0YSk7DQogICAgICBwYXJhbXNbInJlbGF5R3JvdXBJZCJdID0gdGhpcy5zZWxlY3ROb2RlLnJlbGF5R3JvdXBJZDsNCiAgICAgIHBhcmFtc1siY3RpTWFuYWdlSWQiXSA9IHRoaXMuc2VsZWN0Tm9kZS5jdGlNYW5hZ2VJZDsNCiAgICAgIGltcG9ydENhbGxSZWxheVBob25lTGlzdChwYXJhbXMpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmdldENhbGxSZWxheVBob25lTGlzdCgpOw0KICAgICAgICAgIHRoaXMuaW1wb3J0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuaW1wb3J0TW9kYWxWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgdGhpcy4kTW9kYWwuaW5mbyh7DQogICAgICAgICAgICB0aXRsZTogIuWvvOWFpee7k+aenCIsDQogICAgICAgICAgICBjb250ZW50OiByZXMubWVzc2FnZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBjbGVhckltcG9ydERhdGEoKSB7DQogICAgICB0aGlzLmltcG9ydFRhYmxlRGF0YSA9IFtdOw0KICAgICAgdGhpcy5pbXBvcnRDb2x1bW5zID0gW107DQogICAgICB0aGlzLnVwbG9hZGZpbGUgPSB7fTsNCiAgICB9LA0KICAgIHVwbG9hZCgpIHsNCiAgICAgIHRoaXMuaW1wb3J0TG9hZGluZyA9IHRydWU7DQogICAgICB2YXIgemlwRm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIHppcEZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIHRoaXMudXBsb2FkZmlsZSk7IC8vZmlsZeimgeWSjEBSZXF1ZXN0UGFyYW0oImZpbGUiKU11bHRpcGFydEZpbGUgZmlsZeWvueW6lOWlvQ0KICAgICAgemlwRm9ybURhdGEuYXBwZW5kKCJyZWxheUdyb3VwSWQiLCB0aGlzLnNlbGVjdE5vZGUucmVsYXlHcm91cElkKTsNCiAgICAgIHppcEZvcm1EYXRhLmFwcGVuZCgiY3RpTWFuYWdlSWQiLCB0aGlzLnNlbGVjdE5vZGUuY3RpTWFuYWdlSWQpOw0KICAgICAgdGhpcy51cGluZyA9IDE7DQogICAgICBpbXBvcnRDYWxsUmVsYXlQaG9uZUxpc3QoemlwRm9ybURhdGEpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmltcG9ydExvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLnVwaW5nID0gMDsNCiAgICAgICAgICB0aGlzLnJlc3VsdCA9IHJlcy5tZXNzYWdlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldEZpbGUoZXZlbikgew0KICAgICAgdGhpcy51cGF0aCA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsNCiAgICB9LA0KICAgIHNob3dEZXRhaWwocm93LGluZGV4KXsNCiAgICAgIHRoaXMuJHJlZnMudGFibGVUZW5hbnQudG9nZ2xlU2VsZWN0KGluZGV4KQ0KICAgIH0sDQogICAgc2hvd0RldGFpbDEocm93LGluZGV4KXsNCiAgICAgIHRoaXMuJHJlZnMudGFibGUudG9nZ2xlU2VsZWN0KGluZGV4KQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAvLyDorqHnrpfpq5jluqYNCiAgICBsZXQgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsNCiAgICB0aGlzLm1heEhlaWdodCA9IE51bWJlcihoZWlnaHQgLSAyODcpICsgInB4IjsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["callRelayGroup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAghBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"callRelayGroup.vue","sourceRoot":"src/views/cti/call-relay-group","sourcesContent":["<style lang=\"less\">\r\n@import \"../../../styles/tree&table-common.less\";\r\n@import \"../../sys/blacklist-manage/blacklistManage\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <Card>\r\n      <Row>\r\n       <div style=\"height:100%\">\r\n         <div class=\"own-space ui-time-schedule-settings\">\r\n           <Col :xs=\"10\" :sm=\"8\" :md=\"8\" :lg=\"7\" class=\"own-space-left bg-default ui-Menu-nesting-default-warp\">\r\n             <div class=\"own-header\">\r\n               <Button\r\n                   type=\"default\"\r\n                   icon=\"md-add\"\r\n                   @click=\"addRelayGroups\"\r\n               >添加中继组</Button\r\n               >\r\n             </div>\r\n             <Menu theme=\"light\" style=\"width: 100%\" class=\"ui-Menu-nesting-default\">\r\n               <Submenu v-for=\"(item,i) in treeData\" :key=\"item.id\" :name=\"item.id\">\r\n                 <template slot=\"title\">\r\n                   <div  @click=\"getCallRelayGroupTenantList1\">\r\n                     {{ item.ctiName }}\r\n                   </div>\r\n                 </template>\r\n                 <MenuItem v-for=\"(itemChild,iChild) in item.children\" :key=\"iChild.id\" :name=\"itemChild.id\" @click.native=\"getCallRelayGroupTenantList1(itemChild.id,item.id)\">\r\n                   {{itemChild.ctiName}}\r\n                   <div class=\"ui-icon-box\">\r\n                     <Icon\r\n                         type=\"ios-create-outline\"\r\n                         @click=\"editRelayGroups1(itemChild)\"\r\n                         @click.stop\r\n                     />\r\n                     <Icon\r\n                         type=\"ios-trash-outline\"\r\n                         @click=\"deleteRelayGroups1(itemChild)\"\r\n                         @click.stop\r\n                     />\r\n                   </div>\r\n                 </MenuItem>\r\n               </Submenu>\r\n             </Menu>\r\n             <!--{{blackListGroups}}-->\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n             <!--          <hr>-->\r\n             <!--          <Row class=\"operation\">-->\r\n             <!--            <Button @click=\"addRelayGroups\" type=\"primary\" icon=\"md-add\"-->\r\n             <!--              >添加中继组</Button-->\r\n             <!--            >-->\r\n             <!--            <Dropdown @on-click=\"handleDropdown\">-->\r\n             <!--              <Button>-->\r\n             <!--                更多操作-->\r\n             <!--                <Icon type=\"md-arrow-dropdown\" />-->\r\n             <!--              </Button>-->\r\n             <!--              <DropdownMenu slot=\"list\">-->\r\n             <!--                <DropdownItem name=\"editRelayGroups\">编辑中继组</DropdownItem>-->\r\n             <!--                <DropdownItem name=\"deleteRelayGroups\">删除中继组</DropdownItem>-->\r\n             <!--                <DropdownItem name=\"refreshRelayGroup\">刷新</DropdownItem>-->\r\n             <!--              </DropdownMenu>-->\r\n             <!--            </Dropdown>-->\r\n             <!--          </Row>-->\r\n             <!--          <Alert show-icon>-->\r\n             <!--            当前选择：-->\r\n             <!--            <span class=\"select-title\">{{ editTitle }}</span>-->\r\n             <!--            <a class=\"select-clear\" v-if=\"editTitle\" @click=\"cancelEdit\"-->\r\n             <!--              >取消选择</a-->\r\n             <!--            >-->\r\n             <!--          </Alert>-->\r\n             <!--          &lt;!&ndash; <Input-->\r\n             <!--            v-model=\"searchKey\"-->\r\n             <!--            suffix=\"ios-search\"-->\r\n             <!--            @on-change=\"search\"-->\r\n             <!--            placeholder=\"输入搜索字典\"-->\r\n             <!--            clearable-->\r\n             <!--          /> &ndash;&gt;-->\r\n             <!--          <div class=\"tree-bar\" :style=\"{ maxHeight: maxHeight }\">-->\r\n             <!--            <Tree-->\r\n             <!--              ref=\"tree\"-->\r\n             <!--              :data=\"treeData\"-->\r\n             <!--              :render=\"renderContent\"-->\r\n             <!--              @on-select-change=\"selectTree\"-->\r\n             <!--            ></Tree>-->\r\n             <!--            <Spin size=\"large\" fix v-if=\"treeLoading\"></Spin>-->\r\n             <!--          </div>-->\r\n           </Col>\r\n           <Col :xs=\"14\" :sm=\"16\" :md=\"16\" :lg=\"17\">\r\n             <div class=\"own-space-right\">\r\n               <Tabs v-model=\"tabName\" :animated=\"false\" @on-click=\"changeTab\">\r\n                 <TabPane label=\"中继资源\" name=\"0\"></TabPane>\r\n                 <TabPane label=\"中继号码\" name=\"1\"></TabPane>\r\n               </Tabs>\r\n\r\n               <Row class=\"operation\">\r\n                 <Col v-show=\"relayGroupTip == 0\" class=\" ui-operation\">\r\n                   <div class=\"ui-operation-left\" v-show=\" selectCount > 0\">\r\n                     <Row class=\"ui-alert-warp\">\r\n                       <Alert>\r\n                         已选择\r\n                         <span class=\"select-count\">{{ selectCount }}</span> 项\r\n                         <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n                       </Alert>\r\n                     </Row>\r\n                     <Button @click=\"delAll\" icon=\"md-trash\">批量回收通道</Button>\r\n                     <Button @click=\"getCallRelayGroupTenantList\" icon=\"md-refresh\">刷新</Button>\r\n                   </div>\r\n                   <div class=\"ui-operation-right\" v-show=\" selectCount <= 0\">\r\n                     <Button @click=\"addCallRelayTenant\" type=\"primary\" icon=\"md-add\">添加公司通道</Button>\r\n                   </div>\r\n\r\n\r\n\r\n                   <!-- <Button type=\"dashed\" @click=\"openTip = !openTip\">{{\r\n                     openTip ? \"关闭提示\" : \"开启提示\"\r\n                   }}</Button> -->\r\n                 </Col>\r\n                 <Col v-show=\"relayGroupPhoneTip == 1\"  class=\" ui-operation\">\r\n\r\n                   <div class=\"ui-operation-left\" v-show=\" selectCount > 0\">\r\n                     <Row class=\"ui-alert-warp\">\r\n                       <Alert>\r\n                         已选择\r\n                         <span class=\"select-count\">{{ selectCount }}</span> 项\r\n                         <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n                       </Alert>\r\n                     </Row>\r\n                     <Button @click=\"delPhoneAll\" icon=\"md-trash\">批量删除</Button>\r\n                     <Dropdown @on-click=\"phoneDropdown\">\r\n                       <Button>\r\n                         更多操作\r\n                         <Icon type=\"md-arrow-dropdown\" />\r\n                       </Button>\r\n                       <DropdownMenu slot=\"list\">\r\n                         <DropdownItem name=\"distriButionPhone\">分配</DropdownItem>\r\n                         <DropdownItem name=\"recoveryPhone\">回收</DropdownItem>\r\n                         <DropdownItem name=\"enablePhone\">启用</DropdownItem>\r\n                         <DropdownItem name=\"outOfServicePhone\">停用</DropdownItem>\r\n                       </DropdownMenu>\r\n                     </Dropdown>\r\n                   </div>\r\n                   <div class=\"ui-operation-right\" v-show=\" selectCount <= 0\">\r\n                     <Button @click=\"addPhone\" type=\"primary\" icon=\"md-add\">添加中继号码</Button>\r\n                     <Button @click=\"importExcel\" icon=\"ios-download\">导入数据</Button>\r\n                     <Button @click=\"getCallRelayPhoneList\" icon=\"md-refresh\">刷新</Button>\r\n                   </div>\r\n\r\n\r\n\r\n\r\n\r\n                   <!-- <Button type=\"dashed\" @click=\"openTip = !openTip\">{{\r\n                     openTip ? \"关闭提示\" : \"开启提示\"\r\n                   }}</Button> -->\r\n                 </Col>\r\n               </Row>\r\n\r\n               <Row>\r\n                 <Table\r\n                     :loading=\"loading\"\r\n                     :columns=\"columns\"\r\n                     :data=\"data\"\r\n                     sortable=\"custom\"\r\n                     @on-sort-change=\"changeSort\"\r\n                     @on-selection-change=\"showSelect\"\r\n                     ref=\"table\"\r\n                     @on-row-click=\"showDetail1\"\r\n                 ></Table>\r\n               </Row>\r\n               <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n                 <Page\r\n                     :current=\"pageNumber\"\r\n                     :total=\"total\"\r\n                     :page-size=\"pageSize\"\r\n                     @on-change=\"changePage\"\r\n                     @on-page-size-change=\"changePageSize\"\r\n                     :page-size-opts=\"[10, 20, 50]\"\r\n                     size=\"small\"\r\n                     show-total\r\n                     show-elevator\r\n                     show-sizer\r\n                 ></Page>\r\n               </Row>\r\n             </div>\r\n           </Col>\r\n         </div>\r\n       </div>\r\n<!--        <div class=\"expand\">-->\r\n<!--          <Icon-->\r\n<!--            :type=\"expandIcon\"-->\r\n<!--            size=\"16\"-->\r\n<!--            class=\"icon\"-->\r\n<!--            @click=\"changeExpand\"-->\r\n<!--          />-->\r\n<!--        </div>-->\r\n\r\n      </Row>\r\n    </Card>\r\n\r\n    <Drawer title=\"导入数据\" closable v-model=\"importModalVisible\" width=\"1000\">\r\n      <div\r\n        style=\"\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n        \"\r\n      ><Upload action :before-upload=\"beforeUploadImport\" accept=\".xls, .xlsx\">\r\n        <Button\r\n            :loading=\"reading\"\r\n            icon=\"ios-cloud-upload-outline\"\r\n            style=\"margin-right: 10px\"\r\n        >上传Excel文件</Button\r\n        >\r\n        <span v-if=\"uploadfile.name\"\r\n        >当前选择文件：{{ uploadfile.name }}</span\r\n        >\r\n      </Upload>\r\n\r\n        <!-- <input type=\"file\" @change=\"getFile($event)\" /><button @click=\"upload\">上传</button>\r\n        <div>{{ result }}</div> -->\r\n        <div v-show=\"uping == 1\">正在上传中</div>\r\n        <Button @click=\"clearImportData\" icon=\"md-trash\">清空数据</Button>\r\n      </div>\r\n      <Alert type=\"warning\" show-icon\r\n        >导入前请下载查看导入模版数据文件，确保数据格式正确，不得修改列英文名称。</Alert\r\n      >\r\n      <Table\r\n        :columns=\"phoneImportColumns\"\r\n        :height=\"height\"\r\n        :data=\"importTableData\"\r\n        ref=\"importTable\"\r\n      ></Table>\r\n      <div class=\"drawer-footer\">\r\n        <Button\r\n          @click=\"downloadTemple\"\r\n          type=\"info\"\r\n          style=\"position: absolute; left: 15px\"\r\n          >下载导入模板</Button\r\n        >\r\n        <Button @click=\"importModalVisible = false\">关闭</Button>\r\n        <Button\r\n          :loading=\"importLoading\"\r\n          :disabled=\"importTableData.length <= 0\"\r\n          @click=\"importData\"\r\n          style=\"margin-left: 5px\"\r\n          type=\"primary\"\r\n        >\r\n          确认导入\r\n          <span v-if=\"importTableData.length > 0\"\r\n            >{{ importTableData.length }} 条数据</span\r\n          >\r\n        </Button>\r\n      </div>\r\n    </Drawer>\r\n\r\n    <!-- <Modal :title=\"importExcelTitle\" v-model=\"importExcelModalVisible\" :mask-closable=\"false\" :width=\"700\">\r\n          <div style=\"display:flex;justify-content: space-between;align-items: center;\">\r\n          <Upload action :before-upload=\"beforeUploadImport\" accept=\".xls, .xlsx\">\r\n            <Button\r\n              :loading=\"reading\"\r\n              icon=\"ios-cloud-upload-outline\"\r\n              style=\"margin-right:10px\"\r\n            >上传Excel文件</Button>\r\n            <span v-if=\"uploadfile.name\">当前选择文件：{{ uploadfile.name }}</span>\r\n          </Upload>\r\n          <span>{{ result }}</span>\r\n          <span v-show=\"uping==1\">正在上传中</span>\r\n          <Button @click=\"upload\" icon=\"md-trash\">上传数据</Button>\r\n        </div>\r\n    </Modal> -->\r\n\r\n    <Modal\r\n      :title=\"relayGroupModalTitle\"\r\n      v-model=\"relayGroupModalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <Form\r\n        ref=\"relayGroupForm\"\r\n        :model=\"relayGroupForm\"\r\n        :label-width=\"95\"\r\n        :rules=\"relayGroupFormValidate\"\r\n      >\r\n        <FormItem label=\"Cti名称\" prop=\"ctiManageId\">\r\n          <Select v-model=\"relayGroupForm.ctiManageId\" placeholder=\"请选择\">\r\n            <Option\r\n              v-for=\"(item, index) in queryCtiListItems\"\r\n              :key=\"index\"\r\n              :value=\"item.id\"\r\n              >{{ item.ctiName }}</Option\r\n            >\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"中继组名称\" prop=\"relayGroupName\">\r\n          <Input v-model=\"relayGroupForm.relayGroupName\" />\r\n        </FormItem>\r\n        <FormItem label=\"中继组号\" prop=\"relayGroupNo\">\r\n          <Input v-model=\"relayGroupForm.relayGroupNo\" />\r\n        </FormItem>\r\n        <FormItem label=\"中继类型\" prop=\"relayGroupType\">\r\n          <Select v-model=\"relayGroupForm.relayGroupType\" placeholder=\"请选择\">\r\n            <Option value=\"1\">网络中继 (SIP，IAX)</Option>\r\n            <Option value=\"2\">模拟中继 (FXO口)</Option>\r\n            <Option value=\"3\">数字中继 (E1 PRI)</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"通道总数\" prop=\"totalChanel\">\r\n          <!-- <Input v-model=\"relayGroupForm.totalChanel\"  /> -->\r\n          <InputNumber\r\n            :width=\"100\"\r\n            v-model=\"relayGroupForm.totalChanel\"\r\n          ></InputNumber>\r\n        </FormItem>\r\n        <FormItem label=\"溢出率(%)\" prop=\"overflowRate\">\r\n          <!-- <Input v-model=\"relayGroupForm.overflowRate\"  /> -->\r\n          <InputNumber\r\n            :width=\"100\"\r\n            v-model=\"relayGroupForm.overflowRate\"\r\n          ></InputNumber>\r\n        </FormItem>\r\n        <FormItem label=\"备注\" prop=\"remark\">\r\n          <Input v-model=\"relayGroupForm.remark\" />\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"relayGroupModalVisible = false\"\r\n          >取消</Button\r\n        >\r\n        <Button\r\n          type=\"primary\"\r\n          :loading=\"submitLoading\"\r\n          @click=\"handelSubmitRelayGroup\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      :title=\"modalTitle\"\r\n      v-model=\"modalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"700\"\r\n    >\r\n      <Form ref=\"form\" :model=\"form\" :label-width=\"180\" :rules=\"formValidate\">\r\n        <table id=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th :width=\"250\">新增公司名称</th>\r\n              <th :width=\"150\">分配通道数量</th>\r\n              <th>\r\n                <Button\r\n                  style=\"float: right; margin-left: 60px\"\r\n                  @click=\"insertTd\"\r\n                  :width=\"200\"\r\n                  type=\"primary\"\r\n                  icon=\"md-add\"\r\n                  >添加公司</Button\r\n                >\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index) in queryTenantListItems\" :key=\"index\">\r\n              <td :width=\"150\" style=\"text-align: center\">\r\n                {{ item.title\r\n                }}<Input\r\n                  v-model=\"item.tenantId\"\r\n                  v-show=\"false\"\r\n                  :value=\"item.tenantId\"\r\n                />\r\n              </td>\r\n              <td :width=\"150\">\r\n                <Input prop=\"maxChanel\" v-model=\"item.maxChanel\" />\r\n              </td>\r\n              <td>\r\n                <Button\r\n                  style=\"float: right\"\r\n                  @click=\"removeTd(index)\"\r\n                  type=\"primary\"\r\n                  icon=\"md-trash\"\r\n                  >移除</Button\r\n                >\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"modalVisible = false\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handelSubmit\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      :title=\"modalTenantPhoneTitle\"\r\n      v-model=\"tenantPhoneModalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <Form\r\n        ref=\"tenantPhoneForm\"\r\n        :model=\"tenantPhoneForm\"\r\n        :label-width=\"80\"\r\n        :rules=\"tenantPhoneFormValidate\"\r\n      >\r\n        <FormItem label=\"公司\" prop=\"tenantIds\">\r\n          <Select v-model=\"tenantPhoneForm.tenantIds\" placeholder=\"请选择\">\r\n            <Option\r\n              v-for=\"(item, index) in queryTenantPhoneListItems\"\r\n              :key=\"index\"\r\n              :value=\"item.id\"\r\n              >{{ item.title }}</Option\r\n            >\r\n          </Select>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"cancelTenantPhone\">取消</Button>\r\n        <Button\r\n          type=\"primary\"\r\n          :loading=\"submitLoading\"\r\n          @click=\"submitTenantPhone\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      :title=\"modalPhoneTitle\"\r\n      v-model=\"phoneModalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"600\"\r\n    >\r\n      <Form\r\n        ref=\"phoneForm\"\r\n        :model=\"phoneForm\"\r\n        :label-width=\"110\"\r\n        :rules=\"phoneFormValidate\"\r\n      >\r\n        <FormItem label=\"外呼主叫号码\" prop=\"relayPhoneNumber\">\r\n          <Input v-model=\"phoneForm.relayPhoneNumber\" />\r\n        </FormItem>\r\n        <FormItem label=\"工作模式\" prop=\"workMode\">\r\n          <Select v-model=\"phoneForm.workMode\" placeholder=\"请选择\">\r\n            <Option value=\"1\">呼入呼出</Option>\r\n            <Option value=\"0\">仅呼入</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"拉入黑名单\" prop=\"blackMark\">\r\n          <Select v-model=\"phoneForm.blackMark\" placeholder=\"请选择\">\r\n            <Option value=\"1\">不加入黑名单</Option>\r\n            <Option value=\"0\">加入黑名单</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"备注\" prop=\"remark\">\r\n          <Input type=\"textarea\" v-model=\"phoneForm.remark\" :rows=\"4\" />\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"cancelPhone\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submitPhone\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      :title=\"modalTenantTitle\"\r\n      v-model=\"modalTenantVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"800\"\r\n    >\r\n      <Row v-show=\"openTipTenant\">\r\n        <Alert show-icon>\r\n          已选择\r\n          <span class=\"select-count\">{{ selectTenantCount }}</span> 项\r\n          <a class=\"select-clear\" @click=\"clearTenantSelectAll\">清空</a>\r\n        </Alert>\r\n      </Row>\r\n      <Row>\r\n        <Table\r\n          :loading=\"loading\"\r\n          :columns=\"columnsTenant\"\r\n          :data=\"dataTenant\"\r\n          sortable=\"title\"\r\n          @on-sort-change=\"changeTenantSort\"\r\n          @on-selection-change=\"showTenantSelect\"\r\n          ref=\"tableTenant\"\r\n          @on-row-click=\"showDetail\"\r\n        ></Table>\r\n      </Row>\r\n      <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n        <Page\r\n          :current=\"pageNumberTenant\"\r\n          :total=\"totalTenant\"\r\n          :page-size=\"pageSizeTenant\"\r\n          @on-change=\"changeTenantPage\"\r\n          @on-page-size-change=\"changeTenantPageSize\"\r\n          :page-size-opts=\"[10, 20, 50]\"\r\n          size=\"small\"\r\n          show-total\r\n          show-elevator\r\n          show-sizer\r\n        ></Page>\r\n      </Row>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"modalTenantVisible = false\">取消</Button>\r\n        <Button\r\n          type=\"primary\"\r\n          :loading=\"submitLoading\"\r\n          @click=\"handelTenantSubmit\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getAllCtiList,\r\n  getCtiList,\r\n  addRelayGroup,\r\n  editRelayGroup,\r\n  deleteRelayGroup,\r\n  getCallRelayGroupTenantAll,\r\n  getAllTenantDataList,\r\n  addRelayGroupTenant,\r\n  deleteRelayGroupTenant,\r\n  getCallRelayPhoneAlls,\r\n  addRelayGroupPhone,\r\n  editRelayGroupPhone,\r\n  deleteRelayGroupPhone,\r\n  operationPhoneTenant,\r\n  importCallRelayPhoneList,\r\n  getTenantAllLists,\r\n  searchDict,\r\n  getAllDictDataList,\r\n  addDictData,\r\n  editDictData,\r\n  deleteData,\r\n} from \"@/api/index\";\r\n\r\nimport { getStore, setStore } from \"@/libs/storage\";\r\nimport { phoneImportColumns, phoneData } from \"@/libs/importCallRelayPhone\";\r\nimport excel from \"@/libs/excel\";\r\nexport default {\r\n  name: \"call-relaygroup\",\r\n  data() {\r\n    return {\r\n      openTip: false,\r\n      treeLoading: false, // 树加载状态\r\n      maxHeight: \"500px\",\r\n      loading: false, // 表格加载状态\r\n      editTitle: \"\", // 编辑节点名称\r\n      searchKey: \"\", // 搜索树\r\n      expand: true,\r\n      span: 18,\r\n      expandIcon: \"ios-arrow-back\",\r\n      selectNode: {},\r\n      treeData: [], // 树数据\r\n      selectCount: 0, // 多选计数\r\n      selectList: [], // 多选数据\r\n      relayGroupTip: 0,\r\n      relayGroupPhoneTip: 0,\r\n      modalTenantVisible: false, // 添加或编辑显示\r\n      modalTenantTitle: \"\", // 添加或编辑标题\r\n      openTipTenant: false,\r\n      loadingTenant: false, // 表格加载状态\r\n      selectTenantCount: 0, // 多选计数\r\n      selectTenantList: [], // 多选数据\r\n      pageNumberTenant: 1,\r\n      pageSizeTenant: 10,\r\n      pageNumber: 1, // 当前页数\r\n      pageSize: 10, // 页面大小\r\n      upath: \"\",\r\n      groupId:\"\",\r\n      importModalVisible: false, // 导入显示\r\n      importExcelModalVisible: false,\r\n      uploadfile: {\r\n        name: \"\",\r\n      },\r\n      importTableData: [],\r\n      importColumns: [],\r\n      importLoading: false, // 导入加载状态\r\n\r\n      tenantPhoneModalVisible: false, // 添加或编辑显示\r\n      modalTenantPhoneTitle: \"\", // 添加或编辑标题\r\n      tenantPhoneFormValidate: {\r\n        // 表单验证规则\r\n        tenantIds: [\r\n          { required: true, message: \"公司不能为空\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      tenantPhoneForm: {\r\n        tenantIds: \"\"\r\n      },\r\n      queryTenantPhoneListItems: [],\r\n      phoneModalVisible: false, // 添加或编辑显示\r\n      modalPhoneTitle: \"\", // 添加或编辑标题\r\n      importExcelTitle: \"导入数据\",\r\n      phoneForm: {\r\n        // 添加或编辑表单对象初始化数据\r\n        relayPhoneNumber: \"\",\r\n        workMode: \"\",\r\n        blackMark: \"\",\r\n      },\r\n      phoneFormValidate: {\r\n        // 表单验证规则\r\n        relayPhoneNumber: [\r\n          { required: true, message: \"中继号码不能为空\", trigger: \"blur\" }\r\n        ],\r\n        workMode: [\r\n          { required: true, message: \"工作模式不能为空\", trigger: \"change\" }\r\n        ],\r\n        blackMark: [\r\n          { required: true, message: \"黑名单不能为空\", trigger: \"change\" }\r\n        ],\r\n      },\r\n\r\n      columnsTenant: [\r\n        // 表头\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"公司编号\",\r\n          key: \"code\",\r\n          width: 200,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"公司名称\",\r\n          key: \"title\",\r\n          width: 355,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"可分配通道数量\",\r\n          key: \"chanleNum\",\r\n          width: 150,\r\n          sortable: true\r\n        }\r\n      ],\r\n      dataTenant: [], //表单数据\r\n      totalTenant: 0, // 表单数据总数\r\n      searchTenantForm: {\r\n        pageNumberTenant: 1, // 当前页数\r\n        pageSizeTenant: 10, // 页面大小\r\n        sort: \"create_time\", // 默认排序字段\r\n        order: \"desc\", // 默认排序方式\r\n      },\r\n      searchForm: {\r\n        // 搜索框对应data对象\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\", // 默认排序方式\r\n      },\r\n      modalType: 0, // 添加或编辑标识\r\n      modalVisible: false, // 添加或编辑显示\r\n      relayGroupModalVisible: false,\r\n      relayGroupModalTitle: \"\",\r\n      modalTitle: \"\", // 添加或编辑标题\r\n      queryCtiListItems: [],\r\n      queryTenantListItems: [],\r\n      maxNum: 0,\r\n      relayGroupForm: {\r\n        ctiManageId: \"\",\r\n        relayGroupName: \"\",\r\n        relayGroupNo: \"\",\r\n        relayGroupType: \"\",\r\n        remark: \"\",\r\n        totalChanel: \"0\",\r\n        overflowRate: \"0\"\r\n      },\r\n      form: {\r\n        // 添加或编辑表单对象初始化数据\r\n        maxChanel: \"\",\r\n      },\r\n      relayGroupFormValidate: {\r\n        // 表单验证规则\r\n        ctiManageId: [\r\n          { required: true, message: \"Cti不能为空\", trigger: \"change\" }\r\n        ],\r\n        relayGroupName: [\r\n          { required: true, message: \"中继名称不能为空\", trigger: \"blur\" }\r\n        ],\r\n        relayGroupNo: [\r\n          { required: true, message: \"中继编号不能为空\", trigger: \"blur\" }\r\n        ],\r\n        relayGroupType: [\r\n          { required: true, message: \"中继类型不能为空\", trigger: \"change\" }\r\n        ]\r\n      },\r\n      formValidate: {\r\n        // 表单验证规则\r\n        maxChanel: [\r\n          { required: true, message: \"分配数量不能为空\", trigger: \"blur\" }\r\n        ],\r\n      },\r\n      columns: [\r\n        // 表头\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"公司名称\",\r\n          key: \"title\",\r\n          width: 140,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"中继组名称\",\r\n          key: \"relayGroupName\",\r\n          width: 130,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"中继组号\",\r\n          key: \"relayGroupNo\",\r\n          width: 120,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"已分配通道数\",\r\n          key: \"maxChanel\",\r\n          width: 120,\r\n        },\r\n        {\r\n          title: \"公司最大通道数/公司已分配通道数\",\r\n          key: \"maxNum\",\r\n          width: 270,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          width: 160,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 52,\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              //删除\r\n              h('Tooltip',{props: {\r\n                  placement: 'top',\r\n                  transfer: true\r\n                }},[h(\r\n                  \"Icon\",\r\n                  {\r\n                    props: {\r\n                      type: \"ios-trash-outline\",\r\n                      size: \"\",\r\n                    },\r\n                    style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                    on: {\r\n                      click: () => {\r\n                        this.remove(params.row);\r\n                      },\r\n                    },\r\n                  },\r\n                  this.$t(\"play\")\r\n              ),h('span', {\r\n                slot: 'content',\r\n                style: {\r\n                  whiteSpace: 'normal'\r\n                }\r\n              }, '删除')]),\r\n            ]);\r\n          },\r\n        },\r\n      ],\r\n      submitLoading: false, // 添加或编辑提交状态\r\n      data: [], //表单数据\r\n      total: 0, // 表单数据总数\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      // 获取树数据\r\n      this.getAllCti();\r\n      //表单获取Cti数据\r\n      this.getAllCtiLists();\r\n    },\r\n    getAllCti() {\r\n      this.treeLoading = true;\r\n      getAllCtiList().then((res) => {\r\n        this.treeLoading = false;\r\n        if (res.success) {\r\n          var result = res.result;\r\n          for (var i = 0; i < result.length; i++) {\r\n            var children = result[i].children;\r\n            var childrenList = [];\r\n            for (var y = 0; y < children.length; y++) {\r\n              var totalC = 0;\r\n              if (parseInt(children[y].overflowRate) >= 0) {\r\n                totalC =\r\n                  children[y].totalChanel +\r\n                  Math.round(\r\n                    parseFloat(children[y].overflowRate / 100).toFixed(2) *\r\n                      children[y].totalChanel\r\n                  );\r\n              } else {\r\n                totalC = children[y].totalChanel;\r\n              }\r\n              childrenList.push({\r\n                relayGroupId: children[y].id,\r\n                id: children[y].id,\r\n                ctiName:\r\n                  children[y].relayGroupName +\r\n                  \"(\" +\r\n                  totalC +\r\n                  \"/\" +\r\n                  children[y].maxChanel +\r\n                  \")\",\r\n                relayGroupName: children[y].relayGroupName,\r\n                relayGroupNo: children[y].relayGroupNo,\r\n                relayGroupType: children[y].relayGroupType,\r\n                totalChanel: children[y].totalChanel,\r\n                overflowRate: children[y].overflowRate,\r\n                ctiManageId: children[y].ctiManageId,\r\n                areaCode: children[y].areaCode,\r\n                remark: children[y].remark,\r\n                maxChanel: children[y].maxChanel,\r\n                createBy: children[y].create_by,\r\n                createTime: children[y].create_time,\r\n                icon: \"ios-call\"\r\n              });\r\n            }\r\n            result[i].icon = \"ios-navigate\";\r\n            result[i].children = JSON.parse(JSON.stringify(childrenList));\r\n          }\r\n\r\n          this.treeData = result;\r\n        }\r\n      });\r\n    },\r\n    getTenantAll() {\r\n      getTenantAllLists().then((res) => {\r\n        if (res.success) {\r\n          this.queryTenantPhoneListItems = res.result;\r\n        }\r\n      });\r\n    },\r\n    changeTab(v) {\r\n      if (0 == v) {\r\n        this.relayGroupTip = v;\r\n        this.relayGroupPhoneTip = v;\r\n        this.columns = [\r\n          // 表头\r\n          {\r\n            type: \"selection\",\r\n            width: 60,\r\n            align: \"center\",\r\n          },\r\n          {\r\n            type: \"index\",\r\n            width: 60,\r\n            align: \"center\",\r\n          },\r\n          {\r\n            title: \"公司名称\",\r\n            key: \"title\",\r\n            width: 140,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"中继组名称\",\r\n            key: \"relayGroupName\",\r\n            width: 130,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"中继组号\",\r\n            key: \"relayGroupNo\",\r\n            width: 120,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"已分配通道数\",\r\n            key: \"maxChanel\",\r\n            width: 120,\r\n          },\r\n          {\r\n            title: \"公司最大通道数/公司已分配通道数\",\r\n            key: \"maxNum\",\r\n            width: 270,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"创建时间\",\r\n            key: \"createTime\",\r\n            width: 160,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"操作\",\r\n            key: \"action\",\r\n            width: 70,\r\n            render: (h, params) => {\r\n              return h(\"div\", [\r\n                h('Tooltip',{props: {\r\n                    placement: 'top',\r\n                    transfer: true\r\n                  }},[h(\r\n                    \"Icon\",\r\n                    {\r\n                      props: {\r\n                        type: \"ios-create-outline\",\r\n                        size: \"\",\r\n                      },\r\n                      style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                      on: {\r\n                        click: () => {\r\n                          this.remove(params.row);\r\n                        },\r\n                      },\r\n                    },\r\n                    this.$t(\"play\")\r\n                ),h('span', {\r\n                  slot: 'content',\r\n                  style: {\r\n                    whiteSpace: 'normal'\r\n                  }\r\n                }, '删除')]),\r\n                // h(\r\n                //   \"Button\",\r\n                //   {\r\n                //     props: {\r\n                //       type: \"error\",\r\n                //       size: \"small\",\r\n                //     },\r\n                //     on: {\r\n                //       click: () => {\r\n                //         this.remove(params.row);\r\n                //       },\r\n                //     },\r\n                //   },\r\n                //   \"删除\"\r\n                // ),\r\n              ]);\r\n            },\r\n          },\r\n        ];\r\n        this.getCallRelayGroupTenantList();\r\n      } else {\r\n        this.relayGroupTip = v;\r\n        this.relayGroupPhoneTip = v;\r\n        this.columns = [\r\n          // 表头\r\n          {\r\n            type: \"selection\",\r\n            width: 60,\r\n            align: \"center\",\r\n          },\r\n          {\r\n            title: \"公司名称\",\r\n            key: \"title\",\r\n            width: 210,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"中继号码\",\r\n            key: \"relayPhoneNumber\",\r\n            width: 125,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"所属CTI\",\r\n            key: \"ctiName\",\r\n            width: 110,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"中继组名称\",\r\n            key: \"relayGroupName\",\r\n            width: 125,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"分配状态\",\r\n            key: \"assigned\",\r\n            width: 100,\r\n          },\r\n          {\r\n            title: \"有效状态\",\r\n            key: \"enabled\",\r\n            width: 120,\r\n            render: (h, params) => {\r\n              let re = \"\";\r\n              if (params.row.enabled == \"1\") {\r\n                return h(\"div\", [\r\n                  h(\"Badge\", {\r\n                    props: {\r\n                      status: \"success\",\r\n                      text: \"有效\",\r\n                    },\r\n                  }),\r\n                ]);\r\n              } else if (params.row.enabled == \"0\") {\r\n                return h(\"div\", [\r\n                  h(\"Badge\", {\r\n                    props: {\r\n                      status: \"error\",\r\n                      text: \"无效\",\r\n                    },\r\n                  }),\r\n                ]);\r\n              }\r\n            },\r\n          },\r\n          {\r\n            title: \"工作模式\",\r\n            key: \"workMode\",\r\n            width: 100,\r\n            render: (h, params) => {\r\n              let re = \"\";\r\n              if (params.row.workMode == \"1\") {\r\n                return h(\"span\", [h(\"span\", \"呼入呼出\")]);\r\n              } else if (params.row.workMode == \"0\") {\r\n                return h(\"span\", [h(\"span\", \"仅呼入\")]);\r\n              }\r\n            },\r\n          },\r\n          {\r\n            title: \"备注\",\r\n            key: \"remark\",\r\n            width: 150,\r\n            sortable: true,\r\n          },\r\n          {\r\n            title: \"操作\",\r\n            key: \"action\",\r\n            width: 90,\r\n            render: (h, params) => {\r\n              return h(\"div\", [\r\n                h('Tooltip',{props: {\r\n                    placement: 'top',\r\n                    transfer: true\r\n                  }},[h(\r\n                    \"Icon\",\r\n                    {\r\n                      props: {\r\n                        type: \"ios-create-outline\",\r\n                        size: \"\",\r\n                      },\r\n                      style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                      on: {\r\n                        click: () => {\r\n                          this.editPhone(params.row);\r\n                        },\r\n                      },\r\n                    },\r\n                    this.$t(\"play\")\r\n                ),h('span', {\r\n                  slot: 'content',\r\n                  style: {\r\n                    whiteSpace: 'normal'\r\n                  }\r\n                }, '编辑')]),\r\n                // h(\r\n                //   \"Button\",\r\n                //   {\r\n                //     props: {\r\n                //       type: \"primary\",\r\n                //       size: \"small\",\r\n                //     },\r\n                //     style: {\r\n                //       marginRight: \"5px\",\r\n                //     },\r\n                //     on: {\r\n                //       click: () => {\r\n                //         this.editPhone(params.row);\r\n                //       },\r\n                //     },\r\n                //   },\r\n                //   \"编辑\"\r\n                // ),\r\n                // h(\r\n                //   \"Button\",\r\n                //   {\r\n                //     props: {\r\n                //       type: \"error\",\r\n                //       size: \"small\",\r\n                //     },\r\n                //     on: {\r\n                //       click: () => {\r\n                //         this.removePhone(params.row);\r\n                //       },\r\n                //     },\r\n                //   },\r\n                //   \"删除\"\r\n                // ),\r\n                h('Tooltip',{props: {\r\n                    placement: 'top',\r\n                    transfer: true\r\n                  }},[h(\r\n                    \"Icon\",\r\n                    {\r\n                      props: {\r\n                        type: \"ios-trash-outline\",\r\n                        size: \"\",\r\n                      },\r\n                      style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                      on: {\r\n                        click: () => {\r\n                          this.removePhone(params.row);\r\n                        },\r\n                      },\r\n                    },\r\n                    this.$t(\"play\")\r\n                ),h('span', {\r\n                  slot: 'content',\r\n                  style: {\r\n                    whiteSpace: 'normal'\r\n                  }\r\n                }, '删除')]),\r\n              ]);\r\n            },\r\n          },\r\n        ];\r\n        this.getCallRelayPhoneList();\r\n      }\r\n    },\r\n    getAllCtiLists() {\r\n      getAllCtiList().then((res) => {\r\n        if (res.success) {\r\n          var result = res.result;\r\n          for (var i = 0; i < result.length; i++) {\r\n            this.queryCtiListItems.push({\r\n              id: result[i].id,\r\n              ctiName: result[i].ctiName,\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    renderContent(h, { root, node, data }) {\r\n      // return h(\"span\", [\r\n      //   h(\"span\", [\r\n      //     h(\"span\", data.ctiName),\r\n      //   ]),\r\n      // ]);\r\n      return h(\"span\", [\r\n        h(\"span\", [\r\n          h(\"Icon\", {\r\n            props: {\r\n              type: data.icon,\r\n              size: \"16\",\r\n              color: \"\",\r\n            },\r\n            style: {\r\n              \"margin-right\": \"8px\",\r\n              \"margin-bottom\": \"3px\",\r\n            },\r\n          }),\r\n          h(\"span\", data.ctiName),\r\n        ]),\r\n      ]);\r\n    },\r\n    search() {\r\n      // 搜索树\r\n      if (this.searchKey) {\r\n        this.treeLoading = true;\r\n        searchDict({ key: this.searchKey }).then((res) => {\r\n          this.treeLoading = false;\r\n          if (res.success) {\r\n            this.treeData = res.result;\r\n          }\r\n        });\r\n      } else {\r\n        // 为空重新加载\r\n        this.getAllCti();\r\n      }\r\n    },\r\n    selectTree(v) {\r\n      if (v.length > 0) {\r\n        // 转换null为\"\"\r\n        for (let attr in v[0]) {\r\n          if (v[0][attr] == null) {\r\n            v[0][attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v[0]);\r\n        let data = JSON.parse(str);\r\n        this.selectNode = data;\r\n        this.relayGroupForm = data;\r\n        this.editTitle = data.ctiName;\r\n        // 重新加载表\r\n        this.searchForm.pageNumber = 1;\r\n        this.searchForm.pageSize = 10;\r\n        if (this.relayGroupTip == 0) {\r\n          this.getCallRelayGroupTenantList();\r\n        } else {\r\n          this.getCallRelayPhoneList();\r\n        }\r\n      } else {\r\n        this.cancelEdit();\r\n      }\r\n    },\r\n    addCallRelayTenant() {\r\n      if (!this.selectNode.relayGroupId) {\r\n        this.$Message.warning(\"请先选择一个中继组进行分配\");\r\n        return;\r\n      }\r\n      if (parseInt(this.selectNode.overflowRate) >= 0) {\r\n        this.maxNum =\r\n          parseInt(\r\n            this.selectNode.totalChanel +\r\n              Math.round(\r\n                parseFloat(this.selectNode.overflowRate / 100).toFixed(2) *\r\n                  this.selectNode.totalChanel\r\n              )\r\n          ) - parseInt(this.selectNode.maxChanel);\r\n      } else {\r\n        this.maxNum =\r\n          parseInt(this.selectNode.totalChanel) -\r\n          parseInt(this.selectNode.maxChanel);\r\n      }\r\n\r\n      if (this.maxNum <= 0) {\r\n        this.$Message.warning(\"分配通道数为0不能分配\");\r\n        return;\r\n      }\r\n      this.modalType = 0;\r\n      this.$refs.form.resetFields();\r\n      this.modalVisible = true;\r\n      this.modalTitle = \"新增中继组通道数(剩余分配总数\" + this.maxNum + \")\";\r\n      this.queryTenantListItems = [];\r\n    },\r\n    insertTd() {\r\n      this.modalTenantVisible = true;\r\n      this.modalTenantTitle=\"添加公司\";\r\n      this.getTenantDataList();\r\n    },\r\n    removeTd(index) {\r\n      this.queryTenantListItems.splice(index, 1);\r\n    },\r\n    cancelEdit() {\r\n      let data = this.$refs.tree.getSelectedNodes()[0];\r\n      if (data) {\r\n        data.selected = false;\r\n      }\r\n      // 取消选择后获取全部数据\r\n      this.selectNode = {};\r\n      this.editTitle = \"\";\r\n    },\r\n    changeSelect(v) {\r\n      this.selectCount = v.length;\r\n      this.selectList = v;\r\n    },\r\n    changeExpand() {\r\n      this.expand = !this.expand;\r\n      if (this.expand) {\r\n        this.expandIcon = \"ios-arrow-back\";\r\n        this.span = 18;\r\n      } else {\r\n        this.expandIcon = \"ios-arrow-forward\";\r\n        this.span = 23;\r\n      }\r\n    },\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      if (this.relayGroupTip == 0) {\r\n        this.getCallRelayGroupTenantList();\r\n      } else {\r\n        this.getCallRelayPhoneList();\r\n      }\r\n      this.clearSelectAll();\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      if (this.relayGroupTip == 0) {\r\n        this.getCallRelayGroupTenantList();\r\n      } else {\r\n        this.getCallRelayPhoneList();\r\n      }\r\n    },\r\n    getCallRelayGroupTenantList() {\r\n      if (!this.selectNode.relayGroupId) {\r\n        this.data = [];\r\n        this.total = 0;\r\n        return;\r\n      }\r\n      \r\n      this.loading = true;\r\n      if (this.selectNode.relayGroupId) {\r\n        this.searchForm.callRelayGroupId = this.selectNode.relayGroupId;\r\n      } else {\r\n        delete this.searchForm.callRelayGroupId;\r\n      }\r\n      \r\n      getCallRelayGroupTenantAll(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.list;\r\n          this.total = res.result.total;\r\n        }\r\n      });\r\n    },\r\n    //\r\n    getCallRelayGroupTenantList1(id,parentId) {\r\n      // if (!this.selectNode.relayGroupId) {\r\n      //   this.data = [];\r\n      //   this.total = 0;\r\n      //   return;\r\n      // }\r\n      this.groupId=id;\r\n      this.selectNode.relayGroupId=id;\r\n      this.selectNode.ctiManageId=parentId;\r\n      if (id!=undefined) {\r\n        this.searchForm.callRelayGroupId = id;\r\n      } else {\r\n        delete this.searchForm.callRelayGroupId;\r\n      }\r\n      if (this.relayGroupTip == 0) {\r\n        this.getCallRelayGroupTenantList();\r\n      } else {\r\n        this.getCallRelayPhoneList();\r\n      }\r\n      // getCallRelayGroupTenantAll(this.searchForm).then((res) => {\r\n      //   this.loading = false;\r\n      //   if (res.success) {\r\n      //     this.data = res.result.list;\r\n      //     this.total = res.result.total;\r\n      //   }\r\n      // });\r\n    },\r\n    getDataList() {\r\n      this.loading = true;\r\n      if (this.selectNode.id) {\r\n        this.searchForm.dictId = this.selectNode.id;\r\n      } else {\r\n        delete this.searchForm.dictId;\r\n      }\r\n      if (!this.searchForm.status) {\r\n        this.searchForm.status = \"\";\r\n      }\r\n      getAllDictDataList(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.content;\r\n          this.total = res.result.totalElements;\r\n        }\r\n      });\r\n    },\r\n    clearTenantSelectAll() {\r\n      this.$refs.tableTenant.selectAll(false);\r\n    },\r\n    changeTenantSort(e) {\r\n      this.searchTenantForm.sort = e.key;\r\n      this.searchTenantForm.order = e.order;\r\n      if (e.order == \"normal\") {\r\n        this.searchTenantForm.order = \"\";\r\n      }\r\n      this.getTenantDataList();\r\n    },\r\n    showTenantSelect(e) {\r\n      this.selectTenantList = e;\r\n      this.selectTenantCount = e.length;\r\n      if(this.selectTenantCount > 0){\r\n         this.openTipTenant = true;\r\n      }else{\r\n         this.openTipTenant = false;\r\n      }\r\n    },\r\n    changeTenantPage(v) {\r\n      this.searchTenantForm.pageNumber = v;\r\n      this.getTenantDataList();\r\n      this.clearTenantSelectAll();\r\n    },\r\n    changeTenantPageSize(v) {\r\n      this.searchTenantForm.pageSize = v;\r\n      this.getTenantDataList();\r\n    },\r\n    handelTenantSubmit() {\r\n      this.queryTenantListItems = this.selectTenantList;\r\n      this.modalTenantVisible = false;\r\n      this.selectTenantList = [];\r\n    },\r\n    getTenantDataList() {\r\n      this.loading = true;\r\n      this.selectTenantCount = 0;\r\n      this.searchTenantForm.callRelayGroupId = this.selectNode.relayGroupId;\r\n      this.searchTenantForm.ctiManageId = this.selectNode.ctiManageId;\r\n\r\n      this.searchTenantForm.pageNumber = this.searchTenantForm.pageNumberTenant;\r\n      this.searchTenantForm.pageSize = this.searchTenantForm.pageSizeTenant;\r\n\r\n      getAllTenantDataList(this.searchTenantForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.dataTenant = res.result.list;\r\n          this.totalTenant = res.result.total;\r\n          //this.changeTenantPageSize(1);\r\n        }\r\n      });\r\n    },\r\n    changeSort(e) {\r\n      this.searchForm.sort = e.key;\r\n      this.searchForm.order = e.order;\r\n      if (e.order == \"normal\") {\r\n        this.searchForm.order = \"\";\r\n      }\r\n      this.getDataList();\r\n    },\r\n    showSelect(e) {\r\n      this.selectList = e;\r\n      this.selectCount = e.length;\r\n      if(this.selectCount > 0){\r\n         this.openTip = true;\r\n      }else{\r\n         this.openTip = false;\r\n      }\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n    },\r\n    refreshRelayGroup() {\r\n      this.getAllCti();\r\n      this.selectNode = {};\r\n      this.editTitle = \"\";\r\n    },\r\n    refreshCti() {\r\n      getAllCtiList().then((res) => {\r\n        if (res.success) {\r\n          var result = res.result;\r\n          for (var i = 0; i < result.length; i++) {\r\n            var children = result[i].children;\r\n            var childrenList = [];\r\n            for (var y = 0; y < children.length; y++) {\r\n              var totalC = 0;\r\n              if (parseInt(children[y].overflowRate) >= 0) {\r\n                totalC =\r\n                  children[y].totalChanel +\r\n                  Math.round(\r\n                    parseFloat(children[y].overflowRate / 100).toFixed(2) *\r\n                      children[y].totalChanel\r\n                  );\r\n              } else {\r\n                totalC = children[y].totalChanel;\r\n              }\r\n              childrenList.push({\r\n                relayGroupId: children[y].id,\r\n                id: children[y].id,\r\n                ctiName:\r\n                  children[y].relayGroupName +\r\n                  \"(\" +\r\n                  totalC +\r\n                  \"/\" +\r\n                  children[y].maxChanel +\r\n                  \")\",\r\n                relayGroupName: children[y].relayGroupName,\r\n                relayGroupNo: children[y].relayGroupNo,\r\n                relayGroupType: children[y].relayGroupType,\r\n                totalChanel: children[y].totalChanel,\r\n                overflowRate: children[y].overflowRate,\r\n                ctiManageId: children[y].ctiManageId,\r\n                areaCode: children[y].areaCode,\r\n                remark: children[y].remark,\r\n                maxChanel: children[y].maxChanel,\r\n                createBy: children[y].create_by,\r\n                createTime: children[y].create_time,\r\n                icon: \"ios-call\"\r\n              });\r\n            }\r\n            result[i].icon = \"ios-navigate\";\r\n            result[i].children = JSON.parse(JSON.stringify(childrenList));\r\n          }\r\n          this.selectNode = {};\r\n          this.treeData = [];\r\n          this.treeData = result;\r\n        }\r\n      });\r\n    },\r\n    handleDropdown(name) {\r\n      if (name == \"editRelayGroups\") {\r\n        if (!this.selectNode.relayGroupId) {\r\n          this.$Message.warning(\"1级是CTI,请选择二级中继组进行编辑\");\r\n          return;\r\n        }\r\n        this.editRelayGroups();\r\n      } else if (name == \"deleteRelayGroups\") {\r\n        this.deleteRelayGroups();\r\n      } else if (name == \"refreshRelayGroup\") {\r\n        this.refreshRelayGroup();\r\n      }\r\n    },\r\n    addRelayGroups() {\r\n      this.$refs.relayGroupForm.resetFields();\r\n      delete this.relayGroupForm.id;\r\n      this.modalType = 0;\r\n      this.relayGroupModalTitle = \"添加中继组\";\r\n      this.relayGroupModalVisible = true;\r\n      this.relayGroupForm = {};\r\n    },\r\n    editRelayGroups(v) {\r\n      this.modalType = 1;\r\n      this.relayGroupModalTitle = \"编辑中继组\";\r\n      v = this.selectNode;\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] == null) {\r\n           delete v[attr];\r\n        }\r\n      }\r\n      let str = JSON.stringify(v);\r\n      let roleInfo = JSON.parse(str);\r\n      this.relayGroupForm = {};\r\n      this.relayGroupForm = roleInfo;\r\n      this.relayGroupModalVisible = true;\r\n    },\r\n\r\n    deleteRelayGroups() {\r\n      if (!this.selectNode.relayGroupId) {\r\n        this.$Message.warning(\"1级是CTI,请选择二级中继组进行删除\");\r\n        return;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        loading: true,\r\n        content: \"您确认要删除 \" + this.selectNode.ctiName + \" ?\",\r\n        onOk: () => {\r\n          // 删除\r\n          deleteRelayGroup({ ids: this.selectNode.id }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.refreshRelayGroup();\r\n              this.getCallRelayGroupTenantList();\r\n              this.getCallRelayPhoneList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    //\r\n    editRelayGroups1(v) {\r\n\r\n      this.modalType = 1;\r\n      this.relayGroupModalTitle = \"编辑中继组\";\r\n      var data={};\r\n      for(var i in v){\r\n        if(v[i]!=null){\r\n          data[i]=v[i]\r\n        }\r\n      }\r\n      this.relayGroupForm = data;\r\n      this.relayGroupModalVisible = true;\r\n    },\r\n    //\r\n    deleteRelayGroups1(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        loading: true,\r\n        content: \"您确认要删除 \" + v.ctiName + \" ?\",\r\n        onOk: () => {\r\n          // 删除\r\n          deleteRelayGroup({ ids: v.id }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.refreshRelayGroup();\r\n              this.getCallRelayGroupTenantList();\r\n              this.getCallRelayPhoneList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    add() {\r\n      if (!this.selectNode.id) {\r\n        this.$Message.warning(\"请先选择一个字典类别\");\r\n        return;\r\n      }\r\n      this.modalType = 0;\r\n      this.modalTitle = \"添加字典 \" + this.editTitle + \" 的数据\";\r\n      this.$refs.form.resetFields();\r\n      this.modalVisible = true;\r\n    },\r\n    edit(v) {\r\n      this.modalType = 1;\r\n      this.modalTitle = \"编辑字典 \" + this.editTitle + \" 的数据\";\r\n      this.$refs.form.resetFields();\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] == null) {\r\n          v[attr] = \"\";\r\n        }\r\n      }\r\n      let str = JSON.stringify(v);\r\n      let data = JSON.parse(str);\r\n      this.form = data;\r\n      this.modalVisible = true;\r\n    },\r\n    handelSubmitRelayGroup() {\r\n      this.$refs.relayGroupForm.validate((valid) => {\r\n        if (valid) {\r\n          this.submitLoading = true;\r\n          if (this.modalType == 0) {\r\n            // 添加 避免编辑后传入id等数据 记得删除\r\n            delete this.relayGroupForm.id;\r\n            addRelayGroup(this.relayGroupForm).then((res) => {\r\n              this.submitLoading = false;\r\n              if (res.success) {\r\n                this.$Message.success(\"操作成功\");\r\n                this.getAllCti();\r\n                this.relayGroupModalVisible = false;\r\n                this.relayGroupForm = [];\r\n              }\r\n            });\r\n          } else if (this.modalType == 1) {\r\n            // 编辑\r\n            editRelayGroup(this.relayGroupForm).then((res) => {\r\n              this.submitLoading = false;\r\n              if (res.success) {\r\n                this.$Message.success(\"操作成功\");\r\n                this.getAllCti();\r\n                this.relayGroupModalVisible = false;\r\n                this.relayGroupForm = [];\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    handelSubmit() {\r\n      if (this.queryTenantListItems.length <= 0) {\r\n        this.$Message.success(\"分配成功\");\r\n        this.modalVisible = false;\r\n        return;\r\n      }\r\n      var totalNum = 0;\r\n      var result = this.queryTenantListItems;\r\n      for (var i = 0; i < result.length; i++) {\r\n        if (\r\n          result[i].maxChanel == \"\" ||\r\n          result[i].maxChanel == null ||\r\n          result[i].maxChanel <= 0\r\n        ) {\r\n          this.$Message.warning(\"可分配通道数不能为空且得大于0\");\r\n          return;\r\n        }\r\n        if (result[i].maxChanel > result[i].chanleNum) {\r\n          this.$Message.warning(\r\n            result[i].title + \"可分配通道数\" + result[i].chanleNum\r\n          );\r\n          return;\r\n        }\r\n        result[i].ctiManageId = this.selectNode.ctiManageId;\r\n        result[i].relayGroupId = this.selectNode.relayGroupId;\r\n        totalNum = totalNum + parseInt(result[i].maxChanel);\r\n      }\r\n      if (totalNum > this.maxNum) {\r\n        this.$Message.warning(\"剩余可分配通道数\" + this.maxNum);\r\n        return;\r\n      }\r\n      for (var i = 0; i < result.length; i++) {\r\n        addRelayGroupTenant(result[i]).then((res) => {});\r\n      }\r\n      this.$Message.success(\"分配成功\");\r\n      this.modalVisible = false;\r\n      setTimeout(() => {\r\n         this.getCallRelayGroupTenantList();\r\n      }, 150);\r\n     \r\n      \r\n    },\r\n    remove(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content: \"您确认要删除 \" + v.title + \" ?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          // 删除\r\n          deleteRelayGroupTenant({ ids: v.id }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.getCallRelayGroupTenantList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    delAll() {\r\n      if (this.selectCount <= 0) {\r\n        this.$Message.warning(\"您还未选择要回收的数据\");\r\n        return;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"确认回收\",\r\n        content: \"您确认要回收所选的 \" + this.selectCount + \" 条数据?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          let ids = \"\";\r\n          this.selectList.forEach(function (e) {\r\n            ids += e.id + \",\";\r\n          });\r\n          ids = ids.substring(0, ids.length - 1);\r\n          // 批量删除\r\n          deleteRelayGroupTenant({ ids: ids }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.clearSelectAll();\r\n              this.getCallRelayGroupTenantList();\r\n              this.refreshRelayGroup();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    cancelPhone() {\r\n      this.phoneModalVisible = false;\r\n    },\r\n    submitPhone() {\r\n      this.$refs.phoneForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.modalType == 0) {\r\n            // 添加\r\n            this.submitLoading = true;\r\n            this.phoneForm.relayGroupId = this.selectNode.relayGroupId;\r\n            this.phoneForm.ctiManageId = this.selectNode.ctiManageId;\r\n            this.phoneForm.relayPhoneName = this.phoneForm.relayPhoneNumber;\r\n            this.phoneForm.enabled = 1;\r\n            addRelayGroupPhone(this.phoneForm).then((res) => {\r\n              this.submitLoading = false;\r\n              if (res.success) {\r\n                this.$Message.success(\"操作成功\");\r\n                this.getCallRelayPhoneList();\r\n                this.phoneModalVisible = false;\r\n              }\r\n            });\r\n          } else {\r\n            this.submitLoading = true;\r\n            editRelayGroupPhone(this.phoneForm).then((res) => {\r\n              this.submitLoading = false;\r\n              if (res.success) {\r\n                this.$Message.success(\"操作成功\");\r\n                this.getCallRelayPhoneList();\r\n                this.phoneModalVisible = false;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    addPhone() {\r\n      if (!this.selectNode.relayGroupId) {\r\n        this.$Message.warning(\"请先选择一个中继组进行新增\");\r\n        return;\r\n      }\r\n      this.showPhone = true;\r\n      this.modalType = 0;\r\n      this.$refs.phoneForm.resetFields();\r\n      this.phoneForm = {workMode:\"1\",blackMark:\"1\"};\r\n      this.phoneModalVisible = true;\r\n      this.modalPhoneTitle = \"新增中继号码\";\r\n    },\r\n    editPhone(v) {\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] == null) {\r\n          delete v[attr];\r\n        }\r\n        if (v[attr] == \"undefined\") {\r\n           v[attr] = \"\";\r\n        }\r\n        if(attr==\"workMode\"){\r\n          v[attr] = v[attr]+\"\";\r\n        }\r\n        if(attr==\"blackMark\"){\r\n          v[attr] = v[attr]+\"\";\r\n        }\r\n      }\r\n      this.modalType = 1;\r\n      this.phoneModalVisible = true;\r\n      this.modalPhoneTitle = \"编辑中继号码\";\r\n      this.$refs.phoneForm.resetFields();\r\n      let str = JSON.stringify(v);\r\n      let data = JSON.parse(str);\r\n      this.phoneForm = data;\r\n      this.showPhone = true;\r\n    },\r\n    removePhone(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content: \"您确认要删除 \" + v.relayPhoneNumber + \" ?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          // 删除\r\n          deleteRelayGroupPhone({ ids: v.id }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.getCallRelayPhoneList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    delPhoneAll() {\r\n      if (this.selectCount <= 0) {\r\n        this.$Message.warning(\"您还未选择要删除的数据\");\r\n        return;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          let ids = \"\";\r\n          this.selectList.forEach(function (e) {\r\n            ids += e.id + \",\";\r\n          });\r\n          ids = ids.substring(0, ids.length - 1);\r\n          // 批量删除\r\n          deleteRelayGroupPhone({ ids: ids }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.getCallRelayPhoneList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    getCallRelayPhoneList() {\r\n      if (!this.selectNode.relayGroupId) {\r\n        this.data = [];\r\n        this.total = 0;\r\n        return;\r\n      }\r\n      this.loading = true;\r\n      this.searchForm.callRelayGroupId = this.selectNode.relayGroupId;\r\n      getCallRelayPhoneAlls(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.list;\r\n          this.total = res.result.total;\r\n          this.selectCount = 0;\r\n        }\r\n      });\r\n    },\r\n    phoneDropdown(name) {\r\n      if (!this.selectNode.relayGroupId) {\r\n        this.$Message.warning(\"请先选择一个中继组选择要操作的数据\");\r\n        return;\r\n      }\r\n      if (this.selectCount <= 0) {\r\n        this.$Message.warning(\"您还未选择要操作的数据\");\r\n        return;\r\n      }\r\n      if (name == \"distriButionPhone\") {\r\n        this.tenantPhoneModalVisible = true;\r\n        this.queryTenantPhoneListItems = [];\r\n        this.modalTenantPhoneTitle = \"分配公司中继号码\";\r\n        this.tenantPhoneForm.tenantIds = \"\";\r\n        this.getTenantAll();\r\n      } else if (name == \"recoveryPhone\") {\r\n        this.operationPhoneTenantList(\"2\");\r\n      } else if (name == \"enablePhone\") {\r\n        this.operationPhoneTenantList(\"3\");\r\n      } else if (name == \"outOfServicePhone\") {\r\n        this.operationPhoneTenantList(\"4\");\r\n      }\r\n    },\r\n    operationPhoneTenantList(type) {\r\n      var param = {};\r\n      param[\"callRelayGroupId\"] = this.selectNode.relayGroupId;\r\n      param[\"ctiManageId\"] = this.selectNode.ctiManageId;\r\n      if (type == \"1\") {\r\n        param[\"tenantId\"] = this.tenantPhoneForm.tenantIds;\r\n      }else{\r\n        param[\"tenantId\"] = \"\";\r\n      }\r\n      let ids = \"\";\r\n      this.selectList.forEach(function (e) {\r\n        if (type == \"2\") {\r\n          if (e.phoneTenantId != null && e.phoneTenantId != \"\") {\r\n            ids += e.phoneTenantId + \",\";\r\n          }\r\n        } else if (type == \"1\") {\r\n          if (e.phoneTenantId != null && e.phoneTenantId != \"\") {\r\n          } else {\r\n            ids += e.id + \",\";\r\n          }\r\n        } else {\r\n          ids += e.id + \",\";\r\n        }\r\n      });\r\n      ids = ids.substring(0, ids.length - 1);\r\n      param[\"ids\"] = ids;\r\n      param[\"type\"] = type;\r\n      // 批量操作数据\r\n      operationPhoneTenant(param).then((res) => {\r\n        if (res.success) {\r\n          this.$Message.success(\"操作成功\");\r\n          this.getCallRelayPhoneList();\r\n          this.tenantPhoneModalVisible = false;\r\n          this.tenantPhoneForm.tenantIds = \"\";\r\n        }\r\n      });\r\n    },\r\n    cancelTenantPhone() {\r\n      this.queryTenantPhoneListItems = [];\r\n      this.tenantPhoneModalVisible = false;\r\n      this.tenantPhoneForm.tenantIds = \"\";\r\n    },\r\n    submitTenantPhone() {\r\n      this.operationPhoneTenantList(\"1\");\r\n    },\r\n    beforeUploadImport(file) {\r\n      this.uploadfile = file;\r\n      const fileExt = file.name.split(\".\").pop().toLocaleLowerCase();\r\n      if (fileExt == \"xlsx\" || fileExt == \"xls\") {\r\n        this.readFile(file);\r\n        this.file = file;\r\n      } else {\r\n        this.$Notice.warning({\r\n          title: \"文件类型错误\",\r\n          desc:\r\n            \"所选文件‘ \" +\r\n            file.name +\r\n            \" ’不是EXCEL文件，请选择后缀为.xlsx或者.xls的EXCEL文件。\",\r\n        });\r\n      }\r\n      return false;\r\n    },\r\n    // 读取文件\r\n    readFile(file) {\r\n      this.reading = true;\r\n      const reader = new FileReader();\r\n      reader.readAsArrayBuffer(file);\r\n      reader.onerror = (e) => {\r\n        this.reading = false;\r\n        this.$Message.error(\"文件读取出错\");\r\n      };\r\n      reader.onload = (e) => {\r\n        const data = e.target.result;\r\n        const { header, results } = excel.read(data, \"array\");\r\n        const tableTitle = header.map((item) => {\r\n          return { title: item, key: item, minWidth: 100, align: \"center\" };\r\n        });\r\n        this.importTableData = results;\r\n        this.phoneImportColumns = tableTitle;\r\n        this.reading = false;\r\n        this.$Message.success(\"读取数据成功\");\r\n      };\r\n    },\r\n    downloadTemple() {\r\n      let title = [];\r\n      let key = [];\r\n      phoneImportColumns.forEach((e) => {\r\n        title.push(e.title);\r\n        key.push(e.key);\r\n      });\r\n      const params = {\r\n        title: title,\r\n        key: key,\r\n        data: phoneData,\r\n        autoWidth: true,\r\n        filename: \"导入数据模版\",\r\n      };\r\n      excel.export_array_to_excel(params);\r\n    },\r\n    importExcel() {\r\n      this.importModalVisible = true;\r\n      this.uploadfile = {};\r\n      this.uping = 0;\r\n      this.result = \"\";\r\n      this.importTableData = [];\r\n      this.phoneImportColumns = [];\r\n    },\r\n    importData() {\r\n      this.importLoading = true;\r\n      // 传入导入数据 后端接收body数组列表批量导入\r\n      // this.importRequest(\"请求路径\", this.importTableData).then(res => {\r\n      //   this.importLoading = false;\r\n      //   if (res.success) {\r\n      //     this.importModalVisible = false;\r\n      //     this.getDataList();\r\n      //     this.$Modal.info({\r\n      //       title: \"导入结果\",\r\n      //       content: res.message\r\n      //     });\r\n      //   }\r\n      // });\r\n      // 模拟请求成功\r\n      var params = {};\r\n      params[\"dataList\"] = JSON.stringify(this.importTableData);\r\n      params[\"relayGroupId\"] = this.selectNode.relayGroupId;\r\n      params[\"ctiManageId\"] = this.selectNode.ctiManageId;\r\n      importCallRelayPhoneList(params).then((res) => {\r\n        if (res.success) {\r\n          this.getCallRelayPhoneList();\r\n          this.importLoading = false;\r\n          this.importModalVisible = false;\r\n          this.$Modal.info({\r\n            title: \"导入结果\",\r\n            content: res.message,\r\n          });\r\n        }\r\n      });\r\n    },\r\n    clearImportData() {\r\n      this.importTableData = [];\r\n      this.importColumns = [];\r\n      this.uploadfile = {};\r\n    },\r\n    upload() {\r\n      this.importLoading = true;\r\n      var zipFormData = new FormData();\r\n      zipFormData.append(\"file\", this.uploadfile); //file要和@RequestParam(\"file\")MultipartFile file对应好\r\n      zipFormData.append(\"relayGroupId\", this.selectNode.relayGroupId);\r\n      zipFormData.append(\"ctiManageId\", this.selectNode.ctiManageId);\r\n      this.uping = 1;\r\n      importCallRelayPhoneList(zipFormData).then((res) => {\r\n        if (res.success) {\r\n          this.importLoading = false;\r\n          this.uping = 0;\r\n          this.result = res.message;\r\n        }\r\n      });\r\n    },\r\n    getFile(even) {\r\n      this.upath = event.target.files[0];\r\n    },\r\n    showDetail(row,index){\r\n      this.$refs.tableTenant.toggleSelect(index)\r\n    },\r\n    showDetail1(row,index){\r\n      this.$refs.table.toggleSelect(index)\r\n    }\r\n  },\r\n  mounted() {\r\n    // 计算高度\r\n    let height = document.documentElement.clientHeight;\r\n    this.maxHeight = Number(height - 287) + \"px\";\r\n    this.init();\r\n  },\r\n};\r\n</script>"]}]}