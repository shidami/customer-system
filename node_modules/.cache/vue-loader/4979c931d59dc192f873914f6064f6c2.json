{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\message\\message.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\message\\message.vue","mtime":1614579763271},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29va2llcyBmcm9tICJqcy1jb29raWUiOw0KaW1wb3J0IHsNCiAgZ2V0TWVzc2FnZVNlbmREYXRhLA0KICBlZGl0TWVzc2FnZVNlbmQsDQogIGRlbGV0ZU1lc3NhZ2VTZW5kDQp9IGZyb20gIkAvYXBpL2luZGV4IjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIm1lc3NhZ2VfaW5kZXgiLA0KICBkYXRhKCkgew0KICAgIGNvbnN0IG1hcmtBc3JlYWRCdG4gPSAoaCwgcGFyYW1zKSA9PiB7DQogICAgICByZXR1cm4gaCgNCiAgICAgICAgIkJ1dHRvbiIsDQogICAgICAgIHsNCiAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgaWNvbjogIm1kLWV5ZS1vZmYiLA0KICAgICAgICAgICAgc2l6ZTogInNtYWxsIg0KICAgICAgICAgIH0sDQogICAgICAgICAgb246IHsNCiAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgIC8vIOagh+iusOW3suivuw0KICAgICAgICAgICAgICBsZXQgdiA9IHBhcmFtcy5yb3c7DQogICAgICAgICAgICAgIC8vIOi9rOaNom51bGzkuLoiIg0KICAgICAgICAgICAgICBmb3IgKGxldCBhdHRyIGluIHYpIHsNCiAgICAgICAgICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICB2W2F0dHJdID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGxldCBzdHIgPSBKU09OLnN0cmluZ2lmeSh2KTsNCiAgICAgICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7DQogICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gMTsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgICAgZWRpdE1lc3NhZ2VTZW5kKGRhdGEpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgICAgICB0aGlzLnVucmVhZENvdW50IC09IDE7DQogICAgICAgICAgICAgICAgICB0aGlzLmhhc3JlYWRDb3VudCArPSAxOw0KICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRNZXNzYWdlQ291bnQiLCB0aGlzLnVucmVhZENvdW50KTsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgIuagh+S4uuW3suivuyINCiAgICAgICk7DQogICAgfTsNCiAgICBjb25zdCBkZWxldGVNZXNCdG4gPSAoaCwgcGFyYW1zKSA9PiB7DQogICAgICByZXR1cm4gaCgNCiAgICAgICAgIkJ1dHRvbiIsDQogICAgICAgIHsNCiAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgaWNvbjogIm1kLXRyYXNoIiwNCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsDQogICAgICAgICAgICB0eXBlOiAiZXJyb3IiDQogICAgICAgICAgfSwNCiAgICAgICAgICBvbjogew0KICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgLy8g56e76ZmkDQogICAgICAgICAgICAgIGxldCB2ID0gcGFyYW1zLnJvdzsNCiAgICAgICAgICAgICAgLy8g6L2s5o2ibnVsbOS4uiIiDQogICAgICAgICAgICAgIGZvciAobGV0IGF0dHIgaW4gdikgew0KICAgICAgICAgICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgIHZbYXR0cl0gPSAiIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOw0KICAgICAgICAgICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsNCiAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAyOw0KICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgICAgICBlZGl0TWVzc2FnZVNlbmQoZGF0YSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcmVhZENvdW50IC09IDE7DQogICAgICAgICAgICAgICAgICB0aGlzLnJlY3ljbGViaW5Db3VudCArPSAxOw0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAi5Yig6ZmkIg0KICAgICAgKTsNCiAgICB9Ow0KICAgIGNvbnN0IHJlc3RvcmVCdG4gPSAoaCwgcGFyYW1zKSA9PiB7DQogICAgICByZXR1cm4gaCgNCiAgICAgICAgIkJ1dHRvbiIsDQogICAgICAgIHsNCiAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgaWNvbjogIm1kLXJlZG8iLA0KICAgICAgICAgICAgc2l6ZTogInNtYWxsIg0KICAgICAgICAgIH0sDQogICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgIG1hcmdpbjogIjAgNXB4IDAgMCINCiAgICAgICAgICB9LA0KICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICBjbGljazogKCkgPT4gew0KICAgICAgICAgICAgICAvLyDov5jljp8NCiAgICAgICAgICAgICAgbGV0IHYgPSBwYXJhbXMucm93Ow0KICAgICAgICAgICAgICAvLyDovazmjaJudWxs5Li6IiINCiAgICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB2KSB7DQogICAgICAgICAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgdlthdHRyXSA9ICIiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7DQogICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShzdHIpOw0KICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IDE7DQogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgICAgICAgIGVkaXRNZXNzYWdlU2VuZChkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWN5Y2xlYmluQ291bnQgLT0gMTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcmVhZENvdW50ICs9IDE7DQogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZXNzYWdlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgICLov5jljp8iDQogICAgICApOw0KICAgIH07DQogICAgY29uc3QgZGVsZXRlUmVhbEJ0biA9IChoLCBwYXJhbXMpID0+IHsNCiAgICAgIHJldHVybiBoKA0KICAgICAgICAiQnV0dG9uIiwNCiAgICAgICAgew0KICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICBpY29uOiAibWQtdHJhc2giLA0KICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciINCiAgICAgICAgICB9LA0KICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICBjbGljazogKCkgPT4gew0KICAgICAgICAgICAgICAvLyDlvbvlupXliKDpmaQNCiAgICAgICAgICAgICAgbGV0IHYgPSBwYXJhbXMucm93Ow0KICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgICAgICBkZWxldGVNZXNzYWdlU2VuZCh7aWRzOiB2LmlkfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVjeWNsZWJpbkNvdW50IC09IDE7DQogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZXNzYWdlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgICLlvbvlupXliKDpmaQiDQogICAgICApOw0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgdXNlcklkOiBKU09OLnBhcnNlKENvb2tpZXMuZ2V0KCJ1c2VySW5mbyIpKS5pZCwNCiAgICAgICAgc3RhdHVzOiAwLA0KICAgICAgICBwYWdlTnVtYmVyOiAxLCAvLyDlvZPliY3pobXmlbANCiAgICAgICAgcGFnZVNpemU6IDEwLCAvLyDpobXpnaLlpKflsI8NCiAgICAgICAgc29ydDogImNyZWF0ZVRpbWUiLCAvLyDpu5jorqTmjpLluo/lrZfmrrUNCiAgICAgICAgb3JkZXI6ICJkZXNjIiAvLyDpu5jorqTmjpLluo/mlrnlvI8NCiAgICAgIH0sDQogICAgICB0b3RhbDogMCwNCiAgICAgIHRvdGFsVW5yZWFkOiAwLA0KICAgICAgdG90YWxSZWFkOiAwLA0KICAgICAgdG90YWxSZW1vdmU6IDAsDQogICAgICBjdXJyZW50TWVzTGlzdDogW10sDQogICAgICB1bnJlYWRNZXNMaXN0OiBbXSwNCiAgICAgIGhhc3JlYWRNZXNMaXN0OiBbXSwNCiAgICAgIHJlY3ljbGViaW5MaXN0OiBbXSwNCiAgICAgIGN1cnJlbnRNZXNzYWdlVHlwZTogInVucmVhZCIsDQogICAgICBzaG93TWVzVGl0bGVMaXN0OiB0cnVlLA0KICAgICAgdW5yZWFkQ291bnQ6IDAsDQogICAgICBoYXNyZWFkQ291bnQ6IDAsDQogICAgICByZWN5Y2xlYmluQ291bnQ6IDAsDQogICAgICBub0RhdGFUZXh0OiAi5pqC5peg5pyq6K+75raI5oGvIiwNCiAgICAgIG1lczogew0KICAgICAgICB0aXRsZTogIiIsDQogICAgICAgIHRpbWU6ICIiLA0KICAgICAgICBjb250ZW50OiAiIg0KICAgICAgfSwNCiAgICAgIGRpY3RNZXNzYWdlVHlwZTogdGhpcy4kc3RvcmUuc3RhdGUuZGljdC5tZXNzYWdlVHlwZSwNCiAgICAgIG1lc1RpdGxlQ29sdW1uczogWw0KICAgICAgICB7DQogICAgICAgICAgdHlwZTogImluZGV4IiwNCiAgICAgICAgICB3aWR0aDogNTAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIiAiLA0KICAgICAgICAgIGtleTogInRpdGxlIiwNCiAgICAgICAgICBhbGlnbjogImxlZnQiLA0KICAgICAgICAgIGVsbGlwc2lzOiB0cnVlLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBbDQogICAgICAgICAgICAgIGgoDQogICAgICAgICAgICAgICAgImEiLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogIjAgMzBweCAwIDAiDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dNZXNUaXRsZUxpc3QgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcy50aXRsZSA9IHBhcmFtcy5yb3cudGl0bGU7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXMudGltZSA9IHBhcmFtcy5yb3cuY3JlYXRlVGltZTsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRlbnQocGFyYW1zLnJvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICLjgJAiICsgcGFyYW1zLnJvdy50eXBlICsgIuOAkSAiICsgcGFyYW1zLnJvdy50aXRsZQ0KICAgICAgICAgICAgICApDQogICAgICAgICAgICBdKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIiAiLA0KICAgICAgICAgIGtleTogInRpbWUiLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICB3aWR0aDogMTkwLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBbDQogICAgICAgICAgICAgIGgoIkljb24iLCB7DQogICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJtZC10aW1lIiwNCiAgICAgICAgICAgICAgICAgIHNpemU6IDE2DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgbWFyZ2luOiAiMCA1cHggM3B4IDAiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgaCgic3BhbiIsIHBhcmFtcy5yb3cuY3JlYXRlVGltZSkNCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAiICIsDQogICAgICAgICAga2V5OiAiYXNyZWFkIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgd2lkdGg6IDIxMCwNCiAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsNCiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRNZXNzYWdlVHlwZSA9PSAidW5yZWFkIikgew0KICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW21hcmtBc3JlYWRCdG4oaCwgcGFyYW1zKV0pOw0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRNZXNzYWdlVHlwZSA9PSAiaGFzcmVhZCIpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFtkZWxldGVNZXNCdG4oaCwgcGFyYW1zKV0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFsNCiAgICAgICAgICAgICAgICByZXN0b3JlQnRuKGgsIHBhcmFtcyksDQogICAgICAgICAgICAgICAgZGVsZXRlUmVhbEJ0bihoLCBwYXJhbXMpDQogICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgXQ0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaGFuZ2VQYWdlKHYpIHsNCiAgICAgIHRoaXMucGFyYW1zLnBhZ2VOdW1iZXIgPSB2Ow0KICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOw0KICAgIH0sDQogICAgY2hhbmdlUGFnZVNpemUodikgew0KICAgICAgdGhpcy5wYXJhbXMucGFnZVNpemUgPSB2Ow0KICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOw0KICAgIH0sDQogICAgcmVmcmVzaE1lc3NhZ2UoKSB7DQogICAgICBsZXQgc3RhdHVzID0gMDsNCiAgICAgIGxldCB0eXBlID0gdGhpcy5jdXJyZW50TWVzc2FnZVR5cGU7DQogICAgICBpZiAodHlwZSA9PSAidW5yZWFkIikgew0KICAgICAgICBzdGF0dXMgPSAwOw0KICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJoYXNyZWFkIikgew0KICAgICAgICBzdGF0dXMgPSAxOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc3RhdHVzID0gMjsNCiAgICAgIH0NCiAgICAgIHRoaXMucGFyYW1zLnN0YXR1cyA9IHN0YXR1czsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBnZXRNZXNzYWdlU2VuZERhdGEodGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuY3VycmVudE1lc0xpc3QgPSByZXMucmVzdWx0LmNvbnRlbnQ7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBpbml0TWVzc2FnZSgpIHsNCiAgICAgIHRoaXMucGFyYW1zLnN0YXR1cyA9IDA7DQogICAgICBnZXRNZXNzYWdlU2VuZERhdGEodGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy51bnJlYWRDb3VudCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsNCiAgICAgICAgICB0aGlzLmluaXRSZWFkTWVzc2FnZSgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGluaXRSZWFkTWVzc2FnZSgpIHsNCiAgICAgIHRoaXMucGFyYW1zLnN0YXR1cyA9IDE7DQogICAgICBnZXRNZXNzYWdlU2VuZERhdGEodGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5oYXNyZWFkQ291bnQgPSByZXMucmVzdWx0LnRvdGFsRWxlbWVudHM7DQogICAgICAgICAgdGhpcy5pbml0UmVtb3ZlTWVzc2FnZSgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGluaXRSZW1vdmVNZXNzYWdlKCkgew0KICAgICAgdGhpcy5wYXJhbXMuc3RhdHVzID0gMjsNCiAgICAgIGdldE1lc3NhZ2VTZW5kRGF0YSh0aGlzLnBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLnJlY3ljbGViaW5Db3VudCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsNCiAgICAgICAgICB0aGlzLnNldEN1cnJlbnRNZXNUeXBlKCJ1bnJlYWQiKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBlZGl0TWVzc2FnZShzdGF0dXMpIHsNCiAgICAgIGVkaXRNZXNzYWdlU2VuZCgpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZWxldGVNZXNzYWdlKGlkKSB7DQogICAgICBkZWxldGVNZXNzYWdlU2VuZCh7aWRzOiBpZH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBiYWNrTWVzVGl0bGVMaXN0KCkgew0KICAgICAgdGhpcy5zaG93TWVzVGl0bGVMaXN0ID0gdHJ1ZTsNCiAgICB9LA0KICAgIHNldEN1cnJlbnRNZXNUeXBlKHR5cGUpIHsNCiAgICAgIGlmICh0aGlzLmN1cnJlbnRNZXNzYWdlVHlwZSAhPT0gdHlwZSkgew0KICAgICAgICB0aGlzLnNob3dNZXNUaXRsZUxpc3QgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgdGhpcy5jdXJyZW50TWVzc2FnZVR5cGUgPSB0eXBlOw0KICAgICAgaWYgKHR5cGUgPT0gInVucmVhZCIpIHsNCiAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gIuaaguaXoOacquivu+a2iOaBryI7DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImhhc3JlYWQiKSB7DQogICAgICAgIHRoaXMubm9EYXRhVGV4dCA9ICLmmoLml6Dlt7Lor7vmtojmga8iOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5ub0RhdGFUZXh0ID0gIuWbnuaUtuermeaXoOa2iOaBryI7DQogICAgICB9DQogICAgICB0aGlzLnBhcmFtcy5wYWdlTnVtYmVyID0gMTsNCiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICB9LA0KICAgIGdldENvbnRlbnQodikgew0KICAgICAgdGhpcy5tZXMuY29udGVudCA9IHYuY29udGVudDsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0TWVzc2FnZSgpOw0KICB9LA0KICB3YXRjaDogew0KICAgIC8vIOebkeWQrOi3r+eUseWPmOWMlumAmui/h2lk6I635Y+W5pWw5o2uDQogICAgJHJvdXRlKHRvLCBmcm9tKSB7DQogICAgICBpZiAodG8ubmFtZSA9PSAibWVzc2FnZV9pbmRleCIpIHsNCiAgICAgICAgdGhpcy5pbml0TWVzc2FnZSgpOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"message.vue","sourceRoot":"src/views/message","sourcesContent":["<style lang=\"less\">\r\n@import \"./message.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"message-main-con\">\r\n    <div class=\"message-mainlist-con\">\r\n      <div>\r\n        <Button @click=\"setCurrentMesType('unread')\" size=\"large\" long type=\"text\">\r\n          <div class=\"mes-wrap\">\r\n            <transition name=\"mes-current-type-btn\">\r\n              <Icon v-show=\"currentMessageType == 'unread'\" type=\"md-checkmark\"></Icon>\r\n            </transition>\r\n            <span class=\"mes-type-btn-text\">未读消息</span>\r\n            <Badge\r\n              class=\"message-count-badge-outer\"\r\n              class-name=\"message-count-badge-red\"\r\n              :count=\"unreadCount\"\r\n            ></Badge>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n      <div>\r\n        <Button @click=\"setCurrentMesType('hasread')\" size=\"large\" long type=\"text\">\r\n          <div class=\"mes-wrap\">\r\n            <transition name=\"mes-current-type-btn\">\r\n              <Icon v-show=\"currentMessageType == 'hasread'\" type=\"md-checkmark\"></Icon>\r\n            </transition>\r\n            <span class=\"mes-type-btn-text\">已读消息</span>\r\n            <Badge\r\n              class=\"message-count-badge-outer\"\r\n              class-name=\"message-count-badge\"\r\n              :count=\"hasreadCount\"\r\n            ></Badge>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n      <div>\r\n        <Button @click=\"setCurrentMesType('recyclebin')\" size=\"large\" long type=\"text\">\r\n          <div class=\"mes-wrap\">\r\n            <transition name=\"mes-current-type-btn\">\r\n              <Icon v-show=\"currentMessageType == 'recyclebin'\" type=\"md-checkmark\"></Icon>\r\n            </transition>\r\n            <span class=\"mes-type-btn-text\">回收站</span>\r\n            <Badge\r\n              class=\"message-count-badge-outer\"\r\n              class-name=\"message-count-badge\"\r\n              :count=\"recyclebinCount\"\r\n            ></Badge>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n    </div>\r\n    <div class=\"message-content-con\">\r\n      <transition name=\"view-message\">\r\n        <div v-if=\"showMesTitleList\" class=\"message-title-list-con\">\r\n          <Table\r\n            ref=\"messageList\"\r\n            :loading=\"loading\"\r\n            :columns=\"mesTitleColumns\"\r\n            :data=\"currentMesList\"\r\n            :no-data-text=\"noDataText\"\r\n          ></Table>\r\n          <Page\r\n            :current=\"params.pageNumber\"\r\n            :total=\"total\"\r\n            :page-size=\"params.pageSize\"\r\n            @on-change=\"changePage\"\r\n            @on-page-size-change=\"changePageSize\"\r\n            :page-size-opts=\"[5,10]\"\r\n            size=\"small\"\r\n            show-total\r\n            show-elevator\r\n            show-sizer\r\n            class=\"page-fix\"\r\n          ></Page>\r\n        </div>\r\n      </transition>\r\n      <transition name=\"back-message-list\">\r\n        <div v-if=\"!showMesTitleList\" class=\"message-view-content-con\">\r\n          <div class=\"message-content-top-bar\">\r\n            <span class=\"mes-back-btn-con\">\r\n              <Button type=\"text\" @click=\"backMesTitleList\">\r\n                <Icon type=\"ios-arrow-back\"></Icon>&nbsp;&nbsp;返回\r\n              </Button>\r\n            </span>\r\n            <h3 class=\"mes-title\">{{ mes.title }}</h3>\r\n          </div>\r\n          <p class=\"mes-time-con\">\r\n            <Icon type=\"android-time\"></Icon>\r\n            &nbsp;&nbsp;{{ mes.time }}\r\n          </p>\r\n          <div class=\"message-content-body\">\r\n            <p class=\"message-content\" v-html=\"mes.content\">{{ mes.content }}</p>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from \"js-cookie\";\r\nimport {\r\n  getMessageSendData,\r\n  editMessageSend,\r\n  deleteMessageSend\r\n} from \"@/api/index\";\r\nexport default {\r\n  name: \"message_index\",\r\n  data() {\r\n    const markAsreadBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-eye-off\",\r\n            size: \"small\"\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 标记已读\r\n              let v = params.row;\r\n              // 转换null为\"\"\r\n              for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                  v[attr] = \"\";\r\n                }\r\n              }\r\n              let str = JSON.stringify(v);\r\n              let data = JSON.parse(str);\r\n              data.status = 1;\r\n              this.loading = true;\r\n              editMessageSend(data).then(res => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.unreadCount -= 1;\r\n                  this.hasreadCount += 1;\r\n                  this.$store.commit(\"setMessageCount\", this.unreadCount);\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        \"标为已读\"\r\n      );\r\n    };\r\n    const deleteMesBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-trash\",\r\n            size: \"small\",\r\n            type: \"error\"\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 移除\r\n              let v = params.row;\r\n              // 转换null为\"\"\r\n              for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                  v[attr] = \"\";\r\n                }\r\n              }\r\n              let str = JSON.stringify(v);\r\n              let data = JSON.parse(str);\r\n              data.status = 2;\r\n              this.loading = true;\r\n              editMessageSend(data).then(res => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.hasreadCount -= 1;\r\n                  this.recyclebinCount += 1;\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        \"删除\"\r\n      );\r\n    };\r\n    const restoreBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-redo\",\r\n            size: \"small\"\r\n          },\r\n          style: {\r\n            margin: \"0 5px 0 0\"\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 还原\r\n              let v = params.row;\r\n              // 转换null为\"\"\r\n              for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                  v[attr] = \"\";\r\n                }\r\n              }\r\n              let str = JSON.stringify(v);\r\n              let data = JSON.parse(str);\r\n              data.status = 1;\r\n              this.loading = true;\r\n              editMessageSend(data).then(res => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.recyclebinCount -= 1;\r\n                  this.hasreadCount += 1;\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        \"还原\"\r\n      );\r\n    };\r\n    const deleteRealBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-trash\",\r\n            size: \"small\",\r\n            type: \"error\"\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 彻底删除\r\n              let v = params.row;\r\n              this.loading = true;\r\n              deleteMessageSend({ids: v.id}).then(res => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.recyclebinCount -= 1;\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            }\r\n          }\r\n        },\r\n        \"彻底删除\"\r\n      );\r\n    };\r\n    return {\r\n      loading: true,\r\n      params: {\r\n        userId: JSON.parse(Cookies.get(\"userInfo\")).id,\r\n        status: 0,\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\" // 默认排序方式\r\n      },\r\n      total: 0,\r\n      totalUnread: 0,\r\n      totalRead: 0,\r\n      totalRemove: 0,\r\n      currentMesList: [],\r\n      unreadMesList: [],\r\n      hasreadMesList: [],\r\n      recyclebinList: [],\r\n      currentMessageType: \"unread\",\r\n      showMesTitleList: true,\r\n      unreadCount: 0,\r\n      hasreadCount: 0,\r\n      recyclebinCount: 0,\r\n      noDataText: \"暂无未读消息\",\r\n      mes: {\r\n        title: \"\",\r\n        time: \"\",\r\n        content: \"\"\r\n      },\r\n      dictMessageType: this.$store.state.dict.messageType,\r\n      mesTitleColumns: [\r\n        {\r\n          type: \"index\",\r\n          width: 50,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"title\",\r\n          align: \"left\",\r\n          ellipsis: true,\r\n          render: (h, params) => {\r\n            return h(\"span\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  style: {\r\n                    margin: \"0 30px 0 0\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.showMesTitleList = false;\r\n                      this.mes.title = params.row.title;\r\n                      this.mes.time = params.row.createTime;\r\n                      this.getContent(params.row);\r\n                    }\r\n                  }\r\n                },\r\n                \"【\" + params.row.type + \"】 \" + params.row.title\r\n              )\r\n            ]);\r\n          }\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"time\",\r\n          align: \"center\",\r\n          width: 190,\r\n          render: (h, params) => {\r\n            return h(\"span\", [\r\n              h(\"Icon\", {\r\n                props: {\r\n                  type: \"md-time\",\r\n                  size: 16\r\n                },\r\n                style: {\r\n                  margin: \"0 5px 3px 0\"\r\n                }\r\n              }),\r\n              h(\"span\", params.row.createTime)\r\n            ]);\r\n          }\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"asread\",\r\n          align: \"center\",\r\n          width: 210,\r\n          render: (h, params) => {\r\n            if (this.currentMessageType == \"unread\") {\r\n              return h(\"div\", [markAsreadBtn(h, params)]);\r\n            } else if (this.currentMessageType == \"hasread\") {\r\n              return h(\"div\", [deleteMesBtn(h, params)]);\r\n            } else {\r\n              return h(\"div\", [\r\n                restoreBtn(h, params),\r\n                deleteRealBtn(h, params)\r\n              ]);\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    changePage(v) {\r\n      this.params.pageNumber = v;\r\n      this.refreshMessage();\r\n    },\r\n    changePageSize(v) {\r\n      this.params.pageSize = v;\r\n      this.refreshMessage();\r\n    },\r\n    refreshMessage() {\r\n      let status = 0;\r\n      let type = this.currentMessageType;\r\n      if (type == \"unread\") {\r\n        status = 0;\r\n      } else if (type == \"hasread\") {\r\n        status = 1;\r\n      } else {\r\n        status = 2;\r\n      }\r\n      this.params.status = status;\r\n      this.loading = true;\r\n      getMessageSendData(this.params).then(res => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.currentMesList = res.result.content;\r\n          this.total = res.result.totalElements;\r\n        }\r\n      });\r\n    },\r\n    initMessage() {\r\n      this.params.status = 0;\r\n      getMessageSendData(this.params).then(res => {\r\n        if (res.success) {\r\n          this.unreadCount = res.result.totalElements;\r\n          this.initReadMessage();\r\n        }\r\n      });\r\n    },\r\n    initReadMessage() {\r\n      this.params.status = 1;\r\n      getMessageSendData(this.params).then(res => {\r\n        if (res.success) {\r\n          this.hasreadCount = res.result.totalElements;\r\n          this.initRemoveMessage();\r\n        }\r\n      });\r\n    },\r\n    initRemoveMessage() {\r\n      this.params.status = 2;\r\n      getMessageSendData(this.params).then(res => {\r\n        if (res.success) {\r\n          this.recyclebinCount = res.result.totalElements;\r\n          this.setCurrentMesType(\"unread\");\r\n        }\r\n      });\r\n    },\r\n    editMessage(status) {\r\n      editMessageSend().then(res => {\r\n        if (res.success) {\r\n          this.$Message.success(\"操作成功\");\r\n        }\r\n      });\r\n    },\r\n    deleteMessage(id) {\r\n      deleteMessageSend({ids: id}).then(res => {\r\n        if (res.success) {\r\n          this.$Message.success(\"删除成功\");\r\n        }\r\n      });\r\n    },\r\n    backMesTitleList() {\r\n      this.showMesTitleList = true;\r\n    },\r\n    setCurrentMesType(type) {\r\n      if (this.currentMessageType !== type) {\r\n        this.showMesTitleList = true;\r\n      }\r\n      this.currentMessageType = type;\r\n      if (type == \"unread\") {\r\n        this.noDataText = \"暂无未读消息\";\r\n      } else if (type == \"hasread\") {\r\n        this.noDataText = \"暂无已读消息\";\r\n      } else {\r\n        this.noDataText = \"回收站无消息\";\r\n      }\r\n      this.params.pageNumber = 1;\r\n      this.refreshMessage();\r\n    },\r\n    getContent(v) {\r\n      this.mes.content = v.content;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMessage();\r\n  },\r\n  watch: {\r\n    // 监听路由变化通过id获取数据\r\n    $route(to, from) {\r\n      if (to.name == \"message_index\") {\r\n        this.initMessage();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n"]}]}