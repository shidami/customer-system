{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\xboot\\user-choose.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\xboot\\user-choose.vue","mtime":1614579763341},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRVc2VyTGlzdERhdGEgfSBmcm9tICJAL2FwaS9pbmRleCI7DQppbXBvcnQgZGVwYXJ0bWVudENob29zZSBmcm9tICIuL2RlcGFydG1lbnQtY2hvb3NlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInVzZXJDaG9vc2UiLA0KICBjb21wb25lbnRzOiB7DQogICAgZGVwYXJ0bWVudENob29zZQ0KICB9LA0KICBwcm9wczogew0KICAgIHRleHQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICLpgInmi6nnlKjmiLciDQogICAgfSwNCiAgICBpY29uOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAibWQtcGVyc29uLWFkZCINCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJMb2FkaW5nOiB0cnVlLA0KICAgICAgdXNlck1vZGFsVmlzaWJsZTogZmFsc2UsDQogICAgICBzZWxlY3RVc2VyczogW10sDQogICAgICBzZWFyY2hVc2VyRm9ybTogew0KICAgICAgICBpZDogIiIsDQogICAgICAgIG5pY2tuYW1lOiAiIiwNCiAgICAgICAgdHlwZTogIiIsDQogICAgICAgIHN0YXR1czogIiIsDQogICAgICAgIHBhZ2VOdW1iZXI6IDEsIC8vIOW9k+WJjemhteaVsA0KICAgICAgICBwYWdlU2l6ZTogMTAsIC8vIOmhtemdouWkp+Wwjw0KICAgICAgICBzb3J0OiAiY3JlYXRlVGltZSIsIC8vIOm7mOiupOaOkuW6j+Wtl+autQ0KICAgICAgICBvcmRlcjogImRlc2MiIC8vIOm7mOiupOaOkuW6j+aWueW8jw0KICAgICAgfSwNCiAgICAgIHVzZXJDb2x1bW5zOiBbDQogICAgICAgIHsNCiAgICAgICAgICB0eXBlOiAiaW5kZXgiLA0KICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi55So5oi35ZCNIiwNCiAgICAgICAgICBrZXk6ICJuaWNrbmFtZSIsDQogICAgICAgICAgbWluV2lkdGg6IDEzMCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLnmbvlvZXotKblj7ciLA0KICAgICAgICAgIGtleTogInVzZXJuYW1lIiwNCiAgICAgICAgICBtaW5XaWR0aDogMTMwLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuWktOWDjyIsDQogICAgICAgICAga2V5OiAiYXZhdGFyIiwNCiAgICAgICAgICB3aWR0aDogODAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoIkF2YXRhciIsIHsNCiAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICBzcmM6IHBhcmFtcy5yb3cuYXZhdGFyDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5omA5bGe6YOo6ZeoIiwNCiAgICAgICAgICBrZXk6ICJkZXBhcnRtZW50VGl0bGUiLA0KICAgICAgICAgIHdpZHRoOiAxMjANCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5omL5py6IiwNCiAgICAgICAgICBrZXk6ICJtb2JpbGUiLA0KICAgICAgICAgIHdpZHRoOiAxMjUsDQogICAgICAgICAgc29ydGFibGU6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi6YKu566xIiwNCiAgICAgICAgICBrZXk6ICJlbWFpbCIsDQogICAgICAgICAgd2lkdGg6IDE4MCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLmgKfliKsiLA0KICAgICAgICAgIGtleTogInNleCIsDQogICAgICAgICAgd2lkdGg6IDcwLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLliJvlu7rml7bpl7QiLA0KICAgICAgICAgIGtleTogImNyZWF0ZVRpbWUiLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHNvcnRUeXBlOiAiZGVzYyIsDQogICAgICAgICAgd2lkdGg6IDE3MA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLmk43kvZwiLA0KICAgICAgICAgIGtleTogImFjdGlvbiIsDQogICAgICAgICAgd2lkdGg6IDEzMCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgZml4ZWQ6ICJyaWdodCIsDQogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgWw0KICAgICAgICAgICAgICBoKA0KICAgICAgICAgICAgICAgICJCdXR0b24iLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwNCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIg0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9vc2VVc2VyKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAi5re75Yqg6K+l55So5oi3Ig0KICAgICAgICAgICAgICApDQogICAgICAgICAgICBdKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICB1c2VyRGF0YTogW10sDQogICAgICB0b3RhbFVzZXI6IDANCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlU2VsZWN0RGVwKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0uZGVwYXJ0bWVudElkID0gdjsNCiAgICB9LA0KICAgIGNoYW5nZVVzZXJQYWdlKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0ucGFnZU51bWJlciA9IHY7DQogICAgICB0aGlzLmdldFVzZXJEYXRhTGlzdCgpOw0KICAgIH0sDQogICAgY2hhbmdlVXNlclBhZ2VTaXplKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0ucGFnZVNpemUgPSB2Ow0KICAgICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIGdldFVzZXJEYXRhTGlzdCgpIHsNCiAgICAgIHRoaXMudXNlckxvYWRpbmcgPSB0cnVlOw0KICAgICAgZ2V0VXNlckxpc3REYXRhKHRoaXMuc2VhcmNoVXNlckZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy51c2VyTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLnVzZXJEYXRhID0gcmVzLnJlc3VsdC5jb250ZW50Ow0KICAgICAgICAgIHRoaXMudG90YWxVc2VyID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZVNlYXJjaFVzZXIoKSB7DQogICAgICB0aGlzLnNlYXJjaFVzZXJGb3JtLnBhZ2VOdW1iZXIgPSAxOw0KICAgICAgdGhpcy5zZWFyY2hVc2VyRm9ybS5wYWdlU2l6ZSA9IDEwOw0KICAgICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIGhhbmRsZVJlc2V0VXNlcigpIHsNCiAgICAgIHRoaXMuJHJlZnMuc2VhcmNoVXNlckZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0ucGFnZU51bWJlciA9IDE7DQogICAgICB0aGlzLnNlYXJjaFVzZXJGb3JtLnBhZ2VTaXplID0gMTA7DQogICAgICB0aGlzLiRyZWZzLmRlcC5jbGVhclNlbGVjdCgpOw0KICAgICAgdGhpcy5zZWFyY2hVc2VyRm9ybS5kZXBhcnRtZW50SWQgPSAiIjsNCiAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNrg0KICAgICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIHNldERhdGEodikgew0KICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IHY7DQogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLnNlbGVjdFVzZXJzKTsNCiAgICB9LA0KICAgIGNob29zZVVzZXIodikgew0KICAgICAgLy8g5Y676YeNDQogICAgICBsZXQgdGhhdCA9IHRoaXM7DQogICAgICBsZXQgZmxhZyA9IHRydWU7DQogICAgICB0aGlzLnNlbGVjdFVzZXJzLmZvckVhY2goZSA9PiB7DQogICAgICAgIGlmICh2LmlkID09IGUuaWQpIHsNCiAgICAgICAgICB0aGF0LiRNZXNzYWdlLndhcm5pbmcoIuW3sue7j+a3u+WKoOi/h+WVpu+8jOivt+WLv+mHjeWkjemAieaLqSIpOw0KICAgICAgICAgIGZsYWcgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBpZiAoZmxhZykgew0KICAgICAgICBsZXQgdSA9IHsNCiAgICAgICAgICBpZDogdi5pZCwNCiAgICAgICAgICB1c2VybmFtZTogdi51c2VybmFtZSwNCiAgICAgICAgICBuaWNrbmFtZTogdi5uaWNrbmFtZQ0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLnNlbGVjdFVzZXJzLnB1c2godSk7DQogICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuc2VsZWN0VXNlcnMpOw0KICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoYOa3u+WKoOeUqOaItyAke3Yubmlja25hbWV9IOaIkOWKn2ApOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xlYXJTZWxlY3REYXRhKCkgew0KICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IFtdOw0KICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5zZWxlY3RVc2Vycyk7DQogICAgfSwNCiAgICBoYW5kbGVDYW5jZWxVc2VyKGUsIGlkKSB7DQogICAgICAvLyDliKDpmaTmiYDpgInnlKjmiLcNCiAgICAgIHRoaXMuc2VsZWN0VXNlcnMgPSB0aGlzLnNlbGVjdFVzZXJzLmZpbHRlcihlID0+IHsNCiAgICAgICAgcmV0dXJuIGUuaWQgIT0gaWQ7DQogICAgICB9KTsNCiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuc2VsZWN0VXNlcnMpOw0KICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiYDpgInnlKjmiLfmiJDlip8iKTsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["user-choose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-choose.vue","sourceRoot":"src/views/my-components/xboot","sourcesContent":["<template>\r\n  <div class=\"user-choose\">\r\n    <Button @click=\"userModalVisible=true\" :icon=\"icon\">{{text}}</Button>\r\n    <span @click=\"clearSelectData\" class=\"clear\">清空已选</span>\r\n    <Collapse simple class=\"collapse\">\r\n      <Panel name=\"1\">\r\n        已选择\r\n        <span class=\"select-count\">{{selectUsers.length}}</span> 人\r\n        <p slot=\"content\">\r\n          <Tag\r\n            v-for=\"(item, i) in selectUsers\"\r\n            :key=\"i\"\r\n            :name=\"item.id\"\r\n            color=\"default\"\r\n            closable\r\n            @on-close=\"handleCancelUser\"\r\n          >\r\n            <Tooltip placement=\"top\" :content=\"item.username\">{{item.nickname}}</Tooltip>\r\n          </Tag>\r\n        </p>\r\n      </Panel>\r\n    </Collapse>\r\n    <Drawer title=\"选择用户\" closable v-model=\"userModalVisible\" width=\"800\" draggable>\r\n      <Form ref=\"searchUserForm\" :model=\"searchUserForm\" inline :label-width=\"55\">\r\n        <Form-item label=\"用户名\" prop=\"nickname\">\r\n          <Input\r\n            type=\"text\"\r\n            v-model=\"searchUserForm.nickname\"\r\n            clearable\r\n            placeholder=\"请输入用户名\"\r\n            style=\"width: 200px\"\r\n          />\r\n        </Form-item>\r\n        <Form-item label=\"部门\" prop=\"department\">\r\n          <department-choose @on-change=\"handleSelectDep\" style=\"width: 200px\" ref=\"dep\"></department-choose>\r\n        </Form-item>\r\n        <Form-item style=\"margin-left:-35px;\" class=\"br\">\r\n          <Button @click=\"handleSearchUser\" type=\"primary\" icon=\"ios-search\">搜索</Button>\r\n          <Button @click=\"handleResetUser\">重置</Button>\r\n        </Form-item>\r\n      </Form>\r\n      <Alert show-icon>\r\n        已选择\r\n        <span class=\"select-count\">{{selectUsers.length}}</span> 项\r\n        <a style=\"margin-left: 10px;\" @click=\"clearSelectData\">清空已选</a>\r\n      </Alert>\r\n      <Table\r\n        :loading=\"userLoading\"\r\n        border\r\n        :columns=\"userColumns\"\r\n        :data=\"userData\"\r\n        style=\"margin: 2vh 0;\"\r\n      ></Table>\r\n      <Row type=\"flex\" justify=\"end\">\r\n        <Page\r\n          :current=\"searchUserForm.pageNumber\"\r\n          :total=\"totalUser\"\r\n          :page-size=\"searchUserForm.pageSize\"\r\n          @on-change=\"changeUserPage\"\r\n          @on-page-size-change=\"changeUserPageSize\"\r\n          :page-size-opts=\"[10,20,50]\"\r\n          size=\"small\"\r\n          show-total\r\n          show-elevator\r\n          show-sizer\r\n          transfer\r\n        ></Page>\r\n      </Row>\r\n    </Drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUserListData } from \"@/api/index\";\r\nimport departmentChoose from \"./department-choose\";\r\nexport default {\r\n  name: \"userChoose\",\r\n  components: {\r\n    departmentChoose\r\n  },\r\n  props: {\r\n    text: {\r\n      type: String,\r\n      default: \"选择用户\"\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: \"md-person-add\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      userLoading: true,\r\n      userModalVisible: false,\r\n      selectUsers: [],\r\n      searchUserForm: {\r\n        id: \"\",\r\n        nickname: \"\",\r\n        type: \"\",\r\n        status: \"\",\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\" // 默认排序方式\r\n      },\r\n      userColumns: [\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"用户名\",\r\n          key: \"nickname\",\r\n          minWidth: 130,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"登录账号\",\r\n          key: \"username\",\r\n          minWidth: 130,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"头像\",\r\n          key: \"avatar\",\r\n          width: 80,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\"Avatar\", {\r\n              props: {\r\n                src: params.row.avatar\r\n              }\r\n            });\r\n          }\r\n        },\r\n        {\r\n          title: \"所属部门\",\r\n          key: \"departmentTitle\",\r\n          width: 120\r\n        },\r\n        {\r\n          title: \"手机\",\r\n          key: \"mobile\",\r\n          width: 125,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"邮箱\",\r\n          key: \"email\",\r\n          width: 180,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"性别\",\r\n          key: \"sex\",\r\n          width: 70,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          sortable: true,\r\n          sortType: \"desc\",\r\n          width: 170\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 130,\r\n          align: \"center\",\r\n          fixed: \"right\",\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"Button\",\r\n                {\r\n                  props: {\r\n                    type: \"info\",\r\n                    size: \"small\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.chooseUser(params.row);\r\n                    }\r\n                  }\r\n                },\r\n                \"添加该用户\"\r\n              )\r\n            ]);\r\n          }\r\n        }\r\n      ],\r\n      userData: [],\r\n      totalUser: 0\r\n    };\r\n  },\r\n  methods: {\r\n    handleSelectDep(v) {\r\n      this.searchUserForm.departmentId = v;\r\n    },\r\n    changeUserPage(v) {\r\n      this.searchUserForm.pageNumber = v;\r\n      this.getUserDataList();\r\n    },\r\n    changeUserPageSize(v) {\r\n      this.searchUserForm.pageSize = v;\r\n      this.getUserDataList();\r\n    },\r\n    getUserDataList() {\r\n      this.userLoading = true;\r\n      getUserListData(this.searchUserForm).then(res => {\r\n        this.userLoading = false;\r\n        if (res.success) {\r\n          this.userData = res.result.content;\r\n          this.totalUser = res.result.totalElements;\r\n        }\r\n      });\r\n    },\r\n    handleSearchUser() {\r\n      this.searchUserForm.pageNumber = 1;\r\n      this.searchUserForm.pageSize = 10;\r\n      this.getUserDataList();\r\n    },\r\n    handleResetUser() {\r\n      this.$refs.searchUserForm.resetFields();\r\n      this.searchUserForm.pageNumber = 1;\r\n      this.searchUserForm.pageSize = 10;\r\n      this.$refs.dep.clearSelect();\r\n      this.searchUserForm.departmentId = \"\";\r\n      // 重新加载数据\r\n      this.getUserDataList();\r\n    },\r\n    setData(v) {\r\n      this.selectUsers = v;\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n    },\r\n    chooseUser(v) {\r\n      // 去重\r\n      let that = this;\r\n      let flag = true;\r\n      this.selectUsers.forEach(e => {\r\n        if (v.id == e.id) {\r\n          that.$Message.warning(\"已经添加过啦，请勿重复选择\");\r\n          flag = false;\r\n        }\r\n      });\r\n      if (flag) {\r\n        let u = {\r\n          id: v.id,\r\n          username: v.username,\r\n          nickname: v.nickname\r\n        };\r\n        this.selectUsers.push(u);\r\n        this.$emit(\"on-change\", this.selectUsers);\r\n        this.$Message.success(`添加用户 ${v.nickname} 成功`);\r\n      }\r\n    },\r\n    clearSelectData() {\r\n      this.selectUsers = [];\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n    },\r\n    handleCancelUser(e, id) {\r\n      // 删除所选用户\r\n      this.selectUsers = this.selectUsers.filter(e => {\r\n        return e.id != id;\r\n      });\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n      this.$Message.success(\"删除所选用户成功\");\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUserDataList();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.user-choose {\r\n  .clear {\r\n    font-size: 12px;\r\n    margin-left: 15px;\r\n    color: #40a9ff;\r\n    cursor: pointer;\r\n  }\r\n  .collapse {\r\n    font-size: 12px;\r\n    margin-top: 15px;\r\n    width: 500px;\r\n  }\r\n  .select-count {\r\n    font-weight: 600;\r\n    color: #40a9ff;\r\n  }\r\n}\r\n</style>"]}]}