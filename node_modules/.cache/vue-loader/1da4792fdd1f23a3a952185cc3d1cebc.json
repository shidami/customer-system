{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\work-order\\report-pc.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\work-order\\report-pc.vue","mtime":1614579763421},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0RGljdERhdGFCeVR5cGUsICAgICAgICAvL+agueaNruexu+Wei+afpeivouWtl+WFuOaVsOaNrgogIGFkZEN1c3RvbWVyT3BCdXNpbmVzcywgICAgLy/mt7vliqDnur/kuIvlj5fnkIbot5/ov5vlrqLmiLfnq68KfSBmcm9tICJAL2FwaS9pbmRleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBzdWJtaXRMb2FkaW5nOmZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGNvbnRyYWN0Tm86ICcnLCAgICAgICAgICAgICAgICAgICAvL+WQiOWQjOWPtwogICAgICAgIGNvbnRyYWN0U2lnbmVyTW9iaWxlOicnLCAgICAgICAgICAvL+WQiOWQjOaJi+acuuWPtwogICAgICAgIGNvbnRyYWN0U2lnbmVyOiAnJywgICAgICAgICAgICAgICAvL+WQiOWQjOS6ugogICAgICAgIGNoYW5uZWw6J+iHquWKqeeVmeiogCcsICAgICAgICAgICAgICAgIC8v5rig6YGT77yM5a6i5oi36Ieq5Yqp5oql5L+u5Zu65a6a5Li655WZ6KiACiAgICAgICAgY3VzdG9tZXJOYW1lOiAnJywgICAgICAgICAgICAgICAgIC8v5a6i5oi35aeT5ZCNCiAgICAgICAgbW9iaWxlOiAnJywgICAgICAgICAgICAgICAgICAgICAgIC8v5omL5py65Y+3CiAgICAgICAgb3JkZXJDaXR5OiAnJywgICAgICAgICAgICAgICAgICAgIC8v6LSt5Lmw5Z+O5biCCiAgICAgICAgYWRkcmVzczogJycsICAgICAgICAgICAgICAgICAgICAgIC8v6K+m57uG5Zyw5Z2ACiAgICAgICAgY29udGVudDogJycsICAgICAgICAgICAgICAgICAgICAgIC8v5Y+N6aaI5YaF5a65CiAgICAgICAgcHJvZHVjdEJyYW5kOicnLCAgICAgICAgICAgICAgICAgIC8v5Lqn5ZOB5ZOB54mMCiAgICAgICAgcHJvZHVjdENhdGVnb3J5OiBbXSwgICAgICAgICAgICAgICAgICAvL+WTgeeJjOWTgeexuwogICAgICB9LAogICAgICBicmFuZExpc3Q6IFtdLAogICAgICBwcm9kdWN0Q2F0ZWdvcnlMaXN0OltdLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBjb250cmFjdE5vOiBbe3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICflkIjlkIzlj7fkuI3og73kuLrnqbonLHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIGNvbnRyYWN0U2lnbmVyTW9iaWxlOiBbe3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICflkIjlkIznrb7nvbLmiYvmnLrlj7fkuI3og73kuLrnqbonLHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIGNvbnRyYWN0U2lnbmVyOiBbe3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICflkIjlkIznrb7nvbLkurrkuI3og73kuLrnqbonLHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIGN1c3RvbWVyTmFtZTogW3tyZXF1aXJlZDogdHJ1ZSxtZXNzYWdlOiAn5oql5L+u5Lq65aeT5ZCN5LiN6IO95Li656m6Jyx0cmlnZ2VyOiAnYmx1cid9XSwKICAgICAgICBtb2JpbGU6IFt7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+iBlOezu+WPt+eggeS4jeiDveS4uuepuicsdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgb3JkZXJDaXR5OiBbe3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICfotK3kubDln47luILkuI3og73kuLrnqbonLHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIGFkZHJlc3M6IFt7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+WuieijheWcsOWdgOS4jeiDveS4uuepuicsdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgcHJvZHVjdEJyYW5kOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36Iez5bCR6YCJ5oup5LiA6aG5JywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgcHJvZHVjdENhdGVnb3J5OiBbe3JlcXVpcmVkOnRydWUsdHlwZTonYXJyYXknLG1pbjogMSwgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOmhuScsdHJpZ2dlcjogJ2NoYW5nZSd9XSwKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgdGhpcy5pbml0RGF0YSgpOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RDYXRlZ29yeT10aGlzLmZvcm1EYXRhLnByb2R1Y3RDYXRlZ29yeS50b1N0cmluZygpCiAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmc9dHJ1ZQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtRGF0YSkKICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLeWuouaIt+err+aWsOWinuWIsOe6v+S4i+WPl+eQhuihqC0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICBhZGRDdXN0b21lck9wQnVzaW5lc3ModGhpcy5mb3JtRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmc9ZmFsc2UKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRydWUsCiAgICAgICAgICAgICAgICBjb250ZW50OiAn5o+Q5Lqk5oiQ5Yqf77yBJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzZXQobmFtZSkKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcih7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLAogICAgICAgICAgICAgICAgY29udGVudDogcmVzLm1lc3NhZ2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLeaWsOWinuW3peWNlS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVTZWFyY2goKXsKICAgICAgdGhpcy4kTWVzc2FnZS5pbmZvKHtiYWNrZ3JvdW5kOnRydWUsY29udGVudDon5p+l6K+i5Yqf6IO95q2j5Zyo5byA5Y+R5LitLi4uJ30pCiAgICB9LAogICAgY2xpY2tSZXNldChuYW1lKXsKICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7CiAgICAgICAgdGl0bGU6J+ehruWumuimgemHjee9ruihqOWNleWQlycsCiAgICAgICAgb25PazooKT0+ewogICAgICAgICAgdGhpcy5oYW5kbGVSZXNldChuYW1lKQogICAgICAgIH0sCiAgICAgICAgCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUmVzZXQobmFtZSkgewogICAgICB0aGlzLiRyZWZzW25hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgaW5pdERhdGEoKXsKICAgICAgLy/ojrflj5blk4HniYzmlbDmja4KICAgICAgZ2V0RGljdERhdGFCeVR5cGUoJ29wX3Byb2R1Y3RfYnJhbmQnKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmJyYW5kTGlzdD1yZXMucmVzdWx0CiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSwKICAgICAgICAgICAgY29udGVudDogcmVzLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8v6I635Y+W5Lqn5ZOB5pWw5o2uCiAgICAgIGdldERpY3REYXRhQnlUeXBlKCdvcF9wcm9kdWN0X2NhdGVnb3J5JykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5wcm9kdWN0Q2F0ZWdvcnlMaXN0PXJlcy5yZXN1bHQKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLAogICAgICAgICAgICBjb250ZW50OiByZXMubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCkKICB9Cn0K"},{"version":3,"sources":["report-pc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"report-pc.vue","sourceRoot":"src/views/work-order","sourcesContent":["<template>\r\n<div style=\"min-height: 100%;\" class=\"bg-fff\">\r\n  <div style=\"max-width: 70%;min-width: 800px;margin:auto;\" class=\"pt-20 pb-20\">\r\n    <Form ref=\"form\" :model=\"formData\" :rules=\"ruleValidate\" :label-width=\"150\" inline>\r\n      <FormItem label=\"合同签署人手机号\" prop=\"contractSignerMobile\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.contractSignerMobile\" search enter-button=\"查询\" @on-search=\"handleSearch\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"合同签署人\" prop=\"contractSigner\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.contractSigner\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"合同号\" prop=\"contractNo\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.contractNo\"></Input>\r\n      </FormItem> \r\n      <FormItem label=\"报修人姓名\" prop=\"customerName\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.customerName\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"联系号码\" prop=\"mobile\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.mobile\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"购买城市\" prop=\"orderCity\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.orderCity\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"安装地址\" prop=\"address\" style=\"width: 80%;\">\r\n        <Input v-model=\"formData.address\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"报修产品品牌\" prop=\"productBrand\">\r\n        <RadioGroup v-model=\"formData.productBrand\">\r\n          <Radio v-for=\"item in brandList\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"报修产品品类(可多选)\" prop=\"productCategory\">\r\n        <CheckboxGroup v-model=\"formData.productCategory\">\r\n          <Checkbox v-for=\"item in productCategoryList\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Checkbox>\r\n        </CheckboxGroup>\r\n      </FormItem>\r\n      <FormItem label=\"问题描述\" prop=\"content\" style=\"width: 90%;\">\r\n        <Input type=\"textarea\" :autosize=\"{minRows:3}\" v-model=\"formData.content\" maxlength=1000 show-word-limit></Input>\r\n      </FormItem>\r\n      <FormItem label=\"附件上传\" style=\"width: 30%;\">\r\n        <Upload action=\"/xrcc/upload/file\" :headers=\"accessToken\" :on-success=\"handleSuccess\" :on-error=\"handleError\"\r\n          :max-size=\"5120\" :on-exceeded-size=\"handleMaxSize\" :before-upload=\"beforeUpload\" multiple ref=\"up\">\r\n          <Button icon=\"ios-cloud-upload-outline\">上传文件</Button>\r\n        </Upload>\r\n      </FormItem>\r\n    </Form>\r\n    <div class=\"br ali-cen\">\r\n      <Button @click=\"clickReset('form')\">重置</Button>\r\n      <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handleSubmit('form')\">提交</Button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n</template>\r\n<script>\r\n  import {\r\n    getDictDataByType,        //根据类型查询字典数据\r\n    addCustomerOpBusiness,    //添加线下受理跟进客户端\r\n  } from \"@/api/index\";\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        loading: false,\r\n        submitLoading:false,\r\n        formData: {\r\n          contractNo: '',                   //合同号\r\n          contractSignerMobile:'',          //合同手机号\r\n          contractSigner: '',               //合同人\r\n          channel:'自助留言',                //渠道，客户自助报修固定为留言\r\n          customerName: '',                 //客户姓名\r\n          mobile: '',                       //手机号\r\n          orderCity: '',                    //购买城市\r\n          address: '',                      //详细地址\r\n          content: '',                      //反馈内容\r\n          productBrand:'',                  //产品品牌\r\n          productCategory: [],                  //品牌品类\r\n        },\r\n        brandList: [],\r\n        productCategoryList:[],\r\n        ruleValidate: {\r\n          contractNo: [{required: true,message: '合同号不能为空',trigger: 'blur'}],\r\n          contractSignerMobile: [{required: true,message: '合同签署手机号不能为空',trigger: 'blur'}],\r\n          contractSigner: [{required: true,message: '合同签署人不能为空',trigger: 'blur'}],\r\n          customerName: [{required: true,message: '报修人姓名不能为空',trigger: 'blur'}],\r\n          mobile: [{required: true,message: '联系号码不能为空',trigger: 'blur'}],\r\n          orderCity: [{required: true,message: '购买城市不能为空',trigger: 'blur'}],\r\n          address: [{required: true,message: '安装地址不能为空',trigger: 'blur'}],\r\n          productBrand: [{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n          productCategory: [{required:true,type:'array',min: 1, message: '请至少选择一项',trigger: 'change'}],\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      init() {\r\n        this.initData();\r\n      },\r\n      handleSubmit(name) {\r\n        this.$refs[name].validate((valid) => {\r\n          if (valid) {\r\n            this.formData.productCategory=this.formData.productCategory.toString()\r\n            this.submitLoading=true\r\n            console.log(this.formData)\r\n            // ------------------客户端新增到线下受理表--------------------\r\n            addCustomerOpBusiness(this.formData).then(res => {\r\n              this.submitLoading=false\r\n              if (res.success) {\r\n                this.$Message.success({\r\n                  background: true,\r\n                  content: '提交成功！'\r\n                });\r\n                this.handleReset(name)\r\n              }else{\r\n                this.$Message.error({\r\n                  background: true,\r\n                  content: res.message\r\n                });\r\n              }\r\n            });\r\n            // -----------------新增工单---------------------------------\r\n          }\r\n        })\r\n      },\r\n      handleSearch(){\r\n        this.$Message.info({background:true,content:'查询功能正在开发中...'})\r\n      },\r\n      clickReset(name){\r\n        this.$Modal.confirm({\r\n          title:'确定要重置表单吗',\r\n          onOk:()=>{\r\n            this.handleReset(name)\r\n          },\r\n          \r\n        })\r\n      },\r\n      handleReset(name) {\r\n        this.$refs[name].resetFields();\r\n      },\r\n      initData(){\r\n        //获取品牌数据\r\n        getDictDataByType('op_product_brand').then(res => {\r\n          if (res.success) {\r\n            this.brandList=res.result\r\n          }else{\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.message\r\n            });\r\n          }\r\n        });\r\n        //获取产品数据\r\n        getDictDataByType('op_product_category').then(res => {\r\n          if (res.success) {\r\n            this.productCategoryList=res.result\r\n          }else{\r\n            this.$Message.error({\r\n              background: true,\r\n              content: res.message\r\n            });\r\n          }\r\n        });\r\n      },\r\n    },\r\n    mounted() {\r\n      this.init()\r\n    }\r\n  }\r\n</script>\r\n"]}]}