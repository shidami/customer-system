{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\defined-attribute\\definedAttribute.vue?vue&type=style&index=0&id=0274d306&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\defined-attribute\\definedAttribute.vue","mtime":1614579763361},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5uby1tYXJnaW57CiAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgLml2dS1mb3JtLWl0ZW0tY29udGVudHsKICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwoKICB9Cn0KLnNlYXJjaCB7CiAgLm9wZXJhdGlvbiB7CiAgICBtYXJnaW4tYm90dG9tOiAydmggIWltcG9ydGFudDsKCiAgfQp9Ci51aS1kZWZhdWx0LWNoZWNrYm94ewogIGxhYmVsW2RhdGEtdi0wMjc0ZDMwNl17CiAgICB3aWR0aDogMzBweDsKICAgIGhlaWdodDogMzhweDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgfQp9Ci5pdnUtY29sLml2dS1jb2wtc3Bhbi0xMnsKICAuaXZ1LWZvcm0taXRlbXsKICAgIGhlaWdodDogMzNweDsKICB9Cn0K"},{"version":3,"sources":["definedAttribute.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAozBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"definedAttribute.vue","sourceRoot":"src/views/sys/defined-attribute","sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <Card>\r\n      <Row>\r\n        <div class=\"own-space-right\">\r\n\r\n          <Row>\r\n            <div class=\"ui-section-default-warp\">\r\n              <div class=\"ui-section-default-title\">\r\n                <div class=\"ui-section-default-title-left\">启用的字段({{disabledFieldDataNumber}})</div>\r\n                <div class=\"ui-section-default-title-right\">\r\n                  <Button size=\"small\" @click=\"addBlackList\" type=\"primary\" icon=\"md-add\" :disabled=\"disabledAddCon==10\">{{$t(\"add\")}}新的自定义字段</Button><!-- 增加 -->\r\n                </div>\r\n              </div>\r\n              <List border size=\"small\" class=\"ui-section-default\">\r\n                <ListItem v-for=\"(item,i) in disabledFieldData\" :key=\"item.id\">\r\n                  <div>{{ item.agentFieldName }}<span v-if=\"item.custRequired==1\" class=\"ui-section-default-label\">用户可编辑*</span></div>\r\n                  <div>{{ setCategory(item.category) }}</div>\r\n                  <div>{{item.isSystem==1?'系统内置':'用户自定义'}}</div>\r\n                  <div class=\"ui-section-btn-wap\">\r\n                    <Button size=\"small\" v-if=\"item.enabled=='-1'\" @click=\"rowDisableOrEnable(item)\">停用</Button>\r\n                    <Button size=\"small\" :disabled=\"item.isEnableEdit!=1\" @click=\"rowEdit(item)\">{{item.isEnableEdit==1?'编辑':'无法编辑'}}</Button>\r\n                  </div>\r\n                </ListItem>\r\n                <ListItem v-if=\"disabledFieldData.length==0\">\r\n                  暂无数据\r\n                </ListItem>\r\n              </List>\r\n            </div>\r\n            <div class=\"ui-section-default-warp\">\r\n              <div class=\"ui-section-default-title\">\r\n                <div class=\"ui-section-default-title-left\">未启用的字段({{enabledFieldDataNumber}})</div>\r\n              </div>\r\n              <List border size=\"small\" class=\"ui-section-default\">\r\n                <ListItem v-for=\"(item,i) in enabledFieldData\" :key=\"item.id\">\r\n                  <div>{{ item.agentFieldName }}</div>\r\n                  <div>{{ setCategory(item.category) }}</div>\r\n                  <div>{{item.isSystem==1?'系统内置':'用户自定义'}}</div>\r\n                  <div class=\"ui-section-btn-wap\">\r\n                    <Button size=\"small\" v-if=\"item.enabled==0\" @click=\"rowDisableOrEnable(item)\">启用</Button>\r\n                    <Button size=\"small\" :disabled=\"item.isEnableEdit!=1\" @click=\"rowEdit(item)\">{{item.isEnableEdit==1?'编辑':'无法编辑'}}</Button>\r\n                    <Button size=\"small\" v-if=\"item.isSystem==0\" @click=\"rowDel(item)\">删除</Button>\r\n                  </div>\r\n                </ListItem>\r\n                <ListItem v-if=\"enabledFieldData.length==0\">\r\n                  暂无数据\r\n                </ListItem>\r\n              </List>\r\n            </div>\r\n          </Row>\r\n\r\n        </div>\r\n      </Row>\r\n    </Card>\r\n\r\n    <!--添加|修改-开始--->\r\n    <Modal\r\n        :title=\"\r\n              editFormMobileVisibleTitle == 'add'\r\n                ? $t('add') + setCategory(category)\r\n                : $t('update') + setCategory(category)\r\n            \"\r\n        v-model=\"editFormMobileVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"900\"\r\n    >\r\n      <Form\r\n          ref=\"formItemData\"\r\n          :model=\"formItem\"\r\n          :label-width=\"130\"\r\n          label-position=\"right\"\r\n          :rules=\"formItemValidate\"\r\n\r\n      >\r\n        <Row :gutter=\"24\">\r\n          <Col span=\"20\">\r\n            <FormItem label=\"对客服\" prop=\"agentFieldName\">\r\n              <p>显示标题（客服）</p>\r\n              <Input v-model=\"formItem.agentFieldName\" placeholder=\"请输入\" :disabled=\"editFormMobileVisibleTitle=='edit'&&formItem.isSystem==1\"></Input>\r\n              <p class=\"ui-small\" style=\"margin-top: 5px;\">显示给客服的标题</p>\r\n            </FormItem>\r\n            <FormItem label=\"\" prop=\"agentRequired\">\r\n              <Checkbox v-model=\"formItem.agentRequired\">必须填写（客服）</Checkbox>\r\n              <p class=\"ui-small\">当此勾选，客服在处理一个工单的时候此字段不能留空</p>\r\n            </FormItem>\r\n          </Col>\r\n        </Row>\r\n        <Row :gutter=\"24\">\r\n          <Col span=\"20\">\r\n            <FormItem label=\"对客户\" prop=\"custFieldName\">\r\n              <p>显示标题（客户）</p>\r\n              <Input v-model=\"formItem.custFieldName\" placeholder=\"请输入\"></Input>\r\n              <p class=\"ui-small\" style=\"margin-top: 5px;\">显示给客户的标题</p>\r\n            </FormItem>\r\n            <FormItem label=\"\" prop=\"custEnabled\">\r\n              <Checkbox v-model=\"formItem.custEnabled\">可见（客户）</Checkbox>\r\n              <p class=\"ui-small\">当此勾选，客户在查看工单时可见此字段</p>\r\n            </FormItem>\r\n            <FormItem label=\"\" prop=\"isCustEdit\">\r\n              <Checkbox v-model=\"formItem.isCustEdit\">可编辑（客户）</Checkbox>\r\n              <p class=\"ui-small\">当此勾选，客户在提交工单时可编辑此字段</p>\r\n            </FormItem>\r\n            <FormItem label=\"\" prop=\"custRequired\">\r\n              <Checkbox value=\"1\" v-model=\"formItem.custRequired\">必须填写（客户）</Checkbox>\r\n              <p class=\"ui-small\">当此勾选，客户在提交工单时此字段不能留空</p>\r\n            </FormItem>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span=\"24\"><hr class=\"ui-hr\"></Col>\r\n          <Col span=\"20\">\r\n            <FormItem label=\"校验规则\" prop=\"validRule\">\r\n              <Select v-model=\"formItem.validRule\">\r\n                <Option value=\"null\">==不做任何验证==</Option>\r\n                <Option value=\"required\">NotNull - 必填</Option>\r\n                <Option value=\"Num\">Num - 必须为数字</Option>\r\n                <Option value=\"NumOrNull\">NumOrNull - 空或者为数字</Option>\r\n                <Option value=\"Phone\">Phone - 必须电话格式!</Option>\r\n                <Option value=\"PhoneOrNull\">PhoneOrNull - 空或者为电话格式!</Option>\r\n                <Option value=\"Mobile\">Mobile - 必须为手机格式!</Option>\r\n                <Option value=\"MobileOrNull\">MobileOrNull - 空或者为手机格式!</Option>\r\n                <Option value=\"MobileOrPhone\">MobileOrPhone - 必须为手机或电话格式!</Option>\r\n                <Option value=\"MobileOrPhoneOrNull\">MobileOrPhoneOrNull -空或者手机或电话格式!</Option>\r\n                <Option value=\"Email\">Email - 必须为E-mail格式!</Option>\r\n                <Option value=\"EmailOrNull\">EmailOrNull - 空或者为E-mail格式!</Option>\r\n                <Option value=\"IDCard\">IDCard - 必须为身份证格式!</Option>\r\n                <Option value=\"IDCardOrNull\">IDCardOrNull - 空或者为身份证格式!</Option>\r\n                <Option value=\"Double\">Double - 必须为小数!</Option>\r\n                <Option value=\"DoubleOrNull\">DoubleOrNull -空或者为小数!</Option>\r\n                <Option value=\"Zip\">Zip -必须为邮编格式!</Option>\r\n                <Option value=\"ZipOrNull\">ZipOrNull -空 或者为邮编格式!</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"跨列数\" prop=\"colspan\">\r\n              <Select v-model=\"formItem.colspan\">\r\n                <Option value=\"1\">不跨列</Option>\r\n                <Option value=\"2\">2</Option>\r\n                <Option value=\"3\">3</Option>\r\n                <Option value=\"4\">4</Option>\r\n                <Option value=\"5\">5</Option>\r\n              </Select>\r\n            </FormItem>\r\n          </Col>\r\n        </Row>\r\n        <Row :gutter=\"24\">\r\n          <Col span=\"24\">\r\n            <Row v-show=\"category==1||category==2||category==3\">\r\n              <Col span=\"20\">\r\n                <div>\r\n                  <FormItem label=\"数据来源\" prop=\"source\">\r\n                    <Select v-model=\"formItem.source\">\r\n                      <Option value=\"0\" selected=\"selected\">固定</Option>\r\n                      <Option value=\"1\">数据字典</Option>\r\n                    </Select>\r\n                  </FormItem>\r\n                </div>\r\n              </Col>\r\n              <Col span=\"20\">\r\n                <div v-for=\"(item,i) in combinedForm\" :key=\"i\">\r\n                  <Row :gutter=\"16\" style=\"margin-bottom: 5px\">\r\n                    <div style=\"width: 130px;float: left;height: 35px;line-height:35px;text-align: right\">选项{{i+1}}</div>\r\n                    <Col span=\"7\" prop=\"\">\r\n                      <Input v-model=\"item.key\" placeholder=\"请输入\"></Input>\r\n                    </Col>\r\n                    <Col span=\"7\" class=\"no-margin\" prop=\"\">\r\n                      <Input v-model=\"item.val\" placeholder=\"请输入\"></Input>\r\n                    </Col>\r\n                    <Col span=\"5\" style=\"text-align: right;padding-left: 0 !important;\">\r\n                      <Icon type=\"ios-checkbox-outline\" v-if=\"item.default==1\" @click=\"checkcombinedForm(i)\"  v-model=\"item.default\" style=\"font-size: 20px;vertical-align: middle;\"/>\r\n                      <Icon type=\"ios-square-outline\" v-if=\"item.default==0\"  @click=\"checkcombinedForm(i)\"  v-model=\"item.default\" style=\"font-size: 20px;vertical-align: middle;\"/>\r\n                      设为默认值\r\n                      <Button @click=\"addCombinedFormItem\" style=\"margin-left: 10px\" v-if=\"i==0\"><Icon type=\"md-add\" /></Button>\r\n                      <Button @click=\"delCombinedFormItem(i)\" style=\"margin-left: 10px\" v-if=\"i!=0\"><Icon type=\"md-remove\" /></Button>\r\n                    </Col>\r\n                  </Row>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n        <Row :gutter=\"24\">\r\n          <Col span=\"24\">\r\n            <Row v-show=\"category==5\">\r\n              <Col span=\"20\">\r\n                <FormItem label=\"日期格式\" prop=\"pattern\">\r\n                  <Select v-model=\"formItem.pattern\">\r\n                    <Option value=\"yyyy-MM-dd\">yyyy-MM-dd</Option>\r\n                    <Option value=\"yyyy-MM-dd HH:mm:ss\">yyyy-MM-dd HH:mm:ss</Option>\r\n                    <Option value=\"yyyy/MM/dd\">yyyy/MM/dd</Option>\r\n                    <Option value=\"yyyy/MM/dd HH:mm:ss\">yyyy/MM/dd HH:mm:ss</Option>\r\n                  </Select>\r\n                </FormItem>\r\n                <FormItem label=\"默认值\" prop=\"defaultValue\">\r\n                  <DatePicker v-model=\"formItem.defaultValue\" type=\"datetime\" :format=\"datetimeFormat\" placeholder=\"请选择\" style=\"width: 100%;\"></DatePicker>\r\n                </FormItem>\r\n              </Col>\r\n              <Col span=\"24\">\r\n\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n        <Row :gutter=\"24\">\r\n          <Col span=\"24\">\r\n            <FormItem class=\"ui-formItem\" label=\"排序码\" prop=\"sortCode\">\r\n              <Col class=\"ui-formItem-input\" span=\"18\">\r\n                <Input type=\"text\" v-model=\"formItem.sortCode\" placeholder=\"请输入排序码\"></Input>\r\n              </Col>\r\n            </FormItem>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"editFormMobileVisible = false\">{{\r\n            $t(\"cancel\")\r\n          }}</Button>\r\n        <Button\r\n            type=\"primary\"\r\n            :loading=\"checkCodeLoading\"\r\n            @click=\"submitFormList\"\r\n        >{{ $t(\"save\") }}</Button\r\n        >\r\n      </div> </Modal\r\n    ><!--添加|修改-结束--->\r\n\r\n    <!--选择自定义字段种类-开始--->\r\n    <Modal\r\n        title=\"选择自定义字段种类\"\r\n        v-model=\"editFormTypeMobileVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"1100\"\r\n    >\r\n      <Form\r\n          ref=\"formItemTypeData\"\r\n          :model=\"formType\"\r\n          :label-width=\"130\"\r\n          label-position=\"right\"\r\n          :rules=\"formTypeValidate\"\r\n      >\r\n        <!--        {{formItem}}-->\r\n        <Row :gutter=\"24\">\r\n          <FormItem class=\"ui-formItem\" label=\"文本框\" prop=\"text\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <Input type=\"text\" v-model=\"formType.text\" placeholder=\"文本框里的内容\" disabled></Input>\r\n              <p>文本框字段可以填写单行文字内容</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(0)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"文本区域\" prop=\"textarea\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <Input type=\"textarea\" v-model=\"formType.textarea\" placeholder=\"文本区域里的内容\" disabled></Input>\r\n              <p>文本区域字段可以填写多行文字及说明</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(4)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"下拉菜单\" prop=\"select\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <Select v-model=\"formType.select\" readonly>\r\n                <Option value=\"技术问题\">技术问题</Option>\r\n                <Option value=\"销售问题\">销售问题</Option>\r\n                <Option value=\"财务问题\">财务问题</Option>\r\n              </Select>\r\n              <p>基本的下拉菜单字段，可以设置多个下拉选项</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(3)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"复选框\" prop=\"checkbox\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <CheckboxGroup v-model=\"formType.checkbox\" disabled>\r\n                <Checkbox label=\"乌龙茶\"></Checkbox>\r\n                <Checkbox label=\"绿茶\"></Checkbox>\r\n                <Checkbox label=\"红茶\"></Checkbox>\r\n                <Checkbox label=\"黑茶\"></Checkbox>\r\n              </CheckboxGroup>\r\n              <p>复选框字段可以设置多个能同时选中的选项</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(2)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"单选框\" prop=\"radio\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <RadioGroup v-model=\"formType.radio\" disabled>\r\n                <Radio label=\"男\">男</Radio>\r\n                <Radio label=\"女\">女</Radio>\r\n              </RadioGroup>\r\n              <p>复选框字段可以设置多个能同时选中的选项</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(1)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"数字\" prop=\"number\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <Input v-model=\"formType.number\" type=\"number\" placeholder=\"123456\" disabled></Input>\r\n              <p>这里仅可以填写数字</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(6)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"日期\" prop=\"date\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <DatePicker v-model=\"formType.date\" type=\"date\" placeholder=\"2020-11-24\" style=\"width: 100%\" disabled></DatePicker>\r\n              <p>这里仅可以填写最多2位的小数</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(5)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n          <FormItem class=\"ui-formItem\" label=\"电话\" prop=\"telephone\">\r\n            <Col class=\"ui-formItem-input\" span=\"18\">\r\n              <Input v-model=\"formType.telephone\" placeholder=\"文本框里的内容\" disabled></Input>\r\n              <p>这里仅可以填写最多2位的小数</p>\r\n            </Col>\r\n            <Col class=\"ui-formItem-btn\" span=\"6\">\r\n              <Button @click=\"selectField(7)\">选择此字段</Button>\r\n            </Col>\r\n          </FormItem>\r\n        </Row>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"editFormTypeMobileVisible = false\">{{$t(\"cancel\")}}</Button>\r\n      </div>\r\n    </Modal><!--选择自定义字段种类-结束--->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getRedefinefieldList,\r\n  delRedefinefield,\r\n  saveRedefinefieldList,\r\n  editRedefinefieldList,\r\n  disableRedefinefield,\r\n  enableRedefinefield,\r\n  getDisabledFieldList,\r\n  getEnabledFieldList\r\n\r\n} from \"@/api/index\";\r\n\r\nexport default {\r\nname: \"defined-attribute\",\r\n  data() {\r\n    return {\r\n      disabledFieldData:[],\r\n      disabledFieldDataNumber:null,\r\n      enabledFieldData:[],\r\n      enabledFieldDataNumber:null,\r\n      disabledAddCon:0,\r\n      openTip:true,\r\n      loading: false,\r\n      openSearch:false,\r\n      editFormMobileVisible : false,\r\n      editFormMobileVisibleTitle : \"add\",\r\n      tableColumnsVisible:false,//自定义表格展示的列\r\n      combinedFormSelShow:false,\r\n      combinedFormDateShow:false,\r\n      combinedFormTextShow:false,\r\n      validRuleReadonly:false,\r\n      editFormTypeMobileVisible:false,\r\n      datetimeFormat:\"yyyy-MM-dd\",\r\n      datetimeType:'',\r\n      //黑名单组\r\n      blackListGroupForm:{\r\n        id:\"\",\r\n        name:\"\",\r\n        remark:\"\"\r\n      },//黑名单组\r\n      blackListGroupFormValidate:{\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n      },\r\n      formType:{\r\n        text:'文本框里的内容',\r\n        textarea:'文本区域',\r\n        select:'技术问题',\r\n        checkbox:'乌龙茶',\r\n        radio:'男',\r\n        number:'123456',\r\n        date:'2020-11-24',\r\n        telephone:'13500000000'\r\n      },\r\n      //表单\r\n      formItem:{\r\n        id:\"\",\r\n        tenantId:JSON.parse(Cookies.get(\"userInfo\")).tenantId,//租户ID\r\n        tableName:\"crm_customer\",//表名\r\n        //columnName:\"\",//数据库列名\r\n        category:\"\",//表单属性类型 0.文本,1.单选，2.多选，3.下拉列表，4.文本域，5.日期 6.数字 7.电话\r\n        fieldCode:\"\",//字段名称(必须是字母)\r\n        //fieldName:\"\",//页面显示名称\r\n        agentFieldName:\"\",//页面标题（客服）\r\n        agentRequired:\"\",//是否必填（客服）\r\n\r\n        fieldLengh:\"\",//列的长度\r\n        colspan:\"1\",//跨列数\r\n        validRule:\"null\",//校验规则\r\n        value:\"\",//字段值\r\n        //tenantRequired:\"\",//租户是否必填\r\n        custFieldName:'',//显示标题（客户）\r\n        custRequired:\"\",//是否必填（客户）（1.是，0否）\r\n        custEnabled:\"\",//是否可见（客户）（1.是，0否）\r\n        isCustEdit:\"\",//客户是否可编辑 （1.是，0否）\r\n        enabled:\"\",//是否启用 -1不启用 0启用\r\n        source:\"0\",//数据来源（1.固定字段,2.扩展字段）\r\n        pattern:'yyyy-MM-dd',//格式\r\n        defaultValue:\"2020-11-01 \",//默认值\r\n        sortCode:'',//排序码\r\n      },\r\n      //表单验证\r\n      formItemValidate:{\r\n        agentFieldName: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        custFieldName: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n\r\n      },\r\n      formTypeValidate:{\r\n        text:[\r\n\r\n        ]\r\n      },\r\n      importBlackListForm:{\r\n        file:\"\",\r\n      },//黑名单组\r\n      importBlackListFormValidate:{\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n      },\r\n\r\n      ownSpaceLeftItem: 1,\r\n      groupId: 1,//当前选中的组\r\n      selectCount:0,\r\n      combinedForm:[{\r\n        key:'',\r\n        default:0\r\n      }],\r\n      //黑名单列表\r\n      dateDataList: [],\r\n      searchForm: {\r\n        tableName: \"crm_customer\"\r\n      },\r\n      total: 0,\r\n      category:0\r\n    };\r\n  },\r\n  methods:{\r\n    init(){\r\n     //this.getTableList();\r\n      this.getDisabledFieldDataList();//查询禁用字段列表\r\n      this.getEnabledFieldDataList();//查询可用字段列表\r\n    },\r\n    //查询禁用字段列表\r\n    getDisabledFieldDataList(){\r\n      getDisabledFieldList({tableName:this.searchForm.tableName}).then(res=>{\r\n        if(res.success){\r\n          this.disabledFieldData=res.result;\r\n          this.disabledFieldDataNumber=res.result.length\r\n        }\r\n      })\r\n    },\r\n    //查询可用字段列表\r\n    getEnabledFieldDataList(){\r\n      getEnabledFieldList({tableName:this.searchForm.tableName}).then(res=>{\r\n        if(res.success){\r\n          this.enabledFieldData=res.result;\r\n          this.enabledFieldDataNumber=res.result.length\r\n        }\r\n      })\r\n    },\r\n    //获取列表\r\n    getTableList(){\r\n      getRedefinefieldList({tableName:this.searchForm.tableName}).then(res=>{\r\n        if(res.success){\r\n          this.dateDataList=res.result;\r\n          this.total = res.result.length;\r\n          this.disabledAddCon=res.result.length;\r\n        }\r\n      })\r\n    },\r\n    //重置\r\n    handleReset() {\r\n      if(this.openSearch){\r\n        this.$refs.searchForm.resetFields();\r\n      }\r\n      this.searchForm.pageNumber = 1;\r\n      this.searchForm.pageSize = 10;\r\n      //this.getTableList(this.groupId);\r\n      this.getDisabledFieldDataList();\r\n      this.getEnabledFieldDataList();\r\n      //this.btnBlackTableColumns();\r\n     // this.columnsSet=this.columns;\r\n    },\r\n    //新增\r\n    addBlackList(){\r\n      this.editFormTypeMobileVisible=true;\r\n    },\r\n    dropDown() {},\r\n    //编辑\r\n    rowEdit(V) {\r\n      var than=this;\r\n      var formData={};\r\n      for (var i in V) {\r\n        V[i] =V[i]+'';\r\n        if (i == null||i == \"null\") {\r\n          V[i] = \"\";\r\n        }else if(i=='value'){\r\n          if(V[i]!=''){\r\n            if(V.category==1||V.category==2||V.category==3){\r\n              formData[i] =JSON.parse(V[i]);\r\n              than.combinedForm=JSON.parse(V.value);\r\n            }\r\n          }\r\n        }else if(i=='validRule'){\r\n          formData[i]='null';\r\n        }else {\r\n          if(i=='custRequired'||i=='custRequired'||i=='isCustEdit'||i=='agentRequired'||i=='custEnabled'){\r\n            console.log(V[i]);\r\n            formData[i] =V[i]==1?true:false\r\n          }else {\r\n            formData[i] =V[i]+''\r\n          }\r\n        }\r\n      }\r\n      V = JSON.stringify(V);\r\n      V = JSON.parse(V);\r\n      this.category=V.category;\r\n      this.formItem.category=V.category;\r\n      if(V.delFlag==0){\r\n        V.delFlag=\"有效\";\r\n      }\r\n\r\n      this.$nextTick(()=>{\r\n        this.formItem=formData;\r\n      })\r\n      this.editFormMobileVisible = true;\r\n      this.editFormMobileVisibleTitle='edit';\r\n    },\r\n    //删除\r\n    rowDel(v) {\r\n      var than=this;\r\n      this.$Modal.confirm({\r\n        title: this.$t(\"confirmDeletionTitle\"), //\"确认删除\"\r\n        content: this.$t(\"confirmDeletionBodyFirst\") + v.agentFieldName, //\"您确认要删除所选的 \" +this.selectCount+\" 条数据?\"\r\n        onOk: () => {\r\n          delRedefinefield({\r\n            ids: v.id\r\n          }).then(res => {\r\n            if (res.success) {\r\n\r\n              than.selectCount--;\r\n              this.$Message.success(this.$t(\"success\"));\r\n              this.getDisabledFieldDataList();\r\n              this.getEnabledFieldDataList();\r\n              //this.getTableList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    //禁用|启用\r\n    rowDisableOrEnable(V){\r\n      for (var i in V) {\r\n        V[i] =V[i]+'';\r\n      }\r\n      //禁用\r\n      if(V.enabled==0){\r\n        disableRedefinefield(V.id).then(res=>{\r\n          if (res.success) {\r\n            this.$Message.success(this.$t(\"success\"));\r\n            this.getDisabledFieldDataList();\r\n            this.getEnabledFieldDataList();\r\n            //this.getTableList();\r\n          }\r\n        })\r\n      }else {\r\n        //启用\r\n        enableRedefinefield(V.id).then(res=>{\r\n          if (res.success) {\r\n            this.$Message.success(this.$t(\"success\"));\r\n            this.getDisabledFieldDataList();\r\n            this.getEnabledFieldDataList();\r\n            //this.getTableList();\r\n          }\r\n        })\r\n      }\r\n    },\r\n    //\r\n    delAll() {\r\n      var than=this;\r\n      if (this.selectCount <= 0) {\r\n        this.$Message.warning(this.$t(\"noDataSelectedDelete\")); //您还未选择要删除的数据\r\n        return;\r\n      } else {\r\n        this.$Modal.confirm({\r\n          title: this.$t(\"confirmDeletionTitle\"), //\"确认删除\"\r\n          content:\r\n              this.$t(\"confirmDeletionBodyFirst\") +\r\n              this.selectCount +\r\n              this.$t(\"confirmDeletionBodyLast\"), //\"您确认要删除所选的 \" +this.selectCount+\" 条数据?\"\r\n          onOk: () => {\r\n            var ids = [];\r\n            this.selectList.forEach(function(v, i) {\r\n              ids.push(v.id);\r\n            });\r\n            ids = ids.toString();\r\n            delRedefinefield({ ids: ids }).then((res) => {\r\n              //this.$Modal.remove();\r\n              if (res.success) {\r\n                than.selectCount=0;\r\n                this.$Message.success(this.$t(\"deletionSucceeded\"));\r\n                //this.getTableList();\r\n              } else {\r\n                this.$Message.error(this.$t(\"deletionFailed\"));\r\n              }\r\n              this.getDisabledFieldDataList();\r\n              this.getEnabledFieldDataList();\r\n            });\r\n          },\r\n        });\r\n      }\r\n    },\r\n    //设置默认值\r\n    checkcombinedForm(index){\r\n      this.combinedForm.forEach(function (v,i,arr){\r\n        v.default=0\r\n      })\r\n      this.combinedForm[index].default=1;\r\n    },\r\n    addCombinedFormItem(){\r\n      this.combinedForm.push({\r\n        key:'',\r\n        val:'',\r\n        default:0\r\n      })\r\n    },\r\n    delCombinedFormItem(i){\r\n      var data=this.combinedForm;\r\n      data.splice(i,1);\r\n    },\r\n    //提交自定列表\r\n    submitFormList(){\r\n      var than=this;\r\n      var formData={};\r\n      this.formItem.category=this.category;\r\n      for(var i in this.formItem){\r\n        formData[i]=this.formItem[i];\r\n        // if(i!='_index'&&i!='_rowKey'&& i!='delFlag'){\r\n        //   if(this.formItem[i]!=\"\"&& this.formItem[i]!=null && this.formItem[i]!=\"null\"){\r\n            // if(i=='defaultValue'){\r\n            //   if(this.formItem.category==5){\r\n            //     continue;\r\n            //   }\r\n            // }else if(i=='defaultValueDate'){\r\n            //   if(this.formItem.category!=5){\r\n            //     continue;\r\n            //   }\r\n            // }\r\n\r\n        //   }\r\n        // }\r\n      }\r\n\r\n      formData.agentRequired=this.formItem.agentRequired==true?1:'0';\r\n      formData.custRequired=this.formItem.custRequired==true?1:'0';\r\n      formData.custEnabled=this.formItem.custEnabled==true?1:'0';\r\n      formData.isCustEdit=this.formItem.isCustEdit==true?1:'0';\r\n\r\n      if(formData.category==1||formData.category==2||formData.category==3){\r\n        this.combinedForm.forEach(function (v,i,arr){\r\n          if(v.default==1){\r\n            than.formItem.defaultValue=v.key;\r\n            formData.defaultValue=v.key;\r\n          }\r\n        })\r\n        formData.value=JSON.stringify(this.combinedForm);\r\n      }\r\n\r\n      if(this.editFormMobileVisibleTitle==\"add\"){\r\n        saveRedefinefieldList(formData).then(res=>{\r\n          if(res.success){\r\n            this.getDisabledFieldDataList();\r\n            this.getEnabledFieldDataList();\r\n            this.editFormMobileVisible=false;\r\n            this.$Message.success(this.$t(\"success\"));\r\n          }\r\n        })\r\n      }else {\r\n        editRedefinefieldList(formData).then(res=>{\r\n          if(res.success){\r\n            this.getDisabledFieldDataList();\r\n            this.getEnabledFieldDataList();\r\n            this.editFormMobileVisible=false;\r\n            this.$Message.success(this.$t(\"success\"));\r\n          }\r\n        })\r\n      }\r\n    },\r\n    showDetail(row,index){\r\n      this.$refs.table.toggleSelect(index)\r\n    },\r\n    setCategory(v){\r\n      var typeObj={0:\"文本\",1:\"单选\",2:\"多选\",3:\"下拉列表\",4:\"文本域\",5:\"日期\",6:\"数字\",7:\"电话\"};\r\n      return typeObj[v];\r\n    },\r\n    selectField(dom){\r\n      this.category=dom;\r\n      this.formItem.category=dom;\r\n      this.editFormMobileVisibleTitle='add';\r\n      this.editFormMobileVisible=true;\r\n      this.editFormTypeMobileVisible=false;\r\n    }\r\n  },\r\n  mounted(){\r\n    this.init();\r\n  },\r\n  computed:{\r\n\r\n  },\r\n  watch:{\r\n    formItem: {\r\n      handler: function(v, o, arr) {\r\n        // //单选、多选、下拉列表\r\n        // var sel= {1:true,2:true,3:true};\r\n        // this.combinedFormSelShow=sel[v.category]?true:false;\r\n        //\r\n        // //输入框类\r\n        // var text={0:true,4:true,6:true,7:true};\r\n        // this.combinedFormTextShow=text[v.category]?true:false;\r\n        //\r\n        // //日期框\r\n        // var date1={5:true};\r\n        // this.combinedFormDateShow=date1[v.category]?true:false;\r\n        //\r\n        // //手机或电话\r\n        // if(v.category==7){\r\n        //   this.validRuleReadonly=true;\r\n        //   this.formItem.validRule=\"MobileOrPhone\";\r\n        // }else {\r\n        //   this.validRuleReadonly=false;\r\n        //   this.formItem.validRule=\"\";\r\n        // }\r\n        //\r\n        // this.datetimeFormat=this.formItem.pattern;\r\n\r\n\r\n      },\r\n      deep: true, //深度监听\r\n    },\r\n    \"formItem.pattern\":{\r\n      handler(v){\r\n        this.datetimeFormat=v;\r\n        if (v==\"yyyy-MM-dd\"||v==\"yyyy/MM/dd\"){\r\n          this.datetimeType='date';\r\n\r\n        }else if(v==\"yyyy-MM-dd HH:mm:ss\"||v==\"yyyy/MM/dd HH:mm:ss\"){\r\n          this.datetimeType='datetime';\r\n\r\n        }\r\n      },\r\n      deep: true, //深度监听\r\n    },\r\n    editFormMobileVisible(v){\r\n      if(v==false){\r\n       //\r\n       //  for(var i in  this.formItem){\r\n       //    this.formItem[i]=''\r\n       //  }\r\n        this.$refs[\"formItemData\"].resetFields();\r\n        this.$refs.formItemData.resetFields();\r\n        this.combinedForm=[{\r\n          key:'',\r\n          default:0\r\n        }]\r\n        this.formItem.agentRequired=false;\r\n        this.formItem.custRequired=false;\r\n        this.formItem.custEnabled=false;\r\n        this.formItem.isCustEdit=false;\r\n      }\r\n    },\r\n    category(v){\r\n      if(v==7){\r\n        this.formItem.validRule='MobileOrPhone'\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style  lang=\"less\" scoped>\r\n  .no-margin{\r\n    margin: 0 !important;\r\n    .ivu-form-item-content{\r\n      margin: 0 !important;\r\n\r\n    }\r\n  }\r\n  .search {\r\n    .operation {\r\n      margin-bottom: 2vh !important;\r\n\r\n    }\r\n  }\r\n  .ui-default-checkbox{\r\n    label[data-v-0274d306]{\r\n      width: 30px;\r\n      height: 38px;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n  .ivu-col.ivu-col-span-12{\r\n    .ivu-form-item{\r\n      height: 33px;\r\n    }\r\n  }\r\n</style>"]}]}