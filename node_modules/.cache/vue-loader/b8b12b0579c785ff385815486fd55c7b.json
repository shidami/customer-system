{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\time-manage\\timeManage.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\time-manage\\timeManage.vue","mtime":1614579763401},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpAaW1wb3J0ICIuL3RpbWVNYW5hZ2UubGVzcyI7DQo="},{"version":3,"sources":["timeManage.vue"],"names":[],"mappings":";AACA","file":"timeManage.vue","sourceRoot":"src/views/sys/time-manage","sourcesContent":["<style lang=\"less\">\r\n@import \"./timeManage.less\";\r\n</style>\r\n<template>\r\n  <Card class=\"search\">\r\n    <Row>\r\n      <div style=\"height:100%\">\r\n        <div class=\"own-space ui-time-schedule-settings\">\r\n          <Col :xs=\"8\" :sm=\"8\" :md=\"6\" :lg=\"6\"  class=\"own-space-left bg-default\">\r\n            <div>\r\n              <div class=\"own-header\">\r\n                <Button\r\n                        type=\"default\"\r\n                        icon=\"md-add\"\r\n                        @click=\"scheduleMobileVisibleAddClick\"\r\n                >{{ $t(\"timeManage.addTimeManageNewSchedule\") }}</Button\r\n                >\r\n              </div>\r\n              <Menu\r\n                      :active-name=\"timePlanList.length>0?timePlanList[0].id:0\"\r\n                      class=\"own-space-left-item-box\"\r\n                      style=\"width: 100%\"\r\n              >\r\n                  <!--<MenuItem-->\r\n                          <!--:name=\"item.id\"-->\r\n                          <!--@click.native=\"getTimePlanList(item.id)\"-->\r\n                          <!--class=\"own-space-left-item\"-->\r\n                          <!--:class=\"ownSpaceLeftItem == item.id ? '' : ''\"-->\r\n                          <!--v-for=\"(item, i) in timePlanList\"-->\r\n                          <!--:key=\"i\"-->\r\n                          <!--:data-name-1=\"i + 1\"-->\r\n                  <!--&gt;-->\r\n                  <MenuItem\r\n                          v-for=\"(item, i) in timePlanList\"\r\n                          :name=\"item.id\"\r\n                          @click.native=\"getTimePlanList(item.id)\"\r\n                          class=\"own-space-left-item\"\r\n                          :class=\"ownSpaceLeftItem == item.id ? '' : ''\"\r\n\r\n                          :key=\"item.id\"\r\n                          :data-name-1=\"i + 1\"\r\n                  >\r\n                  <span>{{ item.name }}</span>\r\n                  <div class=\"ui-icon-box\">\r\n                    <Icon\r\n                            type=\"ios-create-outline\"\r\n                            @click=\"scheduleMobileVisibleEditClick(item)\"\r\n                            @click.stop\r\n                    />\r\n                    <Icon\r\n                            type=\"ios-trash-outline\"\r\n                            @click=\"scheduleDelClick(item)\"\r\n                            v-if=\"i != 0\"\r\n                            @click.stop\r\n                    />\r\n                  </div>\r\n                </MenuItem>\r\n              </Menu>\r\n            </div>\r\n\r\n          </Col>\r\n          <Col :xs=\"16\" :sm=\"16\" :md=\"18\" :lg=\"18\">\r\n            <div class=\"own-space-right\">\r\n              <Tabs class=\"ui-tab-flex\">\r\n                <!-- 工作日 -->\r\n                <TabPane\r\n                        :label=\"$t('timeManage.timeManageNewSchedule')\"\r\n                        class=\"ui-tab-flex-item\"\r\n                        :loading=\"loading\"\r\n                >\r\n                  <div class=\"workday-list\">\r\n                    <!--工作日设置-开始-->\r\n                    <div class=\"workday-set\">\r\n                      <div>\r\n                        {{ $t(\"timeManage.timeManageWorkingDaySet\") }}\r\n                        <Poptip placement=\"right\" trigger=\"hover\">\r\n                          <Icon\r\n                                  class=\"text-primary\"\r\n                                  type=\"ios-help-circle ui-icon-help\"\r\n                          />\r\n                          <div slot=\"content\">\r\n                            <p class=\"ui-tip\">\r\n                              {{ $t(\"timeManage.timeManageWorkingDayRrmark\") }}\r\n                            </p>\r\n                          </div>\r\n                        </Poptip>\r\n                      </div>\r\n                      <!--开始--->\r\n                      <div class=\"workday-item-container\">\r\n                        <div\r\n                                class=\"week-item\"\r\n                                v-for=\"(item, i) in workdaySetDataList\"\r\n                                :key=\"item.id\"\r\n                        >\r\n                          <div class=\"week-name\">\r\n                            <div>\r\n                              <Icon\r\n                                      @click=\"changeChecked(item, i)\"\r\n                                      v-if=\"!item.checked\"\r\n                                      type=\"md-square-outline\"\r\n                                      :key=\"new Date()\"\r\n                              ></Icon>\r\n                              <Icon\r\n                                      @click=\"changeChecked(item, i)\"\r\n                                      v-if=\"item.checked\"\r\n                                      type=\"md-checkbox-outline\"\r\n                              ></Icon>\r\n                              {{ item.name }}\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"week-time-range\">\r\n                            <div\r\n                                    class=\"week-item no-margin\"\r\n                                    :class=\"iChild > 0 ? 'margin-t-10' : ''\"\r\n                                    v-for=\"(itemChild, iChild) in item.sysWorktimeVOs\"\r\n                                    :key=\"iChild\"\r\n                            >\r\n                              <div>\r\n                                <!--@on-change=\"itemChild.beginTime = $event\"-->\r\n                                <TimePicker\r\n                                        type=\"time\"\r\n                                        :value=\"itemChild.beginTime\"\r\n                                        v-model=\"itemChild.beginTime\"\r\n                                        @on-change=\"itemChild.beginTime = $event\"\r\n                                        @click.native=\"saveWorkingDayItem(i, iChild)\"\r\n                                        placeholder=\"请选择\"\r\n                                ></TimePicker>\r\n                              </div>\r\n                              <div class=\"ui-line\">-</div>\r\n                              <div>\r\n                                <TimePicker\r\n                                        type=\"time\"\r\n                                        :value=\"itemChild.endTime\"\r\n                                        v-model=\"itemChild.endTime\"\r\n                                        @on-change=\"itemChild.endTime = $event\"\r\n                                        @click.native=\"saveWorkingDayItem(i, iChild)\"\r\n                                        placeholder=\"请选择\r\n\"\r\n                                ></TimePicker>\r\n                              </div>\r\n                              <div class=\"week-icon-box\">\r\n                                <Icon\r\n                                        type=\"md-add\"\r\n                                        v-if=\"iChild == 0\"\r\n                                        @click=\"addWorkingDayItem(i,itemChild,item)\"\r\n                                />\r\n                                <Icon\r\n                                        type=\"md-close\"\r\n                                        v-if=\"iChild != 0\"\r\n                                        @click=\"delWorkingDayItem(item,itemChild,iChild)\"\r\n                                />\r\n                                <!--<Icon-->\r\n                                <!--type=\"md-document\"-->\r\n                                <!--@click=\"saveWorkingDayItem(i, iChild)\"-->\r\n                                <!--/>-->\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"v-hide\"></div>\r\n                        </div>\r\n                      </div>\r\n                      <!--结束-->\r\n                    </div>\r\n                    <!--工作日设置-结束-->\r\n                    <!-- 自定义工作日-开始 -->\r\n                    <div class=\"user-defined\">\r\n                      <div class=\"control\">\r\n                        <div>\r\n                          {{ $t(\"timeManage.customWorkingDay\") }}\r\n                          <Poptip placement=\"right\" trigger=\"hover\">\r\n                            <Icon\r\n                                    class=\"text-primary\"\r\n                                    type=\"ios-help-circle ui-icon-help\"\r\n                            />\r\n                            <div slot=\"content\">\r\n                              <p class=\"ui-tip\">\r\n                                {{ $t(\"timeManage.customWorkingDayRemark\") }}\r\n                              </p>\r\n                            </div>\r\n                          </Poptip>\r\n                        </div>\r\n                        <!--@click=\"addCustomWeekdayMobileVisible = true\"-->\r\n                        <Button\r\n                                class=\"no-border\"\r\n                                type=\"default\"\r\n                                icon=\"md-add\"\r\n                                @click=\"addCustomWeekdayMobileVisible = true\"\r\n                        >\r\n                          {{ $t(\"timeManage.addCustomWorkingDay\") }}</Button\r\n                        >\r\n                      </div>\r\n                      <!--开始--->\r\n                      <div class=\"defined-item-container\">\r\n                        <div\r\n                                class=\"defined-item\"\r\n                                v-for=\"(item, i) in customWeekdayDataList\"\r\n                                :key=\"item.id\"\r\n                        >\r\n                          <div class=\"holiday-name\">\r\n                            <Input v-if=\"item.id==''\" v-model=\"item.name\" placeholder=\"请输入...\" @change=\"item.id = $event\"></Input>\r\n                            <span  v-if=\"item.id!=''\"> {{ item.name }}</span>\r\n                          </div>\r\n                          <div class=\"holiday-time-range\">\r\n                            <div class=\"holiday-item\">\r\n                              <DatePicker\r\n                                      type=\"date\"\r\n                                      placeholder=\"请选择\"\r\n                                      :value=\"item.beginDate\"\r\n                                      @on-change=\"item.beginDate = $event\"\r\n                                      @click.native=\"customWeekdayDataListInput(item)\"\r\n                                      :key=\"i\"\r\n                              ></DatePicker>\r\n                              <div class=\"ui-line\">-</div>\r\n                              <DatePicker\r\n                                      type=\"date\"\r\n                                      placeholder=\"请选择\"\r\n                                      :value=\"item.endDate\"\r\n                                      @on-change=\"item.endDate = $event\"\r\n                                      @click.native=\"customWeekdayDataListInput(item)\"\r\n                                      :key=\"i\"\r\n                              ></DatePicker>\r\n                              <div class=\"holiday-icon-box\">\r\n                                <!--<Icon-->\r\n                                <!--type=\"md-document\"-->\r\n                                <!--@click=\"savecustomWeekdayItem(i,item,1)\"-->\r\n                                <!--/>-->\r\n                              </div>\r\n                            </div>\r\n                            <div\r\n                                    class=\"\"\r\n                                    v-for=\"(itemChild, iChild) in item.sysWorktimeVOs\"\r\n                                    :key=\"iChild\"\r\n                            >\r\n                              <div class=\"holiday-item holiday-item-time\">\r\n                                <TimePicker\r\n                                        type=\"time\"\r\n                                        placeholder=\"请选择\"\r\n                                        :value=\"itemChild.beginTime\"\r\n                                        @on-change=\"itemChild.beginTime = $event\"\r\n                                        @click.native=\"saveCustomWeekdayDataItem(i, iChild,item)\"\r\n                                ></TimePicker>\r\n                                <div class=\"ui-line\">-</div>\r\n                                <TimePicker\r\n                                        type=\"time\"\r\n                                        placeholder=\"请选择\"\r\n                                        :value=\"itemChild.endTime\"\r\n                                        @on-change=\"itemChild.endTime = $event\"\r\n                                        @click.native=\"saveCustomWeekdayDataItem(i, iChild,item)\"\r\n                                ></TimePicker>\r\n                                <div class=\"holiday-icon-box\">\r\n                                  <Icon\r\n                                          type=\"md-add\"\r\n                                          v-if=\"iChild == 0\"\r\n                                          @click=\"addCustomWeekdayDataItem(i,item)\"\r\n                                  />\r\n                                  <Icon\r\n                                          type=\"md-remove\"\r\n                                          v-if=\"iChild != 0\"\r\n                                          @click=\"delCustomWeekdayDataItem(item,itemChild,iChild)\"\r\n                                  />\r\n                                  <!--<Icon-->\r\n                                  <!--type=\"md-document\"-->\r\n                                  <!--@click=\"saveCustomWeekdayDataItem(i, iChild,item)\"-->\r\n                                  <!--/>-->\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"v-hide\"></div>\r\n                          <div class=\"font-delete ui-del-list\">\r\n                            <Icon\r\n                                    type=\"ios-trash-outline\"\r\n                                    @click=\"deCustomWeekdayDataList(item)\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <!--结束-->\r\n                    </div>\r\n                    <!-- 自定义工作日-结束 -->\r\n                    <!-- <div class=\"text-right\">\r\n                      <Button type=\"primary\" @click=\"submitWorkingDay\" :disabled=\"loading\">{{$t('save')}}</Button>\r\n                    </div> -->\r\n                  </div>\r\n                </TabPane>\r\n                <TabPane\r\n                        :label=\"$t('timeManage.timeManageWorkingDay')\"\r\n                        class=\"ui-tab-flex-item\"\r\n                >\r\n                  <div class=\"holiday-list\">\r\n                    <!-- 节假日-开始 -->\r\n                    <div class=\"control\">\r\n                      <div>\r\n                        {{ $t(\"timeManage.holidayVacations\") }}\r\n                        <Poptip placement=\"right\" trigger=\"hover\">\r\n                          <Icon\r\n                                  class=\"text-primary\"\r\n                                  type=\"ios-help-circle ui-icon-help\"\r\n                          />\r\n                          <div slot=\"content\">\r\n                            <p class=\"ui-tip\" style=\"width:400px\">\r\n                              选择自定义日期范围设置节假日，节假日为非工作时间。如12月31日为周一，同时设置了以周为单位的工作日、自定义工作日和节假日，仅节假日生效，当天全天为非工作时间。\r\n                            </p>\r\n                          </div>\r\n                        </Poptip>\r\n                      </div>\r\n                      <Button\r\n                              class=\"no-border\"\r\n                              type=\"default\"\r\n                              icon=\"md-add\"\r\n                              @click=\"addholidayMobileVisible=true\"\r\n                      >{{ $t(\"timeManage.addHolidays\") }}</Button\r\n                      >\r\n                    </div>\r\n                    <div class=\"holiday-item-container\">\r\n                      <div\r\n                              class=\"defined-item\"\r\n                              v-for=\"(item, i) in holidayDataList\"\r\n                              :key=\"item.id\"\r\n                      >\r\n                        <div class=\"holiday-name\">\r\n                          <Input v-if=\"item.id==''\" v-model=\"item.name\" placeholder=\"请输入...\" @change=\"item.id = $event\"></Input>\r\n                          <span  v-if=\"item.id!=''\"> {{ item.name }}</span>\r\n                          <!--{{ item.name }}-->\r\n                        </div>\r\n                        <div class=\"holiday-time-range\">\r\n                          <div class=\"holiday-item no-margin\">\r\n                            <DatePicker\r\n                                    type=\"date\"\r\n                                    placeholder=\"Select date\"\r\n                                    :value=\"item.beginDate\"\r\n                                    @on-change=\"item.beginDate = $event\"\r\n                                    @click.native=\"savecustomWeekdayItem(i,item,2)\"\r\n                            ></DatePicker>\r\n                            <div class=\"ui-line\">-</div>\r\n                            <DatePicker\r\n                                    type=\"date\"\r\n                                    placeholder=\"请选择\"\r\n                                    :value=\"item.endDate\"\r\n                                    @on-change=\"item.endDate = $event\"\r\n                                    @click.native=\"savecustomWeekdayItem(i,item,2)\"\r\n                            ></DatePicker>\r\n                            <div class=\"holiday-icon-box\">\r\n\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"v-hide\"></div>\r\n                        <div class=\"font-delete ui-del-list\">\r\n                          <Icon\r\n                                  type=\"ios-trash-outline\"\r\n                                  @click=\"delholidayList(item)\"\r\n                          />\r\n                          <!--<Icon-->\r\n                          <!--type=\"md-document\"-->\r\n                          <!--@click=\"savecustomWeekdayItem(i,item,2)\"-->\r\n                          <!--deCustomWeekdayDataList(item)-->\r\n                          <!--/>-->\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <!-- 节假日-结束 -->\r\n                    <!-- <div class=\"text-right\">\r\n                      <Button type=\"primary\" @click=\"submitAddholiday\" :disabled=\"loading\">{{$t('save')}}</Button>\r\n                    </div> -->\r\n                  </div>\r\n                </TabPane>\r\n              </Tabs>\r\n            </div>\r\n\r\n          </Col>\r\n\r\n\r\n\r\n          <!--新建|修改时间计划-开始--->\r\n          <Modal\r\n            :title=\"\r\n              scheduleMobileVisibleTitle == 'add'\r\n                ? $t('add') + $t('timeManage.timePlan')\r\n                : $t('update')+ $t('timeManage.timePlan')\r\n            \"\r\n            v-model=\"scheduleMobileVisible\"\r\n            :closable=\"false\"\r\n            :mask-closable=\"false\"\r\n            :width=\"500\"\r\n          >\r\n            <Form\r\n              ref=\"scheduleForm\"\r\n              :model=\"scheduleForm\"\r\n              :label-width=\"100\"\r\n              label-position=\"right\"\r\n              :rules=\"scheduleValidate\"\r\n              style=\"width:450px\"\r\n            >\r\n              <FormItem :label=\"$t('name')\" prop=\"name\">\r\n                <Input\r\n                  v-model=\"scheduleForm.name\"\r\n                  :placeholder=\"$t('pleaseEnter') + ' ' + $t('name')\"\r\n                />\r\n              </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"scheduleMobileVisible = false\">{{\r\n                $t(\"cancel\")\r\n              }}</Button>\r\n              <Button\r\n                type=\"primary\"\r\n                :loading=\"checkCodeLoading\"\r\n                @click=\"submitSchedule\"\r\n                >{{ $t(\"save\") }}</Button\r\n              >\r\n            </div> </Modal\r\n          ><!--新建|修改时间计划-结束--->\r\n\r\n          <!---删除时间计划的提示-开始--->\r\n          <Modal\r\n            class=\"ui-body-center\"\r\n            v-model=\"delScheduleModal\"\r\n            :title=\"$t('save') + ' ' + $t('timeManage.timePlan')\"\r\n            :closable=\"false\"\r\n            width=\"400\"\r\n            :mask-closable=\"false\"\r\n          >\r\n            <p class=\"text-center\">\r\n              {{ $t(\"timeManage.deleteTimePlanRemark\") }}\r\n            </p>\r\n            <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"delScheduleModal = false\">{{\r\n                $t(\"cancel\")\r\n              }}</Button>\r\n              <Button\r\n                type=\"error\"\r\n                :loading=\"checkCodeLoading\"\r\n                @click=\"submitScheduleDel\"\r\n                >{{ $t(\"delete\") }}</Button\r\n              >\r\n            </div> </Modal\r\n          ><!---删除时间计划的提示-结束--->\r\n\r\n          <!--添加自定义工作日-开始--->\r\n          <Modal\r\n            :title=\"$t('timeManage.addCustomWorkingDay')\"\r\n            v-model=\"addCustomWeekdayMobileVisible\"\r\n            :closable=\"false\"\r\n            :mask-closable=\"false\"\r\n            :width=\"500\"\r\n          >\r\n            <Form\r\n              ref=\"customWeekdayForm\"\r\n              :model=\"customWeekdayForm\"\r\n              :label-width=\"100\"\r\n              :rules=\"customWeekdayValidate\"\r\n            >\r\n              <FormItem :label=\"$t('name')\" prop=\"name\">\r\n                <Input\r\n                  v-model=\"customWeekdayForm.name\"\r\n                  @on-change=\"hasChangePhone\"\r\n                  placeholder=\"请输入名称\"\r\n                />\r\n              </FormItem>\r\n              <FormItem label=\"开始日期\" prop=\"beginDate\" class=\"ui-width-100\">\r\n                <DatePicker\r\n                        type=\"date\"\r\n                        placeholder=\"请选择\"\r\n                        :value=\"customWeekdayForm.beginDate\"\r\n                        v-model=\"customWeekdayForm.beginDate\"\r\n                        @on-change=\"customWeekdayForm.beginDate = $event\"\r\n                ></DatePicker>\r\n              </FormItem>\r\n              <FormItem label=\"结束日期\" prop=\"endDate\"  class=\"ui-width-100\">\r\n                <DatePicker\r\n                        type=\"date\"\r\n                        placeholder=\"请选择\"\r\n                        :value=\"customWeekdayForm.endDate\"\r\n\r\n                        @on-change=\"customWeekdayForm.endDate = $event\"\r\n                ></DatePicker>\r\n              </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n              <Button\r\n                type=\"text\"\r\n                @click=\"addCustomWeekdayMobileVisible = false\"\r\n                >{{ $t(\"cancel\") }}</Button\r\n              >\r\n              <Button\r\n                type=\"primary\"\r\n                :loading=\"checkCodeLoading\"\r\n                @click=\"addCustomWeekday\"\r\n                >{{ $t(\"save\") }}</Button\r\n              >\r\n            </div> </Modal\r\n          ><!--添加自定义工作日-结束--->\r\n\r\n          <!--添加节假日-开始--->\r\n          <Modal\r\n            :title=\"$t('timeManage.addHolidays')\"\r\n            v-model=\"addholidayMobileVisible\"\r\n            :closable=\"false\"\r\n            :mask-closable=\"false\"\r\n            :width=\"500\"\r\n          >\r\n            <Form\r\n              ref=\"holidayForm\"\r\n              :model=\"holidayForm\"\r\n              :label-width=\"100\"\r\n              :rules=\"holidayValidate\"\r\n            >\r\n              <FormItem\r\n                :label=\"$t('timeManage.holidayVacationsName')\"\r\n                prop=\"name\"\r\n              >\r\n                <Input\r\n                  v-model=\"holidayForm.name\"\r\n                  @on-change=\"hasChangePhone\"\r\n                  :placeholder=\"\r\n                    (holidayValidate.name.message =\r\n                      $t('pleaseEnter') +\r\n                      ' ' +\r\n                      $t('timeManage.holidayVacationsName'))\r\n                  \"\r\n                />\r\n              </FormItem>\r\n              <FormItem label=\"开始日期\" prop=\"beginDate\" class=\"ui-width-100\">\r\n                <DatePicker\r\n                        type=\"date\"\r\n                        placeholder=\"请选择\"\r\n                        :value=\"holidayForm.beginDate\"\r\n                        @on-change=\"holidayForm.beginDate = $event\"\r\n                ></DatePicker>\r\n              </FormItem>\r\n              <FormItem label=\"结束日期\" prop=\"endDate\" class=\"ui-width-100\">\r\n                <DatePicker\r\n                        type=\"date\"\r\n                        placeholder=\"请选择\"\r\n                        :value=\"holidayForm.endDate\"\r\n                        @on-change=\"holidayForm.endDate = $event\"\r\n                ></DatePicker>\r\n              </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n              <Button type=\"text\" @click=\"addholidayMobileVisible = false\">{{\r\n                $t(\"cancel\")\r\n              }}</Button>\r\n              <Button\r\n                type=\"primary\"\r\n                :loading=\"checkCodeLoading\"\r\n                @click=\"btnAddholiday\"\r\n                >{{ $t(\"save\") }}</Button\r\n              >\r\n            </div> </Modal\r\n          ><!--添加节假日-结束--->\r\n        </div>\r\n      </div>\r\n    </Row>\r\n  </Card>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getTimePlanList,\r\n  TimePlanGroup,\r\n  editTimePlan,\r\n  deleteTimePlan,\r\n  getGetWorkdaySettingsList,\r\n  saveGetWorkdaySettingsList,\r\n  getHolidayVacationsList,\r\n  saveHolidayVacationsList,\r\n  getTimePlanId,\r\n  saveOrEditSysWorktime,\r\n  getWorktimeGroups,\r\n} from \"@/api/index\";\r\nimport Cookies from \"js-cookie\";\r\nexport default {\r\n  components: {},\r\n  name: \"time-schedule-settings\",\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      activeName: \"基本信息\",\r\n      area: 86,\r\n      messageOpen: 1,\r\n      groupId: 0,\r\n      //时间计划\r\n      timePlanList: [\r\n        { id: 1, name: \"默认上班时间1\" },\r\n        { id: 2, name: \"测试1\" },\r\n      ],\r\n      ownSpaceLeftItem: 1,\r\n      //新建时间计划\r\n      scheduleForm: {\r\n        id: \"\",\r\n        name: \"\",\r\n      },\r\n      scheduleValidate: {\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      customWeekdayForm: {\r\n        name: \"\",\r\n          beginDate:\"\",\r\n          endDate:\"\"\r\n\r\n      },\r\n      customWeekdayValidate: {\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n          beginDate: [\r\n              {\r\n                  required: true,\r\n                  message: this.$t(\"pleaseSelect\"),\r\n                  trigger: \"change\",\r\n              },\r\n          ],\r\n          endDate: [\r\n              {\r\n                  required: true,\r\n                  message: this.$t(\"pleaseSelect\"),\r\n                  trigger: \"change\",\r\n              },\r\n          ],\r\n      },\r\n      holidayForm: {\r\n          name: \"\",\r\n          beginDate:\"\",\r\n          endDate:\"\"\r\n\r\n      },\r\n      holidayValidate: {\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n          beginDate: [\r\n              {\r\n                  required: true,\r\n                  message: this.$t(\"pleaseSelect\"),\r\n                  trigger: \"change\",\r\n              },\r\n          ],\r\n          endDate: [\r\n              {\r\n                  required: true,\r\n                  message: this.$t(\"pleaseSelect\"),\r\n                  trigger: \"change\",\r\n              },\r\n          ],\r\n      },\r\n      mobileEditForm0: {\r\n        mobile: \"\",\r\n        code: \"\",\r\n      },\r\n\r\n      emailEditForm: {\r\n        email: \"\",\r\n        code: \"\",\r\n      },\r\n      scheduleMobileVisibleTitle: \"add\",\r\n      delScheduleModal: false,\r\n      initPhone: \"\",\r\n      initEmail: \"\",\r\n      getSms: \"获取验证码\",\r\n      canSendMobileCode: true, // 是否可点获取验证码\r\n      checkCodeLoading: false,\r\n      scheduleMobileVisible: false, // 新建|修改时间计划-弹出框\r\n      addCustomWeekdayMobileVisible: false, //添加自定义工作日-弹出框\r\n      addholidayMobileVisible: false, //添加节假日-弹出框\r\n      relate: {},\r\n      currMenu: \"基本信息\",\r\n      defaultStartTime: \"09:00:00\",\r\n      defaultEndTime: \"18:00:00\",\r\n      scheduleDelId: \"\",\r\n        workdaySetDataList:[],\r\n      //工作日设置-数据\r\n      //自定义工作日-数据\r\n      customWeekdayDataList: [],\r\n      //节假日-数据\r\n      holidayDataList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      //this.initData();\r\n        this.getWorktimeGroups();\r\n    },\r\n    //获取时间组\r\n    getWorktimeGroups() {\r\n      getWorktimeGroups({}).then((res) => {\r\n        if (res.success) {\r\n          this.timePlanList = res.result;\r\n          this.groupId = res.result[0].id;\r\n          this.getTimePlanList(this.groupId);\r\n        }\r\n      });\r\n    },\r\n    //获取时间计划时间\r\n    getTimePlanList(id) {\r\n      var than=this;\r\n      if(id!=undefined){\r\n          this.groupId=id;\r\n      }\r\n      var params = { groupId: this.groupId };\r\n\r\n      getTimePlanList(params).then((res) => {\r\n        if (res.success) {\r\n            var _data=JSON.parse(JSON.stringify(res.result));\r\n\r\n            let  obj=this.returnDefault1();\r\n\r\n            //var dataA=[{\"id\":136,\"name\":\"周一\",\"type\":0,\"beginDate\":\"\",\"endDate\":\"\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":28,\"workdayId\":136,\"beginTime\":\"02:02:02\",\"endTime\":\"03:00:00\",\"delFlag\":0}],\"checked\":true},{\"id\":\"\",\"name\":\"周二\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周三\",\"type\":0,\"beginDate\":\"2000-01-01\",\"endDate\":\"2000-01-01\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周四\",\"type\":0,\"beginDate\":\"2000-01-01\",\"endDate\":\"2000-01-01\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周五\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周六\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周日\",\"type\":0,\"beginDate\":\"2000-01-01\",\"endDate\":\"2000-01-01\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]}];\r\n            var dataB=[{\"id\":\"\",\"name\":\"周一\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周二\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周三\",\"type\":0,\"beginDate\":\"2000-01-01\",\"endDate\":\"2000-01-01\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周四\",\"type\":0,\"beginDate\":\"2000-01-01\",\"endDate\":\"2000-01-01\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周五\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周六\",\"type\":0,\"beginDate\":null,\"endDate\":null,\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]},{\"id\":\"\",\"name\":\"周日\",\"type\":0,\"beginDate\":\"2000-01-01\",\"endDate\":\"2000-01-01\",\"delFlag\":0,\"sysWorktimeVOs\":[{\"id\":\"\",\"workdayId\":\"\",\"beginTime\":\"00:00:01\",\"endTime\":\"00:00:01\",\"delFlag\":0}]}];\r\n\r\n            // this.workdaySetDataList=_data.sysNormalWorkdayVOs;\r\n            this.workdaySetDataList=[];\r\n            console.log('_data.sysNormalWorkdayVOs.length'+_data.sysNormalWorkdayVOs.length);\r\n            if(_data.sysNormalWorkdayVOs.length==0){\r\n                this.workdaySetDataList=JSON.parse(JSON.stringify(obj));\r\n            }\r\n            else if(_data.sysNormalWorkdayVOs.length<=7){\r\n\r\n\r\n                var objWorkdaySetDataList=JSON.parse(JSON.stringify(obj));//默认数据\r\n                var objWorkdaySetDataListFun=_data.sysNormalWorkdayVOs;//接受到的数据\r\n                than.workdaySetDataList=objWorkdaySetDataListFun;\r\n                var _dataA=than.returnData(objWorkdaySetDataList,objWorkdaySetDataListFun);\r\n                window.setTimeout(function () {\r\n\r\n                   var  _dataB=JSON.parse(JSON.stringify(_dataA));\r\n                    //than.workdaySetDataList=_data\r\n                    console.log(JSON.stringify(than.workdaySetDataList));\r\n\r\n                    //than.workdaySetDataList=_data\r\n                    than.workdaySetDataList=_dataB\r\n\r\n                    //than.workdaySetDataList=_data.sysNormalWorkdayVOs;\r\n                },0)\r\n\r\n                // var objWorkdaySetDataList=obj;//默认数据\r\n                // var objWorkdaySetDataListFun=_data.sysNormalWorkdayVOs;//接受到的数据\r\n                //\r\n                // objWorkdaySetDataList.forEach(function (v,i,arr) {\r\n                //     objWorkdaySetDataListFun.forEach(function (v1,i1,arr1) {\r\n                //         v=JSON.parse(JSON.stringify(v));\r\n                //         v1=JSON.parse(JSON.stringify(v1));\r\n                //         if(v.name==v1.name){\r\n                //             for(var o in v1){\r\n                //\r\n                //                 if(o==\"sysWorktimeVOs\"){\r\n                //                     objWorkdaySetDataList[i]['sysWorktimeVOs']=[];\r\n                //                     if(v1[o].length==0){\r\n                //                         objWorkdaySetDataList[i][o].push(JSON.parse(JSON.stringify({\"id\":\"\",\"workdayId\":v1.id,\"beginTime\":\"00:00:00\",\"endTime\":\"00:00:00\",\"delFlag\":0})))\r\n                //                     }else {\r\n                //                         v1[o].forEach(function (v2,i2,arr3) {\r\n                //                             objWorkdaySetDataList[i][o].unshift(JSON.parse(JSON.stringify(v2)))\r\n                //                         })\r\n                //                     }\r\n                //\r\n                //                 }else {\r\n                //                     objWorkdaySetDataList[i][o]=v1[o]==null?'':JSON.parse(JSON.stringify(objWorkdaySetDataListFun[i1][o]));\r\n                //                 }\r\n                //\r\n                //             }\r\n                //             if(v1.id!=\"\"){\r\n                //                 objWorkdaySetDataList[i].checked=true;\r\n                //                v.checked=true;\r\n                //                v.workdayId=v1.id;\r\n                //             }\r\n                //         }\r\n                //     })\r\n                // });\r\n                // var than=this;\r\n                // window.setTimeout(function () {\r\n                //     than.workdaySetDataList=objWorkdaySetDataList;\r\n                // },100)\r\n            }\r\n\r\n\r\n          if (_data.sysCustWorkdayVOs.length > 0) {\r\n            //自定义工作日\r\n            this.customWeekdayDataList=JSON.parse(JSON.stringify(_data.sysCustWorkdayVOs));\r\n            this.customWeekdayDataList.forEach(function(v,i,arr){\r\n                if(v.sysWorktimeVOs.length==0){\r\n                  v.sysWorktimeVOs=[];\r\n                  v.sysWorktimeVOs.push({beginTime:\"00:00:00\",endTime:\"00:00:00\"});\r\n                }\r\n            });\r\n          }else {\r\n              this.customWeekdayDataList=[]\r\n          }\r\n\r\n\r\n          if (_data.sysHoldayVOs.length > 0) {\r\n            this.holidayDataList = JSON.parse(JSON.stringify(_data.sysHoldayVOs)); //节假日\r\n              this.holidayDataList.forEach(function (v,i,arr) {\r\n                  if(v.sysWorktimeVOs.length==0){\r\n                      v.sysWorktimeVOs.push({beginTime:\"00:00:00\",endTime:\"00:00:00\"});\r\n                  }\r\n              })\r\n           }else {\r\n              this.holidayDataList =[];\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //获取工作日设置\r\n    getGetWorkdaySettingsList() {\r\n      var params = {};\r\n      getGetWorkdaySettingsList(params).then((res) => {\r\n        if (res.success) {\r\n          this.workdaySetDataList = res.data.workdaySetDataList;\r\n          this.customWeekdayDataList = res.data.customWeekdayDataList;\r\n        }\r\n      });\r\n    },\r\n    //获取节假日\r\n    getHolidayVacationsList() {\r\n      var params = {};\r\n\r\n      getHolidayVacationsList(params).then((res) => {\r\n        if (res.success) {\r\n          this.holidayDataList = res.data;\r\n        }\r\n      });\r\n    },\r\n\r\n    //新建时间计划-显示弹出框\r\n    scheduleMobileVisibleAddClick() {\r\n      this.scheduleMobileVisible = true;\r\n      this.scheduleMobileVisibleTitle = \"add\";\r\n    },\r\n    //修改时间计划-显示弹出框\r\n    scheduleMobileVisibleEditClick(v) {\r\n      this.scheduleMobileVisible = true;\r\n      this.scheduleMobileVisibleTitle = \"edit\";\r\n      this.scheduleForm.id = v.id;\r\n      this.scheduleForm.name = v.name;\r\n    },\r\n    //新建|修改时间计划组-提交保存\r\n    submitSchedule() {\r\n      var than = this;\r\n\r\n      var formData = {\r\n        name: this.scheduleForm.name,\r\n      };\r\n      this.$refs[\"scheduleForm\"].validate((valid) => {\r\n        if (valid) {\r\n          than.scheduleMobileVisible = false;\r\n          if (this.scheduleMobileVisibleTitle == \"add\") {\r\n            TimePlanGroup(formData).then((res) => {\r\n              if (res.success) {\r\n                than.$Message.success(this.$t(\"success\"));\r\n                than.getWorktimeGroups();\r\n              }\r\n            });\r\n          } else if (this.scheduleMobileVisibleTitle == \"edit\") {\r\n            TimePlanGroup({\r\n              id: this.scheduleForm.id,\r\n              name: this.scheduleForm.name,\r\n            }).then((res) => {\r\n              if (res.success) {\r\n                than.$Message.success(this.$t(\"success\"));\r\n                than.getWorktimeGroups();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //删除时间计划-弹出提示信息\r\n    scheduleDelClick(v) {\r\n      TimePlanGroup({\r\n        id: v.id,\r\n        name:v.name,\r\n        delFlag: 1,\r\n      }).then((res) => {\r\n        if (res.success) {\r\n          this.$Message.success(this.$t(\"success\"));\r\n          this.getWorktimeGroups();\r\n        }\r\n      });\r\n      //this.delScheduleModal = true;\r\n      //this.scheduleDelId = id;\r\n    },\r\n    //删除时间计划-提交\r\n    submitScheduleDel() {\r\n      var than = this;\r\n      this.delScheduleModal = false;\r\n      var data = {\r\n        id: this.scheduleDelId,\r\n      };\r\n      deleteTimePlan(data).then((res) => {\r\n        if (res.msg == success) {\r\n          than.$Message.success(this.$t(\"success\"));\r\n          than.getTimePlanList();\r\n        }\r\n      });\r\n      //alert(\"删除开发中开发中\");\r\n    },\r\n    //添加自定义工作日-保存\r\n    addCustomWeekday() {\r\n      var than = this;\r\n      this.$refs[\"customWeekdayForm\"].validate((valid) => {\r\n        if (valid) {\r\n          var formData = {\r\n            groupId: this.groupId,\r\n            name: this.customWeekdayForm.name,\r\n              beginDate: this.customWeekdayForm.beginDate,\r\n              endDate: this.customWeekdayForm.endDate,\r\n            type: 1,\r\n          };\r\n\r\n          getTimePlanId(formData).then((res) => {\r\n            if (res.success) {\r\n                than.$Message.success(this.$t(\"success\"));\r\n              this.getTimePlanList();\r\n              this.addCustomWeekdayMobileVisible=false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //保存节假日-提交\r\n    submitAddholiday() {\r\n      alert(\"开发中\");\r\n      var formData = this.holidayDataList;\r\n      // saveHolidayVacationsList(formData).then((res)=>{\r\n      //   if(res.msg==success){\r\n      //     than.$Message.success(\"成功!\");\r\n      //     than.initData();\r\n      //   }\r\n      // });\r\n    },\r\n    //保存工作日-提交\r\n    submitWorkingDay() {\r\n      var than = this;\r\n      var formData = [];\r\n      var resObj = {};\r\n      formData = JSON.parse(JSON.stringify(this.workdaySetDataList)).concat(\r\n        JSON.parse(JSON.stringify(this.customWeekdayDataList))\r\n      );\r\n      ;\r\n      var o = 0;\r\n      this.loading = true;\r\n      for (var i = 0; i < formData.length; i++) {\r\n        o++;\r\n        saveOrEditSysWorktime(formData).then((res) => {\r\n          resObj = res;\r\n          if (res.msg == success) {\r\n          } else {\r\n          }\r\n        });\r\n      }\r\n      if (o == formData.length) {\r\n        this.loading = false;\r\n        this.$Message.success(resObj.msg);\r\n        this.getTimePlanList();\r\n      }\r\n      alert(\"开发中\");\r\n    },\r\n    //提交完成前禁止刷新或者跳转页面\r\n    submitingPrevent() {\r\n      if (this.loading == true) {\r\n        this.$Message.success(\"批量保存工作日时间中，请稍等。。。\");\r\n      }\r\n    },\r\n    //工作日设置-增加一个时间\r\n    addWorkingDayItem(i,iChild,v) {\r\n\r\n      this.workdaySetDataList[i].sysWorktimeVOs.push({\r\n        id:\"\",\r\n        workdayId:\"\",\r\n        beginTime: \"00:00:00\",\r\n        endTime: \"00:00:00\",\r\n      });\r\n    },\r\n    //工作日设置-删除一个时间点\r\n    delWorkingDayItem(v,vchild,ichild) {\r\n      if(vchild.workdayId==\"\"){\r\n        var arr = v.sysWorktimeVOs;\r\n         arr.splice(ichild, 1);\r\n      }else{\r\n        saveOrEditSysWorktime({\r\n        id:vchild.id,\r\n        workdayId:v.id,\r\n        beginTime:vchild.beginTime,\r\n        endTime:vchild.endTime,\r\n        delFlag:1\r\n      }).then(res=>{\r\n        if(res.message){\r\n           //this.$Message.success(this.$t(\"success\"));\r\n          this.getTimePlanList();\r\n        }\r\n      })\r\n      }\r\n      \r\n    },\r\n    //自定义工作日-删除一个时间中的一个时间点\r\n    delCustomWeekdayDataItem(v,vchild,ichild) {\r\n      if(vchild.id==undefined){\r\n        var arr = v.sysWorktimeVOs;\r\n         arr.splice(ichild, 1);\r\n      }else{\r\n        saveOrEditSysWorktime({\r\n        id:vchild.id,\r\n        workdayId:v.id,\r\n        beginTime:vchild.beginTime,\r\n        endTime:vchild.endTime,\r\n        delFlag:1\r\n      }).then(res=>{\r\n        if(res.message){\r\n          // this.$Message.success(this.$t(\"success\"));\r\n          this.getTimePlanList();\r\n        }\r\n      })\r\n      }\r\n    },\r\n    //删除-自定义节假日\r\n    deCustomWeekdayDataList(v) {\r\n        if(v.id==\"\"){\r\n          this.customWeekdayDataList.splice(0,1)\r\n        }else {\r\n\r\n            getTimePlanId({\r\n                id:v.id,\r\n                groupId:this.groupId,\r\n                name:v.name,\r\n                beginDate:v.beginDate,\r\n                endDate:v.endDate,\r\n                delFlag:1,\r\n                type:1\r\n            }).then(res=>{\r\n                if(res.success){\r\n                    //this.$Message.success(this.$t(\"success\"));\r\n                    this.getTimePlanList();\r\n                }\r\n            })\r\n        }\r\n\r\n    },\r\n    //节假日-删除一个时间\r\n    delholidayList(v) {\r\n        if(v.id==\"\"){\r\n            this.customWeekdayDataList.splice(0,1)\r\n        }else {\r\n\r\n            getTimePlanId({\r\n                id:v.id,\r\n                groupId:this.groupId,\r\n                name:v.name,\r\n                beginDate:v.beginDate,\r\n                endDate:v.endDate,\r\n                delFlag:1,\r\n                type:2\r\n            }).then(res=>{\r\n                if(res.success){\r\n                   // this.$Message.success(this.$t(\"success\"));\r\n                    this.getTimePlanList();\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //自定义工作日-增加一个时间\r\n    addCustomWeekdayDataItem(i,v) {\r\n      this.customWeekdayDataList[i].sysWorktimeVOs.push({\r\n        workdayId:\"\",\r\n        beginTime: \"00:00:00\",\r\n        endTime: \"00:00:00\",\r\n        delFlag:0\r\n      });\r\n    },\r\n    //addholidayMobileVisible\r\n    //添加节假日-保存\r\n      btnAddholiday() {\r\n          var than = this;\r\n          this.$refs[\"holidayForm\"].validate((valid) => {\r\n              if (valid) {\r\n                  var formData = {\r\n                      groupId: this.groupId,\r\n                      name: this.holidayForm.name,\r\n                      beginDate: this.holidayForm.beginDate,\r\n                      endDate: this.holidayForm.endDate,\r\n                      type: 2,\r\n                  };\r\n\r\n                  getTimePlanId(formData).then((res) => {\r\n                      if (res.success) {\r\n                          than.$Message.success(this.$t(\"success\"));\r\n                          this.getTimePlanList()\r\n                          this.addholidayMobileVisible=false;\r\n                      }\r\n                  });\r\n              }\r\n          });\r\n    },\r\n    changeChecked(item, i) {\r\n      // this.workdaySetDataList[i].checked = !this.workdaySetDataList[i].checked;\r\n        item.checked = !item.checked\r\n        //if(item.id==\"\"||item.id==0||item.id==undefined){\r\n            this.btnGetTimePlanId(item, i);\r\n        //}\r\n    },\r\n    btnGetTimePlanId(item, i) {\r\n        var than=this;\r\n        var _index=i;\r\n        // var formData = {\r\n        //     groupId: this.groupId,\r\n        //     name: item.name,\r\n        //     beginDate: item.beginDate,\r\n        //     endDate: item.endDate,\r\n        //     type: 0,\r\n        // };\r\n        var formData={};\r\n        for(var i in item){\r\n            if(item[i]!=undefined){\r\n                if(i!=\"sysWorktimeVOs\"&&i!=\"\"){\r\n                    formData[i]=item[i]\r\n                }\r\n                \r\n\r\n            }\r\n        }\r\n        formData.groupId=this.groupId;\r\n        if (item.checked) {\r\n            formData.delFlag=0;\r\n        }else {\r\n            formData.delFlag=1;\r\n        }\r\n        formData.type=0;\r\n        // if(item.id==\"\"){\r\n        //\r\n        // }\r\n        //getTimePlanId\r\n        getTimePlanId(formData).then((res) => {\r\n            if (res.success) {\r\n                than.workdaySetDataList[_index].workdayId = res.result;\r\n                than.workdaySetDataList[_index].id = res.result;\r\n            }\r\n        });\r\n\r\n\r\n    },\r\n    //保存\r\n    saveWorkingDayItem(i, ichild,itemChild) {\r\n      if (this.workdaySetDataList[i].sysWorktimeVOs[ichild].beginTime == \"00:00:00\") {\r\n        this.$Message.warning(\"开始时间不能是：00:00:00\");\r\n        return false;\r\n      }\r\n      if (this.workdaySetDataList[i].sysWorktimeVOs[ichild].endTime == \"00:00:00\") {\r\n        this.$Message.warning(\"结束时间不能是：00:00:00\");\r\n        return false;\r\n      }\r\n      var formData={\r\n          workdayId: this.workdaySetDataList[i].id,\r\n          beginTime: this.workdaySetDataList[i].sysWorktimeVOs[ichild].beginTime,\r\n          endTime: this.workdaySetDataList[i].sysWorktimeVOs[ichild].endTime,\r\n      };\r\n      if(this.workdaySetDataList[i].sysWorktimeVOs[ichild].id!=\"\"){\r\n        formData.id=this.workdaySetDataList[i].sysWorktimeVOs[ichild].id;\r\n      }\r\n\r\n      if(this.workdaySetDataList[i].sysWorktimeVOs[ichild].id\r\n          !=0){\r\n          formData.id=this.workdaySetDataList[i].sysWorktimeVOs[ichild].id;\r\n      }\r\n      if (this.workdaySetDataList[i].checked) {\r\n        this.saveOrEditSysWorktime(formData);\r\n      }else{\r\n        this.$Message.warning(\"请先勾选工作日\");\r\n      }\r\n    },\r\n    //实时新增时间\r\n    saveOrEditSysWorktime(form) {\r\n      saveOrEditSysWorktime(form).then(res=> {\r\n        if (res.success) {\r\n          this.$Message.success(this.$t(\"success\"));\r\n          this.getTimePlanList();\r\n        }\r\n      });\r\n    },\r\n    //自定工作日保存天\r\n    savecustomWeekdayItem(i,v,n){\r\n      var formData={\r\n        id:v.id,\r\n        groupId:this.groupId,\r\n        name:v.name,\r\n        type:n,\r\n        beginDate:v.beginDate,\r\n        endDate:v.endDate\r\n      }\r\n      getTimePlanId(formData).then((res) => {\r\n        if (res.success) {\r\n          this.$Message.success(this.$t(\"success\"));\r\n          this.getTimePlanList();\r\n        }\r\n      });\r\n    },\r\n    //自定义工作日保存时间\r\n    saveCustomWeekdayDataItem(i, iChild,item){\r\n        var formData={\r\n          workdayId:item.id,\r\n          beginTime:item.sysWorktimeVOs[iChild].beginTime,\r\n          endTime:item.sysWorktimeVOs[iChild].endTime,\r\n          delFlag:0\r\n\r\n        }\r\n        if(item.sysWorktimeVOs[iChild].id!=undefined){\r\n          formData.id=item.sysWorktimeVOs[iChild].id\r\n        }\r\n        if (item.sysWorktimeVOs[iChild].beginTime == \"00:00:00\") {\r\n            this.$Message.warning(\"开始时间不能是：00:00:00\");\r\n            return false;\r\n        }\r\n        if (item.sysWorktimeVOs[iChild].endTime == \"00:00:00\") {\r\n            this.$Message.warning(\"结束时间不能是：00:00:00\");\r\n            return false;\r\n        }\r\n\r\n        if(formData.id!=\"\"){\r\n            saveOrEditSysWorktime(formData).then((res) => {\r\n                if (res.success) {\r\n                    this.$Message.success(this.$t(\"success\"));\r\n                }\r\n            });\r\n        }\r\n    },\r\n      //\r\n      btnAddCustomWeekday(){\r\n        this.customWeekdayDataList.unshift({\r\n            \"id\": \"\",\r\n            \"name\": \"\",\r\n            \"type\": 1,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"delFlag\": null,\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": \"\",\r\n                \"workdayId\": \"\",\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\",\r\n                \"delFlag\": 0\r\n            }]\r\n        })\r\n      },\r\n      customWeekdayDataListInput(item){\r\n          var formData = {\r\n              groupId: this.groupId,\r\n              name: item.name,\r\n              type: 1,\r\n              beginDate:item.beginDate,\r\n              endDate:item.endDate\r\n          };\r\n\r\n          var sta=true;\r\n          if(formData.name==\"\"){\r\n              sta=true;\r\n              return false;\r\n          }\r\n          if(formData.beginDate>formData.endDate){\r\n              sta=true;\r\n              this.$Message.success(\"开始日期不能大于结束日期\");\r\n              return false;\r\n          }\r\n          if(formData.beginDate==\"2000-01-01\"){\r\n              sta=true;\r\n              return false;\r\n          }\r\n          if(formData.endDate==\"2000-01-01\"){\r\n              sta=true;\r\n              return false;\r\n          }\r\n          if(sta){\r\n\r\n              getTimePlanId(formData).then((res) => {\r\n                  if (res.success) {\r\n\r\n                      this.getTimePlanList();\r\n                  }\r\n              });\r\n          }\r\n      },\r\n      formatDate(time){\r\n        time=time.replace(\"T\",\" \");\r\n        var data=new Date(time);\r\n        return FormData.FormatDate(data,\"yyyy-MM-dd hh:mm:ss\");\r\n      },\r\n      returnDefault1(){\r\n          return [ {\r\n              \"name\": \"周一\",\r\n              \"type\": 0,\r\n              \"beginDate\": null,\r\n              \"endDate\": null,\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          }, {\r\n              \"name\": \"周二\",\r\n              \"type\": 0,\r\n              \"beginDate\": null,\r\n              \"endDate\": null,\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          }, {\r\n              \"name\": \"周三\",\r\n              \"type\": 0,\r\n              \"beginDate\": \"2000-01-01\",\r\n              \"endDate\": \"2000-01-01\",\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          }, {\r\n              \"name\": \"周四\",\r\n              \"type\": 0,\r\n              \"beginDate\": \"2000-01-01\",\r\n              \"endDate\": \"2000-01-01\",\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          },{\r\n              \"name\": \"周五\",\r\n              \"type\": 0,\r\n              \"beginDate\": null,\r\n              \"endDate\": null,\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          },{\r\n              \"name\": \"周六\",\r\n              \"type\": 0,\r\n              \"beginDate\": null,\r\n              \"endDate\": null,\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          }, {\r\n              \"name\": \"周日\",\r\n              \"type\": 0,\r\n              \"beginDate\": \"2000-01-01\",\r\n              \"endDate\": \"2000-01-01\",\r\n              \"delFlag\": 0,\r\n              \"checked\":false,\r\n              \"sysWorktimeVOs\": [{\r\n                  \"id\": '',\r\n                  \"workdayId\": '',\r\n                  \"beginTime\": \"00:00:01\",\r\n                  \"endTime\": \"00:00:01\",\r\n                  \"delFlag\": 0\r\n              }]\r\n          }]\r\n      },\r\n      returnDefault(){\r\n        return [{\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周一\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"delFlag\":0,\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }, {\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周二\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"delFlag\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }, {\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周三\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"delFlag\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }, {\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周四\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"delFlag\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }, {\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周五\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }, {\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周六\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"delFlag\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }, {\r\n            \"id\": '',\r\n            \"workdayId\": \"\",\r\n            \"name\": \"周日\",\r\n            \"checked\": false,\r\n            \"type\":0,\r\n            \"delFlag\":0,\r\n            \"beginDate\": \"2000-01-01\",\r\n            \"endDate\": \"2000-01-01\",\r\n            \"sysWorktimeVOs\": [{\r\n                \"id\": '',\r\n                \"workdayId\": \"\",\r\n                \"delFlag\": 0,\r\n                \"beginTime\": \"00:00:00\",\r\n                \"endTime\": \"00:00:00\"\r\n            }]\r\n        }]\r\n      },\r\n      returnData(objWorkdaySetDataList, objWorkdaySetDataListFun){\r\n          //var objWorkdaySetDataList=obj;//默认数据\r\n//var objWorkdaySetDataListFun=_data.sysNormalWorkdayVOs;//接受到的数据\r\n\r\n            objWorkdaySetDataList.forEach(function (v,i,arr) {\r\n              objWorkdaySetDataListFun.forEach(function (v1,i1,arr1) {\r\n                  v=JSON.parse(JSON.stringify(v));\r\n                  v1=JSON.parse(JSON.stringify(v1));\r\n                  if(v.name==v1.name){\r\n                      for(var o in v1){\r\n\r\n                          if(o==\"sysWorktimeVOs\"){\r\n                              objWorkdaySetDataList[i]['sysWorktimeVOs']=[];\r\n                              if(v1[o].length==0){\r\n                                  objWorkdaySetDataList[i][o].push(JSON.parse(JSON.stringify({\"id\":\"\",\"workdayId\":v1.id,\"beginTime\":\"00:00:00\",\"endTime\":\"00:00:00\",\"delFlag\":0})))\r\n                              }else {\r\n                                  v1[o].forEach(function (v2,i2,arr3) {\r\n                                      objWorkdaySetDataList[i][o].unshift(JSON.parse(JSON.stringify(v2)))\r\n                                  })\r\n                              }\r\n\r\n                          }else {\r\n                              objWorkdaySetDataList[i][o]=v1[o]==null?'':JSON.parse(JSON.stringify(objWorkdaySetDataListFun[i1][o]));\r\n                          }\r\n\r\n                      }\r\n                      if(v1.id!=\"\"){\r\n                          objWorkdaySetDataList[i].checked=true;\r\n                          v.checked=true;\r\n                          v.workdayId=v1.id;\r\n                      }\r\n                  }\r\n              })\r\n          });\r\n            return objWorkdaySetDataList;\r\n      }\r\n  },\r\n  mounted() {\r\n\r\n    let type = this.$route.query.type;\r\n    if (type == \"social\") {\r\n      this.activeName = \"第三方账号绑定\";\r\n      this.currMenu = \"第三方账号绑定\";\r\n    }\r\n    this.init();\r\n  },\r\n  watch: {\r\n    scheduleMobileVisible(v) {\r\n      if (v == false) {\r\n        this.$refs[\"scheduleForm\"].resetFields();\r\n      }\r\n    },\r\n    addCustomWeekdayMobileVisible(v) {\r\n      if (v == false) {\r\n        this.$refs[\"customWeekdayForm\"].resetFields();\r\n      }\r\n    },\r\n    addholidayMobileVisible(v) {\r\n      if (v == false) {\r\n        this.$refs[\"holidayForm\"].resetFields();\r\n      }\r\n    },\r\n    workdaySetDataList: {\r\n      handler: function(v, o, arr) {\r\n\r\n      },\r\n      deep: true, //深度监听\r\n    },\r\n  },\r\n  computed: {},\r\n};\r\n</script>\r\n"]}]}