{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\searchBox\\searchBox.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\searchBox\\searchBox.vue","mtime":1614579763301},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnRhYkJhcntiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO2xpbmUtaGVpZ2h0OiA0MHB4O2ZsZXg6IDE7dGV4dC1hbGlnbjogY2VudGVyO2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjO30NCi50YWJCYXItc2VsZWN0e2JhY2tncm91bmQ6ICNmZmY7Ym9yZGVyLWJvdHRvbTogbm9uZTt9DQoudGFiQ29udGVudHttaW4taGVpZ2h0OiA0MDBweDtkaXNwbGF5OiBmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczogc3RyZXRjaDtmbGV4OiAxO3BhZGRpbmc6IDVweDt9DQoudGFiQ29udGVudC1rbm93bGVkZ2V7anVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O30NCi5rbm93bGVkZ2VUeXBlLXRpdGxle2ZvbnQtc2l6ZTogMTRweDtwYWRkaW5nOjEwcHggMTBweDtjdXJzb3I6IHBvaW50ZXI7fQ0KLmtub3dsZWRnZS1pdGVte3Bvc2l0aW9uOiByZWxhdGl2ZTt9DQoua25vd2xlZGdlLWl0ZW0tdGl0bGV7ZGlzcGxheTogaW5saW5lO30NCi5rbm93bGVkZ2UtaXRlbS1idXR0b257ZGlzcGxheTogbm9uZTtwb3NpdGlvbjogYWJzb2x1dGU7cmlnaHQ6IDA7dG9wOiA1MCU7dHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO30NCi5rbm93bGVkZ2UtaXRlbTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiAjRTVFNUU1O30NCi5rbm93bGVkZ2UtaXRlbTpob3ZlciAua25vd2xlZGdlLWl0ZW0tYnV0dG9ue2Rpc3BsYXk6IGlubGluZS1ibG9jazt9DQoua25vd2xlZGdlLXBhZ2V7dGV4dC1hbGlnbjogY2VudGVyO30NCg0KLnBvcHRpcC1ib3R0b217dGV4dC1hbGlnbjogcmlnaHQ7Ym9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7cGFkZGluZy10b3A6IDhweDt9DQo="},{"version":3,"sources":["searchBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"searchBox.vue","sourceRoot":"src/views/my-components/searchBox","sourcesContent":["<template>\r\n  <div style=\"width: 300px;border:1px solid #000\">\r\n    <div class=\"flex\">\r\n      <div v-for=\"item in tabTitle\" :class=\"[currTab==item?'tabBar-select':'','tabBar']\" @click=\"currTab=item\">{{item}}</div>\r\n    </div>\r\n    <div class=\"tabContent\" v-show=\"currTab=='资料'\"></div>\r\n    <div class=\"tabContent\" v-show=\"currTab=='互动记录'\"></div>\r\n    <div class=\"tabContent\" v-show=\"currTab=='常用语'\"></div>\r\n    <div class=\"tabContent tabContent-knowledge flex\" v-show=\"currTab=='知识库'\">\r\n      <Spin size=\"large\" fix v-if=\"itemLoading\"></Spin>\r\n      <div>\r\n        <Poptip transfer trigger=\"click\" placement=\"left\" title=\"选择分类\" width=\"250\" v-model='popVisiable'>\r\n          <div class=\"knowledgeType-title\"><Icon type=\"md-list\" class=\"mr-10\"/>{{treeTitle}}</div>\r\n          <div slot=\"content\" style=\"position:relative;min-height:5vh\">\r\n            <Tree ref=\"tree\" :data=\"treeData\" :load-data=\"loadData\" @on-select-change=\"selectTree\"></Tree>\r\n           <div class=\"poptip-bottom\">\r\n              <Button type=\"primary\" size=\"small\" @click=\"getTypeData\">确定</Button>\r\n            </div>\r\n            <Spin size=\"large\" fix v-if=\"treeLoading\"></Spin>\r\n          </div>\r\n        </Poptip>\r\n      </div>\r\n      <Row gutter=\"0\">\r\n        <Col span=\"6\">\r\n          <Select v-model=\"form.flag\">\r\n            <Option value=\"0\">全部</Option>\r\n            <Option value=\"1\">标题</Option>\r\n            <Option value=\"2\">内容</Option>\r\n          </Select>\r\n        </Col>\r\n        <Col span=\"18\">\r\n          <Input class=\"flex1\" v-model=\"form.keyWord\" search suffix=\"ios-search\" @on-search=\"getDataList\" placeholder=\"输入节点名搜索\" />\r\n        </Col>\r\n      </Row>\r\n      <div class=\"flex1\">\r\n        <div class=\"knowledge-item cur-pointer pd-10\" v-for=\"item in itemData\" @click=\"previewMore(item)\">\r\n            <Button type=\"primary\" class=\"knowledge-item-button\" @click.stop=\"sendHander\">发送</Button>\r\n            <div>\r\n              <Icon type=\"ios-book-outline\" />\r\n              <p class=\"ml-10 font-14 knowledge-item-title\">{{item.title}}</p>\r\n            </div>\r\n            <div class=\"color-888 overflow-text\">{{item.contentText}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"knowledge-page\"><Page :current=\"form.pageNumber\" :total=\"totalElements\" @on-change=\"pageChangeHander\" simple/></div>\r\n      <knowledge-preview ref=\"preview\"></knowledge-preview>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getAllBySysKnowledgeCategory,     //获取知识类型信息，默认返回1级菜单类型\r\n    getAllBySysKnowledgePage,         //根据条件获取知识点分页数据\r\n  } from \"@/api/index\";\r\n  import knowledgePreview from \"../../knowledge/components/knowledge-preview.vue\";\r\nexport default{\r\n  data(){\r\n    return{\r\n      treeLoading:false,\r\n      itemLoading:false,\r\n      currTab:'知识库',\r\n      tabTitle:['资料','互动记录','常用语','知识库'],\r\n      treeData:[],\r\n      treeTitle:'',\r\n      itemData:[],\r\n      searchKey:'',\r\n      form:{\r\n        categoryId:'',\r\n        flag:''                   ,//关键词类型 0全部1标题2内容\r\n        keyWord:'',\r\n        pageNumber:1,\r\n        pageSize:10,\r\n      },\r\n      totalElements:'',\r\n      popVisiable:false,\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      this.getParentList()\r\n      this.getDataList()\r\n    },\r\n    getDataList() {\r\n      this.itemLoading = true;\r\n      getAllBySysKnowledgePage(this.form).then(res => {\r\n        console.log('获取知识点分页数据')\r\n        this.itemLoading = false;\r\n        console.log(res)\r\n        if (res.success) {\r\n          this.itemData=res.result.content\r\n          this.totalElements=res.result.totalElements\r\n        }else{\r\n          this.$Message.error({\r\n            background: true,\r\n            content: res.message\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getParentList() {\r\n      this.treeLoading = true;\r\n      getAllBySysKnowledgeCategory().then(res => {\r\n        console.log('获取知识类型数据')\r\n        this.treeLoading = false;\r\n        if (res.success) {\r\n          res.result.forEach(function(e) {\r\n            if (e.isParent) {\r\n              e.loading = false;\r\n              e.children = [];\r\n            }\r\n          });\r\n          this.treeData = res.result;\r\n          let first = {\r\n            id: \"\",\r\n            title: \"全部\",\r\n            selected:true,\r\n          };\r\n          this.treeTitle='全部'\r\n          this.treeData.unshift(first);\r\n        } else {\r\n          this.$Message.error({\r\n            background: true,\r\n            content: res.message\r\n          });\r\n        }\r\n      });\r\n    },\r\n    sendHander(){\r\n      this.$Message.error('功能未完善')\r\n    },\r\n    selectTree(v) {\r\n      if (v.length > 0) {\r\n        // 转换null为\"\"\r\n        for (let attr in v[0]) {\r\n          if (v[0][attr] == null) {\r\n            v[0][attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v[0]);\r\n        let data = JSON.parse(str);\r\n        this.treeTitle = data.title;\r\n        this.form.categoryId=data.id\r\n      } else {\r\n        this.treeTitle = '全部';\r\n        this.form.categoryId=''\r\n        this.$refs.tree.data[0].selected=true\r\n      }\r\n    },\r\n    loadData(item, callback) {\r\n      let params = {\r\n        parentId: item.id,\r\n      }\r\n      // 异步加载树子类数据\r\n      getAllBySysKnowledgeCategory(params).then(res => {\r\n        if (res.success) {\r\n          res.result.forEach(function(e) {\r\n            if (e.isParent) {\r\n              e.loading = false;\r\n              e.children = [];\r\n            }\r\n          });\r\n          callback(res.result);\r\n        }\r\n      });\r\n    },\r\n    pageChangeHander(page) {\r\n      console.log('页码切换')\r\n      this.form.pageNumber=page\r\n      this.getDataList()\r\n    },\r\n    getTypeData(){\r\n      this.popVisiable=false\r\n      this.getDataList()\r\n    },\r\n    previewMore(data) {\r\n      this.$refs.preview.data = data;\r\n      this.$refs.preview.visiable = true;\r\n    },\r\n  },\r\n  components:{\r\n    knowledgePreview,\r\n  },\r\n  mounted() {\r\n    this.init()\r\n    this.form.flag='0';\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.tabBar{background-color: #eee;line-height: 40px;flex: 1;text-align: center;border-bottom: 1px solid #ccc;}\r\n.tabBar-select{background: #fff;border-bottom: none;}\r\n.tabContent{min-height: 400px;display: flex;flex-direction:column;align-items: stretch;flex: 1;padding: 5px;}\r\n.tabContent-knowledge{justify-content: flex-start;}\r\n.knowledgeType-title{font-size: 14px;padding:10px 10px;cursor: pointer;}\r\n.knowledge-item{position: relative;}\r\n.knowledge-item-title{display: inline;}\r\n.knowledge-item-button{display: none;position: absolute;right: 0;top: 50%;transform: translateY(-50%);}\r\n.knowledge-item:hover{background-color: #E5E5E5;}\r\n.knowledge-item:hover .knowledge-item-button{display: inline-block;}\r\n.knowledge-page{text-align: center;}\r\n\r\n.poptip-bottom{text-align: right;border-top: 1px solid #eee;padding-top: 8px;}\r\n</style>\r\n"]}]}