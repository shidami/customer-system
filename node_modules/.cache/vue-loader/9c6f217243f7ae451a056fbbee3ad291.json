{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\agent-group\\user-choose.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\agent-group\\user-choose.vue","mtime":1614579763351},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRBZ2VudEdyb3VwVXNlckxpc3REYXRhIH0gZnJvbSAiQC9hcGkvaW5kZXgiOw0KaW1wb3J0IGRlcGFydG1lbnRDaG9vc2UgZnJvbSAiQC92aWV3cy9teS1jb21wb25lbnRzL3hib290L2RlcGFydG1lbnQtY2hvb3NlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInVzZXJDaG9vc2UiLA0KICBjb21wb25lbnRzOiB7DQogICAgZGVwYXJ0bWVudENob29zZQ0KICB9LA0KICBwcm9wczogew0KICAgIHRleHQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICLpgInmi6nnlKjmiLciDQogICAgfSwNCiAgICBpY29uOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAibWQtcGVyc29uLWFkZCINCiAgICB9LA0KICAgIGFnZW50R3JvdXBJZDp7DQogICAgICB0eXBlOlN0cmluZw0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlckxvYWRpbmc6IHRydWUsDQogICAgICB1c2VyTW9kYWxWaXNpYmxlOiBmYWxzZSwNCiAgICAgIG9wZW5UaXA6ZmFsc2UsDQogICAgICBzZWxlY3RVc2VyczogW10sDQogICAgICBjb250aW51YXRpb25MZXZlbDoiMSIsDQogICAgICBFY2hhcnRzV2lkdGg6IjIwMCIsDQogICAgICBzZWFyY2hVc2VyRm9ybTogew0KICAgICAgICBpZDogIiIsDQogICAgICAgIG5pY2tuYW1lOiAiIiwNCiAgICAgICAgdHlwZTogIiIsDQogICAgICAgIHN0YXR1czogIiIsDQogICAgICAgIGFnZW50R3JvdXBJZDoiIiwNCiAgICAgICAgcGFnZU51bWJlcjogMSwgLy8g5b2T5YmN6aG15pWwDQogICAgICAgIHBhZ2VTaXplOiAxMCwgLy8g6aG16Z2i5aSn5bCPDQogICAgICAgIHNvcnQ6ICJjcmVhdGVfdGltZSIsIC8vIOm7mOiupOaOkuW6j+Wtl+autQ0KICAgICAgICBvcmRlcjogImRlc2MiIC8vIOm7mOiupOaOkuW6j+aWueW8jw0KICAgICAgfSwNCiAgICAgIHVzZXJDb2x1bW5zOiBbDQogICAgICAgIHsNCiAgICAgICAgICB0eXBlOiAic2VsZWN0aW9uIiwNCiAgICAgICAgICB3aWR0aDogNjAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0eXBlOiAiaW5kZXgiLA0KICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi55So5oi35ZCNIiwNCiAgICAgICAgICBrZXk6ICJuaWNrbmFtZSIsDQogICAgICAgICAgbWluV2lkdGg6IDEzMCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLnmbvlvZXotKblj7ciLA0KICAgICAgICAgIGtleTogInVzZXJuYW1lIiwNCiAgICAgICAgICBtaW5XaWR0aDogMTMwLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuWktOWDjyIsDQogICAgICAgICAga2V5OiAiYXZhdGFyIiwNCiAgICAgICAgICB3aWR0aDogODAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoIkF2YXRhciIsIHsNCiAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICBzcmM6IHBhcmFtcy5yb3cuYXZhdGFyDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5omA5bGe6YOo6ZeoIiwNCiAgICAgICAgICBrZXk6ICJkZXBhcnRtZW50VGl0bGUiLA0KICAgICAgICAgIHdpZHRoOiAxMjANCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5omL5py6IiwNCiAgICAgICAgICBrZXk6ICJtb2JpbGUiLA0KICAgICAgICAgIHdpZHRoOiAxMjUsDQogICAgICAgICAgc29ydGFibGU6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi6YKu566xIiwNCiAgICAgICAgICBrZXk6ICJlbWFpbCIsDQogICAgICAgICAgd2lkdGg6IDE4MCwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLmgKfliKsiLA0KICAgICAgICAgIGtleTogInNleCIsDQogICAgICAgICAgd2lkdGg6IDcwLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLliJvlu7rml7bpl7QiLA0KICAgICAgICAgIGtleTogImNyZWF0ZVRpbWUiLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHNvcnRUeXBlOiAiZGVzYyIsDQogICAgICAgICAgd2lkdGg6IDE3MA0KICAgICAgICB9DQogICAgICBdLA0KICAgICAgdXNlckRhdGE6IFtdLA0KICAgICAgdG90YWxVc2VyOiAwDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVNlbGVjdERlcCh2KSB7DQogICAgICB0aGlzLnNlYXJjaFVzZXJGb3JtLmRlcGFydG1lbnRJZCA9IHY7DQogICAgfSwNCiAgICBnZXREYXRhTGlzdHMoKSB7DQogICAgICBpZiAoIXRoaXMuYWdlbnRHcm91cElkKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi6K+35YWI6YCJ5oup5LiA5Liq5oqA6IO96L+b6KGM5pON5L2cIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMudXNlck1vZGFsVmlzaWJsZT10cnVlOw0KICAgICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIGNoYW5nZVVzZXJQYWdlKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0ucGFnZU51bWJlciA9IHY7DQogICAgICB0aGlzLmdldFVzZXJEYXRhTGlzdCgpOw0KICAgIH0sDQogICAgY2hhbmdlVXNlclBhZ2VTaXplKHYpIHsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0ucGFnZVNpemUgPSB2Ow0KICAgICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIHNob3dTZWxlY3QoZSkgew0KICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IGU7DQogICAgICBpZih0aGlzLnNlbGVjdFVzZXJzLmxlbmd0aCA+IDApew0KICAgICAgICAgdGhpcy5vcGVuVGlwID0gdHJ1ZTsNCiAgICAgIH1lbHNlew0KICAgICAgICAgdGhpcy5vcGVuVGlwID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRVc2VyRGF0YUxpc3QoKSB7DQogICAgICB0aGlzLnVzZXJMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0uYWdlbnRHcm91cElkPXRoaXMuYWdlbnRHcm91cElkOw0KICAgICAgZ2V0QWdlbnRHcm91cFVzZXJMaXN0RGF0YSh0aGlzLnNlYXJjaFVzZXJGb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMudXNlckxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy51c2VyRGF0YSA9IHJlcy5yZXN1bHQubGlzdDsNCiAgICAgICAgICB0aGlzLnRvdGFsVXNlciA9IHJlcy5yZXN1bHQudG90YWw7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlU2VhcmNoVXNlcigpIHsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0ucGFnZU51bWJlciA9IDE7DQogICAgICB0aGlzLnNlYXJjaFVzZXJGb3JtLnBhZ2VTaXplID0gMTA7DQogICAgICANCiAgICAgIHRoaXMuZ2V0VXNlckRhdGFMaXN0KCk7DQogICAgfSwNCiAgICBoYW5kbGVSZXNldFVzZXIoKSB7DQogICAgICB0aGlzLiRyZWZzLnNlYXJjaFVzZXJGb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICB0aGlzLnNlYXJjaFVzZXJGb3JtLnBhZ2VOdW1iZXIgPSAxOw0KICAgICAgdGhpcy5zZWFyY2hVc2VyRm9ybS5wYWdlU2l6ZSA9IDEwOw0KICAgICAgdGhpcy4kcmVmcy5kZXAuY2xlYXJTZWxlY3QoKTsNCiAgICAgIHRoaXMuc2VhcmNoVXNlckZvcm0uZGVwYXJ0bWVudElkID0gIiI7DQogICAgICAvLyDph43mlrDliqDovb3mlbDmja4NCiAgICAgIHRoaXMuZ2V0VXNlckRhdGFMaXN0KCk7DQogICAgfSwNCiAgICBzZXREYXRhKHYpIHsNCiAgICAgIHRoaXMuc2VsZWN0VXNlcnMgPSB2Ow0KICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5zZWxlY3RVc2Vycyk7DQogICAgfSwNCiAgICBjaG9vc2VVc2VyKHYpIHsNCiAgICAgIC8vIOWOu+mHjQ0KICAgICAgbGV0IHRoYXQgPSB0aGlzOw0KICAgICAgbGV0IGZsYWcgPSB0cnVlOw0KICAgICAgdGhpcy5zZWxlY3RVc2Vycy5mb3JFYWNoKGUgPT4gew0KICAgICAgICBpZiAodi5pZCA9PSBlLmlkKSB7DQogICAgICAgICAgdGhhdC4kTWVzc2FnZS53YXJuaW5nKCLlt7Lnu4/mt7vliqDov4fllabvvIzor7fli7/ph43lpI3pgInmi6kiKTsNCiAgICAgICAgICBmbGFnID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgaWYgKGZsYWcpIHsNCiAgICAgICAgbGV0IHUgPSB7DQogICAgICAgICAgaWQ6IHYuaWQsDQogICAgICAgICAgdXNlcm5hbWU6IHYudXNlcm5hbWUsDQogICAgICAgICAgbmlja25hbWU6IHYubmlja25hbWUNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5zZWxlY3RVc2Vycy5wdXNoKHUpOw0KICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLnNlbGVjdFVzZXJzKTsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKGDmt7vliqDnlKjmiLcgJHt2Lm5pY2tuYW1lfSDmiJDlip9gKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsZWFyU2VsZWN0RGF0YSgpIHsNCiAgICAgIHRoaXMuc2VsZWN0VXNlcnMgPSBbXTsNCiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuc2VsZWN0VXNlcnMpOw0KICAgIH0sDQogICAgY2xlYXJEYXRhKCkgew0KICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IFtdOw0KICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5zZWxlY3RVc2Vycyk7DQogICAgICB0aGlzLnVzZXJNb2RhbFZpc2libGU9ZmFsc2U7DQogICAgICB0aGlzLmNvbnRpbnVhdGlvbkxldmVsID0gIjEiOw0KICAgICAgdGhpcy5vcGVuVGlwID0gZmFsc2U7DQogICAgfSwNCiAgICBzdWJtaXRVc2VyKCl7DQogICAgICB0aGlzLiRlbWl0KCJjbGljayIsIHRoaXMuc2VsZWN0VXNlcnMsdGhpcy5jb250aW51YXRpb25MZXZlbCk7DQogICAgICB0aGlzLnVzZXJNb2RhbFZpc2libGU9ZmFsc2U7DQogICAgICB0aGlzLmNvbnRpbnVhdGlvbkxldmVsID0gIjEiOw0KICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IFtdOw0KICAgICAgdGhpcy5vcGVuVGlwID0gZmFsc2U7DQogICAgfSwNCiAgICBoYW5kbGVDYW5jZWxVc2VyKGUsIGlkKSB7DQogICAgICAvLyDliKDpmaTmiYDpgInnlKjmiLcNCiAgICAgIHRoaXMuc2VsZWN0VXNlcnMgPSB0aGlzLnNlbGVjdFVzZXJzLmZpbHRlcihlID0+IHsNCiAgICAgICAgcmV0dXJuIGUuaWQgIT0gaWQ7DQogICAgICB9KTsNCiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuc2VsZWN0VXNlcnMpOw0KICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiYDpgInnlKjmiLfmiJDlip8iKTsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRVc2VyRGF0YUxpc3QoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["user-choose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-choose.vue","sourceRoot":"src/views/sys/agent-group","sourcesContent":["<template>\r\n<div class=\"user-choose\" >\r\n    <Button @click=\"getDataLists\" :icon=\"icon\">{{text}}</Button>\r\n\r\n    <!-- <span @click=\"clearSelectData\" class=\"clear\">清空已选</span>\r\n    <Collapse simple class=\"collapse\">\r\n      <Panel name=\"1\">\r\n        已选择\r\n        <span class=\"select-count\">{{selectUsers.length}}</span> 人\r\n        <p slot=\"content\">\r\n          <Tag\r\n            v-for=\"(item, i) in selectUsers\"\r\n            :key=\"i\"\r\n            :name=\"item.id\"\r\n            color=\"default\"\r\n            closable\r\n            @on-close=\"handleCancelUser\"\r\n          >\r\n            <Tooltip placement=\"top\" :content=\"item.username\">{{item.nickname}}</Tooltip>\r\n          </Tag>\r\n        </p>\r\n      </Panel>\r\n    </Collapse> -->\r\n    \r\n    <Drawer title=\"选择坐席\" closable v-model=\"userModalVisible\" width=\"900\" draggable>\r\n      <Form ref=\"searchUserForm\" :model=\"searchUserForm\" inline :label-width=\"75\">\r\n        <Form-item label=\"姓名\" prop=\"nickname\">\r\n          <Input\r\n            type=\"text\"\r\n            v-model=\"searchUserForm.nickname\"\r\n            clearable\r\n            placeholder=\"请输入姓名\"\r\n            style=\"width: 200px\"\r\n          />\r\n        </Form-item>\r\n        <Form-item label=\"部门\" prop=\"department\">\r\n          <department-choose @on-change=\"handleSelectDep\" style=\"width: 200px\" ref=\"dep\"></department-choose>\r\n        </Form-item>\r\n        <Form-item style=\"margin-left:-35px;\" class=\"br\">\r\n          <Button @click=\"handleSearchUser\" type=\"primary\" icon=\"ios-search\">搜索</Button>\r\n          <Button @click=\"handleResetUser\">重置</Button>\r\n        </Form-item>\r\n\r\n        <!-- <Form-item label=\"接续等级\" prop=\"continuationLevel\">\r\n          <Select v-model=\"continuationLevel\" style=\"width: 200px\" placeholder=\"请选择\">\r\n            <Option value=\"1\">1级</Option>\r\n            <Option value=\"2\">2级</Option>\r\n            <Option value=\"3\">3级</Option>\r\n            <Option value=\"4\">4级</Option>\r\n            <Option value=\"5\">5级</Option>\r\n            <Option value=\"6\">6级</Option>\r\n            <Option value=\"7\">7级</Option>\r\n            <Option value=\"8\">8级</Option>\r\n            <Option value=\"9\">9级</Option>\r\n          </Select>\r\n        </Form-item> -->\r\n\r\n\r\n      </Form>\r\n      <Row v-show=\"openTip\">\r\n      <Alert show-icon>\r\n        已选择\r\n        <span class=\"select-count\">{{selectUsers.length}}</span> 项\r\n        <a style=\"margin-left: 10px;\" @click=\"clearSelectData\">清空已选</a>\r\n      </Alert>\r\n      </Row>\r\n      <Table\r\n        :loading=\"userLoading\"\r\n        border\r\n        :columns=\"userColumns\"\r\n        :data=\"userData\"\r\n        @on-selection-change=\"showSelect\"\r\n        style=\"margin: 2vh 0;\"\r\n      ></Table>\r\n      <Row type=\"flex\" justify=\"end\">\r\n        <Page\r\n          :current=\"searchUserForm.pageNumber\"\r\n          :total=\"totalUser\"\r\n          :page-size=\"searchUserForm.pageSize\"\r\n          @on-change=\"changeUserPage\"\r\n          @on-page-size-change=\"changeUserPageSize\"\r\n          :page-size-opts=\"[10,20,50]\"\r\n          size=\"small\"\r\n          show-total\r\n          show-elevator\r\n          show-sizer\r\n          transfer\r\n        ></Page>\r\n      </Row>\r\n      <div style=\"float:right;margin-top:20px;\">\r\n        <Button type=\"text\" @click=\"clearData\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submitUser\">提交</Button>\r\n      </div>\r\n    </Drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAgentGroupUserListData } from \"@/api/index\";\r\nimport departmentChoose from \"@/views/my-components/xboot/department-choose\";\r\nexport default {\r\n  name: \"userChoose\",\r\n  components: {\r\n    departmentChoose\r\n  },\r\n  props: {\r\n    text: {\r\n      type: String,\r\n      default: \"选择用户\"\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: \"md-person-add\"\r\n    },\r\n    agentGroupId:{\r\n      type:String\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      userLoading: true,\r\n      userModalVisible: false,\r\n      openTip:false,\r\n      selectUsers: [],\r\n      continuationLevel:\"1\",\r\n      EchartsWidth:\"200\",\r\n      searchUserForm: {\r\n        id: \"\",\r\n        nickname: \"\",\r\n        type: \"\",\r\n        status: \"\",\r\n        agentGroupId:\"\",\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"create_time\", // 默认排序字段\r\n        order: \"desc\" // 默认排序方式\r\n      },\r\n      userColumns: [\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"用户名\",\r\n          key: \"nickname\",\r\n          minWidth: 130,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"登录账号\",\r\n          key: \"username\",\r\n          minWidth: 130,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"头像\",\r\n          key: \"avatar\",\r\n          width: 80,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\"Avatar\", {\r\n              props: {\r\n                src: params.row.avatar\r\n              }\r\n            });\r\n          }\r\n        },\r\n        {\r\n          title: \"所属部门\",\r\n          key: \"departmentTitle\",\r\n          width: 120\r\n        },\r\n        {\r\n          title: \"手机\",\r\n          key: \"mobile\",\r\n          width: 125,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"邮箱\",\r\n          key: \"email\",\r\n          width: 180,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: \"性别\",\r\n          key: \"sex\",\r\n          width: 70,\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          sortable: true,\r\n          sortType: \"desc\",\r\n          width: 170\r\n        }\r\n      ],\r\n      userData: [],\r\n      totalUser: 0\r\n    };\r\n  },\r\n  methods: {\r\n    handleSelectDep(v) {\r\n      this.searchUserForm.departmentId = v;\r\n    },\r\n    getDataLists() {\r\n      if (!this.agentGroupId) {\r\n        this.$Message.warning(\"请先选择一个技能进行操作\");\r\n        return;\r\n      }\r\n      this.userModalVisible=true;\r\n      this.getUserDataList();\r\n    },\r\n    changeUserPage(v) {\r\n      this.searchUserForm.pageNumber = v;\r\n      this.getUserDataList();\r\n    },\r\n    changeUserPageSize(v) {\r\n      this.searchUserForm.pageSize = v;\r\n      this.getUserDataList();\r\n    },\r\n    showSelect(e) {\r\n      this.selectUsers = e;\r\n      if(this.selectUsers.length > 0){\r\n         this.openTip = true;\r\n      }else{\r\n         this.openTip = false;\r\n      }\r\n    },\r\n    getUserDataList() {\r\n      this.userLoading = true;\r\n      this.searchUserForm.agentGroupId=this.agentGroupId;\r\n      getAgentGroupUserListData(this.searchUserForm).then(res => {\r\n        this.userLoading = false;\r\n        if (res.success) {\r\n          this.userData = res.result.list;\r\n          this.totalUser = res.result.total;\r\n        }\r\n      });\r\n    },\r\n    handleSearchUser() {\r\n      this.searchUserForm.pageNumber = 1;\r\n      this.searchUserForm.pageSize = 10;\r\n      \r\n      this.getUserDataList();\r\n    },\r\n    handleResetUser() {\r\n      this.$refs.searchUserForm.resetFields();\r\n      this.searchUserForm.pageNumber = 1;\r\n      this.searchUserForm.pageSize = 10;\r\n      this.$refs.dep.clearSelect();\r\n      this.searchUserForm.departmentId = \"\";\r\n      // 重新加载数据\r\n      this.getUserDataList();\r\n    },\r\n    setData(v) {\r\n      this.selectUsers = v;\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n    },\r\n    chooseUser(v) {\r\n      // 去重\r\n      let that = this;\r\n      let flag = true;\r\n      this.selectUsers.forEach(e => {\r\n        if (v.id == e.id) {\r\n          that.$Message.warning(\"已经添加过啦，请勿重复选择\");\r\n          flag = false;\r\n        }\r\n      });\r\n      if (flag) {\r\n        let u = {\r\n          id: v.id,\r\n          username: v.username,\r\n          nickname: v.nickname\r\n        };\r\n        this.selectUsers.push(u);\r\n        this.$emit(\"on-change\", this.selectUsers);\r\n        this.$Message.success(`添加用户 ${v.nickname} 成功`);\r\n      }\r\n    },\r\n    clearSelectData() {\r\n      this.selectUsers = [];\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n    },\r\n    clearData() {\r\n      this.selectUsers = [];\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n      this.userModalVisible=false;\r\n      this.continuationLevel = \"1\";\r\n      this.openTip = false;\r\n    },\r\n    submitUser(){\r\n      this.$emit(\"click\", this.selectUsers,this.continuationLevel);\r\n      this.userModalVisible=false;\r\n      this.continuationLevel = \"1\";\r\n      this.selectUsers = [];\r\n      this.openTip = false;\r\n    },\r\n    handleCancelUser(e, id) {\r\n      // 删除所选用户\r\n      this.selectUsers = this.selectUsers.filter(e => {\r\n        return e.id != id;\r\n      });\r\n      this.$emit(\"on-change\", this.selectUsers);\r\n      this.$Message.success(\"删除所选用户成功\");\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUserDataList();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.user-choose {\r\n  .clear {\r\n    font-size: 12px;\r\n    margin-left: 15px;\r\n    color: #40a9ff;\r\n    cursor: pointer;\r\n  }\r\n  .collapse {\r\n    font-size: 12px;\r\n    margin-top: 15px;\r\n    width: 500px;\r\n  }\r\n  .select-count {\r\n    font-weight: 600;\r\n    color: #40a9ff;\r\n  }\r\n}\r\n</style>"]}]}