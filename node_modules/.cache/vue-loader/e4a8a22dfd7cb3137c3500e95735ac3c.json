{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\ocxDialToolBar\\ocxDialToolBar.vue?vue&type=style&index=0&id=cbbf75a6&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\my-components\\ocxDialToolBar\\ocxDialToolBar.vue","mtime":1614579763301},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCAiLi9vY3hEaWFsVG9vbEJhci5sZXNzIjsNCg=="},{"version":3,"sources":["ocxDialToolBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmgBA","file":"ocxDialToolBar.vue","sourceRoot":"src/views/my-components/ocxDialToolBar","sourcesContent":["<template>\r\n  <div>\r\n      <div ref=\"ocxDialToolBar\" class=\"ocxDialToolBar\">\r\n          <div style=\"height:25px;\">\r\n              <ul class=\"ocxLoginInfo\">\r\n                  <!-- <li style=\"min-width:60px;margin-right:5px;\">姓名：<span id=\"ocxlblUserRealName\" keyid=\"userRealName\" class=\"spancolor\"></span></li> -->\r\n                  <li style=\"min-width:60px;margin-right:5px;\">工号：<span id=\"ocxlblUserName\" keyid=\"username\" class=\"spancolor\"></span></li>\r\n                  <li style=\"min-width:60px;margin-right:5px;\">分机：<span id=\"ocxlblExtNumber\" keyid=\"extnumber\" class=\"spancolor\"></span></li>\r\n                  <li style=\"min-width:30px;margin-right:10px;\">状态：<span id=\"ocxlblCurrentStatus\" keyid=\"currentStatus\" class=\"spancolor\">离线</span></li>\r\n                  <li style=\"min-width:55px;margin-right: 8px;\"><span id=\"lblStatusName\" keyid=\"stateDurationName\">状态</span>时长：\r\n                    <span id=\"ocxlblStateDuration\" keyid=\"stateDuration\" duration=\"\" countType=\"1\" class=\"spancolor\">--:--:--</span>\r\n                  </li>\r\n                  <li style=\"min-width:30px;margin-right:5px;\">CTI连接：<span id=\"ocxlblCTIConnectState\" keyid=\"CTIConnectState\" class=\"spancolor\">未知</span></li>\r\n                  <li style=\"min-width:20px;margin-right:5px;\">排队数：<span id=\"ocxlblWaitCount\" keyid=\"waitCount\" class=\"spancolor\">0</span></li>\r\n                  <!--<li style=\"min-width:20px;margin-right:5px;\"><a id=\"ocxBtnSetSeatInfo\" class=\"SetSeatInfoBtn\" title=\"坐席信息配置\" onclick=\"\">配置</a></li>-->\r\n                  <li style=\"min-width:20px;margin-right:5px;padding-left: 5px;margin-left: 2px;text-decoration:none;display:block;\">\r\n                      <a id=\"ocxBtnReOpenPopScreen\" class=\"CallTestBtn\" title=\"重新弹屏\" @click=\"ReOpenPopScreen\">重新弹屏</a></li>\r\n              </ul>\r\n          </div>\r\n          <div\r\n                  style=\"height:30px;width:100%;clear:both;/* background:#F5F5F5; *//* border:1px #ccc solid; */\">\r\n              <ul class=\"ocxDialTool\">\r\n                  <li class=\"CallInfoContent\" style=\"display:none;\">\r\n\t\t\t\t\t\t\t\t\t\t<span id=\"ocxlblCallType\" keyid=\"callType\"\r\n                                              style=\"font-size: 14px;line-height:  25px;\">呼出</span>：<span\r\n                          id=\"ocxlblCallNumber\" keyid=\"callNumber\" class=\"spancolor\"></span>\r\n                  </li>\r\n                  <li class=\"DialNumberContent\" style=\"padding-right:5px;display:none;\">\r\n                      <input type=\"text\" id=\"ocxTxtDialNumber\" class=\"DialNumberTxt\" value=\"13545454545\"/>\r\n                  </li>\r\n                  <li>\r\n                      <button id=\"ocxBtnOutCall\" keyid=\"MakeCall\" class=\"ocxbtn_highlight\" title=\"呼叫\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">呼叫</button>\r\n                      <button id=\"ocxBtnAnswer\" keyid=\"Answer\" class=\"ocxbtn_highlight\" title=\"接听\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">接听</button>\r\n                      <button id=\"ocxBtnHugeUp\" keyid=\"Hangup\" class=\"ocxbtn_red\" title=\"挂机\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">\r\n                          <!-- <img src=\"CTIAgentSDK/skins/simple/btnimg/phone_03.png\" width=\"14\" height=\"10\" align=\"middle\" />&nbsp; -->挂机</button>\r\n                      <button id=\"ocxBtnStopEndProc\" keyid=\"StopEndProc\" class=\"ocxbtn_highlight\"\r\n                              title=\"停止事后整理\" type=\"button\" onclick=\"\" style=\"display: none;\">停止整理</button>\r\n                      <!-- <button id=\"ocxBtnBusy\" keyid=\"SetBusy\" class=\"ocxbtn_highlight\" title=\"忙碌\" type=\"button\"  onclick=\"\" style=\"display: none;\">忙碌</button> -->\r\n                      <button id=\"ocxBtnBusy1\" keyid=\"SetBusy1\" class=\"ocxbtn_highlight\" title=\"置忙\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">置忙</button>\r\n                      <button id=\"ocxBtnOperationInCall\" keyid=\"OperationInCall\"\r\n                              class=\"ocxbtn_highlight\" title=\"转IVR\" type=\"button\" onclick=\"\"\r\n                              style=\"display: none;\">转IVR</button>\r\n                      <button id=\"ocxBtnSetBusyApply\" keyid=\"SetBusyApply\" class=\"ocxbtn_highlight\"\r\n                              title=\"示忙申请\" type=\"button\" onclick=\"\" style=\"display: none;\">示忙申请</button>\r\n                      <button id=\"ocxBtnFree\" keyid=\"SetIdle\" class=\"ocxbtn_highlight\" title=\"示闲\"\r\n                              type=\"button\" onclick=\"\" onclick=\"\" style=\"display: none;\">示闲</button>\r\n                      <button id=\"ocxBtnConsult\" keyid=\"Consult\" class=\"ocxbtn_highlight\" title=\"咨询\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">咨询</button>\r\n                      <button id=\"ocxBtnTransfer\" keyid=\"Transfer\" class=\"ocxbtn_highlight\" title=\"转移\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">转移</button>\r\n                      <button id=\"ocxBtnGetBack\" keyid=\"Return\" class=\"ocxbtn_highlight\" title=\"找回\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">找回</button>\r\n                      <button id=\"ocxBtnHold\" keyid=\"Keep\" class=\"ocxbtn_highlight\" title=\"保持\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">保持</button>\r\n                      <button id=\"ocxBtnConf\" keyid=\"Conference\" class=\"ocxbtn_highlight\" title=\"三方会议\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">三方会议</button>\r\n\r\n                      <!-- <button id=\"ocxBtnStartEndProc\" keyid=\"StartEndProc\" class=\"ocxbtn_highlight\" title=\"开始事后整理\" type=\"button\"  onclick=\"\" style=\"display: none;\">事后整理</button> -->\r\n                      <button id=\"ocxBtnSatisfaction\" keyid=\"Satisfaction\" class=\"ocxbtn_highlight\"\r\n                              title=\"开始满意度调查\" type=\"button\" onclick=\"\"\r\n                              style=\"display: none;\">满意度调查</button>\r\n\r\n                      <button id=\"ocxBtnFreeAfter\" keyid=\"SetEndidle\" class=\"ocxbtn_highlight\"\r\n                              title=\"事后闲\" type=\"button\" onclick=\"\" style=\"display: none;\">事后闲</button>\r\n                      <button id=\"ocxBtnBusyAfter\" keyid=\"SetEndbusy\" class=\"ocxbtn_highlight\"\r\n                              title=\"事后忙\" type=\"button\" onclick=\"\" style=\"display: none;\">事后忙</button>\r\n                      <button id=\"ocxBtnIntercept\" keyid=\"Intercept\" class=\"ocxbtn_highlight\"\r\n                              title=\"拦截\" type=\"button\" onclick=\"\" style=\"display: none;\">拦截</button>\r\n                      <button id=\"ocxBtnMonitor\" keyid=\"Monitor\" class=\"ocxbtn_highlight\" title=\"监控\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">监控</button>\r\n                      <button id=\"ocxBtnLeaveMode\" keyid=\"LeaveMode\" class=\"ocxbtn_highlight\"\r\n                              title=\"离开\" type=\"button\" onclick=\"\" style=\"display: none;\">离开</button>\r\n                      <button id=\"ocxBtnNormalMode\" keyid=\"NormalMode\" class=\"ocxbtn_highlight\"\r\n                              title=\"恢复\" type=\"button\" onclick=\"\" style=\"display: none;\">恢复</button>\r\n                      <button id=\"ocxBtnCheckin\" keyid=\"Checkin\" class=\"ocxbtn_highlight\" title=\"签入\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">签入</button>\r\n                      <button id=\"ocxBtnCheckout\" keyid=\"Checkout\" class=\"ocxbtn_highlight\" title=\"签出\"\r\n                              type=\"button\" onclick=\"\" style=\"display: none;\">签出</button>\r\n                  </li>\r\n              </ul>\r\n\r\n          </div>\r\n          <!-- 示忙小状态按钮操作栏 -->\r\n          <div class=\"ocxState-dropdownData\">\r\n              <div id=\"ocxBtnBusy\" keyid=\"SetBusy\" state=\"2\" substate=\"2\"\r\n                   class=\"ocxState-dropdownData-item state_2\" style=\"display: none;\">忙碌</div>\r\n              <div id=\"ocxBtnBusySubState\">\r\n                  <!-- <div id=\"ocxBtnBusySubState201\" keyid=\"SetBusy\" state=\"2\" substate=\"201\" class=\"ocxState-dropdownData-item ocxSubState state_2\" style=\"display: none;\">事后处理</div>\r\n                  <div id=\"ocxBtnBusySubState202\" keyid=\"SetBusy\" state=\"2\" substate=\"202\" class=\"ocxState-dropdownData-item ocxSubState state_2\" style=\"display: none;\">小休</div> -->\r\n              </div>\r\n          </div>\r\n      </div>\r\n\r\n    <!-- Ocx隐藏的HTML内容 -->\r\n    <!-- 来电接听提示 -->\r\n    <div id=\"ocxDivCallAlerting\" class=\"CallAlertMain\" style=\"display:block;\">\r\n      <div class=\"mainbg\">\r\n        <div class=\"headTitle\">\r\n          <div class=\"headTitleImg\"></div>\r\n        </div>\r\n        <div class=\"mainContent\">\r\n          <div class=\"CallAlertPhoto\"><img /></div>\r\n          <div class=\"rightInfoContent\">\r\n            <table id=\"customerCallInTb\">\r\n              <tr>\r\n                <th>来电号码：</th>\r\n                <td><span id=\"ocxlblCallinCaller\"></span></td>\r\n              </tr>\r\n              <tr>\r\n                <th>归属地：</th>\r\n                <td><span id=\"ocxlblLocalInfo\"></span></td>\r\n              </tr>\r\n            </table>\r\n\r\n            <table id=\"seatCallInTb\" style=\"display:none;\">\r\n              <tr>\r\n                <th>来电坐席：</th>\r\n                <td><span id=\"ocxlblCallerUserName\"></span></td>\r\n              </tr>\r\n              <tr>\r\n                <th>工号：</th>\r\n                <td><span id=\"ocxlblCallerUserCode\"></span></td>\r\n              </tr>\r\n              <tr>\r\n                <th>分机：</th>\r\n                <td><span id=\"ocxlblCallerExtNumber\"></span></td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class=\"btnbar\">\r\n          <button\r\n            id=\"ocxBtnAnswer1\"\r\n            keyid=\"Answer\"\r\n            class=\"btnAnswer1\"\r\n            type=\"button\"\r\n            style=\"display:none;\"\r\n          ></button>\r\n          <button\r\n            id=\"ocxBtnHugeUp1\"\r\n            keyid=\"Hangup\"\r\n            class=\"btnHugeUp1\"\r\n            type=\"button\"\r\n          ></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--<toolbarLogin-->\r\n      <!--:toolbarLoginModalVisible=\"toolbarLoginModalVisible\"-->\r\n    <!--&gt;</toolbarLogin>-->\r\n\r\n    <!-- <iframe name=\"html/login.html\"  src=\"https://fanyi.baidu.com/#en/zh/\" style=\"width:800px;height:400px;    position: absolute;z-index:999999999999\"></iframe> -->\r\n  </div>\r\n</template>\r\n<script>\r\n// import toolbarLogin from \"@/views/my-components/toolbar/toolbarLogin.vue\";\r\nimport { getStore, setStore } from '@/libs/storage';\r\n//let accessToken = getStore('accessToken');\r\nimport {\r\n    getAllExtNumber,\r\n    getBlackListGroups,\r\n  getAllAgentGroupList,\r\n    getSubstate,\r\n    getActiveLink,\r\n    getCheckNetwork,\r\n    getAllCtiLinksList\r\n} from \"@/api/index\";\r\n\r\n// import { OcxCore } from \"@/libs/core/CTIMain.js\";\r\nimport { InitCTIToolCustomUI } from \"@/libs/core/ToolUI_simple_v2.1.2.js\";\r\n\r\nexport default {\r\n  name: \"ocxdialtoolbar1\",\r\n  components: {  },\r\n    props:[\"userInfoData\"],\r\n    AllExtNumber:null, //分机信息\r\n  data() {\r\n    return {\r\n        num:0,\r\n        toolbarInfos:{\r\n            //\"CTIServerIP\": \"kefu-test.eleccomm.com\",\r\n            \"CTIServerIP\": \"192.168.5.249\",//CTI服务器IP\r\n            \"CTIServerPort\": 8644,//CTI服务器端口\r\n            \"CTIServerType\": \"ctiAgent\",//CTI服务器类型 cti CTI服务器真实环境   ctiAgent cti模拟器\r\n            \"AutoCallServer\": \"\",//自动外呼地址\r\n            \"UserId\":\"\",\r\n            \"UserName\": \"1002\",//用户工号\r\n            \"userCode\":\"1002\",//工号\r\n            \"RealName\": \"客服1\",//用户姓名\r\n            \"Gender\": \"男\",//性别\r\n            \"CompanyId\": \"31b05701-60ef-405c-87ba-af47049e3f48\",//公司主键ID\r\n            \"ExtNumber\": 10011001,//坐席分机号\r\n            \"ExtMode\": 1,//坐席分机模式(1:固定分机 2：座席自选 3：自适应)\r\n            \"ExtCallerNumber\": \"28888888\",//分机主叫号码\r\n            \"ExtCallerRelayGrpNo\": \"0\",//备用中继组号\r\n            \"Continuation\": 1,//接续等级\r\n            \"CanSetBusyWaitCount\": 0,//允许置忙最大排队数\r\n            \"CTIAgentSessionID\": '',//会话ID\r\n            //电话权限\r\n            \"ButtonPermission\": \"Checkin,Checkout,SetIdle,SetBusy,Answer,Hangup,Return,SetEndidle,SetEndbusy,MakeCall,Consult,Transfer,Keep,Conference,Monitor,Listen,ForceEnter,ForceRemove,ForceSetIdle,ForceSetBusy,MoniterConf,SendTipMsg,ForceCheckOut\",\r\n\r\n            //队列监控WS地址\r\n            \"CtiMonitorWsUrl\": \"ws://127.0.0.1:8080/cctyky/ctiMonitorWsSrv\",\r\n            //归属技能组\r\n            \"SeatGroupList\": [{\r\n                \"SeatGroupId\": 1,\r\n                \"SeatGroupName\": \"技能组1\"\r\n            }, {\r\n                \"SeatGroupId\": 2,\r\n                \"SeatGroupName\": \"技能组2\"\r\n            }],\r\n            //置忙小状态\r\n            \"BusySubStateList\": [{\r\n                \"SubState\": 201,\r\n                \"SubStateName\": \"事后处理\",\r\n                \"Icon\": \"shihou.png\"\r\n            }, {\r\n                \"SubState\": 202,\r\n                \"SubStateName\": \"小休\",\r\n                \"Icon\": \"xiaoxiu.png\"\r\n            }, {\r\n                \"SubState\": 203,\r\n                \"SubStateName\": \"开会\",\r\n                \"Icon\": \"huiyi.png\"\r\n            }, {\r\n                \"SubState\": 204,\r\n                \"SubStateName\": \"培训\",\r\n                \"Icon\": \"peixun.png\"\r\n            }, {\r\n                \"SubState\": 205,\r\n                \"SubStateName\": \"督导\",\r\n                \"Icon\": \"dudao.png\"\r\n            }, {\r\n                \"SubState\": 206,\r\n                \"SubStateName\": \"外呼营销\",\r\n                \"Icon\": \"yingxiao.png\"\r\n            }, {\r\n                \"SubState\": 207,\r\n                \"SubStateName\": \"联系客户\",\r\n                \"Icon\": \"lianxi.png\"\r\n            }, {\r\n                \"SubState\": 208,\r\n                \"SubStateName\": \"其它\",\r\n                \"Icon\": \"qita.png\"\r\n            }],\r\n            //主叫号码列表\r\n            \"CallerNumberList\": [{\r\n                \"Caller\": \"28888888\",\r\n                \"RelayGrpNo\": 101,\r\n                \"IsDefault\": 1\r\n            }, {\r\n                \"Caller\": \"28888889\",\r\n                \"RelayGrpNo\": 101,\r\n                \"IsDefault\": 0\r\n            }],\r\n            //分机号列表配置\r\n            \"ExtNumberList\": [{\r\n                \"ExtNumber\": \"8001\",//坐席分机号\r\n                \"ExtCaller\": \"28888888\",//分机主叫号码\r\n                \"ExtCallerRelayGrpNo\": 0,//分机中继组编码\r\n                \"ExtUserRealName\": \"客服1\",//分机使用者\r\n                \"ExtCallers\": [{\r\n                    \"Caller\": \"28888888\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 1\r\n                }, {\r\n                    \"Caller\": \"28888889\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 0\r\n                }]\r\n            }, {\r\n                \"ExtNumber\": \"8002\",\r\n                \"ExtCaller\": \"28888888\",\r\n                \"ExtCallerRelayGrpNo\": 0,\r\n                \"ExtUserRealName\": \"客服2\",\r\n                \"ExtCallers\": [{\r\n                    \"Caller\": \"28888888\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 1\r\n                }, {\r\n                    \"Caller\": \"28888889\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 0\r\n                }]\r\n            }, {\r\n                \"ExtNumber\": \"8003\",\r\n                \"ExtCaller\": \"28888888\",\r\n                \"ExtCallerRelayGrpNo\": 0,\r\n                \"ExtUserRealName\": \"客服3\",\r\n                \"ExtCallers\": [{\r\n                    \"Caller\": \"28888888\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 1\r\n                }, {\r\n                    \"Caller\": \"28888889\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 0\r\n                }]\r\n            }, {\r\n                \"ExtNumber\": \"8004\",\r\n                \"ExtCaller\": \"28888888\",\r\n                \"ExtCallerRelayGrpNo\": 0,\r\n                \"ExtUserRealName\": \"客服4\",\r\n                \"ExtCallers\": [{\r\n                    \"Caller\": \"28888888\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 1\r\n                }, {\r\n                    \"Caller\": \"28888889\",\r\n                    \"RelayGrpNo\": 0,\r\n                    \"IsDefault\": 0\r\n                }]\r\n            }],\r\n            //坐席分配的技能组\r\n          \"agentGroups\":[],\r\n          //获取服务器是内网还是外网\r\n          CheckNetwork: {\r\n            ip: \"127.0.0.1\",\r\n            netType: \"WAN\" //LAN:内网，WAN:外网\r\n          }\r\n        }\r\n        //登录的表单格式\r\n      // toolbarLoginInfoForm:{\r\n      //   UserName:OcxCore.Session.UserCode\r\n      // },\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      var than = this;\r\n\r\n\r\n      //浏览器关闭\r\n      $(window).bind(\"beforeunload\", function(e) {\r\n        e = e || event;\r\n        try {\r\n          //自动签出\r\n          //OcxCore.Session.Checkout();\r\n          //OcxCore.Session.Hangup();\r\n        } catch (e2) {}\r\n      });\r\n      //this.OperationInCall_Click();\r\n\r\n     this.getAllExtNumberList();//获取分机信息\r\n      this.getAllSeatGroupLists();//获取所有的技能组\r\n      this.getSubstateList();//获取置忙小状态\r\n      this.getActiveLinkList()//获取服务器地址\r\n      this.getCheckNetworkList();//获取网络是内网还是外网\r\n      //this.initData();//初始化头部工具栏数据\r\n\r\n      this.setUserInfo();//从userInfo里取用户信息--测试时注释\r\n      this.initToolUI_simple(than);\r\n\r\n      // if($(\"#ocxBtnHugeUp\").style.display!=\"none\"){\r\n      //    $(\"#ocxBtnHugeUp\").click()\r\n      // }\r\n\r\n    },\r\n\r\n    //设置用户信息\r\n    setUserInfo(){\r\n      const userInfos=JSON.parse(Cookies.get(\"userInfo\"));\r\n      this.toolbarInfos.UserId=userInfos.id;//用户ID\r\n      this.toolbarInfos.RealName=userInfos.nickname;//用户姓名\r\n      this.toolbarInfos.Gender=userInfos.sex;//性别\r\n      this.toolbarInfos.CompanyId=userInfos.tenantId;//所在公司ID\r\n      this.toolbarInfos.UserCode=userInfos.userCode;//用户工号\r\n      this.toolbarInfos.ExtNumber=userInfos.ext;//分机号码\r\n      this.toolbarInfos.CTIAgentSessionID=getStore('accessToken');//会话ID\r\n      //var data1={1:\"固定分机\",2:\"座席自选\",3:\"自适应\"}\r\n      //  this.toolbarInfos.extMode=data1[userInfos.extMode];//坐席分机模式\r\n      // OcxCore.Session.setExtMode(data1[userInfos.extMode]);//坐席分机模式\r\n      this.toolbarInfos.extMode=userInfos.extMode;//坐席分机模式\r\n      this.toolbarInfos.agentGroups=userInfos.agentGroups;//坐席分配的技能组\r\n      OcxCore.Session.setExtMode(userInfos.extMode);//坐席分机模式\r\n\r\n    },\r\n      //获取所有的技能组\r\n      getAllSeatGroupLists(){\r\n        var than=this;\r\n        getAllAgentGroupList({}).then(res=>{\r\n             // console.log(res);\r\n              if(res.success){\r\n                var datas=res.result;\r\n                var dataA=[];\r\n                datas.forEach(function (v,i,arr){\r\n                  dataA.push({\r\n                    \"SeatGroupId\": v.id,\r\n                    \"SeatGroupName\": v.title,\r\n                    \"categoryId\":v.id,\r\n                    // \"Level\":\"\",\r\n                    // \"Sort\":\"\",\r\n                    // \"isAssigned\":\"\"\r\n                  })\r\n                })\r\n                this.toolbarInfos.SeatGroupList=dataA;\r\n                than.num++;\r\n              }\r\n          })\r\n      },\r\n      //获取分机信息\r\n    getAllExtNumberList(){\r\n      var than=this;\r\n      getAllExtNumber({}).then(res=>{\r\n              console.log(res);\r\n             if(res.success){\r\n               var datas=JSON.parse(JSON.stringify(res.result));\r\n               this.toolbarInfos.ExtNumberList=datas;\r\n             }\r\n            than.num++;\r\n          })\r\n      },\r\n      //获取置忙小状态\r\n    getSubstateList(){\r\n      var than=this;\r\n          getSubstate({}).then(res=>{\r\n              console.log(res);\r\n              if(res.success){\r\n                var datas=JSON.parse(JSON.stringify(res.result));\r\n                var dataA=[];\r\n                datas.forEach(function (v,i,arr){\r\n                  dataA.push({\r\n                    \"SubState\": v.stateCode,\r\n                    \"SubStateName\": v.name,\r\n                  })\r\n                });\r\n                this.toolbarInfos.SubstateList=dataA;\r\n              }\r\n            than.num++;\r\n          })\r\n      },\r\n      //获取服务器地址\r\n    getActiveLinkList(){\r\n      var than=this;\r\n          getActiveLink({}).then(res=>{\r\n              if(res.success){\r\n                  var _data=JSON.parse(JSON.stringify(res.result));\r\n                  this.SubstateList={\r\n                      //内网地址\r\n                      links:{\r\n                          ip:_data.linksIp,\r\n                          port:_data.linksPort,\r\n                      },\r\n                      //外网地址\r\n                      outer:{\r\n                          ip:_data.outerIp,\r\n                          port:_data.outerPort,\r\n                      },\r\n                      runMode:_data.runMode //CTI:CTI服务器；ctiAgent:CTI 服务器\r\n                  };\r\n                than.num++;\r\n              }\r\n          })\r\n      },\r\n    //获取当前是内网还是外网\r\n    getCheckNetworkList(){\r\n      var than=this;\r\n      getCheckNetwork({}).then(res=>{\r\n        if(res.success){\r\n          var _data=res.result;\r\n          this.toolbarInfos.CheckNetwork=JSON.parse(JSON.stringify(_data));\r\n          than.num++;\r\n        }\r\n      })\r\n    },\r\n    OperationInCall_Click(Operation) {\r\n\t\t\tOperation = Operation == undefined ? \"VerifyPassword\" : Operation;\r\n\t\t\t//按钮初始化\r\n\t\t\tInitCTIToolCustomUI.OcxBtnInit_Common(\"#ocxBtnOperationInCall\", \"OperationInCall\", function (btn) {\r\n\t\t\t\tOcxCommandFun.OperationInCall(\"VerifyPassword\", OperationInCallData);\r\n\t\t\t});\r\n\t\t},\r\n    initToolUI_simple(than) {\r\n      InitCTIToolCustomUI.init(than);\r\n    },\r\n    /**\r\n     *重新弹屏\r\n     */\r\n    ReOpenPopScreen() {\r\n      if(this.$router.history.current.path!=\"/toCall\"){\r\n        this.$router.push({\r\n          name: \"toCall\",\r\n          path:`/toCall/`\r\n        });\r\n      }\r\n    },\r\n\r\n  },\r\n  watch:{\r\n    num(v){\r\n      if(v>=4){\r\n        if(this.toolbarInfos.CheckNetwork.netType==\"WAN\"){\r\n          this.toolbarInfos.CTIServerIP=this.SubstateList.links.ip;\r\n          this.toolbarInfos.CTIServerPort=this.SubstateList.links.port;\r\n          this.toolbarInfos.CTIServerType=this.SubstateList.runMode;\r\n        }else {\r\n          this.toolbarInfos.CTIServerIP=this.SubstateList.outer.ip;\r\n          this.toolbarInfos.CTIServerPort=this.SubstateList.outer.port;\r\n          this.toolbarInfos.CTIServerType=this.SubstateList.runMode;\r\n        }\r\n        this.toolbarInfos.ExtMode=2;\r\n        this.initToolUI_simple(this);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    //this.init();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n@import \"./ocxDialToolBar.less\";\r\n</style>\r\n"]}]}