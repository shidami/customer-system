{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\defined-attribute\\definedAttribute-1.vue?vue&type=style&index=0&id=32eb032a&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\sys\\defined-attribute\\definedAttribute-1.vue","mtime":1614579763361},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm5vLW1hcmdpbnsKICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAuaXZ1LWZvcm0taXRlbS1jb250ZW50ewogICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CgogIH0KfQouc2VhcmNoIHsKICAub3BlcmF0aW9uIHsKICAgIG1hcmdpbi1ib3R0b206IDJ2aCAhaW1wb3J0YW50OwoKICB9Cn0KLnVpLWRlZmF1bHQtY2hlY2tib3h7CiAgbGFiZWxbZGF0YS12LTAyNzRkMzA2XXsKICAgIHdpZHRoOiAzMHB4OwogICAgaGVpZ2h0OiAzOHB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICB9Cn0KLml2dS1jb2wuaXZ1LWNvbC1zcGFuLTEyewogIC5pdnUtZm9ybS1pdGVtewogICAgaGVpZ2h0OiAzM3B4OwogIH0KfQo="},{"version":3,"sources":["definedAttribute-1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAs8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"definedAttribute-1.vue","sourceRoot":"src/views/sys/defined-attribute","sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <Card>\r\n      <Row>\r\n        <div class=\"own-space-right\">\r\n          <Row class=\"operation ui-operation\">\r\n            <div class=\"ui-operation-left\" v-show=\"openTip && selectCount > 0\">\r\n              <Row class=\"ui-alert-warp\">\r\n                <Alert>\r\n                  {{ $t(\"tableTileSelected\") }}\r\n                  <span class=\"select-count\">{{ selectCount }}</span>\r\n                  {{ $t(\"tableTileTerm\") }}\r\n                  <a class=\"select-clear\" @click=\"clearSelectAll\">{{\r\n                      $t(\"clear\")\r\n                    }}</a>\r\n                </Alert>\r\n              </Row>\r\n              <Button @click=\"delAll\" icon=\"md-trash\">{{$t(\"deleteList\")}}</Button><!-- 批量删除 -->\r\n            </div>\r\n            <div class=\"ui-operation-right\" v-show=\"openTip && selectCount <= 0\">\r\n              <Button @click=\"addBlackList\" type=\"primary\" icon=\"md-add\" :disabled=\"disabledAddCon==10\">{{$t(\"add\")}}</Button><!-- 增加 -->\r\n              <Button @click=\"handleReset\" icon=\"md-refresh\">{{ $t(\"refresh\") }}</Button><!-- 刷新 -->\r\n              <Button type=\"dashed\" @click=\"openSearch=!openSearch\">{{openSearch ? \"关闭搜索\" : \"开启搜索\"}}</Button>\r\n              <Button type=\"dashed\" @click=\"tableColumnsVisible=true\">表格展示列</Button>\r\n            </div>\r\n          </Row>\r\n\r\n          <Row>\r\n            <div style=\"overflow: auto\">\r\n              <div style=\"min-width: 100%\">\r\n                <Table\r\n                    :columns=\"columnsSet\"\r\n                    :data=\"dateDataList\"\r\n                    ref=\"table\"\r\n                    sortable=\"custom\"\r\n                    @on-selection-change=\"showSelect\"\r\n                    @on-row-click=\"showDetail\"\r\n                ></Table>\r\n              </div>\r\n            </div>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n            <Page\r\n                :current=\"searchForm.pageNumber\"\r\n                :total=\"total\"\r\n                :page-size=\"searchForm.pageSize\"\r\n                @on-change=\"changePage\"\r\n                @on-page-size-change=\"changePageSize\"\r\n                :page-size-opts=\"[10, 20, 50]\"\r\n                size=\"small\"\r\n                show-total\r\n            >\r\n            </Page>\r\n          </Row>\r\n        </div>\r\n      </Row>\r\n    </Card>\r\n\r\n    <!--新建|修改黑名单组-开始--->\r\n    <Modal\r\n        :title=\"\r\n              editFormMobileVisibleTitle == 'add'\r\n                ? $t('add') + '自定义字段'\r\n                : $t('update') + '自定义字段'\r\n            \"\r\n        v-model=\"editFormMobileVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"1100\"\r\n    >\r\n      <Form\r\n          ref=\"blackListGroupForm\"\r\n          :model=\"formItem\"\r\n          :label-width=\"130\"\r\n          label-position=\"right\"\r\n          :rules=\"formItemValidate\"\r\n\r\n      >\r\n<!--        {{formItem}}-->\r\n        <Row :gutter=\"24\">\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"页面显示名称\" prop=\"fieldCode\">\r\n                <Input v-model=\"formItem.fieldName\" placeholder=\"请输入\"></Input>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"字段名称(必须是字母)\" prop=\"fieldCode\">\r\n                <Input v-model=\"formItem.fieldCode\" placeholder=\"请输入\"></Input>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"表单属性类型\" prop=\"\">\r\n                <Select v-model=\"formItem.category\">\r\n                  <Option value=\"0\">文本框</Option>\r\n                  <Option value=\"4\">文本域</Option>\r\n                  <Option value=\"3\">下拉列表</Option>\r\n                  <Option value=\"1\">单选</Option>\r\n                  <Option value=\"2\">多选</Option>\r\n                  <Option value=\"5\">日期框</Option>\r\n                  <Option value=\"6\">数字</Option>\r\n                  <Option value=\"7\">电话</Option>\r\n                </Select>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"校验规则\" prop=\"\">\r\n                <Select v-model=\"formItem.validRule\" :disabled=\"validRuleReadonly\">\r\n                <Option value=\"\">==不做任何验证==</Option>\r\n                <Option value=\"required\">NotNull - 必填</Option>\r\n                <Option value=\"Num\">Num - 必须为数字</Option>\r\n                <Option value=\"NumOrNull\">NumOrNull - 空或者为数字</Option>\r\n                <Option value=\"Phone\">Phone - 必须电话格式!</Option>\r\n                <Option value=\"PhoneOrNull\">PhoneOrNull - 空或者为电话格式!</Option>\r\n                <Option value=\"Mobile\">Mobile - 必须为手机格式!</Option>\r\n                <Option value=\"MobileOrNull\">MobileOrNull - 空或者为手机格式!</Option>\r\n                <Option value=\"MobileOrPhone\">MobileOrPhone - 必须为手机或电话格式!</Option>\r\n                <Option value=\"MobileOrPhoneOrNull\">MobileOrPhoneOrNull -空或者手机或电话格式!</Option>\r\n                <Option value=\"Email\">Email - 必须为E-mail格式!</Option>\r\n                <Option value=\"EmailOrNull\">EmailOrNull - 空或者为E-mail格式!</Option>\r\n                <Option value=\"IDCard\">IDCard - 必须为身份证格式!</Option>\r\n                <Option value=\"IDCardOrNull\">IDCardOrNull - 空或者为身份证格式!</Option>\r\n                <Option value=\"Double\">Double - 必须为小数!</Option>\r\n                <Option value=\"DoubleOrNull\">DoubleOrNull -空或者为小数!</Option>\r\n                <Option value=\"Zip\">Zip -必须为邮编格式!</Option>\r\n                <Option value=\"ZipOrNull\">ZipOrNull -空 或者为邮编格式!</Option>\r\n              </Select>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"跨列数\" prop=\"\">\r\n                <Select v-model=\"formItem.colspan\">\r\n                  <Option value=\"1\">不跨列</Option>\r\n                  <Option value=\"2\">2</Option>\r\n                  <Option value=\"3\">3</Option>\r\n                  <Option value=\"4\">4</Option>\r\n                  <Option value=\"5\">5</Option>\r\n                </Select>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n<!--          <Col span=\"12\">-->\r\n<!--            <div>-->\r\n<!--              <FormItem label=\"页面显示名称\">-->\r\n<!--                <Input v-model=\"formItem.fieldName\" placeholder=\"请输入\"></Input>-->\r\n<!--              </FormItem>-->\r\n<!--            </div>-->\r\n<!--          </Col>-->\r\n\r\n          <Col span=\"24\">\r\n            <Row>\r\n              <Col span=\"3\" class=\"ui-default-checkbox\">\r\n                <div>\r\n                  <FormItem label=\"客户是否必填\" prop=\"\">\r\n                    <Checkbox v-model=\"formItem.custRequired\"></Checkbox>\r\n                  </FormItem>\r\n                </div>\r\n              </Col>\r\n              <Col span=\"4\" class=\"ui-default-checkbox\">\r\n                <div>\r\n                  <FormItem label=\"是否可编辑\" prop=\"\">\r\n                    <Checkbox v-model=\"formItem.isEdit\"></Checkbox>\r\n                  </FormItem>\r\n                </div>\r\n              </Col>\r\n              <Col span=\"4\" class=\"ui-default-checkbox\">\r\n                <div>\r\n                  <FormItem label=\"是否系统内置字段\" prop=\"\">\r\n                    <Checkbox v-model=\"formItem.isSystem\"></Checkbox>\r\n                  </FormItem>\r\n                </div>\r\n              </Col>\r\n              <Col span=\"3\" class=\"ui-default-checkbox\">\r\n                <div>\r\n                  <FormItem label=\"是否启用\" prop=\"\">\r\n                    <Checkbox v-model=\"formItem.enabled\"></Checkbox>\r\n                  </FormItem>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n        <Row v-show=\"combinedFormTextShow\">\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"默认值\" prop=\"\">\r\n                <Input v-model=\"formItem.defaultValue\" placeholder=\"请输入\"></Input>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"列的长度\" prop=\"\">\r\n                <Input v-model=\"formItem.fieldLengh\" placeholder=\"请输入\"></Input>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row v-show=\"combinedFormDateShow\">\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"日期格式\" prop=\"\">\r\n                <Select v-model=\"formItem.pattern\">\r\n                  <Option value=\"yyyy-MM-dd\">yyyy-MM-dd</Option>\r\n                  <Option value=\"yyyy-MM-dd HH:mm:ss\">yyyy-MM-dd HH:mm:ss</Option>\r\n                  <Option value=\"yyyy/MM/dd\">yyyy/MM/dd</Option>\r\n                  <Option value=\"yyyy/MM/dd HH:mm:ss\">yyyy/MM/dd HH:mm:ss</Option>\r\n                </Select>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <div>\r\n              <FormItem label=\"默认值\" prop=\"\">\r\n                <DatePicker v-model=\"formItem.defaultValueDate\" type=\"datetime\" :format=\"datetimeFormat\" placeholder=\"请选择\" style=\"width: 100%;\"></DatePicker>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row v-show=\"combinedFormSelShow\">\r\n          <Col span=\"18\">\r\n            <div>\r\n              <FormItem label=\"数据来源\" prop=\"\">\r\n                <Select v-model=\"formItem.source\">\r\n                  <Option value=\"0\" selected=\"selected\">固定</Option>\r\n                  <Option value=\"1\">数据字典</Option>\r\n                </Select>\r\n              </FormItem>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"24\">\r\n            <div v-for=\"(item,i) in combinedForm\" :key=\"i\">\r\n              <Row :gutter=\"16\" style=\"margin-bottom: 5px\">\r\n                <div style=\"width: 120px;float: left;height: 35px;line-height:35px;text-align: right\">选项{{i+1}}</div>\r\n                <Col span=\"6\" prop=\"\">\r\n                  <Input v-model=\"item.key\" placeholder=\"请输入\"></Input>\r\n                </Col>\r\n                <Col span=\"6\" class=\"no-margin\" prop=\"\">\r\n                  <Input v-model=\"item.val\" placeholder=\"请输入\"></Input>\r\n                </Col>\r\n                <Col span=\"6\">\r\n                  <!--                  <RadioGroup v-model=\"combinedForm.default\">-->\r\n                  <!--                    <Radio label=\"\"></Radio>-->\r\n                  <!--                  </RadioGroup>-->\r\n                  <Icon type=\"ios-checkbox-outline\" v-if=\"item.default==1\" @click=\"checkcombinedForm(i)\"  v-model=\"item.default\" style=\"font-size: 20px;vertical-align: middle;\"/>\r\n                  <Icon type=\"ios-square-outline\" v-if=\"item.default==0\"  @click=\"checkcombinedForm(i)\"  v-model=\"item.default\" style=\"font-size: 20px;vertical-align: middle;\"/>\r\n                  设为默认值\r\n                  <!--                  <Icon type=\"md-add-circle\"  style=\"font-size: 20px\"/>-->\r\n                  <Button @click=\"addCombinedFormItem\" style=\"margin-left: 10px\" v-if=\"i==0\"><Icon type=\"md-add\" /></Button>\r\n                  <Button @click=\"delCombinedFormItem(i)\" style=\"margin-left: 10px\" v-if=\"i!=0\"><Icon type=\"md-remove\" /></Button>\r\n                </Col>\r\n                <!--                <Col span=\"6\">-->\r\n                <!--                  <Button type=\"primary\">Submit</Button>-->\r\n                <!--                </Col>-->\r\n              </Row>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"editFormMobileVisible = false\">{{\r\n            $t(\"cancel\")\r\n          }}</Button>\r\n        <Button\r\n            type=\"primary\"\r\n            :loading=\"checkCodeLoading\"\r\n            @click=\"submitFormList\"\r\n        >{{ $t(\"save\") }}</Button\r\n        >\r\n      </div> </Modal\r\n    ><!--新建|修改黑名单组-结束--->\r\n\r\n    <!--自定义表格展示的列-开始--->\r\n    <Modal\r\n        title=\"自定义表格展示的列\"\r\n        v-model=\"tableColumnsVisible\"\r\n        :closable=\"false\"\r\n        :mask-closable=\"false\"\r\n        :width=\"500\"\r\n    >\r\n      <Form\r\n          ref=\"blackTableColumnsForm\"\r\n          :label-width=\"120\"\r\n          label-position=\"right\"\r\n          style=\"width:450px\"\r\n      >\r\n        <!---{{columnsSetData}}-->\r\n        <FormItem label=\"可选的表格列名\" prop=\"file\">\r\n          <CheckboxGroup v-model=\"columnsSetData\" v-for=\"(item,i) in columns\" :key=\"i\">\r\n            <Checkbox :label=\"item.title\" :disabled=\"item.checkeds\"></Checkbox>\r\n          </CheckboxGroup>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"tableColumnsVisible = false\">{{\r\n            $t(\"cancel\")\r\n          }}</Button>\r\n        <Button\r\n            type=\"primary\"\r\n            :loading=\"checkCodeLoading\"\r\n            @click=\"btnBlackTableColumns\"\r\n        >{{ $t(\"save\") }}</Button\r\n        >\r\n      </div> </Modal\r\n    ><!--自定义表格展示的列-结束--->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  delRedefinefield,\r\n  disableRedefinefield,\r\n  editRedefinefieldList,\r\n  enableRedefinefield,\r\n  getRedefinefieldList,\r\n  saveRedefinefieldList\r\n} from \"@/api/index\";\r\n\r\nexport default {\r\nname: \"defined-attribute\",\r\n  data() {\r\n    return {\r\n      disabledAddCon:0,\r\n      openTip:true,\r\n      loading: false,\r\n      openSearch:false,\r\n      editFormMobileVisible : false,\r\n      editFormMobileVisibleTitle : \"add\",\r\n      tableColumnsVisible:false,//自定义表格展示的列\r\n      combinedFormSelShow:false,\r\n      combinedFormDateShow:false,\r\n      combinedFormTextShow:false,\r\n      validRuleReadonly:false,\r\n      datetimeFormat:\"\",\r\n      //黑名单组\r\n      blackListGroupForm:{\r\n        id:\"\",\r\n        name:\"\",\r\n        remark:\"\"\r\n      },//黑名单组\r\n      blackListGroupFormValidate:{\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n      },\r\n      //表单\r\n      formItem:{\r\n        id:\"\",\r\n        // createBy:'',//创建者\r\n        // createTime:'',//\r\n        // updateBy:'',//\r\n        // updateTime:'',//\r\n        // delFlag:'',//\r\n        tenantId:JSON.parse(Cookies.get(\"userInfo\")).tenantId,//租户ID\r\n        tableName:\"crm_customer\",//表名\r\n        columnName:\"\",//数据库列名\r\n        category:\"\",//表单属性类型 0.文本,1.单选，2.多选，3.下拉列表，4.文本域，5.日期 6.数字 7.电话\r\n        fieldCode:\"\",//字段名称(必须是字母)\r\n        fieldName:\"\",//页面显示名称\r\n        defaultValue:\"\",//默认值\r\n        fieldLengh:\"\",//列的长度\r\n        colspan:\"\",//跨列数\r\n        validRule:\"\",//校验规则\r\n        value:\"\",//字段值\r\n        tenantRequired:\"\",//租户是否必填\r\n        custRequired:\"\",//客户是否必填（1.是，0否）\r\n        isEdit:\"\",//是否可编辑 （1.是，0否）\r\n        isSystem:\"\",//是否系统内置字段\r\n        enabled:\"\",//是否启用 -1不启用 0启用\r\n        source:\"\",//数据来源（1.固定字段,2.扩展字段）\r\n        pattern:'',//格式\r\n        // sortCode:'',//排序码\r\n\r\n      },//黑名单组\r\n      formItemValidate:{\r\n        columnName: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        resource: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n\r\n      },\r\n      importBlackListForm:{\r\n        file:\"\",\r\n      },//黑名单组\r\n      importBlackListFormValidate:{\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"pleaseEnter\"),\r\n            trigger: \"blur\",\r\n          },\r\n        ]\r\n      },\r\n\r\n      ownSpaceLeftItem: 1,\r\n      groupId: 1,//当前选中的组\r\n      selectCount:0,\r\n      combinedForm:[{\r\n        key:'',\r\n        val:'',\r\n        default:0\r\n      }],\r\n      //黑名单列表\r\n      dateDataList: [],\r\n      columnsSetData:[],\r\n      columnsSet:[],\r\n      columns: [\r\n        {\r\n          title: \"复选框\", //复选框\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n          'checkeds':true //自定义属性，默认选中，必须展示的数据\r\n        },\r\n        {\r\n          title: \"序号\", //序号\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"表名\", //表名\r\n          key: \"tableName\",\r\n          minwidth: 150,\r\n          sortable: true,\r\n          'checkeds':true,//自定义属性，默认选中，必须展示的数据\r\n        },\r\n        {\r\n          title: \"数据库列名\", //数据库列名\r\n          key: \"columnName\",\r\n          minwidth: 290,\r\n          'checkeds':true,//自定义属性，默认选中，必须展示的数据\r\n        },\r\n        {\r\n          title: \"字段名称\", //字段名称\r\n          key: \"fieldCode\",\r\n          minwidth: 150,\r\n          sortable: true,\r\n          'checkeds':true,//自定义属性，默认选中，必须展示的数据\r\n        },\r\n        {\r\n          title: \"表单属性类型\", //表单属性类型\r\n          key: \"category\",\r\n          minwidth: 120,\r\n          'checkeds':true,//自定义属性，默认选中，必须展示的数据\r\n          render:(h,params)=>{\r\n            var typeObj={0:\"文本\",1:\"单选\",2:\"多选\",3:\"下拉列表\",4:\"文本域\",5:\"日期\",6:\"数字\",7:\"电话\"};\r\n            return h(\"div\",typeObj[params.row.category]);\r\n          }\r\n        },\r\n        {\r\n          title: \"页面显示名称\", //页面显示名称\r\n          key: \"fieldViewName\",\r\n          minwidth: 190,\r\n        },\r\n        {\r\n          title: \"默认值\", //默认值\r\n          key: \"defValue\",\r\n          minwidth: 190,\r\n        },\r\n        {\r\n          title: \"数据来源\", //呼叫类型\r\n          key: \"source\",\r\n          minwidth: 120,\r\n          'checkeds':true,\r\n          render:(h,params)=>{\r\n            var typeObj={0:\"固定字段\",1:\"扩展字段\"};\r\n            return h(\"div\",typeObj[params.row.source]);\r\n          }\r\n        },\r\n        {\r\n          title: \"列的长度\", //页面显示名称\r\n          key: \"fieldLengh\",\r\n          minwidth: 190,\r\n        },\r\n        {\r\n          title: \"跨列数\", //页面显示名称\r\n          key: \"colspan\",\r\n          minwidth: 190,\r\n        },\r\n        {\r\n          title: \"校验规则\", //页面显示名称\r\n          key: \"validRule\",\r\n          minwidth: 190,\r\n        },\r\n        {\r\n          title: \"json 字符串\", //页面显示名称\r\n          key: \"jsonstr\",\r\n          minwidth: 190,\r\n        },\r\n        {\r\n          title: \"是否必填\", //是否必填\r\n          key: \"custRequired\",\r\n          minwidth: 190,\r\n          'checkeds':true,\r\n          render:(h,params)=>{\r\n            var typeObj={0:\"否\",1:\"是\"};\r\n            return h(\"div\",typeObj[params.row.custRequired]);\r\n          }\r\n        },\r\n        {\r\n          title: \"是否可编辑\", //是否可编辑\r\n          key: \"isEdit\",\r\n          minwidth: 120,\r\n          'checkeds':true,\r\n          render:(h,params)=>{\r\n            var typeObj={0:\"否\",1:\"是\"};\r\n            return h(\"div\",typeObj[params.row.isEdit]);\r\n          }\r\n        },\r\n        {\r\n          title: \"是否系统内置字段\", //页面显示名称\r\n          key: \"isSystem\",\r\n          minwidth: 240,\r\n          'checkeds':true,\r\n          render:(h,params)=>{\r\n            var typeObj={0:\"否\",1:\"是\"};\r\n            return h(\"div\",typeObj[params.row.isSystem]);\r\n          }\r\n        },\r\n        {\r\n          title: \"是否启用\", //是否启用\r\n          key: \"enabled\",\r\n          minwidth: 190,\r\n          'checkeds':true,\r\n          render:(h,params)=>{\r\n            var typeObj={'-1':\"未启用\",0:\"已启用\"};\r\n            return h(\"div\",typeObj[params.row.enabled]);\r\n          }\r\n        },\r\n\r\n        {\r\n          title: this.$t(\"operation\"), //操作\r\n          key: \"active\",\r\n          width: 110,\r\n          'checkeds':true, //自定义属性，默认选中，必须展示的数据\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              //停用|启用\r\n              h('Tooltip',{props: {\r\n                  placement: 'top',\r\n                  transfer: true,\r\n                }},[h(\r\n                  \"Icon\",\r\n                  {\r\n                    props: {\r\n                      type: params.row.enabled==0?\"ios-remove-circle-outline\":\"ios-checkmark-circle-outline\",\r\n                      size: \"\",\r\n\r\n                    },\r\n                    style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                    on: {\r\n                      click: () => {\r\n                        this.rowDisableOrEnable(params.row);\r\n                      },\r\n                    },\r\n                  },\r\n                  params.row.enabled==0?'停用':'启用'\r\n              ),h('span', {\r\n                slot: 'content',\r\n                style: {\r\n                  whiteSpace: 'normal'\r\n                }\r\n              }, params.row.enabled==0?'停用':'启用')]),\r\n\r\n              //编辑\r\n              h('Tooltip',{props: {\r\n                  placement: 'top',\r\n                  transfer: true,\r\n                }},[h(\r\n                  \"Icon\",\r\n                  {\r\n                    props: {\r\n                      type: \"ios-create-outline\",\r\n                      size: \"\",\r\n                    },\r\n                    style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer',display:params.row.isEdit==0?'none':'inline-block'},\r\n                    on: {\r\n                      click: () => {\r\n                        this.rowEdit(params.row);\r\n                      },\r\n                    },\r\n                  },\r\n                  this.$t(\"play\")\r\n              ),h('span', {\r\n                slot: 'content',\r\n                style: {\r\n                  whiteSpace: 'normal'\r\n                }\r\n              }, '编辑')]),\r\n\r\n              //删除\r\n              h('Tooltip',{props: {\r\n                  placement: 'top',\r\n                  transfer: true\r\n                }},[h(\r\n                  \"Icon\",\r\n                  {\r\n                    props: {\r\n                      type: \"ios-trash-outline\",\r\n                      size: \"\",\r\n                    },\r\n                    style: { marginRight: \"5px\",fontSize:'18px',cursor: 'pointer' },\r\n                    on: {\r\n                      click: () => {\r\n                        this.rowDel(params.row);\r\n                      },\r\n                    },\r\n                  },\r\n                  this.$t(\"play\")\r\n              ),h('span', {\r\n                slot: 'content',\r\n                style: {\r\n                  whiteSpace: 'normal'\r\n                }\r\n              }, '删除')]),\r\n\r\n\r\n\r\n            ]);\r\n          },\r\n        },\r\n      ],\r\n      searchForm: {\r\n        tableName: \"crm_customer\"\r\n      },\r\n      total: 0,\r\n\r\n    };\r\n  },\r\n  methods:{\r\n    init(){\r\n      this.getTableList();\r\n      this.columnsSet=this.columns;\r\n      this.columnsInit();\r\n    },\r\n    //表格默认显示的列名\r\n    columnsInit(){\r\n      this.columnsSet=this.columns;\r\n      var dataA=[];\r\n      var dataB=[];\r\n\r\n      this.columnsSet.forEach(function(v,i,arr){\r\n        if(v.checkeds){\r\n          dataA.push(v.title);\r\n          dataB.push(v);\r\n        }\r\n      })\r\n      this.columnsSetData=dataA;\r\n      this.columnsSet=dataB;\r\n\r\n    },\r\n    //获取列表\r\n    getTableList(){\r\n      getRedefinefieldList({tableName:this.searchForm.tableName}).then(res=>{\r\n        if(res.success){\r\n          this.dateDataList=res.result;\r\n          this.total = res.result.length;\r\n          this.disabledAddCon=res.result.length;\r\n        }\r\n      })\r\n    },\r\n    showSelect(e) {\r\n      this.selectCount = e.length;\r\n      this.selectList = e;\r\n    },\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      this.getBlackList(this.groupId);\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      this.getBlackList(this.groupId);\r\n    },\r\n    //搜索\r\n    handleSearch() {\r\n      this.searchForm.pageNumber = 1;\r\n      this.searchForm.pageSize = 10;\r\n      this.getTableList(this.groupId);\r\n    },\r\n    //重置\r\n    handleReset() {\r\n      if(this.openSearch){\r\n        this.$refs.searchForm.resetFields();\r\n      }\r\n      this.searchForm.pageNumber = 1;\r\n      this.searchForm.pageSize = 10;\r\n      this.getTableList(this.groupId);\r\n      this.btnBlackTableColumns();\r\n     // this.columnsSet=this.columns;\r\n    },\r\n    //新增\r\n    addBlackList(){\r\n      this.editFormMobileVisible = true;\r\n      this.editFormMobileVisibleTitle = \"add\";\r\n    },\r\n    dropDown() {},\r\n    //编辑\r\n    rowEdit(V) {\r\n      var formData={};\r\n      for (var i in V) {\r\n        V[i] =V[i]+'';\r\n        if (i == null) {\r\n          V[i] = \"\";\r\n        }else {\r\n          if(i=='custRequired'||i=='isEdit'||i=='isSystem'){\r\n            formData[i] =V[i]==1?true:false\r\n          }else if(i=='enabled'){\r\n            formData[i] =V[i]==0?true:false\r\n          }else {\r\n            formData[i] =V[i]+''\r\n          }\r\n        }\r\n      }\r\n      V = JSON.stringify(V);\r\n      V = JSON.parse(V);\r\n\r\n      if(V.delFlag==0){\r\n        V.delFlag=\"有效\";\r\n      }\r\n      //V.type=V.type.toString();\r\n      //this.formItem=V;\r\n      this.formItem=formData;\r\n      this.editFormMobileVisible = true;\r\n      this.editFormMobileVisibleTitle='edit';\r\n    },\r\n    //删除\r\n    rowDel(v) {\r\n      var than=this;\r\n      this.$Modal.confirm({\r\n        title: this.$t(\"confirmDeletionTitle\"), //\"确认删除\"\r\n        content: this.$t(\"confirmDeletionBodyFirst\") + v.tableName, //\"您确认要删除所选的 \" +this.selectCount+\" 条数据?\"\r\n        onOk: () => {\r\n          delRedefinefield({\r\n            ids: v.id\r\n          }).then(res => {\r\n            if (res.success) {\r\n\r\n              than.selectCount--;\r\n              this.$Message.success(this.$t(\"success\"));\r\n              this.getTableList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    //禁用|启用\r\n    rowDisableOrEnable(V){\r\n      for (var i in V) {\r\n        V[i] =V[i]+'';\r\n      }\r\n      //禁用\r\n      if(V.enabled==0){\r\n        disableRedefinefield(V.id).then(res=>{\r\n          if (res.success) {\r\n            this.$Message.success(this.$t(\"success\"));\r\n            this.getTableList();\r\n          }\r\n        })\r\n      }else {\r\n        //启用\r\n        enableRedefinefield(V.id).then(res=>{\r\n          if (res.success) {\r\n            this.$Message.success(this.$t(\"success\"));\r\n            this.getTableList();\r\n          }\r\n        })\r\n      }\r\n    },\r\n    //\r\n    delAll() {\r\n      var than=this;\r\n      if (this.selectCount <= 0) {\r\n        this.$Message.warning(this.$t(\"noDataSelectedDelete\")); //您还未选择要删除的数据\r\n        return;\r\n      } else {\r\n        this.$Modal.confirm({\r\n          title: this.$t(\"confirmDeletionTitle\"), //\"确认删除\"\r\n          content:\r\n              this.$t(\"confirmDeletionBodyFirst\") +\r\n              this.selectCount +\r\n              this.$t(\"confirmDeletionBodyLast\"), //\"您确认要删除所选的 \" +this.selectCount+\" 条数据?\"\r\n          onOk: () => {\r\n            var ids = [];\r\n            this.selectList.forEach(function(v, i) {\r\n              ids.push(v.id);\r\n            });\r\n            ids = ids.toString();\r\n            delRedefinefield({ ids: ids }).then((res) => {\r\n              //this.$Modal.remove();\r\n              if (res.success) {\r\n                than.selectCount=0;\r\n                this.$Message.success(this.$t(\"deletionSucceeded\"));\r\n                this.getTableList();\r\n              } else {\r\n                this.$Message.error(this.$t(\"deletionFailed\"));\r\n              }\r\n            });\r\n          },\r\n        });\r\n      }\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n    },\r\n    //表格展示列\r\n    btnBlackTableColumns(){\r\n      var dataA=this.columns;\r\n      var dataB=this.columnsSetData;\r\n      var dataC=[];\r\n      dataA.forEach(function(v,i,arr){\r\n        dataB.forEach(function(v1,i1,arr1){\r\n          if(v.title==v1){\r\n            dataC.push(v);\r\n          }\r\n        })\r\n      })\r\n      this.columnsSet=dataC;\r\n      this.tableColumnsVisible=false;\r\n      //this.$refs[\"blackTableColumnsForm\"].resetFields();\r\n    },\r\n    //设置默认值\r\n    checkcombinedForm(index){\r\n      this.combinedForm.forEach(function (v,i,arr){\r\n        v.default=0\r\n      })\r\n      this.combinedForm[index].default=1;\r\n    },\r\n    addCombinedFormItem(){\r\n      this.combinedForm.push({\r\n        key:'',\r\n        val:'',\r\n        default:0\r\n      })\r\n    },\r\n    delCombinedFormItem(i){\r\n      var data=this.combinedForm;\r\n      data.splice(i,1);\r\n    },\r\n    //提交自定列表\r\n    submitFormList(){\r\n      var formData={};\r\n      for(var i in this.formItem){\r\n        if(i!='_index'&&i!='_rowKey'&& i!='delFlag'){\r\n          if(this.formItem[i]!=\"\"&& this.formItem[i]!=null && this.formItem[i]!=\"null\"){\r\n            if(i=='defaultValue'){\r\n              if(this.formItem.category==5){\r\n                continue;\r\n              }\r\n            }else if(i=='defaultValueDate'){\r\n              if(this.formItem.category!=5){\r\n                continue;\r\n              }\r\n            }\r\n            formData[i]=this.formItem[i];\r\n          }\r\n        }\r\n      }\r\n      formData.custRequired=this.formItem.custRequired==true?1:0;\r\n      formData.isEdit=this.formItem.isEdit==true?1:0;\r\n      formData.isValid=this.formItem.isValid==true?1:0;\r\n      formData.isOpen=this.formItem.isOpen==true?1:0;\r\n      formData.isSystem=this.formItem.isSystem==true?1:0;\r\n      formData.enabled=this.formItem.enabled==true?0:'-1';\r\n      // if(this.combinedForm.length>0){\r\n      //   formData.jsonstr=JSON.stringify(this.combinedForm);\r\n      // }\r\n      if(formData.category==1||formData.category==2||formData.category==3){\r\n        this.combinedForm.forEach(function (v,i,arr){\r\n          if(v.default==1){\r\n            this.formItem.defaultValue=v.key;\r\n            formData.defaultValue=v.key;\r\n          }\r\n        })\r\n        formData.pattern=JSON.stringify(this.combinedForm);\r\n      }\r\n\r\n\r\n      if(this.editFormMobileVisibleTitle==\"add\"){\r\n        saveRedefinefieldList(formData).then(res=>{\r\n          if(res.success){\r\n            this.getTableList();\r\n            this.editFormMobileVisible=false;\r\n            this.$Message.success(this.$t(\"success\"));\r\n          }\r\n        })\r\n      }else {\r\n        editRedefinefieldList(formData).then(res=>{\r\n          if(res.success){\r\n            this.getTableList();\r\n            this.editFormMobileVisible=false;\r\n            this.$Message.success(this.$t(\"success\"));\r\n          }\r\n        })\r\n      }\r\n    },\r\n    showDetail(row,index){\r\n      this.$refs.table.toggleSelect(index)\r\n    },\r\n  },\r\n  mounted(){\r\n    this.init();\r\n  },\r\n  watch:{\r\n    formItem: {\r\n      handler: function(v, o, arr) {\r\n        //单选、多选、下拉列表\r\n        var sel= {1:true,2:true,3:true};\r\n        this.combinedFormSelShow=sel[v.category]?true:false;\r\n\r\n        //输入框类\r\n        var text={0:true,4:true,6:true,7:true};\r\n        this.combinedFormTextShow=text[v.category]?true:false;\r\n\r\n        //日期框\r\n        var date1={5:true};\r\n        this.combinedFormDateShow=date1[v.category]?true:false;\r\n\r\n        //手机或电话\r\n        if(v.category==7){\r\n          this.validRuleReadonly=true;\r\n          this.formItem.validRule=\"MobileOrPhone\";\r\n        }else {\r\n          this.validRuleReadonly=false;\r\n          this.formItem.validRule=\"\";\r\n        }\r\n\r\n        this.datetimeFormat=this.formItem.pattern;\r\n\r\n\r\n      },\r\n      deep: true, //深度监听\r\n    },\r\n    editFormMobileVisible(v){\r\n      if(v==false){\r\n        this.$refs[\"blackListGroupForm\"].resetFields();\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style  lang=\"less\" scoped>\r\n  .no-margin{\r\n    margin: 0 !important;\r\n    .ivu-form-item-content{\r\n      margin: 0 !important;\r\n\r\n    }\r\n  }\r\n  .search {\r\n    .operation {\r\n      margin-bottom: 2vh !important;\r\n\r\n    }\r\n  }\r\n  .ui-default-checkbox{\r\n    label[data-v-0274d306]{\r\n      width: 30px;\r\n      height: 38px;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n  .ivu-col.ivu-col-span-12{\r\n    .ivu-form-item{\r\n      height: 33px;\r\n    }\r\n  }\r\n</style>"]}]}