{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\callcenter\\publicBaseLogMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\callcenter\\publicBaseLogMessage.vue","mtime":1614579763231},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGdldEJhc2VMb2dNZXNzYWdlUGFnZUxpc3QsDQogICAgdXBkYXRlTG9ja2luZ1R5cGUNCn0gZnJvbSAiQC9hcGkvaW5kZXgiOw0KaW1wb3J0IHV0aWwgZnJvbSAiQC9saWJzL3V0aWwuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicHVibGljLWJhc2Vsb2ctbWFuYWdlIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgb3BlblRpcDogdHJ1ZSwNCiAgICAgIHNlbGVjdENvdW50OiAwLCAvLyDlpJrpgInorqHmlbANCiAgICAgIGxvYWRpbmc6IHRydWUsIC8vIOihqOWNleWKoOi9veeKtuaAgQ0KICAgICAgc3VibWl0TG9hZGluZzpmYWxzZSwNCiAgICAgIHJlc3VsdE1vZGFsVmlzaWJsZTpmYWxzZSwNCiAgICAgIG1vZGFsVGl0bGU6IuWkhOeQhue7k+aenCIsDQogICAgICBmb3JtOnt9LA0KICAgICAgY29sdW1uczogWw0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLlpI3pgInmoYYiLCAvL+WkjemAieahhg0KICAgICAgICAgIHR5cGU6ICJzZWxlY3Rpb24iLA0KICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciINCiAgICAgICAgfSwNCiAgICAgICAgeyAgdGl0bGU6ICLkuLvlj6vlj7fnoIEiLCBrZXk6ICJjYWxsZXIiLCBtaW5XaWR0aDogMTI1fSwNCiAgICAgICAgeyAgdGl0bGU6ICLooqvlj6vlj7fnoIEiLCBrZXk6ICJjYWxsZWQiLCBtaW5XaWR0aDogMTI1fSwNCiAgICAgICAgeyAgdGl0bGU6ICLpgJror53ml7bplb8iLCBrZXk6ICJkdXJhdGlvbiIsIG1pbldpZHRoOiAxMjV9LA0KICAgICAgICB7ICB0aXRsZTogIumAmuivneaXtumXtCIsIGtleTogImJlZ2luVGltZXN0YW1wIiwgbWluV2lkdGg6IDEyNX0sDQogICAgICAgIHsgIHRpdGxlOiAi57uT5p2f5pe26Ze0Iiwga2V5OiAicmVsZWFzZWRUaW1lc3RhbXAiLCBtaW5XaWR0aDogMTI1fSwNCiAgICAgICAgeyAgdGl0bGU6ICLlpITnkIbnirbmgIEiLCBrZXk6ICJkZWFsU3RhdGUiLCBtaW5XaWR0aDogMTI1LA0KICAgICAgICAgICAgICAgIHJlbmRlcjooaCxwYXJhbXMpPT57DQogICAgICAgICAgICAgICAgICAgIHZhciB0eXBlT2JqPXswOiLmnKrplIHlrpoiLDE6IuW3sumUgeWumiIsMjoi5bey5aSE55CGIn07DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLHR5cGVPYmpbcGFyYW1zLnJvdy5kZWFsU3RhdGVdKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHsgIHRpdGxlOiAi5aSE55CG5Lq6Iiwga2V5OiAibmlja05hbWUiLCBtaW5XaWR0aDogMTI1fSwNCiAgICAgICAgeyAgdGl0bGU6ICLlpITnkIbnu5PmnpwiLCBrZXk6ICJkZWFsUmVzdWx0IiwgbWluV2lkdGg6IDEyNSwNCiAgICAgICAgICAgICAgICByZW5kZXI6KGgscGFyYW1zKT0+ew0KICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZU9iaj17MDoi5aSE55CG5aSx6LSlIiwxOiLlpITnkIbmiJDlip8iLDI6IuacquWkhOeQhiJ9Ow0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gaCgiZGl2Iix0eXBlT2JqW3BhcmFtcy5yb3cuZGVhbFJlc3VsdF0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgeyAgdGl0bGU6ICLlpITnkIbml7bpl7QiLCBrZXk6ICJkZWFsVGltZXN0YW1wIiwgbWluV2lkdGg6IDEyNX0sDQogICAgICAgIHsgIHRpdGxlOiAi5aSH5rOoIiwga2V5OiAicmVtYXJrIiwgbWluV2lkdGg6IDEyNX0NCiAgICAgIF0sDQogICAgICB0YWJsZURhdGE6IFsgXSwNCiAgICAgIHNlYXJjaEZvcm06IHsNCiAgICAgICAgICBsb2NraW5nVHlwZToxLA0KICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsDQogICAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICAgIHNvcnQ6ICJiZWdpbl90aW1lc3RhbXAiLA0KICAgICAgICAgIG9yZGVyOiAiZGVzYyINCiAgICAgIH0sDQogICAgICB0b3RhbDogMCwNCiAgICAgIHNlbGVjdExpc3Q6W10NCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIHRoaXMuZ2V0TWVzc2FnZUxpc3QoKTsNCiAgICB9LA0KICAgIGdldE1lc3NhZ2VMaXN0KCkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgdmFyIGZvcm1EYXRhPXt9Ow0KICAgICAgICBmb3IodmFyIGkgaW4gdGhpcy5zZWFyY2hGb3JtKXsNCiAgICAgICAgICAgIGlmKHRoaXMuc2VhcmNoRm9ybVtpXSE9IiImJnRoaXMuc2VhcmNoRm9ybVtpXSE9dW5kZWZpbmVkKXsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YVtpXT10aGlzLnNlYXJjaEZvcm1baV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZ2V0QmFzZUxvZ01lc3NhZ2VQYWdlTGlzdChmb3JtRGF0YSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMucmVzdWx0Lmxpc3Q7DQogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC50b3RhbDsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBjbGVhclNlbGVjdEFsbCgpIHsNCiAgICAgIHRoaXMuJHJlZnMudGFibGUuc2VsZWN0QWxsKGZhbHNlKTsNCiAgICB9LA0KICAgIGNoYW5nZVBhZ2Uodikgew0KICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPSB2Ow0KICAgICAgdGhpcy5nZXRNZXNzYWdlTGlzdCgpOw0KICAgIH0sDQogICAgY2hhbmdlUGFnZVNpemUodikgew0KICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VTaXplID0gdjsNCiAgICAgIHRoaXMuZ2V0TWVzc2FnZUxpc3QoKTsNCiAgICB9LA0KICAgIGhhbmRsZVJlc2V0KCkgew0KICAgICAgdGhpcy4kcmVmc1sic2VhcmNoRm9ybSJdLnJlc2V0RmllbGRzKCk7DQogICAgICB0aGlzLmdldE1lc3NhZ2VMaXN0KCk7DQogICAgfSwNCiAgICBoYW5kbGVTZWFyY2goKSB7DQogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7DQogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSAxMDsNCiAgICAgIHRoaXMuZ2V0TWVzc2FnZUxpc3QoKTsNCiAgICB9LA0KICAgIHNob3dTZWxlY3QoZSkgew0KICAgICAgdGhpcy5zZWxlY3RDb3VudD1lLmxlbmd0aDsNCiAgICAgIHRoaXMuc2VsZWN0TGlzdD1lOw0KICAgIH0sDQogICAgbG9ja2luZ1R5cGUoKSB7DQogICAgICAgIGxldCBpZHMgPSAiIjsNCiAgICAgICAgdmFyIGZsYWcgPSB0cnVlOw0KICAgICAgICB0aGlzLnNlbGVjdExpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICAgIGlmKGUuZGVhbFN0YXRlPT0yKXsNCiAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7DQogICAgICAgIH0pOw0KICAgICAgICBpZighZmxhZyl7DQogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWtmOWcqOW3suWkhOeQhuaVsOaNruivt+mHjeaWsOmAieaLqeOAgiIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOw0KICAgICAgICB1cGRhdGVMb2NraW5nVHlwZSh7bWVzc2FnZUlkOmlkcyxsb2NraW5nVHlwZToyfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgICAgdGhpcy5nZXRNZXNzYWdlTGlzdCgpOw0KICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdnZXRNZXNzYWdlTGlzdCcpOw0KICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLnNlbGVjdEFsbChmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZWRpdFJlc3VsdCgpew0KICAgICAgdmFyIGZsYWcgPSB0cnVlOw0KICAgICAgdGhpcy5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgaWYoZS5kZWFsU3RhdGU9PTIpew0KICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBpZighZmxhZyl7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLlrZjlnKjlt7LlpITnkIbmlbDmja7or7fph43mlrDpgInmi6njgIIiKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLnJlc3VsdE1vZGFsVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmZvcm0gPSB7ZGVhbFJlc3VsdDoxLCByZW1hcms6IiJ9Ow0KICAgIH0sDQogICAgY2FuY2VsUmVzdWx0KCl7DQogICAgICB0aGlzLnJlc3VsdE1vZGFsVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5mb3JtID0ge2RlYWxSZXN1bHQ6MSwgcmVtYXJrOiIifTsNCiAgICB9LA0KICAgIHN1Ym1pdFJlc3VsdCgpew0KICAgICAgICAgIGxldCBpZHMgPSAiIjsNCiAgICAgICAgICB2YXIgZmxhZyA9IHRydWU7DQogICAgICAgICAgdGhpcy5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgIGlmKGUuZGVhbFN0YXRlPT0yKXsNCiAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7DQogICAgICAgICAgfSk7DQogICAgICAgICAgaWYoIWZsYWcpew0KICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWtmOWcqOW3suWkhOeQhuaVsOaNruivt+mHjeaWsOmAieaLqeOAgiIpOw0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOw0KICAgICAgICAgIHZhciBmb3JtRGF0YT17fTsNCiAgICAgICAgICBmb3IodmFyIGkgaW4gdGhpcy5mb3JtKXsNCiAgICAgICAgICAgICAgaWYodGhpcy5mb3JtW2ldIT0iIiYmdGhpcy5mb3JtW2ldIT11bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgZm9ybURhdGFbaV09dGhpcy5mb3JtW2ldOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGZvcm1EYXRhWyJtZXNzYWdlSWQiXSA9IGlkczsNCiAgICAgICAgICBmb3JtRGF0YVsibG9ja2luZ1R5cGUiXSA9IDM7DQogICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICB1cGRhdGVMb2NraW5nVHlwZShmb3JtRGF0YSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdE1vZGFsVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICB0aGlzLmdldE1lc3NhZ2VMaXN0KCk7DQogICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldE1lc3NhZ2VMaXN0Jyk7DQogICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUuc2VsZWN0QWxsKGZhbHNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7ICAgICAgICANCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0KCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["publicBaseLogMessage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"publicBaseLogMessage.vue","sourceRoot":"src/views/callcenter","sourcesContent":["<style lang=\"less\">\r\n@import \"../../styles/table-common.less\";\r\n@import \"baseLogManage.less\";\r\n.no-margin{\r\n  margin: 0;\r\n    .ivu-form-item-content{\r\n      margin: 0 !important;\r\n    }\r\n  }\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <Row>\r\n      <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"60\" >\r\n        <Form-item label=\"主叫号码\" prop=\"caller\">\r\n          <Input type=\"text\" v-model=\"searchForm.caller\"  clearable style=\"width: 200px\"/>\r\n        </Form-item>\r\n        <Form-item label=\"通话时间\">\r\n          <DatePicker  v-model=\"searchForm.callStartDate\"  type=\"datetime\" format=\"yyyy-MM-dd HH:mm:ss\" style=\"width: 160px\" ></DatePicker>~\r\n          <DatePicker  v-model=\"searchForm.callEndDate\"  type=\"datetime\" format=\"yyyy-MM-dd HH:mm:ss\" style=\"width: 160px\" ></DatePicker>\r\n        </Form-item>\r\n        <Form-item class=\"no-margin br\">\r\n          <Button @click=\"handleSearch\" type=\"primary\" icon=\"ios-search\" >{{ $t(\"search\") }}</Button>\r\n          <Button @click=\"handleReset\">{{ $t(\"reset\") }}</Button>\r\n        </Form-item>\r\n      </Form>\r\n    </Row>\r\n    <Row class=\"operation ui-operation\">\r\n      <div class=\"ui-operation-left\" v-show=\"openTip && selectCount > 0\" >\r\n        <Row class=\"ui-alert-warp\">\r\n          <Alert>\r\n            已选择\r\n            <span class=\"select-count\">{{ selectCount }}</span> 项\r\n            <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n          </Alert>\r\n        </Row>\r\n        <Button type=\"primary\" @click=\"lockingType\">取消锁定</Button>\r\n        <Button type=\"primary\" @click=\"editResult\">处理结果</Button>\r\n      </div>\r\n    </Row>\r\n\r\n    <!-- 新增编辑任务记录-start -->\r\n    <Modal :title=\"modalTitle\" v-model=\"resultModalVisible\" :closable=\"false\" :mask-closable=\"false\" :width=\"700\">\r\n      <Form ref=\"form\" :model=\"form\" :label-width=\"100\">\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"处理结果\" prop=\"dealResult\">\r\n                <RadioGroup v-model=\"form.dealResult\">\r\n                <Radio :label=\"1\">处理成功</Radio>\r\n                <Radio :label=\"0\">处理失败</Radio>\r\n                </RadioGroup>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"32\">\r\n              <FormItem label=\"备注\" prop=\"remark\">\r\n                 <Input type=\"textarea\" v-model=\"form.remark\" :rows=\"4\" />\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"cancelResult\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submitResult\">提交</Button>\r\n      </div>\r\n    </Modal>\r\n    <!-- 新增编辑任务记录-end -->\r\n\r\n\r\n    <Row>\r\n      <Table :columns=\"columns\" :data=\"tableData\" ref=\"table\" sortable=\"custom\" @on-selection-change=\"showSelect\" @on-row-click=\"showDetail\"></Table>\r\n    </Row>\r\n    <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n      <Page :current=\"searchForm.pageNumber\"  \r\n        :total=\"total\"\r\n        :page-size=\"searchForm.pageSize\"  \r\n        @on-change=\"changePage\"\r\n        @on-page-size-change=\"changePageSize\"\r\n        :page-size-opts=\"[10, 20, 50]\"\r\n        size=\"small\"\r\n        show-total\r\n        show-elevator\r\n        show-sizer>\r\n      </Page>\r\n    </Row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getBaseLogMessagePageList,\r\n    updateLockingType\r\n} from \"@/api/index\";\r\nimport util from \"@/libs/util.js\";\r\nexport default {\r\n  name: \"public-baselog-manage\",\r\n  data() {\r\n    return {\r\n      openTip: true,\r\n      selectCount: 0, // 多选计数\r\n      loading: true, // 表单加载状态\r\n      submitLoading:false,\r\n      resultModalVisible:false,\r\n      modalTitle:\"处理结果\",\r\n      form:{},\r\n      columns: [\r\n        {\r\n          title: \"复选框\", //复选框\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\"\r\n        },\r\n        {  title: \"主叫号码\", key: \"caller\", minWidth: 125},\r\n        {  title: \"被叫号码\", key: \"called\", minWidth: 125},\r\n        {  title: \"通话时长\", key: \"duration\", minWidth: 125},\r\n        {  title: \"通话时间\", key: \"beginTimestamp\", minWidth: 125},\r\n        {  title: \"结束时间\", key: \"releasedTimestamp\", minWidth: 125},\r\n        {  title: \"处理状态\", key: \"dealState\", minWidth: 125,\r\n                render:(h,params)=>{\r\n                    var typeObj={0:\"未锁定\",1:\"已锁定\",2:\"已处理\"};\r\n                    return h(\"div\",typeObj[params.row.dealState]);\r\n                }\r\n        },\r\n        {  title: \"处理人\", key: \"nickName\", minWidth: 125},\r\n        {  title: \"处理结果\", key: \"dealResult\", minWidth: 125,\r\n                render:(h,params)=>{\r\n                    var typeObj={0:\"处理失败\",1:\"处理成功\",2:\"未处理\"};\r\n                    return h(\"div\",typeObj[params.row.dealResult]);\r\n                }\r\n        },\r\n        {  title: \"处理时间\", key: \"dealTimestamp\", minWidth: 125},\r\n        {  title: \"备注\", key: \"remark\", minWidth: 125}\r\n      ],\r\n      tableData: [ ],\r\n      searchForm: {\r\n          lockingType:1,\r\n          pageNumber: 1,\r\n          pageSize: 10,\r\n          sort: \"begin_timestamp\",\r\n          order: \"desc\"\r\n      },\r\n      total: 0,\r\n      selectList:[]\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getMessageList();\r\n    },\r\n    getMessageList() {\r\n        this.loading = false;\r\n        var formData={};\r\n        for(var i in this.searchForm){\r\n            if(this.searchForm[i]!=\"\"&&this.searchForm[i]!=undefined){\r\n                formData[i]=this.searchForm[i];\r\n            }\r\n        }\r\n        getBaseLogMessagePageList(formData).then((res) => {\r\n        if (res.success) {\r\n            this.tableData = res.result.list;\r\n            this.total = res.result.total;\r\n        }\r\n      });\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n    },\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      this.getMessageList();\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      this.getMessageList();\r\n    },\r\n    handleReset() {\r\n      this.$refs[\"searchForm\"].resetFields();\r\n      this.getMessageList();\r\n    },\r\n    handleSearch() {\r\n      this.searchForm.pageNumber = 1;\r\n      this.searchForm.pageSize = 10;\r\n      this.getMessageList();\r\n    },\r\n    showSelect(e) {\r\n      this.selectCount=e.length;\r\n      this.selectList=e;\r\n    },\r\n    lockingType() {\r\n        let ids = \"\";\r\n        var flag = true;\r\n        this.selectList.forEach(function (e) {\r\n          if(e.dealState==2){\r\n                  flag = false;\r\n          }\r\n          ids += e.id + \",\";\r\n        });\r\n        if(!flag){\r\n            this.$Message.warning(\"存在已处理数据请重新选择。\");\r\n            return;\r\n        }\r\n        ids = ids.substring(0, ids.length - 1);\r\n        updateLockingType({messageId:ids,lockingType:2}).then((res) => {\r\n            if (res.success) {\r\n                 this.$Message.success(\"操作成功\");\r\n                 this.getMessageList();\r\n                 this.$emit('getMessageList');\r\n                 this.$refs.table.selectAll(false);\r\n            }\r\n        });\r\n    },\r\n    editResult(){\r\n      var flag = true;\r\n      this.selectList.forEach(function (e) {\r\n        if(e.dealState==2){\r\n              flag = false;\r\n              return false;\r\n        }\r\n      });\r\n      if(!flag){\r\n          this.$Message.warning(\"存在已处理数据请重新选择。\");\r\n          return;\r\n      }\r\n      this.resultModalVisible = true;\r\n      this.form = {dealResult:1, remark:\"\"};\r\n    },\r\n    cancelResult(){\r\n      this.resultModalVisible = false;\r\n      this.form = {dealResult:1, remark:\"\"};\r\n    },\r\n    submitResult(){\r\n          let ids = \"\";\r\n          var flag = true;\r\n          this.selectList.forEach(function (e) {\r\n            if(e.dealState==2){\r\n                 flag = false;\r\n            }\r\n            ids += e.id + \",\";\r\n          });\r\n          if(!flag){\r\n              this.$Message.warning(\"存在已处理数据请重新选择。\");\r\n              return;\r\n          }\r\n          ids = ids.substring(0, ids.length - 1);\r\n          var formData={};\r\n          for(var i in this.form){\r\n              if(this.form[i]!=\"\"&&this.form[i]!=undefined){\r\n                  formData[i]=this.form[i];\r\n              }\r\n          }\r\n          formData[\"messageId\"] = ids;\r\n          formData[\"lockingType\"] = 3;\r\n          this.submitLoading = true;\r\n          updateLockingType(formData).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n                 this.$Message.success(\"操作成功\");\r\n                 this.resultModalVisible = false;\r\n                 this.getMessageList();\r\n                 this.$emit('getMessageList');\r\n                 this.$refs.table.selectAll(false);\r\n            }\r\n        });        \r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n"]}]}