{"remainingRequest":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\work-order\\components\\business-add.vue?vue&type=style&index=0&id=56766d8a&scoped=scoped&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\src\\views\\work-order\\components\\business-add.vue","mtime":1614579763421},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Documents\\shimin\\current project\\xrcc-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaXZ1LWZvcm0taXRlbSB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQo="},{"version":3,"sources":["business-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA","file":"business-add.vue","sourceRoot":"src/views/work-order/components","sourcesContent":["<template>\r\n  <Modal v-model=\"visiable\" :title=\"isAdd?'添加':'编辑'\" width=\"60\">\r\n    <Form ref=\"form\" :model=\"formData\" :rules=\"ruleValidate\" :label-width=\"100\" inline>\r\n      <FormItem label=\"渠道\" prop=\"channel\">\r\n        <RadioGroup v-model=\"formData.channel\">\r\n          <Radio v-for=\"item in $store.state.dict.channel\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"客户姓名\" prop=\"customerName\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.customerName\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"来电号码\" prop=\"mobile\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.mobile\" />\r\n      </FormItem>\r\n      <FormItem label=\"其他号码\" prop=\"elseMobile\" style=\"width: 40%;\">\r\n        <Input v-model=\"formData.elseMobile\" placeholder=\"多个号码请用逗号隔开\" />\r\n      </FormItem>\r\n      <Form-item label=\"留言时间\" prop=\"recordTime\">\r\n        <DatePicker v-model=\"formData.recordTime\" format=\"yyyy-MM-dd\" @on-change=\"formData.recordTime=$event\"></DatePicker>\r\n      </Form-item>\r\n      <FormItem label=\"详细地址\" prop=\"address\" style=\"width: 80%;\">\r\n        <Input v-model=\"formData.address\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"反馈内容\" prop=\"content\" style=\"width: 80%;\">\r\n        <Input type=\"textarea\" :autosize=\"{minRows:3}\" v-model=\"formData.content\" maxlength=1000 show-word-limit></Input>\r\n      </FormItem>\r\n      <FormItem label=\"联络事项\" prop=\"contactItems\">\r\n        <CheckboxGroup v-model=\"formData.contactItems\">\r\n          <Checkbox v-for=\"item in $store.state.dict.contactMatter\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Checkbox>\r\n        </CheckboxGroup>\r\n      </FormItem>\r\n      <FormItem label=\"联络结果\" prop=\"contactResult\">\r\n        <RadioGroup v-model=\"formData.contactResult\">\r\n          <Radio v-for=\"item in $store.state.dict.contactResults\" class=\"mt-5 mb-5\" :label=\"item.value\" border>{{item.title}}</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"跟进结果\" prop=\"result\">\r\n        <RadioGroup v-model=\"formData.result\">\r\n          <Radio label=\"转外部门跟进\" border></Radio>\r\n          <Radio label=\"未联系客户直接制单\" border></Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n    </Form>\r\n    <div slot=\"footer\">\r\n      <Button type=\"text\" @click=\"visiable=false\">取消</Button>\r\n      <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submitAdd\">提交</Button>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n<script>\r\nimport {\r\n  addSeatsOpBusiness, //添加线下受理跟进坐席端\r\n  editOpBusiness, //编辑线下受理跟进\r\n} from \"@/api/index\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isAdd: true, //判断是否是新增逻辑\r\n      visiable: false,\r\n      submitLoading: false,\r\n      formData: {\r\n        tenantId: '',\r\n        channel: '',\r\n        recordTime: '',\r\n        customerName: '',\r\n        mobile: '',\r\n        elseMobile: '',\r\n        address: '',\r\n        content: '',\r\n        contactItems: [],\r\n        contactResult:'',\r\n        result: '',\r\n      },\r\n      ruleValidate: {\r\n        channel:[{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n        recordTime:[{required: true,message: '留言时间不能为空',trigger: 'blur'}],\r\n        customerName: [{required: true,message: '报修人姓名不能为空',trigger: 'blur'}],\r\n        mobile: [{required: true,message: '来电号码不能为空',trigger: 'blur'}],\r\n        address: [{required: true,message: '详细地址不能为空',trigger: 'blur'}],\r\n        contactItems: [{required:true,type:'array',min: 1, message: '请至少选择一项',trigger: 'change'}],\r\n        contactResult:[{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n        result:[{required: true, message: '请至少选择一项', trigger: 'change' }],\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    submitAdd() {\r\n      //如果是Date对象则转换日期格式\r\n      if(typeof this.formData.recordTime=='object'){\r\n        this.formData.recordTime = this.commonJS.dateFormat(this.formData.recordTime)\r\n      }\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          //将数组转为json数组\r\n          this.formData.contactItems = this.formData.contactItems.toString()\r\n          this.formData = this.commonJS.deleteNull(this.formData)\r\n          if (this.isAdd) {\r\n            addSeatsOpBusiness(this.formData).then(res => {\r\n              this.submitLoading = false\r\n              if (res.success) {\r\n                this.$Message.success({\r\n                  background: true,\r\n                  content: '提交成功'\r\n                });\r\n                this.handleReset()\r\n                this.visiable = false\r\n                this.$parent.getDataList()\r\n              } else {\r\n                this.$Message.error({\r\n                  background: true,\r\n                  content: res.message\r\n                });\r\n              }\r\n            });\r\n          } else {\r\n            editOpBusiness(this.formData).then(res => {\r\n              this.submitLoading = false\r\n              if (res.success) {\r\n                this.$Message.success({\r\n                  background: true,\r\n                  content: '提交成功'\r\n                });\r\n                this.handleReset()\r\n                this.visiable = false\r\n                this.$parent.getDataList()\r\n              } else {\r\n                this.$Message.error({\r\n                  background: true,\r\n                  content: res.message\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      })\r\n    },\r\n    handleReset() {\r\n      this.$refs.form.resetFields();\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped=\"scoped\">\r\n  .ivu-form-item {\r\n    margin-bottom: 20px;\r\n  }\r\n</style>\r\n"]}]}